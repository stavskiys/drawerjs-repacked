{"version":3,"sources":["webpack://drawerjs-repacked/webpack/universalModuleDefinition","webpack://drawerjs-repacked/webpack/bootstrap","webpack://drawerjs-repacked/(webpack)/buildin/global.js","webpack://drawerjs-repacked/./node_modules/fabric/dist/fabric.js","webpack://drawerjs-repacked/./node_modules/inherits/inherits_browser.js","webpack://drawerjs-repacked/./node_modules/process/browser.js","webpack://drawerjs-repacked/./node_modules/readable-stream/lib/_stream_duplex.js","webpack://drawerjs-repacked/./node_modules/buffer/index.js","webpack://drawerjs-repacked/./node_modules/core-util-is/lib/util.js","webpack://drawerjs-repacked/./node_modules/safe-buffer/index.js","webpack://drawerjs-repacked/./node_modules/process-nextick-args/index.js","webpack://drawerjs-repacked/./node_modules/url/url.js","webpack://drawerjs-repacked/./node_modules/readable-stream/lib/_stream_transform.js","webpack://drawerjs-repacked/./node_modules/string_decoder/lib/string_decoder.js","webpack://drawerjs-repacked/./node_modules/readable-stream/lib/_stream_writable.js","webpack://drawerjs-repacked/./node_modules/readable-stream/lib/internal/streams/destroy.js","webpack://drawerjs-repacked/./node_modules/readable-stream/lib/internal/streams/stream-browser.js","webpack://drawerjs-repacked/./node_modules/events/events.js","webpack://drawerjs-repacked/./node_modules/readable-stream/lib/_stream_readable.js","webpack://drawerjs-repacked/./node_modules/readable-stream/readable-browser.js","webpack://drawerjs-repacked/./node_modules/stream-http/lib/response.js","webpack://drawerjs-repacked/./node_modules/stream-http/lib/capability.js","webpack://drawerjs-repacked/./node_modules/stream-http/index.js","webpack://drawerjs-repacked/./node_modules/isarray/index.js","webpack://drawerjs-repacked/./src/drawer/core/Globals.js","webpack://drawerjs-repacked/./src/drawer/core/Localization_en.js","webpack://drawerjs-repacked/./src/drawer/utils/AssetsProvider.js","webpack://drawerjs-repacked/./src/drawer/toolbars/ToolbarPlaceholder.js","webpack://drawerjs-repacked/./src/drawer/toolbars/init.js","webpack://drawerjs-repacked/./src/drawer/toolbars/ui-plugins/ToolbarTooltip.js","webpack://drawerjs-repacked/./src/drawer/toolbars/ui-plugins/ToolbarTooltipManager.js","webpack://drawerjs-repacked/./src/drawer/toolbars/ui-plugins/ToolbarComboBox.js","webpack://drawerjs-repacked/./src/drawer/toolbars/DrawerToolbar.js","webpack://drawerjs-repacked/./src/drawer/toolbars/instances/ToolOptionsToolbar.js","webpack://drawerjs-repacked/./src/drawer/toolbars/instances/DrawingToolsToolbar.js","webpack://drawerjs-repacked/./src/drawer/toolbars/instances/CropImageToolbar.js","webpack://drawerjs-repacked/./src/drawer/toolbars/instances/MinimizedToolbar.js","webpack://drawerjs-repacked/./src/drawer/toolbars/instances/OverCanvasToolbar.js","webpack://drawerjs-repacked/./src/drawer/toolbars/instances/SettingsToolbar.js","webpack://drawerjs-repacked/./src/drawer/toolbars/DrawerToolbarManager.js","webpack://drawerjs-repacked/./src/drawer/core/Drawer.Storage.js","webpack://drawerjs-repacked/./src/drawer/fabricjs_extensions/ErasableMixin.js","webpack://drawerjs-repacked/./src/drawer/fabricjs_extensions/PText.js","webpack://drawerjs-repacked/./src/drawer/fabricjs_extensions/init.js","webpack://drawerjs-repacked/./src/drawer/fabricjs_extensions/ErasableObject.js","webpack://drawerjs-repacked/./src/drawer/fabricjs_extensions/SegmentablePolygon.js","webpack://drawerjs-repacked/./src/drawer/fabricjs_extensions/ErasableText.js","webpack://drawerjs-repacked/./src/drawer/fabricjs_extensions/Arrow.js","webpack://drawerjs-repacked/./src/drawer/fabricjs_extensions/Clipping.js","webpack://drawerjs-repacked/./src/drawer/fabricjs_extensions/ErasableArrow.js","webpack://drawerjs-repacked/./src/drawer/fabricjs_extensions/ErasableImage.js","webpack://drawerjs-repacked/./src/drawer/fabricjs_extensions/ErasableLine.js","webpack://drawerjs-repacked/./src/drawer/fabricjs_extensions/ErasablePath.js","webpack://drawerjs-repacked/./src/drawer/fabricjs_extensions/ErasablePencilBrush.js","webpack://drawerjs-repacked/./src/drawer/fabricjs_extensions/FloatingControl.js","webpack://drawerjs-repacked/./src/drawer/fabricjs_extensions/Line.js","webpack://drawerjs-repacked/./src/drawer/fabricjs_extensions/PCircle.js","webpack://drawerjs-repacked/./src/drawer/fabricjs_extensions/PRect.js","webpack://drawerjs-repacked/./src/drawer/fabricjs_extensions/PTriangle.js","webpack://drawerjs-repacked/./src/drawer/plugins/shape-arrow/ArrowShape.js","webpack://drawerjs-repacked/./src/drawer/plugins/shape-arrow/ArrowTwoSideShape.js","webpack://drawerjs-repacked/./src/drawer/plugins/init.js","webpack://drawerjs-repacked/./src/drawer/plugins/BaseTool.js","webpack://drawerjs-repacked/./src/drawer/plugins/BaseOptionTool.js","webpack://drawerjs-repacked/./src/drawer/plugins/BaseTextOptionTool.js","webpack://drawerjs-repacked/./src/drawer/plugins/BaseShape.js","webpack://drawerjs-repacked/./src/drawer/plugins/BaseBrush.js","webpack://drawerjs-repacked/./src/drawer/plugins/api-set-inactive-drawer-image/ApiSetInactiveDrawerImage.js","webpack://drawerjs-repacked/./src/drawer/plugins/brush-eraser/Eraser.js","webpack://drawerjs-repacked/./src/drawer/plugins/brush-eraser/EraserBrush.js","webpack://drawerjs-repacked/./src/drawer/plugins/brush-eraser/EraserPath.js","webpack://drawerjs-repacked/./src/drawer/plugins/brush-eraser-simplewhite/SimpleWhiteEraser.js","webpack://drawerjs-repacked/./src/drawer/plugins/brush-pencil/Pencil.js","webpack://drawerjs-repacked/./src/drawer/plugins/feature-canvas-properties/CanvasProperties.js","webpack://drawerjs-repacked/./src/drawer/plugins/feature-close-button/CloseButton.js","webpack://drawerjs-repacked/./src/drawer/plugins/feature-image-crop/ImageCropPlugin.js","webpack://drawerjs-repacked/./src/drawer/plugins/feature-image-crop/ImageCrop.js","webpack://drawerjs-repacked/./src/drawer/plugins/feature-movable-floating-mode/MovableFloatingMode.js","webpack://drawerjs-repacked/./src/drawer/plugins/feature-minimize-button/MinimizeButton.js","webpack://drawerjs-repacked/./src/drawer/plugins/feature-overcanvas-popup/OvercanvasPopup.js","webpack://drawerjs-repacked/./src/drawer/plugins/feature-overcanvas-popup/OpenPopupButton.js","webpack://drawerjs-repacked/./src/drawer/plugins/feature-resize/Resize.js","webpack://drawerjs-repacked/./src/drawer/plugins/feature-shape-contextmenu/ContextMenu.Api.js","webpack://drawerjs-repacked/./src/drawer/plugins/feature-shape-contextmenu/ShapeContextMenu.js","webpack://drawerjs-repacked/./src/drawer/plugins/feature-toggle-visiblity-button/ToggleVisibilityButton.js","webpack://drawerjs-repacked/./src/drawer/plugins/feature-zoom/ZoomViewport.js","webpack://drawerjs-repacked/./src/drawer/plugins/feature-zoom/Zoom.js","webpack://drawerjs-repacked/./src/drawer/plugins/option-brushSize/BrushSize.js","webpack://drawerjs-repacked/./src/drawer/plugins/option-line-width/LineWidth.js","webpack://drawerjs-repacked/./src/drawer/plugins/option-opacity/Opacity.js","webpack://drawerjs-repacked/./src/drawer/plugins/option-stroke-width/StrokeWidth.js","webpack://drawerjs-repacked/./src/drawer/plugins/option-text-styles/TextAlign.js","webpack://drawerjs-repacked/./src/drawer/plugins/option-text-styles/TextBackgroundColor.js","webpack://drawerjs-repacked/./src/drawer/plugins/option-text-styles/TextColor.js","webpack://drawerjs-repacked/./src/drawer/plugins/option-text-styles/TextDecoration.js","webpack://drawerjs-repacked/./src/drawer/plugins/option-text-styles/TextFontFamily.js","webpack://drawerjs-repacked/./src/drawer/plugins/option-text-styles/TextFontSize.js","webpack://drawerjs-repacked/./src/drawer/plugins/option-text-styles/TextFontStyle.js","webpack://drawerjs-repacked/./src/drawer/plugins/option-text-styles/TextFontWeight.js","webpack://drawerjs-repacked/./src/drawer/plugins/option-text-styles/TextLineHeight.js","webpack://drawerjs-repacked/./src/drawer/plugins/options-shape-border/ShapeBorder.js","webpack://drawerjs-repacked/./src/drawer/plugins/shape-circle/Circle.js","webpack://drawerjs-repacked/./src/drawer/plugins/shape-image/ImageShape.js","webpack://drawerjs-repacked/./src/drawer/plugins/shape-image/ImageToolApi.js","webpack://drawerjs-repacked/./src/drawer/plugins/shape-line/Line.js","webpack://drawerjs-repacked/./src/drawer/plugins/shape-rectangle/Rectangle.js","webpack://drawerjs-repacked/./src/drawer/plugins/shape-text/Text.js","webpack://drawerjs-repacked/./src/drawer/plugins/feature-fullscreen/Fullscreen.js","webpack://drawerjs-repacked/./src/drawer/plugins/feature-fullscreen/FullscreenModeButton.js","webpack://drawerjs-repacked/./src/drawer/plugins/background-image/BackgroundImage.js","webpack://drawerjs-repacked/./src/drawer/plugins/background-image/BackgroundImageApi.js","webpack://drawerjs-repacked/./src/drawer/plugins/option-color/ColorpickerControl.js","webpack://drawerjs-repacked/./src/drawer/plugins/option-color/OpacityControl.js","webpack://drawerjs-repacked/./src/drawer/plugins/option-color/Color.js","webpack://drawerjs-repacked/./src/drawer/plugins/option-colorpicker-html5/ColorpickerHtml5.js","webpack://drawerjs-repacked/./src/index.js","webpack://drawerjs-repacked/./src/drawer/index.js","webpack://drawerjs-repacked/./src/drawer/core/Canvas.js","webpack://drawerjs-repacked/./src/drawer/core/Util.js","webpack://drawerjs-repacked/./src/drawer/core/Drawer.Api.js","webpack://drawerjs-repacked/./src/drawer/core/Drawer.ObjectApi.js","webpack://drawerjs-repacked/./src/drawer/core/Drawer.js","webpack://drawerjs-repacked/./src/drawer/core/Drawer.DefaultOptions.js","webpack://drawerjs-repacked/./src/drawer/core/Drawer.Events.js","webpack://drawerjs-repacked/./node_modules/https-browserify/index.js","webpack://drawerjs-repacked/./node_modules/builtin-status-codes/browser.js","webpack://drawerjs-repacked/./node_modules/xtend/immutable.js","webpack://drawerjs-repacked/./node_modules/to-arraybuffer/index.js","webpack://drawerjs-repacked/./node_modules/readable-stream/lib/_stream_passthrough.js","webpack://drawerjs-repacked/./node_modules/util-deprecate/browser.js","webpack://drawerjs-repacked/./node_modules/setimmediate/setImmediate.js","webpack://drawerjs-repacked/./node_modules/timers-browserify/main.js","webpack://drawerjs-repacked/./node_modules/readable-stream/lib/internal/streams/BufferList.js","webpack://drawerjs-repacked/./node_modules/stream-http/lib/request.js","webpack://drawerjs-repacked/./node_modules/querystring-es3/encode.js","webpack://drawerjs-repacked/./node_modules/querystring-es3/decode.js","webpack://drawerjs-repacked/./node_modules/querystring-es3/index.js","webpack://drawerjs-repacked/./node_modules/url/util.js","webpack://drawerjs-repacked/(webpack)/buildin/module.js","webpack://drawerjs-repacked/./node_modules/punycode/punycode.js","webpack://drawerjs-repacked/./node_modules/ieee754/index.js","webpack://drawerjs-repacked/./node_modules/base64-js/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","g","this","Function","eval","e","Buffer","process","fabric","version","document","jsdom","decodeURIComponent","createWindow","parentWindow","isTouchSupported","documentElement","isLikelyNode","SHARED_ATTRIBUTES","DPI","reNum","fontPaths","charWidthsCache","devicePixelRatio","webkitDevicePixelRatio","mozDevicePixelRatio","_removeEventListener","eventName","handler","__eventListeners","eventListener","indexOf","util","array","fill","observe","arguments","length","prop","on","push","stopObserving","fire","options","listenersForEvent","len","filter","Observable","off","trigger","Collection","_objects","add","apply","_onObjectAdded","renderOnAddRemove","renderAll","insertAt","index","nonSplicing","objects","getObjects","splice","remove","somethingRemoved","_onObjectRemoved","forEachObject","callback","context","type","item","isEmpty","size","contains","complexity","reduce","memo","current","global","sqrt","Math","atan2","pow","abs","PiBy180","PI","removeFromArray","idx","getRandomInt","min","max","floor","random","degreesToRadians","degrees","radiansToDegrees","radians","rotatePoint","point","origin","subtractEquals","v","rotateVector","Point","x","y","addEquals","vector","sin","cos","transformPoint","ignoreOffset","makeBoundingBoxFromPoints","points","xPoints","minX","maxX","width","yPoints","minY","maxY","left","top","height","invertTransform","a","toFixed","number","fractionDigits","parseFloat","Number","parseUnit","fontSize","unit","exec","Text","DEFAULT_SVG_FONT_SIZE","falseFunction","getKlass","namespace","string","camelize","charAt","toUpperCase","slice","resolveNamespace","parts","split","obj","loadImage","url","crossOrigin","img","createImage","onload","onerror","log","src","enlivenObjects","reviver","onLoaded","numLoadedObjects","numTotalObjects","enlivenedObjects","forEach","klass","async","fromObject","error","groupSVGElements","elements","path","PathGroup","setSourcePath","populateWithProperties","source","destination","properties","toString","drawDashedLine","ctx","x2","y2","da","dx","dy","rot","dc","di","draw","save","translate","moveTo","rotate","restore","createCanvasElement","canvasEl","createElement","getContext","G_vmlCanvasManager","initElement","createAccessors","propName","capitalizedPropName","setterName","getterName","proto","stateProperties","clipContext","receiver","beginPath","clipTo","clip","multiplyTransformMatrices","b","is2x2","qrDecompose","angle","denom","scaleX","scaleY","skewX","skewY","translateX","translateY","customTransformMatrix","skewMatrixX","tan","scaleMatrix","resetObjectTransform","target","flipX","flipY","setAngle","getFunctionBody","fn","String","match","isTransparent","tolerance","_isTransparent","imageData","getImageData","data","parsePreserveAspectRatioAttribute","attribute","align","meetOrSlice","aspectRatioAttrs","pop","alignX","alignY","clearFabricFontCache","fontFamily","arcToSegmentsCache","segmentToBezierCache","boundsOfCurveCache","_join","Array","join","arcToSegments","toX","toY","rx","ry","large","sweep","rotateX","argsString","th","sinTh","cosTh","fromX","fromY","px","py","rx2","ry2","py2","px2","pl","cx","cy","cx1","cy1","mTheta","calcVectorAngle","dtheta","segments","ceil","result","mDelta","mT","th3","segmentToBezier","th2","argsString2","costh2","sinth2","costh3","sinth3","cp1X","cp1Y","cp2X","cp2Y","ux","uy","vx","vy","ta","tb","getBoundsOfCurve","x0","y0","x1","y1","x3","y3","t1","t2","b2ac","sqrtb2ac","tvalues","bounds","mt","j","jlen","drawArc","fx","fy","coords","segs","segsNorm","bezierCurveTo","getBoundsOfArc","tx","ty","bound","find","byProperty","condition","searchElement","TypeError","POSITIVE_INFINITY","NEGATIVE_INFINITY","k","map","every","some","val","rv","invoke","method","args","value1","value2","extend","deep","Element","clone","trim","replace","character","capitalize","firstLetterOnly","toLowerCase","escapeXml","Dummy","thisArg","_this","concat","emptyFunction","IS_DONTENUM_BUGGY","addMethods","parent","superclass","constructor","returnValue","valueOf","Subclass","callSuper","methodName","createClass","initialize","shift","subclasses","unknown","areHostMethods","methodNames","test","getElement","setElement","getUniqueId","uid","element","__uniqueID","createListener","wrappedHandler","event","createWrappedHandler","addListener","removeListener","shouldUseAddListenerRemoveListener","shouldUseAttachEventDetachEvent","listeners","handlers","addEventListener","removeEventListener","listener","attachEvent","detachEvent","existingHandler","handlersForEvent","createDispatcher","pointerX","clientX","pointerY","clientY","_getPointer","pageProp","clientProp","touchProp","getPointer","srcElement","scroll","getScrollLeftTop","parseEl","supportsOpacity","style","opacity","supportsFilters","reOpacity","setOpacity","es","currentStyle","hasLayout","zoom","setStyle","styles","elementStyle","cssText","styleFloat","_slice","sliceCanConvertNodelists","getElementStyle","toArray","arrayLike","childNodes","err","makeElement","tagName","attributes","el","className","htmlFor","setAttribute","docElement","body","scrollLeft","scrollTop","parentNode","host","nodeType","arr","defaultView","getComputedStyle","attr","undefined","selectProp","makeElementUnselectable","onselectstart","unselectable","makeElementSelectable","getScript","headEl","getElementsByTagName","scriptEl","loading","onreadystatechange","readyState","appendChild","getById","id","getElementById","addClass","wrapElement","wrapper","replaceChild","getElementOffset","docElem","scrollLeftTop","doc","ownerDocument","box","offset","offsetAttributes","borderLeftWidth","borderTopWidth","paddingLeft","paddingTop","parseInt","getBoundingClientRect","clientLeft","clientTop","makeXHR","factories","ActiveXObject","XMLHttpRequest","emptyFn","request","onComplete","xhr","parameters","param","addParamToUrl","open","setRequestHeader","send","warn","console","_requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","requestAnimFrame","animate","timestamp","time","start","Date","duration","finish","onChange","abort","easing","startValue","endValue","byValue","onStart","tick","ticktime","currentTime","animateColor","fromColor","toColor","startColor","Color","getSource","endColor","begin","end","pos","color","calculateColor","colorEasing","normalize","asin","elastic","opts","easeInBounce","easeOutBounce","ease","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInOutBounce","reAllowedSVGTagNames","reViewBoxTagNames","reNotAllowedAncestors","reAllowedParents","attributesMap","display","visibility","transform","fill-opacity","fill-rule","font-family","font-size","font-style","font-weight","stroke-dasharray","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-decoration","text-anchor","colorAttributes","stroke","normalizeAttr","normalizeValue","parentAttributes","parsed","isArray","transformMatrix","parseTransformAttribute","visible","isNaN","_getMultipleNodes","nodeNames","nodeName","nodeList","nodeArray","elementMatchesRule","selectors","firstMatching","parentMatching","selectorMatches","selector","doesSomeParentMatch","matcher","classNames","getAttribute","RegExp","elementById","node","nodelist","cssRules","gradientDefs","iMatrix","commaWsp","reTransformList","reTransform","attributeValue","matrix","matrices","operation","translateMatrix","rotateMatrix","multiplierX","multiplierY","skewXMatrix","skewYMatrix","combinedMatrix","reViewBoxAttrValue","applyViewboxTransform","viewBoxWidth","viewBoxHeight","viewBoxAttr","widthAttr","heightAttr","preserveAspectRatio","missingViewBox","missingDimAttr","toBeParsed","parsedDim","firstChild","parseSVGDocument","attrs","xlink","substr","el2","cloneNode","currentTrans","oldLength","el3","nodeValue","removeAttribute","parseUseDirectives","startTime","svgUid","__uid","descendants","selectNodes","hasAncestorWithNodeName","getGradientDefs","getCSSRules","parseElements","instances","documentParsingTime","svgCache","has","set","_createSVGPattern","markup","canvas","toSVG","reFontDeclaration","parseFontDeclaration","oStyle","fontStyle","fontWeight","lineHeight","elList","idsToXlinkMap","parseAttributes","ownAttributes","rule","getGlobalStylesForElement","parseStyleAttribute","font","setAlpha","getAlpha","toRgba","_setStrokeFillOpacity","ElementsParser","parse","chunk","pair","parseStyleString","parseStyleObject","parsePointsAttribute","parsedPoints","allRules","styleContents","textContent","text","ruleObj","propertyValuePairs","_rule","loadSVGFromURL","xml","responseXML","responseText","loadXML","results","hasUrl","enlivedRecord","cachedObject","_enlivenCachedObject","loadSVGFromString","DOMParser","parser","parseFromString","createSVGFontFacesMarkup","row","rowIndex","charIndex","fontList","createSVGRefElementsMarkup","numElements","createObjects","_obj","createObject","fromElement","_createObject","checkIfDone","createCallback","resolveGradient","instanceFillValue","gradientId","Gradient","that","scalarAdd","scalar","scalarAddEquals","subtract","scalarSubtract","scalarSubtractEquals","multiply","multiplyEquals","divide","divideEquals","eq","lt","lte","gt","gte","lerp","distanceFrom","midPointFrom","setXY","setX","setY","setFromPoint","swap","Intersection","status","appendPoint","appendPoints","intersectLineLine","a1","a2","b1","b2","uaT","ubT","uB","ua","ub","intersectLinePolygon","inter","intersectPolygonPolygon","points1","points2","intersectPolygonRectangle","r1","r2","topRight","bottomLeft","inter1","inter2","inter3","inter4","_tryParsingColor","setSource","hue2rgb","q","colorNameMap","sourceFromHex","sourceFromRgb","sourceFromHsl","_rgbToHsl","h","round","_source","toRgb","toHsl","hsl","toHsla","toHex","alpha","toGrayscale","average","currentAlpha","toBlackWhite","threshold","overlayWith","otherColor","otherSource","reRGBa","reHSLa","reHex","aqua","black","blue","fuchsia","gray","grey","green","lime","maroon","navy","olive","orange","purple","red","silver","teal","white","yellow","fromRgb","fromSource","fromRgba","fromHsl","fromHsla","fromHex","isShortNotation","isRGBa","substring","oColor","getColorStop","colorAlpha","keyValuePairs","_convertPercentUnitsToValues","gradientUnits","propValue","addFactor","multFactor","ellipseMatrix","scaleFactor","offsetX","offsetY","colorStops","gradientTransform","addColorStop","colorStop","position","toObject","propertiesToInclude","commonAttributes","sort","group","toLive","gradient","createLinearGradient","createRadialGradient","instance","colorStopEls","getLinearCoords","getRadialCoords","forObject","Pattern","repeat","toDataURL","patternSource","patternWidth","getWidth","patternHeight","getHeight","patternOffsetX","patternOffsetY","patternImgSrc","complete","naturalWidth","naturalHeight","createPattern","Shadow","blur","affectStroke","includeDefaultValues","_parseShadow","shadow","shadowStr","offsetsAndBlur","reOffsetsAndBlur","fBoxX","fBoxY","NUM_FRACTION_DIGITS","StaticCanvas","CANVAS_INIT_ERROR","Error","_initStatic","backgroundColor","backgroundImage","overlayColor","overlayImage","stateful","controlsAboveOverlay","allowTouchScrolling","imageSmoothingEnabled","viewportTransform","backgroundVpt","overlayVpt","onBeforeScaleRotate","enableRetinaScaling","cb","_createLowerCanvas","_initOptions","_setImageSmoothing","interactive","_initRetinaScaling","setOverlayImage","setBackgroundImage","setBackgroundColor","setOverlayColor","calcOffset","_isRetinaScaling","getRetinaScaling","lowerCanvasEl","contextContainer","scale","_offset","image","__setBgOverlayImage","__setBgOverlayColor","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled","oImageSmoothingEnabled","Image","setOptions","_createCanvasElement","_applyCanvasStyle","setWidth","setDimensions","setHeight","dimensions","cssValue","cssOnly","_setBackstoreDimension","backstoreOnly","_setCssDimension","upperCanvasEl","cacheCanvasEl","wrapperEl","getZoom","setViewportTransform","vpt","activeGroup","_activeGroup","setCoords","zoomToPoint","before","after","setZoom","absolutePan","relativePan","setupState","_set","clearContext","clearRect","clear","_hasITextHandlers","_canvasITextSelectionClearedHanlder","_mouseUpITextHandler","_iTextInstances","canvasToDrawOn","renderCanvas","_renderBackground","_renderObjects","drawControls","_renderOverlay","render","_renderBackgroundOrOverlay","fillStyle","fillRect","getCenter","centerObjectH","_centerObject","getCenterPoint","centerObjectV","centerObject","center","viewportCenterObject","vpCenter","getVpCenter","viewportCenterObjectH","viewportCenterObjectV","iVpt","setPositionByOrigin","toDatalessJSON","toDatalessObject","_toObjectMethod","_toObjects","__serializeBgOverlay","excludeFromExport","_toObject","originalValue","background","overlay","svgViewportTransformation","_setSVGPreamble","_setSVGHeader","_setSVGBgOverlayColor","_setSVGBgOverlayImage","_setSVGObjects","suppressPreamble","encoding","viewBox","_setSVGObject","sendToBack","objs","unshift","bringToFront","sendBackwards","intersecting","newIdx","_findNewLowerIndex","intersectsWithObject","isContainedWithinObject","bringForward","_findNewUpperIndex","dispose","DataURLExporter","EMPTY_JSON","supports","setLineDash","toJSON","BaseBrush","strokeLineCap","strokeLineJoin","strokeDashArray","setShadow","_setBrushStyles","contextTop","strokeStyle","lineWidth","lineCap","lineJoin","_setShadow","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","_resetShadow","PencilBrush","_points","onMouseDown","pointer","_prepareForDrawing","_captureDrawingPath","_render","onMouseMove","onMouseUp","_finalizeAndAddPath","_reset","_addPoint","pointerPoint","p1","p2","midPoint","quadraticCurveTo","lineTo","convertPointsToSVGPath","createPath","pathData","Path","strokeWidth","originX","originY","closePath","CircleBrush","drawDot","addPoint","arc","radius","originalRenderOnAddRemove","circles","circle","Circle","Group","circleRadius","circleColor","SprayBrush","density","dotWidth","dotWidthVariance","randomOpacity","optimizeOverlapping","sprayChunks","addSprayChunk","rects","ilen","sprayChunk","rect","Rect","_getOptimizedRects","uniqueRects","uniqueRectsArray","sprayChunkPoints","globalAlpha","PatternBrush","getPatternSrc","patternCanvas","patternCtx","getPatternSrcFunction","getPattern","topLeft","_getLeftTopCoords","supportLineDash","Canvas","_initInteractive","_createCacheCanvas","uniScaleTransform","uniScaleKey","centeredScaling","centeredRotation","centeredKey","altActionKey","selection","selectionKey","altSelectionKey","selectionColor","selectionDashArray","selectionBorderColor","selectionLineWidth","hoverCursor","moveCursor","defaultCursor","freeDrawingCursor","rotationCursor","containerClass","perPixelTargetFind","targetFindTolerance","skipTargetFind","isDrawingMode","preserveObjectStacking","snapAngle","snapThreshold","stopContextMenu","fireRightClick","_currentTransform","_groupSelector","_initWrapperElement","_createUpperCanvas","_initEventListeners","freeDrawingBrush","_chooseObjectsToRender","getActiveGroup","activeObject","getActiveObject","objsToRender","activeGroupObjects","contextTopDirty","renderTop","_drawSelection","_resetCurrentTransform","original","_shouldCenterTransform","action","_setOriginToCenter","mouseXSign","mouseYSign","containsPoint","xy","_normalizePointer","_findTargetCorner","calcTransformMatrix","invertedM","vptPointer","restorePointerVpt","isTargetTransparent","hasBorders","transparentCorners","contextCache","originalColor","selectionBackgroundColor","active","_renderControls","_shouldClearSelection","evented","selectable","centerTransform","altKey","_getOriginFromCorner","corner","_getActionFromCorner","_setupCurrentTransform","ex","ey","lastX","lastY","theta","shiftKey","_translateObject","newLeft","newTop","moveX","moveY","_changeSkewTransformOrigin","mouseMove","by","origins","0","skew","originA","originB","flipSign","skewSign","_skewObject","skewed","lockSkewingX","lockSkewingY","actualMouseByOrigin","constraintPosition","actualMouseByCenter","toLocalPoint","lastMouseByCenter","dim","_getTransformedDimensions","translateToOriginPoint","_setObjectSkew","localMouse","_dim","newValue","newDim","dimNoSkew","otherBy","_otherBy","_by","newDimMouse","atan","_scaleObject","lockScalingX","lockScalingY","lockScalingFlip","scaled","_setLocalMouse","_setObjectScale","changeX","changeY","forbidScalingX","forbidScalingY","_scaleObjectEqually","newScaleX","newScaleY","_flipObject","dist","lastDist","padding","_rotateObject","lastAngle","curAngle","hasRoated","rightAngleLocked","leftAngleLocked","setCursor","cursor","_resetObjectTransform","groupSelector","aleft","atop","_setLineDash","strokeRect","findTarget","skipGroup","activeTarget","_checkTarget","_fireOverOutEvents","targets","_searchPossibleTargets","_hoveredTarget","isEditing","normalizedPointer","subTarget","subTargetCheck","ignoreZoom","cssScale","boundsWidth","boundsHeight","bottom","right","lowerCanvasClass","_copyCanvasStyle","class","fromEl","toEl","getSelectionContext","getSelectionElement","_setActiveObject","_activeObject","setActiveObject","_discardActiveObject","discardActiveObject","_setActiveGroup","setActiveGroup","_discardActiveGroup","destroy","discardActiveGroup","deactivateAll","allObjects","deactivateAllWithDispatch","removeListeners","removeChild","_drawObjectsControls","originalProperties","_realizeGroupTransformOnObject","_unwindGroupTransformOnObject","originalValues","realizeTransform","_setCursorFromEvent","cursorOffset","tr","mr","br","mb","bl","ml","tl","cursorMap","_bindEvents","_onResize","_onMouseDown","_onMouseMove","_onMouseOut","_onMouseEnter","_onMouseWheel","_onContextMenu","eventjs","_onGesture","_onDrag","_onOrientationChange","_onShake","_onLongPress","_onMouseUp","self","__onTransformGesture","__onDrag","__onMouseWheel","__onOrientationChange","__onShake","__onLongPress","stopPropagation","preventDefault","__onMouseDown","__onMouseUp","__onMouseMove","_shouldRender","isMoving","_previousPointer","searchTarget","isClick","_isCurrentlyDrawing","_onMouseUpInDrawingMode","_finalizeCurrentTransform","actionPerformed","shouldRender","_maybeGroupObjects","_handleCursorAndEvent","__corner","eventType","_handleEvent","targetObj","subTargets","_scaling","_restoreOriginXY","hasStateChanged","_previousOriginX","_previousOriginY","originPoint","_onMouseDownInDrawingMode","_onMouseMoveInDrawingMode","which","button","shouldGroup","_shouldGroup","_clearSelection","_handleGrouping","_beforeTransform","saveState","_setCenterToOrigin","touches","_transformObject","reset","_beforeScaleTransform","_performTransformAction","_fire","_onScale","currentAction","_setCornerCursor","_getRotatedCornerCursor","hasRotatingPoint","getAngle","_updateActiveGroup","_createActiveGroup","saveCoords","removeWithUpdate","addWithUpdate","_createGroup","groupObjects","exitEditing","_groupSelectedObjects","_collectObjects","reverse","currentObject","selectionX1Y1","selectionX2Y2","intersectsWithRect","isContainedWithinRect","setObjectsCoords","supportQuality","format","quality","multiplier","cropping","__toDataURLWithMultiplier","origWidth","origHeight","scaledWidth","scaledHeight","newZoom","vp","newVp","originalInteractive","__toDataURL","toDataURLWithMultiplier","loadFromDatalessJSON","json","loadFromJSON","serialized","JSON","_enlivenObjects","_setBgOverlay","loaded","cbIfLoaded","__setBgOverlay","_toDataURL","_toDataURLWithMultiplier","stringify","cloneWithoutData","backgroundImageOpacity","backgroundImageStretch","supportsLineDash","objectCaching","cornerSize","borderColor","borderDashArray","cornerColor","cornerStrokeColor","cornerStyle","cornerDashArray","fillRule","globalCompositeOperation","strokeMiterLimit","borderOpacityWhenMoving","borderScaleFactor","minScaleLimit","hasControls","rotatingPointOffset","lockMovementX","lockMovementY","lockRotation","lockUniScaling","statefullCache","noScaleCache","dirty","cacheProperties","propertySet","_cacheCanvas","_cacheContext","_updateCacheCanvas","_getCacheCanvasDimensions","objectScale","getObjectScaling","_getNonTransformedDimensions","retina","zoomX","zoomY","dims","cacheWidth","cacheHeight","_initGradient","_initPattern","_initClipping","functionBody","fromLeft","_transformDone","_removeDefaultValues","scaling","_setObject","_constrainScale","setOnGroup","toggle","sourcePath","getViewportTransform","noTransform","_setupCompositeOperation","drawSelectionBackground","_setOpacity","isCacheDirty","drawObject","drawCacheOnCanvas","_setStrokeStyles","_setFillStyles","drawImage","skipCanvas","_removeShadow","miterLimit","dashArray","alternative","drawBordersInGroup","drawBorders","multX","multY","_renderFill","_renderStroke","_renderDashedStroke","cloneAsImage","dataUrl","boundingRect","getBoundingRect","origParams","getLeft","getTop","originalCanvas","isType","setGradient","setPatternFill","setColor","shouldCenterOrigin","_resetOrigin","centerH","viewportCenterH","centerV","viewportCenterV","viewportCenter","getLocalPointer","pClicked","objectLeftTop","originXOffset","originYOffset","translateToGivenOrigin","fromOriginX","fromOriginY","toOriginX","toOriginY","translateToCenterPoint","leftTop","getPointByOrigin","adjustPosition","to","offsetFrom","offsetTo","hypotFull","xFull","yFull","_originalOriginX","_originalOriginY","getCoords","oCoords","multiplyMatrices","pointTL","pointBR","other","lines","_getImageLines","_findCrossPoints","topline","rightline","bottomline","leftline","xi","iLine","xcount","lineKey","getBoundingRectWidth","getBoundingRectHeight","ignoreVpt","calcCoords","scaleToWidth","boundingRectFactor","scaleToHeight","_calculateCurrentDimensions","currentWidth","currentHeight","_angle","_hypotenuse","mtr","skipAbsolute","absoluteCoords","_setCornerCoords","_calcRotateMatrix","dimensionMatrix","_calcDimensionsTransformMatrix","flipping","skewMatrixY","getSvgColorString","str","getSvgStyles","skipShadow","getSvgFilter","getSvgId","getSvgTransform","getSkewX","getSkewY","translatePart","anglePart","scalePart","skewXPart","skewYPart","addTranslateX","flipXPart","addTranslateY","getSvgTransformMatrix","_createBaseSVGMarkup","saveProps","props","tmpObj","_isEqual","origValue","currentValue","firstPass","keys","_controlsVisibility","isControlVisible","newTheta","cornerHypotenuse","cosHalfOffset","sinHalfOffset","bbox","dimX","dimY","wh","rotateHeight","scaleOffset","_drawControl","control","controlName","_getControlsVisibility","setControlVisible","setControlsVisibility","FX_DURATION","fxCenterObjectH","callbacks","empty","fxCenterObjectV","fxRemove","skipCallbacks","propsToAnimate","_animate","propPair","from","coordProps","Line","_setWidthHeight","_getLeftToOriginX","_getTopToOriginY","makeEdgeToOriginGetter","axis1","axis2","dimension","nearest","farthest","cp","calcLinePoints","origStrokeStyle","xMult","yMult","ATTRIBUTE_NAMES","parsedAttributes","line","propertyNames","originValues","pi","startAngle","endAngle","setRadius","startX","startY","endX","endY","largeFlag","getRadiusX","getRadiusY","isValidRadius","Triangle","widthBy2","heightBy2","triangle","piBy2","Ellipse","getRx","getRy","ellipse","_initRxRy","w","isRounded","Polyline","Polygon","_calcDimensions","commonRender","polyline","pathOffset","addTransform","polygon","_toString","commandLengths","repeatedCommands","M","fromArray","_parsePath","_setPositionDimensions","calcDim","_parseDimensions","_renderPathCommands","tempX","tempY","previous","subpathStartX","subpathStartY","controlX","controlY","chunks","currentPath","coordsStr","coordsParsed","re","command","commandLength","repeatedCommand","klen","aX","aY","pathUrl","paths","parseDimensionsFromPaths","xC","yC","isSameColor","pathsToObject","originalDefaults","firstPathFill","pathFill","total","pathGroup","_lockProperties","isAlreadyGrouped","originalState","_updateObjectsCoords","_calcBounds","skipCoordsChange","_updateObjectCoords","__origHasControls","objectLeft","objectTop","originalLeft","originalTop","_restoreObjectsState","_setObjectActive","delegatedProperties","textDecoration","textAlign","objsToObject","_renderObject","originalHasRotatingPoint","_restoreObjectState","_originalLeft","_originalTop","hasMoved","onlyWidthHeight","iLen","jLen","_getBounds","minXY","maxXY","_lastScaleX","_lastScaleY","minimumScaleTrigger","filters","resizeFilters","_initElement","_element","_callback","_originalElement","_initConfig","applyFilters","_filteredEl","setCrossOrigin","getOriginalSize","_stroke","filterObj","getSrc","getSvgSrc","origFill","filtered","_src","setSrc","imgElement","forResizing","replacement","retinaScaling","minimumScale","applyTo","toBuffer","pngCompression","elementToDraw","imageMargins","_findMargins","_needsResize","marginX","marginY","scales","_resetWidthHeight","CSS_CANVAS","_initFilters","fromURL","imgOptions","preserveAR","_getAngleValueForStraighten","straighten","fxStraighten","straightenObject","fxStraightenObject","BaseFilter","Brightness","brightness","putImageData","Convolute","opaque","dstOff","scx","scy","srcOff","wt","weights","pixels","side","halfSide","sw","sh","output","createImageData","dst","alphaFac","GradientTransparency","Grayscale","Invert","Mask","mask","channel","maskEl","maskCanvasEl","maskData","Noise","noise","rand","Pixelate","blocksize","_i","_ilen","_j","_jlen","RemoveWhite","distance","limit","Sepia","avg","Sepia2","Tint","tintR","tintG","tintB","alpha1","Multiply","Blend","tg","_r","_g","_b","isImage","_el","tmpCanvas","Resize","resizeType","lanczosLobes","rcpScaleX","rcpScaleY","oW","oH","dW","dH","sliceByTwo","hermiteFastResize","bilinearFiltering","lanczosResize","multW","multH","signW","signH","doneW","doneH","stepW","stepH","tmpCtx","srcImg","destImg","srcData","destData","lanczos","lobes","xx","lanczosCreate","ratioX","ratioY","rcpRatioX","rcpRatioY","range2X","range2Y","cacheLanc","icenter","u","weight","fX","fY","xDiff","yDiff","chnl","origPix","w4","destImage","destPixels","ratioW","ratioH","ratioWHalf","ratioHHalf","img2","data2","weightsAlpha","gxR","gxG","gxB","gxA","centerY","yy","centerX","w0","ColorMatrix","Contrast","contrast","contrastF","Saturate","saturate","adjust","_dimensionAffectingProps","_reNewline","_reSpacesAndTabs","textBackgroundColor","_fontSizeFraction","_fontSizeMult","charSpacing","__skipDimension","_initDimensions","_setTextStyles","_textLines","_splitTextIntoLines","_clearCache","_getTextWidth","cursorWidth","_getTextHeight","_renderTextLinesBackground","_renderText","_renderTextDecoration","_renderTextFill","_renderTextStroke","textBaseline","_getFontDeclaration","_getHeightOfSingleLine","_getHeightOfLine","maxWidth","_getLineWidth","currentLineWidth","_renderChars","chars","char","shortM","additionalSpace","_getWidthOfCharSpacing","measureText","_renderTextLine","lineIndex","word","words","charOffset","wordsWidth","_getWidthOfWords","widthDiff","numSpaces","spaceWidth","leftOffset","_getLeftOffset","_getTopOffset","isEmptyStyles","_renderTextCommon","lineHeights","heightOfLine","maxHeight","_getLineLeftOffset","lineLeftOffset","lineTopOffset","originalFill","__lineWidths","__lineHeights","_shouldClearDimensionCache","shouldClear","_forceClearCache","_measureLine","finalWidth","halfOfVerticalBox","offsets","oLen","renderLinesAtOffset","additionalProperties","_getSVGLeftTopOffsets","textAndBg","_getSVGTextAndBg","textTop","textLeft","_wrapSVGTextAndBg","lineTop","textBgRects","textSpans","textTopOffset","textLeftOffset","_setSVGBg","_setSVGTextLineBg","_setSVGTextLineText","yPos","_getFillAttributes","_setSVGTextLineJustifed","fillColor","textHeightScaleFactor","scaledDiff","textHeight","offX","IText","selectionStart","selectionEnd","editable","editingBorderColor","cursorColor","cursorDelay","cursorDuration","caching","_reSpace","_currentCursorOpacity","_selectionDirection","_abortCursorAnimation","__widthOfSpace","initBehavior","p3","setSelectionStart","_updateAndFire","setSelectionEnd","_fireSelectionChanged","_updateTextarea","getSelectionStyles","startIndex","endIndex","loc","get2DCursorLocation","_getStyleDeclaration","setSelectionStyles","_extendStyles","_getLineStyle","_setLineStyle","_setStyleDeclaration","clearContextTop","cursorOffsetCache","renderCursorOrSelection","_clearTextArea","boundaries","_getCursorBoundaries","renderCursor","renderSelection","getCurrentCharStyle","getCurrentCharFontSize","getCurrentCharColor","typeOfBoundaries","_getCursorBoundariesOffsets","lineLeft","topOffset","_getWidthOfChar","cursorLocation","charHeight","__isMousedown","startLine","endLine","realLineHeight","lineOffset","boxWidth","j2","j2len","_renderCharsFast","prevStyle","thisStyle","charsToRender","_hasStyleChanged","_renderChar","skipFillStrokeCheck","_char","charWidth","shouldFill","shouldStroke","_charWidth","decl","_getHeightOfChar","_applyCharStylesGetWidth","fillText","strokeText","_renderCharDecoration","decoration","decorationWeight","positions","underline","line-through","overline","decorations","_getWidthOfCharsAt","_getCacheProp","styleDeclaration","_getFontCache","cacheProp","charDecl","_applyFontStyles","returnCloneOrEmpty","_deleteStyleDeclaration","_deleteLineStyle","_isMeasuring","_getWidthOfSpace","currentCharHeight","iText","initAddedHandler","initRemovedHandler","initCursorSelectionHandlers","initDoubleClickSimulation","mouseMoveHandler","initSelectedHandler","selected","_initCanvasHandlers","_removeCanvasHandlers","exitEditingOnOthers","_tick","_currentTickState","_animateCursor","targetOpacity","completeMethod","tickState","isAborted","_onTickComplete","_cursorTimeout1","clearTimeout","_currentTickCompleteState","initDelayedCursor","restart","delay","abortCursorAnimation","_cursorTimeout2","selectAll","getSelectedText","findWordBoundaryLeft","startFrom","findWordBoundaryRight","findLineBoundaryLeft","findLineBoundaryRight","getNumNewLinesInSelectedText","selectedText","numNewLines","searchWordBoundary","direction","reNonWord","selectWord","newSelectionStart","newSelectionEnd","selectLine","enterEditing","initHiddenTextarea","hiddenTextarea","focus","_saveEditingProps","_setEditingProps","_textBeforeEdit","initMouseMoveHandler","getSelectionStartFromPointer","currentStart","currentEnd","__selectionStartOnMouseDown","inCompositionMode","_calcTextareaPosition","upperCanvas","_savedProps","_restoreEditingProps","overCursor","isTextChanged","_removeExtraneousStyles","_removeCharsFromTo","_removeSingleCharAndStyle","isBeginningOfLine","indexStyle","removeStyleObject","insertChars","_chars","useCopiedStyle","copiedTextStyle","insertChar","skipUpdate","styleObject","isEndOfLine","insertStyleObjects","insertNewlineStyleObject","shiftLineStyles","currentCharStyle","newLineStyles","insertCharStyleObject","currentLineStyles","currentLineStylesCloned","numericIndex","clonedStyles","numericLine","_removeStyleObject","_getTextOnPreviousLine","lIndex","textOnPreviousLine","newCharIndexOnPrevLine","insertNewline","setSelectionStartEndWithShift","newSelection","setSelectionInBoundaries","__lastClickTime","__lastLastClickTime","__lastPointer","__newClickTime","newPointer","isTripleClick","_stopEvent","isDoubleClick","__lastIsEditing","__lastSelected","initMousedownHandler","initMouseupHandler","initClicks","__mousedownX","__mousedownY","setCursorByClick","_isObjectMoved","mouseOffset","prevWidth","widthOfLine","_getNewSelectionStartFromOffset","distanceBtwLastCharAndCursor","onKeyDown","onKeyUp","onInput","copy","cut","paste","onCompositionStart","onCompositionUpdate","onCompositionEnd","_clickHandlerInitialized","onClick","_keysMap","8","9","27","13","33","34","35","36","37","38","39","40","46","_ctrlKeysMapUp","67","88","_ctrlKeysMapDown","65","keyCode","ctrlKey","metaKey","stopImmediatePropagation","_copyDone","diff","charsToInsert","offsetEnd","textLength","newTextLength","prevCompositionLength","compositionStart","forwardDelete","moveCursorRight","removeChars","clipboardData","_getClipboardData","setData","copiedText","getData","_getWidthBeforeCursor","textBeforeCursor","widthBeforeCursor","getDownCursorOffset","isRight","selectionProp","_getSelectionForOffset","indexOnOtherLine","_getIndexOnLine","getUpCursorOffset","foundMatch","textOnLine","widthOfCharsOnLine","indexOnLine","widthOfChar","leftEdge","rightEdge","offsetFromLeftEdge","moveCursorDown","_moveCursorUpOrDown","moveCursorUp","moveCursorWithShift","moveCursorWithoutShift","moveCursorLeft","_moveCursorLeftOrRight","_move","_moveLeft","_moveRight","moveCursorLeftWithoutShift","change","moveCursorLeftWithShift","actionName","moveCursorRightWithShift","moveCursorRightWithoutShift","changed","_removeCharsNearCursor","leftLineBoundary","leftWordBoundary","_setSVGTextLineChars","_getSVGLineTopOffset","styleDecl","_createTextCharSpan","_createTextCharBg","lastHeight","fillStyles","Textbox","minWidth","dynamicMinWidth","__cachedLines","getTextboxControlVisibility","_generateStyleMap","realLineCount","realLineCharCount","charCount","_styleMap","_wrapText","wrapped","_wrapLine","_measureText","wordWidth","infixWidth","largestWordWidth","lineJustStarted","originalAlign","__oldScaleX","numLines","removed","lineLen","lineChars","getMinWidth","textbox","setObjectScaleOverridden","_refreshControlsVisibility","override","tmp","URL","HTTP","HTTPS","createImageAndCallBack","requestFs","createCanvasForNode","nodeCanvasOptions","nodeCanvas","nodeCacheCanvas","fabricCanvas","Font","originaInitStatic","createPNGStream","createJPEGStream","origSetBackstoreDimension","oURL","port","protocol","req","hostname","response","setEncoding","statusCode","errno","ECONNREFUSED","message","readFile","ctor","superCtor","super_","writable","configurable","TempCtor","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","noop","nextTick","title","browser","env","argv","versions","once","removeAllListeners","emit","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","pna","objectKeys","Duplex","inherits","Readable","Writable","readable","allowHalfOpen","onend","_writableState","ended","onEndNT","highWaterMark","_readableState","destroyed","_destroy","base64","ieee754","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","RangeError","Uint8Array","__proto__","arg","encodingOrOffset","allocUnsafe","ArrayBuffer","byteOffset","byteLength","fromArrayLike","fromArrayBuffer","isEncoding","actual","write","fromString","isBuffer","checked","buffer","isnan","assertSize","isView","loweredCase","utf8ToBytes","base64ToBytes","bidirectionalIndexOf","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","read","buf","readUInt16BE","foundIndex","found","hexWrite","remaining","strLen","utf8Write","blitBuffer","asciiWrite","byteArray","charCodeAt","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","base64Slice","fromByteArray","utf8Slice","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","foo","subarray","typedArraySupport","poolSize","_augment","species","allocUnsafeSlow","_isBuffer","compare","list","swap16","swap32","swap64","hexSlice","asciiSlice","latin1Slice","utf16leSlice","equals","inspect","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","_arr","ret","out","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","code","INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","stringtrim","base64clean","objectToString","isBoolean","isNull","isNullOrUndefined","isNumber","isString","isSymbol","isUndefined","isRegExp","isObject","isDate","isError","isFunction","isPrimitive","copyProps","SafeBuffer","arg1","arg2","arg3","punycode","Url","slashes","auth","hash","search","query","pathname","href","urlParse","resolve","relative","resolveObject","protocolPattern","portPattern","simplePathPattern","unwise","autoEscape","nonHostChars","hostEndingChars","hostnamePartPattern","hostnamePartStart","unsafeProtocol","javascript","javascript:","hostlessProtocol","slashedProtocol","http","https","ftp","gopher","file","http:","https:","ftp:","gopher:","file:","querystring","parseQueryString","slashesDenoteHost","queryIndex","splitter","uSplit","rest","simplePath","lowerProto","atSign","hostEnd","hec","parseHost","ipv6Hostname","hostparts","part","newpart","validParts","notHost","bit","toASCII","ae","esc","encodeURIComponent","escape","qm","rel","tkeys","tk","tkey","rkeys","rk","rkey","relPath","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","authInHost","last","hasTrailingSlash","up","isAbsolute","Transform","_transformState","afterTransform","er","ts","transforming","writecb","writechunk","rs","reading","needReadable","_read","needTransform","writeencoding","sync","_transform","flush","_flush","prefinish","done","stream","_write","_this2","err2","StringDecoder","nb","enc","nenc","retried","_normalizeEncoding","normalizeEncoding","utf16Text","utf16End","fillLast","utf8FillLast","base64Text","base64End","simpleWrite","simpleEnd","lastNeed","lastTotal","lastChar","utf8CheckByte","byte","utf8CheckExtraBytes","utf8CheckIncomplete","setImmediate","CorkedRequest","state","next","entry","corkReq","pendingcb","corkedRequestsFree","onCorkedFinish","asyncWrite","WritableState","internalUtil","deprecate","Stream","OurUint8Array","realHasInstance","destroyImpl","nop","isDuplex","objectMode","writableObjectMode","hwm","writableHwm","writableHighWaterMark","defaultHwm","finalCalled","needDrain","ending","finished","noDecode","decodeStrings","defaultEncoding","writing","corked","bufferProcessing","onwrite","writelen","onwriteStateUpdate","finishMaybe","errorEmitted","onwriteError","needFinish","bufferedRequest","clearBuffer","afterWrite","lastBufferedRequest","prefinished","bufferedRequestCount","writev","_writev","final","_final","doWrite","onwriteDrain","holder","count","allBuffers","isBuf","callFinal","need","getBuffer","_","hasInstance","pipe","_isUint8Array","_uint8ArrayToBuffer","writeAfterEnd","valid","validChunk","newChunk","decodeChunk","writeOrBuffer","cork","uncork","setDefaultEncoding","endWritable","_undestroy","undestroy","emitErrorNT","readableDestroyed","writableDestroyed","endEmitted","EventEmitter","_events","_maxListeners","defaultMaxListeners","setMaxListeners","newListener","warned","trace","fired","listenerCount","evlistener","emitter","ReadableState","EElistenerCount","debugUtil","debug","debuglog","BufferList","kProxyEvents","readableObjectMode","readableHwm","readableHighWaterMark","pipes","pipesCount","flowing","emittedReadable","readableListening","resumeScheduled","awaitDrain","readingMore","decoder","readableAddChunk","addToFront","skipChunkCheck","emitReadable","onEofChunk","chunkInvalid","getPrototypeOf","addChunk","maybeReadMore","needMoreData","isPaused","MAX_HWM","howMuchToRead","head","computeNewHighWaterMark","emitReadable_","flow","maybeReadMore_","nReadingNextTick","resume_","fromList","hasStrings","tail","copyFromBufferString","copyFromBuffer","fromListPartial","endReadable","endReadableNT","xs","nOrig","doRead","dest","pipeOpts","endFn","stdout","stderr","unpipe","onunpipe","unpipeInfo","hasUnpiped","onclose","onfinish","ondrain","ondata","cleanedUp","pipeOnDrain","increasedAwaitDrain","pause","resume","dests","ev","wrap","paused","_fromList","PassThrough","capability","rStates","readyStates","UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE","IncomingMessage","fetchTimer","_mode","headers","rawHeaders","trailers","rawTrailers","_fetchResponse","statusMessage","statusText","header","writableStream","WritableStream","Promise","reject","_destroyed","_resumeFetch","close","pipeTo","catch","reader","getReader","then","_xhr","_pos","responseURL","getAllResponseHeaders","matches","_charset","overrideMimeType","mimeType","charsetMatch","_onXHRProgress","VBArray","responseBody","newData","MSStreamReader","onprogress","readAsArrayBuffer","fetch","ReadableStream","abortController","AbortController","blobConstructor","Blob","getXHR","XDomainRequest","checkTypeSupport","responseType","haveArrayBuffer","haveSlice","arraybuffer","msstream","mozchunkedarraybuffer","vbArray","ClientRequest","statusCodes","defaultProtocol","location","Agent","defaultMaxSockets","globalAgent","STATUS_CODES","METHODS","DrawerJs","plugins","utilPlugins","brushes","Globals","Localization_en","Add Drawer","Insert Drawer","Insert","Free drawing mode","SimpleWhiteEraser","Eraser","Delete this canvas","Are you sure want to delete this canvas?","Size (px)","Position","Inline","Left","Center","Right","Floating","Canvas properties","Background","transparent","Cancel","Save","Enter fullscreen mode","Exit fullscreen mode","Bring forward","Send backwards","Bring to front","Send to back","Duplicate","Remove","Size:","Fill:","Transparent","Border:","None","Draw an arrow","Draw a two-sided arrow","Lines and arrows","Draw a circle","Draw a line","Draw a rectangle","Draw a triangle","Draw a Polygon","Stop drawing a polygon","Click to start a new line","Draw a text","Click to place a text","Font:","Move canvas","Click to start drawing a ","utils_AssetsProvider","init","_map","urlFor","asset_file","ToolbarPlaceholder","drawerInstance","positionType","customAnchorSelector","_setupOptions","_setupElement","_attachEventHandlers","_attachDrawerEventHandlers","TOP_POSITION","BOTTOM_POSITION","LEFT_POSITION","RIGHT_POSITION","OVER_CANVAS_POSITION","POPUP_POSITION","POSITION_TYPE_OUTSIDE","POSITION_TYPE_INSIDE","POSITION_TYPE_CUSTOM","CUSTOM_POSITION","HORIZONTAL_ORIENTATION","VERTICAL_ORIENTATION","STATE_HIDDEN","STATE_OVERLAY","STATE_DISABLED","_html_default","_html_popup","$popupWrapper","$popupContent","$customAnchor","EVENT_EDIT_STOP","$element","EVENT_TOOLBAR_CHANGE_STATE","fEvent","dataForChange","$","changeState","EVENT_TOOLBAR_CLEAR_STATE","excludeElements","isParent","isChild","closest","customPosition","turnOffOverlay","turnOffDisabled","_showPlaceholder","EVENT_TOOLBAR_STATE_HIDDEN_OFF","turnOn","EVENT_TOOLBAR_STATE_HIDDEN_ON","EVENT_TOOLBAR_STATE_OVERLAY_ON","EVENT_TOOLBAR_STATE_OVERLAY_OFF","EVENT_TOOLBAR_STATE_DISABLED_ON","EVENT_TOOLBAR_STATE_DISABLED_OFF","_setPosition","anchorFromElement","anchorFromSelector","$anchor","orientation","append","$toolbarsWrapper","elementHtml","_getHtmlOfElement","$overlay","excludeElementsMatched","$elements","each","$currEl","checkElements","toggleOverlay","_hidePlaceholder","turnOnDisabled","removeClass","turnOnOverlay","addToolbar","toolbar","$toolbar","toolbars_ToolbarPlaceholder","Tooltip","_processOptions","_setupTooltip","$trigger","hideTooltip","showTooltip","_defaultOptions","defaultClass","defaultPositionX","defaultPositionY","additionalClass","styleObj","$tooltipWrapper","tooltipWrapperSelector","enabled","_defaultWrapper","_eventsNamespace","_firstShow","optionsFromElement","_collectOptionsFromElement","_initialOptions","_initialOptionsFromElement","_checkElement","$tooltipWrapperFromSelector","$defaultWrapper","tooltipHtml","_generateTemplate","$tooltip","css","content","_detachEventHandlers","$eventTrigger","currentTarget","$body","hasClass","isResizing","tooltipIsDisabled","_parsePositionString","haveAxisX","positionX","haveAxisY","positionY","_resetTooltip","onlyClasses","positionString","getScrollTopFromElement","triggerSizes","tooltipSizes","triggerText","is","isVisible","DrawerTooltip","newInstance","getDrawerTooltip","currInstance","ToolbarTooltip","TooltipManager","drawer","_createHelperElements","createTooltip","tooltipCss","_tooltipInstances","optionsFromDrawer","newTooltip","newInstances","optionsForTooltip","removeAllTooltips","tooltip","hideAllTooltips","_removeHelperElements","$tooltipContainer","currDrawerInstanceId","EVENT_CREATE_TOOLTIP","EVENT_HIDE_TOOLTIPS","EVENT_DESTROY_TOOLTIPS","tooltipInstance","tooltipPosition","ToolbarTooltipManager","eventNameSpace","ToolbarComboBox","_setupCombobox","updateSelectedValues","hideDropdown","showDropdown","addNewOptions","buttonMode","items","comboboxHtml","$comboboxElement","insertAfter","$combobox","$options","$dropdown","$input","$closestToolbarItem","_self","optionsHtml","currItemHtml","isObj","valueToFill","textToFill","styleToFill","_generateNewOptionItem","wrapperClasses","txt","isSelected","returnHtml","$optionItem","outerHTML","_setupDropDownSize","sizesUpdated","bindClick","$target","$clickToolbarItem","isCanvas","toolbarHaveScrollable","needRemoveClass","toolbars","toolOptionsToolbar","toolbarOptions","notInsidePopup","outside","insideScrollable","compactType","$clonedCombobox","drawerSizes","getScrollOffset","$canvasEditContainer","parentSizes","canvasRect","clonedComboboxLeft","toggleClass","bEdit","$originalSelect","$opt","changeActiveOption","valueObj","classes","valueFromElement","valueFromObject","classString","prevValue","valuesArr","_onOptionSelect","toggleDropdown","isEditable","$item","currItemObj","$selectedOption","selectedValue","optionName","$allOptions","$neededOption","neededText","collapsedClass","dropdownIsVisible","show","needToShow","getComboBox","DrawerToolbar","buttonsGroups","_initCompactType","MULTILINE","SCROLLABLE","POPUP","buttons","buttonWidth","buttonHeight","_defaultButtonConfig","iconClass","tooltipText","buttonOrder","isSubMenu","clickHandler","toolbarHtml","$toolbarContentHolder","toolbarClass","hidden","EVENT_DO_ACTIVATE_TOOL","hideActiveSubmenu","_initCompactType_scrollable","_initCompactType_multiline","_initCompactType_popup","isScrollable","scrollModeActive","currentScrollOffset","_addScrollButtons","EVENT_CANVAS_START_RESIZE","_onCanvasResizeStart","EVENT_CANVAS_RESIZING","_onCanvasResizing","EVENT_CANVAS_STOP_RESIZE","_onCanvasResizeFinish","EVENT_EDIT_START","checkScroll","onTouchStart","EVENT_TOOLBAR_DESTROYED","addControl","orderString","_getOrderString","currStyleAttr","addButton","_validateButtonConfig","$button","createButton","addButtonToGroup","$groupContainer","_createAndAppendGroup","$submenuWrapper","defaultConf","orderValue","styleString","submenuClass","buttonHtml","tooltipOptions","$link","removeButton","unbindClick","onGroupButtonClick","children","setActiveButton","buttonClassName","clearActiveButton","$groupButtton","evt","activeSubmenu","$btn","isHorizontal","submenuOffset","offsetTop","offsetLeft","onSubmenuMouseDown","_setGroupButtonActive","groupName","buttonClass","groupButton","html","_getBtnHtml","btnClass","$scrollToBeginBtn","$scrollToEndBtn","$linkToBegin","$linkToEnd","onScrollToBegin","onScrollToEnd","mouseDown","originalEvent","curCoord","pageX","pageY","touchStartCoord","onTouchEnd","onTouchMove","eventTarget","$eventTarget","isInput","isColorIndicator","delta","scrollTo","toolbarContentHolder","scrollWidth","scrollHeight","_getCurrOffsetProps","minOffset","$contentWrapper","contentWrapperSizes","currElement","$currElement","currElSizes","currElOffsetAbsolute","currElOffset","relativeOffset","sizes","_getOffsetStep_Custom","toBegin","$el","$nextEl","currSizes","maxOffsetVal","offsetProps","$currentStartOffsetEl","needMoreOffset","startElSizes","prev","_getOffsetStep_Buttons","toolbarLength","btnLength","buttonsPerToolbar","customScrollMode","scrollToolbarBy","newOffset","toolbarEl","maxOffset","toggleToolbarVisibility","saveCurrentState","useSaved","currentState","visibilityState","showToolbar","hideToolbar","invisible","getToolbarOrientation","toolbars_DrawerToolbar","ToolOptionsToolbar","EVENT_OPTIONS_TOOLBAR_CREATED","instances_ToolOptionsToolbar","DrawingToolsToolbar","_setDrawerHandlers","EVENT_TOOLS_TOOLBAR_CREATED","tool","lastUsedPluginName","EVENT_DO_DEACTIVATE_TOOL","AFTER_CREATE_TOOLBARS","activateDefaultPlugin","instances_DrawingToolsToolbar","CropImageToolbar","_createDefaultButtons","EVENT_IMAGECROP_TOOLBAR_CREATED","instances_CropImageToolbar","MinimizedToolbar","EVENT_MINIMIZED_TOOLBAR_CREATED","instances_MinimizedToolbar","OverCanvasToolbar","EVENT_FLOATING_TOOLBAR_CREATED","instances_OverCanvasToolbar","SettingsToolbar","EVENT_CONFIG_TOOLBAR_CREATED","instances_SettingsToolbar","DrawerToolbarManager","toolbarPlaceholders","posKey","posTypeKey","placeHolderByType","placeholderByKey","placeholder","variablesText","createAllToolbars","BEFORE_CREATE_TOOLBARS","_createToolbarsPlaceholders","toolOptions_conf","drawingTools_conf","settingsToolbar_conf","toolbarsOptions","isFullscreen","overCanvasToolbar_conf","overCanvas","overridedValues","toolOptions","fullscreenMode","drawingTools","settings","toolOptionsToolbarOptions","drawingToolsToolbar","drawingToolsToolbarOptions","settingsToolbar","settingsToolbarOptions","overCanvasToolbar","overCanvasToolbarOptions","cropImageToolbar","cropImageToolbarOptions","minimizedToolbar","minimizedToolbarOptions","setToolbarButtonsSize","destroyAllToolbars","toolbarNames","toolbarConf","anchorSelector","resetAllToolbars","_adjustElementsSize","newSize","elementsToResize","elem","attributesToChange","attributesToChangeArr","attrName","attrVal","expression","touchDevice","toolbarSizeTouch","toolbarSize","toolbars_DrawerToolbarManager","Drawer_Storage","Drawer","getCanvasData","serializedCanvas","fCanvas","contentConfig","loadCanvasData","$canvasDataContainer","canvasDataText","$imageElement","loadImageData","$imagesContainer","imagesDataText","imagesData","loadCanvas","_updateObjectsControls","MODE_ACTIVE","EVENT_LOADED_FROM_JSON","onCanvasLoaded","EVENT_OBJECT_ADDED","onCanvasModified","EVENT_OBJECT_MOVING","EVENT_BEFORE_RENDER","EVENT_AFTER_RENDER","EVENT_ZOOM_SET","EVENT_ZOOM_RESTORE","EVENT_ZOOM_UPPER_SET","EVENT_ZOOM_UPPER_RESTORE","EVENT_OBJECT_SELECTED","EVENT_SELECTION_CLEARED","EVENT_TEXT_SELECTION_CHANGED","EVENT_TEXT_EDITING_ENTERED","EVENT_TEXT_EDITING_EXITED","setSize","EVENT_CONTEXTMENU","bindLongPress","EVENT_KEYDOWN","isDelKey","isBackspaceKey","canvasObject","EVENT_CANVAS_READY","getSerializedCanvas","beforeSync","saveInHtml","beforeSyncActiveObject","beforeSyncActiveGroup","afterSync","syncCanvasData","deleteItself","serializedCanvasStr","existingDataText","existingData","saveCanvasData","syncImageData","saveImageData","ErasableMixin","objData","eraserPaths","_createEraserPaths","eraserPathsData","EraserPath","createdPath","mainObjectRenderer","tempCanvas","getTemporaryCanvas","tempContext","addEraserPath","clonedPath","thisCenter","pathCenter","polygonOffsetX","polygonOffsetY","_rotatePathPoints","_updatePathPosition","_updateEPathsOnSet","ePath","ePathScaleX","ePathScaleY","globalOffsetPointX","globalOffsetPointY","rotatedPoint","rotationOrigin","angleRad","objectData","makeObjectErasable","mixin","isErasable","objInitialize","oldRender","oldSet","oldFromObject","createdObject","objWithErasers","oldToObject","PText","editIconMode","objectOptionsList","iconPath","getDrawerFolderUrl","startEditControl","ObjectFloatingControl","_iconClickHandler","useCopiedStyles","onMouseUpHandler","onMouseUpSuperHandler","getObjStyles","fabricjs_extensions_init","ErasableObject","SegmentablePolygon","_minX","_minY","_maxX","_maxY","_fixPoints","pointSegment","_applyPointOffset","oldStroke","oldStrokeDashArray","oldStrokeWidth","firstSegment","segmentPoints","sp","sum","ErasableText","Arrow","oneSided","_calcArrowAngle","_drawArrow","arrowSize","frontCenterPoint","leftPoint","backCenterPoint","rightPoint","runClippingOperation","params","firstShape","secondShape","polyPoints","prepareForClipper","angleInRadians","anotherShapePointsGlobal","localToGlobal","solution","processShape","cmd","uppercaseCoords","centersQueue","ClipperLib","JS","Lighten","restoreAfterClipper","firstShapePoints","secondShapePoints","Paths","Clipper","AddPaths","PolyType","ptSubject","ptClip","Execute","pointsSegments","segmentResult","X","Y","originalWidth","originalHeight","centerPoint","rotationAngleInRadians","newX","newY","Clipping","clipping","ErasableArrow","ErasableImage","fabricImage","createdImage","erasableImage","ErasableLine","ErasablePath","ErasablePencilBrush","Util","_onIconReady","_onAdded","_onRemoved","SMALL_ICON","MEDIUM_ICON","LARGE_ICON","LEFT_TOP","LEFT_BOTTOM","RIGHT_TOP","RIGHT_BOTTOM","defaulIconSize","symbolicIconSizes","small","medium","enable","disable","_iconClickHandlerBinded","_bindedAfterRender","_onAfterRender","originalSize","iconSize","sizeFromOptions","editIconSize","iconScale","icon","offsetFromLeft","offsetFromTop","evtCoords","drawerLeft","drawerTop","_coordInsideIcon","_calcIconCoords","insideX","insideY","_drawIcon","realTopLeft","xOffsetLocal","yOffsetLocal","xOffset","yOffset","FloatingControl","SegmentableLine","PCircle","makeCircle","degree","isPointInside","getPerimeterPoints","deltaX","deltaY","useEntireCircle","sectorAngleOffset","sectorAngle","getSectorPoints","randomDiff","endPoint","currPointAngle","currPointCoords","currPointAngleRad","pointOffsetX","pointOffsetY","PRect","makeRect","halfWidth","halfHeight","dimensionsChanged","PTriangle","makeTriangle","ArrowShape","jQuery","BaseShape","pluginsNamespace","ArrowOneSide","toolOptionsList","faClass","lineAngleTooltip","checkOnlyWidth","createShape","arrow","lineStrokeWidth","activeColor","activeOpacity","createAngleTooltip","updateShape","updateAngleTooltip","finishShape","removeAngleTooltip","angleTooltip","setText","tooltipOffsetX","tooltipOffsetY","ArrowTwoSideShape","ArrowTwoSide","plugins_init","BaseTool","_bindedOnToolbarCreated","_onToolbarCreated","$toolButton","_onDeactivateAllTools","pluginName","doNotSave","getPluginConfig","_setHandlers","onToolbarCreated","onToolbarDestroyed","removeTool","doDeleteToolbarCreationListeners","_unsetHandlers","EVENT_DO_DEACTIVATE_ALL_TOOLS","_onDeactivateTool","_onActivateTool","_deactivateTool","beforeActivateTool","_activateTool","buttonConfig","onButtonClick","activeDrawingTool","highlightButton","EVENT_TOOL_ACTIVATED","highlightButtonOff","EVENT_TOOL_DEACTIVATED","BaseToolOptions","_onToolbarDestroyed","_onObjectSelected","_onSelectionCleared","_onTextEditingEntered","_onTextEditingExited","showOnEditMode","hideOnEditMode","_collectDefaultOptions","_onOptionsSetup","defaultOptions","createControls","useCombobox","$toolControl","comboBoxOptions","onlyPredefined","$targetSelect","comboBox","deleteControls","isEditMode","hideControls","showControls","alwaysVisible","updateOnTool","toolHasOption","editModeIsCorrect","onActivateTool","forceOptionsHide","fabricEvent","updateControlsFromObject","onSelectionCleared","collectDataFromObject","updateControls","withUpdate","force","BaseOptionTool","BaseTextOptionTool","_setEventHandlers","_setGlobalClickHandler","buttonIconClass","focusTextOnChange","stylesToObject","predefined","valueType","minValue","maxValue","EVENT_TEXT_STYLES_CHANGED","_onStylesChanged","EVENT_TEXT_GET_STYLES","_onGetStyles","objectStyles","stylesWithMultipleValues","defaultValues","_lastData","isInputType","currValueName","defaultValue","inheritedValue","multipleValues","currValueIsInvalid","neededValue","_updateClasses","valueName","inherited","updateSingleControl","valueIsInvalid","valueIsInherited","valueIsMultiple","setStyles","getStylesFromControls","currText","setTemporaryStyles","styleName","doNotUseDefault","defaultSize","validateValue","_attachEvents","onInputChange","generateControlHtml","controlTemplate","changeCallback","toolControlHtml","setupControl","textConfig","defVal","drawVal","optVal","valueFromEvent","getStylesFromChangeEvent","currValue","validatedValue","strictMode","valueIsValid","checkForMatchWithPredefined","equalToPredefinedValue","isColorInstance","currentStyles","objStyles","objectBaseType","drawingInProgress","onlyOneItem","MOUSEMOVE","getEventId","MOUSEDOWN","MOUSEUP","minShapeSize","minShapeSizeForTouch","CENTERING_MODE","NORMAL","FROM_CENTER","showHelpTooltip","disableSelection","setUpHandlers","_setUpHandlers","removeHelpTooltip","finishItemDraw","startPointCoords","shape","pointCoords","minSize","widthIsSmaller","heightIsSmaller","checkOnlyWidthOrHeight","newShape","restoreSelection","helpText","helpTooltipText","cursorTooltip","fadeOut","MOUSE_UP_TIMER","mouseUp","MOUSE_DOWN_TIMER","brushConstructor","doNotZoomOnActivate","brush","createBrush","previousBrush","getBrush","setBrush","afterActivateTool","_attachTimerEvents","$upperCanvasEl","_removeTimerEvents","_onMouseDownTimer","_onMouseUpTimer","isBrushDrawing","afterDeactivateTool","DrawerApi","checkImageSizes","widthIsValid","heightIsValid","_setImageAsInactiveBackground","imageUrl","styleRules","addStyleToStyleSheet","setInactiveDrawerImage","valueIsUrl","valueIsImage","urlOfImage","imgFromPromise","ApiSetInactiveDrawerImage","MOUSE_UP","MOUSE_DOWN","MOUSE_MOVE","separatePathOnShapes","cursorUrl","brushSize","useCoordsQueue","previousColor","previousBrushSize","savedBrushSize","erasingNow","drw","_previousCursor","_createBrush","EVENT_BRUSH_SIZE_CHANGED","_updateCursorShapeSize","_createEraserCursorShape","_showEraserCursorShape","_hideEraserCursorShape","_onEraserPathCreated","_removeEraserCursorShape","EraserBrush","eraserPolyRadius","getBrushSize","eraserCursorShape","isEraserBrush","eraserPolyDashSize","affectedShapes","eraserAffected","_affectShapesUnderCoords","_lastCenterPosition","_checkObjectIntersection","objContainsCenterOfBrush","objContainsPointFromPerimeter","circleObj","rightClick","middleClick","drawerFolderUrl","freeDrawingBrushSize","setFreeDrawingBrushSize","Pencil","CanvasProperties","redactorInstance","LOGTAG","modalTemplate","modal","addTemplate","openPopup","load","createCancelButton","createActionButton","$properties","currentAlign","getAlign","$backgroundTransparencyInput","transparentBackground","click","saveProperties","$alignControl","updateTransparencyVisible","hide","bodyOveflow","fullscreenPlugin","getPluginInstance","isInFullscreenMode","exitFullscreen","setAlign","EVENT_OPTIONS_CHANGED","CloseButton","_createAndAddButton","_onCloseButtonClick","question","confirm","CSS_TRANSFORM","emptyFunc","cssPrefixes","emptyStyles","vendorPrefix","capProp","ImageCropPlugin","_resetData","_init","boundary","enableExif","enableOrientation","update","controlsCss","controlsTouchCss","globals","_bind","bindOptions","callbackIsValid","successCallback","newImage","originalImage","prevImages","currentImage","$fullsizePreview","$img","startCropping","_getCanvas","outWidth","outHeight","canvasWidth","canvasHeight","customDimensions","outputWidth","outputHeight","outputRatio","_getHtmlResult","$div","_getBase64Result","_getBlobResult","toBlob","blob","_get","previewEl","viewportEl","$viewport","imgData","vpData","currZoom","_currentZoom","RESULT_DEFAULTS","RESULT_FORMATS","_result","resultType","getExifOrientation","EXIF","getTag","drawCanvas","_transferImageToCanvas","customOrientation","$canvas","exif","_onCropSuccess","success","actualWidth","actualHeight","croppedWidth","croppedHeight","croppedLeft","croppedTop","_updateViewportSizes","currentSizes","parentCurrentSizes","maxAvailableWidth","maxAvailableHeight","_refreshViewportPosition","stylesForControls","max-width","max-height","undoCrop","imageToUndo","_setupCropElements","controlsBlockHtml","assetsUrl","borderStyleAttr","$preview","_save","viewportStyleAttr","applyCrop","replaceCurrentImageWithResult","enableRendering","renderCropped","makePreview","$corners","clickEvent","controlItemSize","croppingNow","startPos","getEventPosition","viewportSizeBox","parentSizeBox","startControlsLeft","startControlsTop","startControlsWidth","startControlsHeight","isTopLeft","isTopRight","isBottomLeft","isBottomRight","moveEvent","movePos","diffLeft","diffTop","previewCanvas","__previewCanvas","sizeBeforeCrop","TRANSLATE_OPTS","translate3d","suffix","isJquery","isNode","Node","nodeStyle","fromMatrix","vals","xVal","yVal","scaleVal","values","ImageCrop","EVENT_IMAGE_CROP","_onImageCropTrigger","toolbarState","_defaultCropOptions","enableImageCrop","cropOptions","_setupCropOptions","_removeElements","_createElements","cropper","$cropperContainer","cropContainerSizesUpdated","_resizeCropWrapper","_createToolbarButtons","$anotherCropButton","$applyButton","$undoCropButton","$cancelButton","anotherCropButtonConf","_onAnotherCropButtonClick","applyButtonConf","_onApplyCropButtonClick","undoCropButtonConf","_onUndoCropButtonClick","cancelButtonConf","_onUseOriginButtonClick","_onCancelCropButtonClick","$useOriginButton","imageCropToolbar","toolbarHeight","_getCropCallback","hideCropper","hideCropToolbar","dataIsValid","showCropToolbar","showCropper","EVENT_RESIZER_HIDE","EVENT_OVERCANVAS_BUTTON_HIDE","EVENT_RESIZER_SHOW","EVENT_OVERCANVAS_BUTTON_SHOW","MovableFloatingMode","onOptionsChanged","makeMoveButton","moveButtonConf","$moveButton","buttonOnMouseDown","startLeft","startTop","mouseStartLeft","mouseStartTop","$document","buttonOnMouseMove","buttonOnMouseUp","moveEventPos","moveDrawer","updateAligmentCss","adjustEditContainer","fullScreenPlugin","hideMoveButton","showMoveButton","MinimizeButton","_onConfigToolbarCreated","_onMinimizedToolbarCreated","_createAndAddButton_minimize","captionValue","captionText","captionItem","prepend","_createAndAddButton_restore","minimizeCanvas","$editContainer","drawerHaveAnimatedClass","restoreCanvas","restoreButtonConf","_onRestoreSizeButtonClick","$restoreButton","minimizeButtonConf","_onMinimizeButtonClick","$minimizeButton","api","checkIsActive","OvercanvasPopup","_attachDrawerEvents","popupClass","defaultPosition","toolbarBehavior","_onBeforeCreateToolbars","EVENT_OVERCANVAS_POPUP_SHOW","showPopup","EVENT_OVERCANVAS_POPUP_HIDE","hidePopup","_attachHelperEvents","$closeBtn","$popup","_triggerPopupHide","_onBodyClick","_triggerPopupShow","popupIsVisible","isButton","isPopup","popupWrapperHtml","$arrow","$popupContentWrapper","$popupElement","_getAvailableSpace","canvasSizes","popupSizes","triggerOffsetX","triggerOffsetY","popup","_movePopup","isVerticalAlign","negativeDiff","arrowOffsetLeft","arrowOffsetTop","removeAttr","_moveArrow","_adjustPosition","positionFound","positionExists","neededSpace","spaceIsEnough","OpenPopupButton","needToInitButton","hideButton","refreshPosition","showButton","toolOptionsToolbarHavePopupPosition","toolbarIsHidden","dataFromEvent","_setInitialPosition","insidePlaceholders","inside","$insideTopPlaceholderEl","$insideLeftPlaceholderEl","positionInitialized","moveButton","positionLimit","refreshPositionLimits","latestState","buttonLeft","buttonTop","openPopupButtonConf","moveNow","triggerClick","clickPosition","refreshSizes","dragNow","eventPosition","sameLeft","sameTop","latestSizes","eventPos","canvasSize","canvasSizeBox","buttonSizeBox","buttonSize","popupButtonAlwaysVisible","ResizeTool","resizerHide","resizerShow","appendResizeControl","$canvasResizer","$elemForEvent","resizeOriginalWidth","resizeOriginalHeight","resizeStartX","resizeStartY","resizingNow","upEvent","resizeFinished","contextMenuShow","showContextMenu","contextMenuHide","hideContextMenu","contextMenuSetPosition","doFitInViewport","newCoords","_calcCoordsToFitViewport","setMenuPosition","ContextMenu_Api","ShapeContextMenu","_bindedOnContextMenu","_bindedSetHandlers","_onEditStop","_onObjectMoved","eventsNamespace","touch","mouse","customMenuRenderer","objectWasMoved","handleContextMenuEvent","canvasTarget","canvasTargetIsMoving","targetCorner","fabricItem","eventsNS","$contextMenu","$bringForward","_bringObjectForward","$sendBackwards","_sendObjectBackwards","$bringToFront","_bringObjectToFront","$sendToBack","_sendObjectToBack","$duplicate","_duplicateObject","$remove","_removeObject","paddings","padding-top","padding-bottom","_positionMenu","getMenuPosition","clickCoords","canvasOffset","optionsType","positionOption","adjustedCoords","customFitViewportMethod","menuHeight","menuWidth","bringObjectForward","sendObjectBackwards","bringObjectToFront","sendObjectToBack","removeObject","duplicateObject","ToggleVisibilityButton","_onOverCanvasMode","showNextItem","checkConfigForButton","_checkToolbarForButton","haveButton","toggleVisibilityButton","drawingToolsHave","toolOptionsHave","settingsHave","needToInit","toolbarsForToggle","toggleVisibilityButtonConf","touchRightNow","haveVisible","nextToolbar","firstToolbar","indexOfNextToolbar","ZoomViewport","setViewport","strict","zoomCenter","getZoomCenter","zoomCenterX","zoomCenterY","availableX","availableY","_validatePosition","maxPositionX","maxPositionY","setToCenterOfCanvas","setPosition","validatedPoint","oldAvailableX","oldAvailableY","newAvailableX","newAvailableY","cursorPrefix","checkBrowser","Zoom","enableWhenNoActiveTool","enableButton","showZoomTooltip","enableMove","useWheelEvents","moveCanvasOnWheel","moveCanvasOnWheelStep","zoomStep","defaultZoom","maxZoom","minZoom","viewport","zoomIsOn","currentZoom","_updateProto","_updateDrawerValues","_updateCanvasProto","_updateObjectProto","EVENT_RESTORE_DEFAULT_ZOOM","restoreDefaultZoom","_ctxUpperRestore","_ctxSet","_ctxRestore","EVENT_ZOOM_UNSET","_ctxUnset","_ctxUpperSet","EVENT_ZOOM_UPPER_UNSET","_ctxUpperUnset","_refreshButton","_refreshMoveButtonState","ctxUpper","$zoomTooltip","$canvasContainer","debouncedTooltipHideFunc","debounce","EVENT_ZOOM_CHANGE","zoomProps","zoomAsText","prevValues","_attachWheelEvents","_attachMoveEvents","_attachTouchEvents","$zoomInButton","$zoomOutButton","$moveCanvasButton","zoomInButtonConf","_onZoomIn","zoomOutButtonConf","_onZoomOut","moveCanvasButtonConf","_onMoveButtonClick","moveButtonIsActive","_getZoomPopertiesFromEvent","changeZoomCenter","zoomIn","newZoomCenterX","newZoomCenterY","newZoomValue","getRelativeEventPosition","zoomCenterXFromEvent","zoomCenterYFromEvent","wheelEventsAttached","canvasContainer","addWheelListener","_onWheelEvent","_moveOnMouseDown","_moveOnMouseMove","_moveOnMouseUp","currActiveObj","selectedTool","buttonIsActive","buttonPermission","noActiveToolPermission","currPoint","movingNow","moveStartPoint","moveLastPoint","doNotSaveState","savedDefaultCursor","enableToMove","_checkMovePermission","_prepareDrawerForZoom","withButtonState","buttonStateIsActive","newCenterX","newCenterY","startDiff","lastDiff","getDistance","pointPos1","pointPos2","currDiff","isZoomIn","scrollOffset","canvasContainerSizes","touchCenterX","touchCenterY","detail","wheelDelta","zoomResult","zoomValueIsValid","info","canvasEditContainerSizes","oldX","oldY","newZoomData","defaultZoomValue","zoomTool","BrushSize","$sizeControl","updateValue","EVENT_BRUSH_CHANGED","createSizeControl","setBrushSize","LineWidth","preventHightlight","digitsAfterDecimalPoint","createControl","_generateHtml","$valueIndicator","rawValue","decimalRatio","setLineWidth","diffRatio","initialWidth","calcWidth","axisSum","widthRaw","xDelta","yDelta","xDiffScaled","yDiffScaled","angleDeg","dataToFill","OpacityOption","opacityChangeCallback","$opacityControl","$opacityIndicator","_onOpacityChange","activeFabricObject","$opacityInput","defaultOpacity","formattedValue","_opacity","Opacity","StrokeWidth","setStrokeWidth","TextAlign","valueMap","justify","$predefined","selectHtml","TextBackgroundColor","colorControl","ColorpickerControl","colorText","colorChangeHandler","$colorIndicator","$colorDropdown","colorDropdownVisible","TextColor","TextDecoration","TextFontFamily","activeFont","fonts","defaultFont","Georgia","Palatino","Times New Roman","Arial","Arial Black","Comic Sans MS","Impact","Lucida Grande","Tahoma","Trebuchet MS","Verdana","Courier New","Lucida Console","changeFont","fontFamilyName","withoutSetStyles","getFontByCss","fontCssString","fName","fontName","fontCss","fontItem","$fontItem","fname","TextFontSize","TextFontStyle","TextFontWeight","fabricDefaultLineHeight","TextLineHeight","ShapeBorder","assetsFolder","_completeDefaultOptionsPaths","colorpicker","currentColor","currentBorder","borderTypes","defaultBorder","activeToolIsShape","hideStyleDropdown","description","Solid thin","preview","Solid bold","Dashed thin","Dashed bold","borderType","borderOption","assets","isIndicator","isDropdownVisible","updateColorFromObject","updateStrokeFromObject","TRANSPARENT","shapeDashArray","shapeDashWidth","bType","dashArrayEquals","currentShape","applyBorderStyle","colorBeforeLineShape","borderBeforeLineShape","colorButton","onColorSelected","$borderTypeButton","$indicator","toggleStyleDropdown","$borderTypes","borderTypeHandler","borderTypeName","borderDefinition","li","selectedColor","fabricObject","isShape","showStyleDropdown","$clonedDropdown","buttonSizes","toRightOffset","centeringMode","widthAbs","heightAbs","ImageTool","maxImageSizeKb","scaleDownLargeImage","centerImage","cropIsActive","acceptedMIMETypes","_showDialog","acceptedMIMEStr","_processFileInput","files","showError","_checkFile","fileReader","FileReader","onloadEvent","_pluginsInstances","_triggerImageCrop","readAsDataURL","addImage","dataToEvent","_fitLargeImage","fImage","ImageShape","addImageFromUrl","ImageToolApi","shape_line_Line","Rectangle","rectangle","eventNs","_onOptionsToolbarCreated","_onTextSelectionChanged","_lastSelection","_lastStyles","currentPos","lastPos","emptySelection","firstChar","sameStartPosition","sameEndPosition","prevStyles","prevCharStyles","stylesAreChanged","stylesArrayForEachChar","firstStyleObj","stylesObj","charsHaveDifferentStyles","alreadyMultiple","addShape","textString","collectedStyles","isObjectText","Fullscreen","previousWidth","previousHeight","previousOffset","$enterButton","$exitButton","onlyForEditing","adjustFullscreenSize","enterButtonConfig","enterFullscreen","exitButtonConfig","$image","$box","imageCss","margin-left","margin-right","canvasCss","getTransitionDuration","detach","appendToolbar","dataBeforeFullscreenStr","dataBeforeFullscreen","isFF","isSafari","isWebkit","FullscreenModeButton","_setupFullscreenHandlers","eventsList","globalFullscreenMode","reactOnResize","setFullscreenStateOn","setFullscreenStateOff","_onWindowResize","isEscKey","fullscreenOff","_saveCurrentSizes","_refreshFullscreenSize","_restoreNormalSizes","ffTurnOff","webkitTurnOff","oldWidth","oldHeight","outerWidth","outerHeight","savedWidth","savedHeight","$window","viewportWidth","viewportHeight","savedPosition","fullscreenCancelFunc","fullscreenRequest_default","requestFullScreen","fullscreenRequest_ms","msRequestFullscreen","fullscreenRequest_mozilla","mozRequestFullScreen","fullscreenRequest_webkit","webkitRequestFullScreen","ALLOW_KEYBOARD_INPUT","fullscreenRequest","cancelFullScreen","msExitFullscreen","mozCancelFullScreen","webkitCancelFullScreen","fullscreenCancel","fullscreenEl","toggleModeButtonConfig","_onFullscreenModeButtonClick","$fullscreenModeButton","_toggleFullScreen","forceCancel","currStateIsFullscreen_default","fullScreenElement","currStateIsFullscreen_moz","mozFullScreen","webkitIsFullScreen","fullscreenOn","currStateIsValid","changeStateInProgress","BackgroundImageTool","imagePosition","dynamicRepositionImage","throttle","dynamicRepositionImageThrottle","_throttle","_repositionImage","fixedBackgroundUrl","loadImageFromUrl","imageSrc","throwError","makeImageBackground","positionOpts","_calcPositioningOptions","bgImage","func","ms","savedArgs","savedThis","isThrottled","BackgroundImage","setBackgroundImageFromUrl","BackgroundImageApi","shouldDisplayTransparent","colors","colorsInRow","minSwatchSize","$colorButton","getColor","disableTransparent","enableTransparent","hideColorDropdown","_getControlHtml","_collectDataFromToolbar","_onButtonClick","_buildPicker","$lastTrigger","toggleColorDropdown","toolbarPosition","isVertical","$container","$swatch","_createSwatch","$transparentSwatch","_createTransparentSwatch","_updateControlsSize","swatchSize","_calcSwatchSize","controlWidth","widthToFit","heightWithToolbars","heightToFit","$toolbarWrapper","toolbarSizes","paletteSizes","palette","_resetPalette","_setFullSize","popupOffsetLeft","popupOffsetTop","_movePalette","_cropSizeOfPalette","notEnoughSpace","negativeDiffY_bottom","negativeDiffY_top","negativeDiffX_right","negativeDiffX_left","negativeDiffY","negativeDiffX","smallerThanCanvas","_adjustControlsPosition","currDropdownSizes","notEnoughWidth","notEnoughHeight","smallerThanNormalSize","colorButtonSizes","newTopValue","newLeftValue","topOffsetIsValid","bottomIsCorrect","leftOffsetIsValid","rightIsCorrect","colorLabelText","_class","background-color","_swatchClickHandler","clickedColorValue","showColorDropdown","insidePopup","$cloneControl","$cloneDropdown","OpacityControl","_moveControlToEnd","getOpacity","onOpacityChange","ColorTool","opacityControl","showOpacityControl","_onColorSelected","_onOpacityControlChanged","colorWithAlfaRgba","_hexToRgba","updateControlsWithColor","withoutOpacity","colorHex","colorWithAlfa","ColorpickerHtml5","createColorControl","__webpack_exports__","$editor","texts","dist_fabric","__evented","__selectable","objectsToRender","_applyEraserPath","pathObject","utilNamespace","_drawerFolderUrl","setDrawerFolderUrl","scripts","drawerJsFilenamePattern","now","errorName","groupCollapsed","groupEnd","__drawerTouchStartEvent","timeStamp","bindDoubleTap","eventElem","__touchEndTime","__touchEndX","__touchEndY","__touchStartTime","__touchStartX","__touchStartY","__longPressCheckTimeout","cleanHandlers","endEvent","unbindLongPress","with_delay","webkitTransitionDuration","webkitTransitionDelay","touchIndex","searchTouchEvent","innerEvent","fromInner","touchEvent","isTouch","haveTouches","eventCoordsAreValid","touchCoordsAreValid","originalEventCoordsAreValid","coordsHolder","isValid","areNotZero","areNumbers","areNotNan","__temporaryCanvas","__latestValidCanvasWidth","__latestValidCanvasHeight","resultCanvasWidth","resultCanvasHeight","LastCoordsQueue","coordsQueue","pushCoords","getInterpolatedValues","interpolatedCoords","prevX","prevY","xDiffAbs","yDiffAbs","iterations","ii","addCSSRule","sheet","rules","insertRule","addRule","styleSelector","styleRule","styleSheet","isJqueryEl","isSelector","$styleSheet","addStyle","createTextNode","needToContinue","currScrollTop","currScrollLeft","wait","immediate","callNow","imageEl","ignoreCrossOrigin","navigator","userAgent","needContinue","funcWrapper","stack","_addEventListener","support","prefix","support_modern","support_WebkitIe","onmousewheel","eventHandlerForOldBrowsers","deltaMode","deltaZ","wheelDeltaX","_addWheelListener","useCapture","eventHandler","eventNameFull","f","cancelAnimationFrame","mozCancelAnimationFrame","startEditing","_startEditing","stopEditing","_stopEditing","getCanvasAsJSON","saveCanvas","loadCanvasFromData","getCanvasAsImage","saveCanvasImage","getSize","setActiveColor","createText","updateOptions","optionsToUpdate","newOptions","loadPlugin","unloadPlugin","Drawer_Api","_checkObject","getSelectedObject","onCloned","clonedObj","Drawer_ObjectApi","MODE_INACTIVE","_eventEmitter","aligmentCss","detectTouch","canvasDataContainer","imagesContainer","inlineStyles","defaultImageUrl","MODE_PREPARING","onOptionsUpdated","nameIsValid","pluginConfig","pluginsConfig","textPluginConfig","doReloadPlugins","reloadPlugins","basePath","canvasProperties","loadPlugins","unloadPlugins","alreadyInitialized","isCorePlugin","corePlugins","plugin","tag","msg","getHtml","defaultWidth","defaultHeight","backgroundCss","borderCss","getAligmentCssFor","float","marginLeft","marginRight","setAligmentCssFor","onInsert","firstRun","_generateAlignCss","editOnClick","drawCanvasControls","_globalClickHandler","onOptionsChange","parentDrawerBox","parents","exitOnOutsideClick","$editter","innerWidth","_previousFocusedElement","activeElement","data-canvas-id","tabindex","borderCssEditMode","hideResize","newColor","currActiveObject","currActiveTool","colorPluginInstance","colorPickerControl","EVENT_CANVAS_MODIFIED","newOpacity","isLineType","havePath","withoutProcessing","newBrushSize","newBrush","containerSizes","scrollSizes","alignMode","newAligmentCss","withAnimation","doNotUseDelay","imageOffset","EVENT_DESTROY","defaultActivePlugin","pluginMode","defaultTool","ignoreOptions","saveAfterInactiveSec","__activityTimer","fObject","objProps","objectControls","objectControlsTouch","propertyName","alert","temporaryStyles","_temporaryStyles","considerZoom","absolutePosition","scaledTop","scaledLeft","core_Drawer","Drawer_DefaultOptions","EVENT_BEFORE_SHAPE_ADD","EVENT_AFTER_SHAPE_ADD","eventResult","needToLogErors","insideEvent","Drawer_Events","validateParams","100","101","102","200","201","202","203","204","205","206","207","208","226","300","301","302","303","304","305","307","308","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","421","422","423","424","425","426","428","429","431","451","500","501","502","503","504","505","506","507","508","509","510","511","arrayCopy","config","localStorage","registerImmediate","nextHandle","tasksByHandle","currentlyRunningATask","attachTo","handle","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","messagePrefix","onGlobalMessage","installPostMessageImplementation","MessageChannel","port1","port2","installMessageChannelImplementation","script","installReadyStateChangeImplementation","task","clearImmediate","scope","Timeout","clearFn","_id","_clearFn","setInterval","clearInterval","unref","ref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","_onTimeout","copyBuffer","Constructor","_classCallCheck","custom","toArrayBuffer","preferBinary","_opts","_body","_headers","setHeader","useFetch","decideMode","_fetchTimer","_onFinish","lowerName","unsafeHeaders","getHeader","removeHeader","headersObj","headersList","keyName","signal","controller","_fetchAbortController","requestTimeout","credentials","withCredentials","_connect","reason","ontimeout","_response","statusValid","flushHeaders","setNoDelay","setSocketKeepAlive","stringifyPrimitive","sep","ks","qs","regexp","maxKeys","kstr","vstr","decode","encode","webpackPolyfill","__WEBPACK_AMD_DEFINE_RESULT__","freeGlobal","maxInt","base","tMin","tMax","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","errors","overflow","not-basic","invalid-input","baseMinusTMin","stringFromCharCode","mapDomain","ucs2decode","extra","counter","ucs2encode","basicToDigit","digitToBasic","digit","flag","adapt","numPoints","firstTime","input","basic","oldi","baseMinusT","inputLength","bias","handledCPCount","basicLength","handledCPCountPlusOne","qMinusT","ucs2","toUnicode","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","b64","lens","getLens","validLen","placeHoldersLen","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","len2","encodeChunk","lookup","tripletToBase64","num"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"drawerjs-repacked\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"drawerjs-repacked\"] = factory();\n\telse\n\t\troot[\"drawerjs-repacked\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 23);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/* build: `node build.js modules=ALL exclude=json,gestures minifier=uglifyjs` */\n /*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */\n\nvar fabric = fabric || { version: \"1.7.2\" };\nif (typeof exports !== 'undefined') {\n  exports.fabric = fabric;\n}\n\nif (typeof document !== 'undefined' && typeof window !== 'undefined') {\n  fabric.document = document;\n  fabric.window = window;\n  // ensure globality even if entire library were function wrapped (as in Meteor.js packaging system)\n  window.fabric = fabric;\n}\nelse {\n  // assume we're running under node.js when document/window are not present\n  fabric.document = require(\"jsdom\")\n    .jsdom(\n      decodeURIComponent(\"%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E\")\n    );\n\n  if (fabric.document.createWindow) {\n    fabric.window = fabric.document.createWindow();\n  } else {\n    fabric.window = fabric.document.parentWindow;\n  }\n}\n\n/**\n * True when in environment that supports touch events\n * @type boolean\n */\nfabric.isTouchSupported = \"ontouchstart\" in fabric.document.documentElement;\n\n/**\n * True when in environment that's probably Node.js\n * @type boolean\n */\nfabric.isLikelyNode = typeof Buffer !== 'undefined' &&\n                      typeof window === 'undefined';\n\n/* _FROM_SVG_START_ */\n/**\n * Attributes parsed from all SVG elements\n * @type array\n */\nfabric.SHARED_ATTRIBUTES = [\n  \"display\",\n  \"transform\",\n  \"fill\", \"fill-opacity\", \"fill-rule\",\n  \"opacity\",\n  \"stroke\", \"stroke-dasharray\", \"stroke-linecap\",\n  \"stroke-linejoin\", \"stroke-miterlimit\",\n  \"stroke-opacity\", \"stroke-width\",\n  \"id\"\n];\n/* _FROM_SVG_END_ */\n\n/**\n * Pixel per Inch as a default value set to 96. Can be changed for more realistic conversion.\n */\nfabric.DPI = 96;\nfabric.reNum = '(?:[-+]?(?:\\\\d+|\\\\d*\\\\.\\\\d+)(?:e[-+]?\\\\d+)?)';\nfabric.fontPaths = { };\n\n/**\n * Cache Object for widths of chars in text rendering.\n */\nfabric.charWidthsCache = { };\n\n/**\n * Device Pixel Ratio\n * @see https://developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/HTML-canvas-guide/SettingUptheCanvas/SettingUptheCanvas.html\n */\nfabric.devicePixelRatio = fabric.window.devicePixelRatio ||\n                          fabric.window.webkitDevicePixelRatio ||\n                          fabric.window.mozDevicePixelRatio ||\n                          1;\n\n\n(function() {\n\n  /**\n   * @private\n   * @param {String} eventName\n   * @param {Function} handler\n   */\n  function _removeEventListener(eventName, handler) {\n    if (!this.__eventListeners[eventName]) {\n      return;\n    }\n    var eventListener = this.__eventListeners[eventName];\n    if (handler) {\n      eventListener[eventListener.indexOf(handler)] = false;\n    }\n    else {\n      fabric.util.array.fill(eventListener, false);\n    }\n  }\n\n  /**\n   * Observes specified event\n   * @deprecated `observe` deprecated since 0.8.34 (use `on` instead)\n   * @memberOf fabric.Observable\n   * @alias on\n   * @param {String|Object} eventName Event name (eg. 'after:render') or object with key/value pairs (eg. {'after:render': handler, 'selection:cleared': handler})\n   * @param {Function} handler Function that receives a notification when an event of the specified type occurs\n   * @return {Self} thisArg\n   * @chainable\n   */\n  function observe(eventName, handler) {\n    if (!this.__eventListeners) {\n      this.__eventListeners = { };\n    }\n    // one object with key/value pairs was passed\n    if (arguments.length === 1) {\n      for (var prop in eventName) {\n        this.on(prop, eventName[prop]);\n      }\n    }\n    else {\n      if (!this.__eventListeners[eventName]) {\n        this.__eventListeners[eventName] = [];\n      }\n      this.__eventListeners[eventName].push(handler);\n    }\n    return this;\n  }\n\n  /**\n   * Stops event observing for a particular event handler. Calling this method\n   * without arguments removes all handlers for all events\n   * @deprecated `stopObserving` deprecated since 0.8.34 (use `off` instead)\n   * @memberOf fabric.Observable\n   * @alias off\n   * @param {String|Object} eventName Event name (eg. 'after:render') or object with key/value pairs (eg. {'after:render': handler, 'selection:cleared': handler})\n   * @param {Function} handler Function to be deleted from EventListeners\n   * @return {Self} thisArg\n   * @chainable\n   */\n  function stopObserving(eventName, handler) {\n    if (!this.__eventListeners) {\n      return;\n    }\n\n    // remove all key/value pairs (event name -> event handler)\n    if (arguments.length === 0) {\n      for (eventName in this.__eventListeners) {\n        _removeEventListener.call(this, eventName);\n      }\n    }\n    // one object with key/value pairs was passed\n    else if (arguments.length === 1 && typeof arguments[0] === 'object') {\n      for (var prop in eventName) {\n        _removeEventListener.call(this, prop, eventName[prop]);\n      }\n    }\n    else {\n      _removeEventListener.call(this, eventName, handler);\n    }\n    return this;\n  }\n\n  /**\n   * Fires event with an optional options object\n   * @deprecated `fire` deprecated since 1.0.7 (use `trigger` instead)\n   * @memberOf fabric.Observable\n   * @alias trigger\n   * @param {String} eventName Event name to fire\n   * @param {Object} [options] Options object\n   * @return {Self} thisArg\n   * @chainable\n   */\n  function fire(eventName, options) {\n    if (!this.__eventListeners) {\n      return;\n    }\n\n    var listenersForEvent = this.__eventListeners[eventName];\n    if (!listenersForEvent) {\n      return;\n    }\n\n    for (var i = 0, len = listenersForEvent.length; i < len; i++) {\n      listenersForEvent[i] && listenersForEvent[i].call(this, options || { });\n    }\n    this.__eventListeners[eventName] = listenersForEvent.filter(function(value) {\n      return value !== false;\n    });\n    return this;\n  }\n\n  /**\n   * @namespace fabric.Observable\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-2#events}\n   * @see {@link http://fabricjs.com/events|Events demo}\n   */\n  fabric.Observable = {\n    observe: observe,\n    stopObserving: stopObserving,\n    fire: fire,\n\n    on: observe,\n    off: stopObserving,\n    trigger: fire\n  };\n})();\n\n\n/**\n * @namespace fabric.Collection\n */\nfabric.Collection = {\n\n  _objects: [],\n\n  /**\n   * Adds objects to collection, Canvas or Group, then renders canvas\n   * (if `renderOnAddRemove` is not `false`).\n   * in case of Group no changes to bounding box are made.\n   * Objects should be instances of (or inherit from) fabric.Object\n   * @param {...fabric.Object} object Zero or more fabric instances\n   * @return {Self} thisArg\n   * @chainable\n   */\n  add: function () {\n    this._objects.push.apply(this._objects, arguments);\n    if (this._onObjectAdded) {\n      for (var i = 0, length = arguments.length; i < length; i++) {\n        this._onObjectAdded(arguments[i]);\n      }\n    }\n    this.renderOnAddRemove && this.renderAll();\n    return this;\n  },\n\n  /**\n   * Inserts an object into collection at specified index, then renders canvas (if `renderOnAddRemove` is not `false`)\n   * An object should be an instance of (or inherit from) fabric.Object\n   * @param {Object} object Object to insert\n   * @param {Number} index Index to insert object at\n   * @param {Boolean} nonSplicing When `true`, no splicing (shifting) of objects occurs\n   * @return {Self} thisArg\n   * @chainable\n   */\n  insertAt: function (object, index, nonSplicing) {\n    var objects = this.getObjects();\n    if (nonSplicing) {\n      objects[index] = object;\n    }\n    else {\n      objects.splice(index, 0, object);\n    }\n    this._onObjectAdded && this._onObjectAdded(object);\n    this.renderOnAddRemove && this.renderAll();\n    return this;\n  },\n\n  /**\n   * Removes objects from a collection, then renders canvas (if `renderOnAddRemove` is not `false`)\n   * @param {...fabric.Object} object Zero or more fabric instances\n   * @return {Self} thisArg\n   * @chainable\n   */\n  remove: function() {\n    var objects = this.getObjects(),\n        index, somethingRemoved = false;\n\n    for (var i = 0, length = arguments.length; i < length; i++) {\n      index = objects.indexOf(arguments[i]);\n\n      // only call onObjectRemoved if an object was actually removed\n      if (index !== -1) {\n        somethingRemoved = true;\n        objects.splice(index, 1);\n        this._onObjectRemoved && this._onObjectRemoved(arguments[i]);\n      }\n    }\n\n    this.renderOnAddRemove && somethingRemoved && this.renderAll();\n    return this;\n  },\n\n  /**\n   * Executes given function for each object in this group\n   * @param {Function} callback\n   *                   Callback invoked with current object as first argument,\n   *                   index - as second and an array of all objects - as third.\n   *                   Callback is invoked in a context of Global Object (e.g. `window`)\n   *                   when no `context` argument is given\n   *\n   * @param {Object} context Context (aka thisObject)\n   * @return {Self} thisArg\n   * @chainable\n   */\n  forEachObject: function(callback, context) {\n    var objects = this.getObjects();\n    for (var i = 0, len = objects.length; i < len; i++) {\n      callback.call(context, objects[i], i, objects);\n    }\n    return this;\n  },\n\n  /**\n   * Returns an array of children objects of this instance\n   * Type parameter introduced in 1.3.10\n   * @param {String} [type] When specified, only objects of this type are returned\n   * @return {Array}\n   */\n  getObjects: function(type) {\n    if (typeof type === 'undefined') {\n      return this._objects;\n    }\n    return this._objects.filter(function(o) {\n      return o.type === type;\n    });\n  },\n\n  /**\n   * Returns object at specified index\n   * @param {Number} index\n   * @return {Self} thisArg\n   */\n  item: function (index) {\n    return this.getObjects()[index];\n  },\n\n  /**\n   * Returns true if collection contains no objects\n   * @return {Boolean} true if collection is empty\n   */\n  isEmpty: function () {\n    return this.getObjects().length === 0;\n  },\n\n  /**\n   * Returns a size of a collection (i.e: length of an array containing its objects)\n   * @return {Number} Collection size\n   */\n  size: function() {\n    return this.getObjects().length;\n  },\n\n  /**\n   * Returns true if collection contains an object\n   * @param {Object} object Object to check against\n   * @return {Boolean} `true` if collection contains an object\n   */\n  contains: function(object) {\n    return this.getObjects().indexOf(object) > -1;\n  },\n\n  /**\n   * Returns number representation of a collection complexity\n   * @return {Number} complexity\n   */\n  complexity: function () {\n    return this.getObjects().reduce(function (memo, current) {\n      memo += current.complexity ? current.complexity() : 0;\n      return memo;\n    }, 0);\n  }\n};\n\n\n(function(global) {\n\n  var sqrt = Math.sqrt,\n      atan2 = Math.atan2,\n      pow = Math.pow,\n      abs = Math.abs,\n      PiBy180 = Math.PI / 180;\n\n  /**\n   * @namespace fabric.util\n   */\n  fabric.util = {\n\n    /**\n     * Removes value from an array.\n     * Presence of value (and its position in an array) is determined via `Array.prototype.indexOf`\n     * @static\n     * @memberOf fabric.util\n     * @param {Array} array\n     * @param {*} value\n     * @return {Array} original array\n     */\n    removeFromArray: function(array, value) {\n      var idx = array.indexOf(value);\n      if (idx !== -1) {\n        array.splice(idx, 1);\n      }\n      return array;\n    },\n\n    /**\n     * Returns random number between 2 specified ones.\n     * @static\n     * @memberOf fabric.util\n     * @param {Number} min lower limit\n     * @param {Number} max upper limit\n     * @return {Number} random value (between min and max)\n     */\n    getRandomInt: function(min, max) {\n      return Math.floor(Math.random() * (max - min + 1)) + min;\n    },\n\n    /**\n     * Transforms degrees to radians.\n     * @static\n     * @memberOf fabric.util\n     * @param {Number} degrees value in degrees\n     * @return {Number} value in radians\n     */\n    degreesToRadians: function(degrees) {\n      return degrees * PiBy180;\n    },\n\n    /**\n     * Transforms radians to degrees.\n     * @static\n     * @memberOf fabric.util\n     * @param {Number} radians value in radians\n     * @return {Number} value in degrees\n     */\n    radiansToDegrees: function(radians) {\n      return radians / PiBy180;\n    },\n\n    /**\n     * Rotates `point` around `origin` with `radians`\n     * @static\n     * @memberOf fabric.util\n     * @param {fabric.Point} point The point to rotate\n     * @param {fabric.Point} origin The origin of the rotation\n     * @param {Number} radians The radians of the angle for the rotation\n     * @return {fabric.Point} The new rotated point\n     */\n    rotatePoint: function(point, origin, radians) {\n      point.subtractEquals(origin);\n      var v = fabric.util.rotateVector(point, radians);\n      return new fabric.Point(v.x, v.y).addEquals(origin);\n    },\n\n    /**\n     * Rotates `vector` with `radians`\n     * @static\n     * @memberOf fabric.util\n     * @param {Object} vector The vector to rotate (x and y)\n     * @param {Number} radians The radians of the angle for the rotation\n     * @return {Object} The new rotated point\n     */\n    rotateVector: function(vector, radians) {\n      var sin = Math.sin(radians),\n          cos = Math.cos(radians),\n          rx = vector.x * cos - vector.y * sin,\n          ry = vector.x * sin + vector.y * cos;\n      return {\n        x: rx,\n        y: ry\n      };\n    },\n\n    /**\n     * Apply transform t to point p\n     * @static\n     * @memberOf fabric.util\n     * @param  {fabric.Point} p The point to transform\n     * @param  {Array} t The transform\n     * @param  {Boolean} [ignoreOffset] Indicates that the offset should not be applied\n     * @return {fabric.Point} The transformed point\n     */\n    transformPoint: function(p, t, ignoreOffset) {\n      if (ignoreOffset) {\n        return new fabric.Point(\n          t[0] * p.x + t[2] * p.y,\n          t[1] * p.x + t[3] * p.y\n        );\n      }\n      return new fabric.Point(\n        t[0] * p.x + t[2] * p.y + t[4],\n        t[1] * p.x + t[3] * p.y + t[5]\n      );\n    },\n\n    /**\n     * Returns coordinates of points's bounding rectangle (left, top, width, height)\n     * @param {Array} points 4 points array\n     * @return {Object} Object with left, top, width, height properties\n     */\n    makeBoundingBoxFromPoints: function(points) {\n      var xPoints = [points[0].x, points[1].x, points[2].x, points[3].x],\n          minX = fabric.util.array.min(xPoints),\n          maxX = fabric.util.array.max(xPoints),\n          width = Math.abs(minX - maxX),\n          yPoints = [points[0].y, points[1].y, points[2].y, points[3].y],\n          minY = fabric.util.array.min(yPoints),\n          maxY = fabric.util.array.max(yPoints),\n          height = Math.abs(minY - maxY);\n\n      return {\n        left: minX,\n        top: minY,\n        width: width,\n        height: height\n      };\n    },\n\n    /**\n     * Invert transformation t\n     * @static\n     * @memberOf fabric.util\n     * @param {Array} t The transform\n     * @return {Array} The inverted transform\n     */\n    invertTransform: function(t) {\n      var a = 1 / (t[0] * t[3] - t[1] * t[2]),\n          r = [a * t[3], -a * t[1], -a * t[2], a * t[0]],\n          o = fabric.util.transformPoint({ x: t[4], y: t[5] }, r, true);\n      r[4] = -o.x;\n      r[5] = -o.y;\n      return r;\n    },\n\n    /**\n     * A wrapper around Number#toFixed, which contrary to native method returns number, not string.\n     * @static\n     * @memberOf fabric.util\n     * @param {Number|String} number number to operate on\n     * @param {Number} fractionDigits number of fraction digits to \"leave\"\n     * @return {Number}\n     */\n    toFixed: function(number, fractionDigits) {\n      return parseFloat(Number(number).toFixed(fractionDigits));\n    },\n\n    /**\n     * Converts from attribute value to pixel value if applicable.\n     * Returns converted pixels or original value not converted.\n     * @param {Number|String} value number to operate on\n     * @param {Number} fontSize\n     * @return {Number|String}\n     */\n    parseUnit: function(value, fontSize) {\n      var unit = /\\D{0,2}$/.exec(value),\n          number = parseFloat(value);\n      if (!fontSize) {\n        fontSize = fabric.Text.DEFAULT_SVG_FONT_SIZE;\n      }\n      switch (unit[0]) {\n        case 'mm':\n          return number * fabric.DPI / 25.4;\n\n        case 'cm':\n          return number * fabric.DPI / 2.54;\n\n        case 'in':\n          return number * fabric.DPI;\n\n        case 'pt':\n          return number * fabric.DPI / 72; // or * 4 / 3\n\n        case 'pc':\n          return number * fabric.DPI / 72 * 12; // or * 16\n\n        case 'em':\n          return number * fontSize;\n\n        default:\n          return number;\n      }\n    },\n\n    /**\n     * Function which always returns `false`.\n     * @static\n     * @memberOf fabric.util\n     * @return {Boolean}\n     */\n    falseFunction: function() {\n      return false;\n    },\n\n    /**\n     * Returns klass \"Class\" object of given namespace\n     * @memberOf fabric.util\n     * @param {String} type Type of object (eg. 'circle')\n     * @param {String} namespace Namespace to get klass \"Class\" object from\n     * @return {Object} klass \"Class\"\n     */\n    getKlass: function(type, namespace) {\n      // capitalize first letter only\n      type = fabric.util.string.camelize(type.charAt(0).toUpperCase() + type.slice(1));\n      return fabric.util.resolveNamespace(namespace)[type];\n    },\n\n    /**\n     * Returns object of given namespace\n     * @memberOf fabric.util\n     * @param {String} namespace Namespace string e.g. 'fabric.Image.filter' or 'fabric'\n     * @return {Object} Object for given namespace (default fabric)\n     */\n    resolveNamespace: function(namespace) {\n      if (!namespace) {\n        return fabric;\n      }\n\n      var parts = namespace.split('.'),\n          len = parts.length, i,\n          obj = global || fabric.window;\n\n      for (i = 0; i < len; ++i) {\n        obj = obj[parts[i]];\n      }\n\n      return obj;\n    },\n\n    /**\n     * Loads image element from given url and passes it to a callback\n     * @memberOf fabric.util\n     * @param {String} url URL representing an image\n     * @param {Function} callback Callback; invoked with loaded image\n     * @param {*} [context] Context to invoke callback in\n     * @param {Object} [crossOrigin] crossOrigin value to set image element to\n     */\n    loadImage: function(url, callback, context, crossOrigin) {\n      if (!url) {\n        callback && callback.call(context, url);\n        return;\n      }\n\n      var img = fabric.util.createImage();\n\n      /** @ignore */\n      img.onload = function () {\n        callback && callback.call(context, img);\n        img = img.onload = img.onerror = null;\n      };\n\n      /** @ignore */\n      img.onerror = function() {\n        fabric.log('Error loading ' + img.src);\n        callback && callback.call(context, null, true);\n        img = img.onload = img.onerror = null;\n      };\n\n      // data-urls appear to be buggy with crossOrigin\n      // https://github.com/kangax/fabric.js/commit/d0abb90f1cd5c5ef9d2a94d3fb21a22330da3e0a#commitcomment-4513767\n      // see https://code.google.com/p/chromium/issues/detail?id=315152\n      //     https://bugzilla.mozilla.org/show_bug.cgi?id=935069\n      if (url.indexOf('data') !== 0 && crossOrigin) {\n        img.crossOrigin = crossOrigin;\n      }\n\n      img.src = url;\n    },\n\n    /**\n     * Creates corresponding fabric instances from their object representations\n     * @static\n     * @memberOf fabric.util\n     * @param {Array} objects Objects to enliven\n     * @param {Function} callback Callback to invoke when all objects are created\n     * @param {String} namespace Namespace to get klass \"Class\" object from\n     * @param {Function} reviver Method for further parsing of object elements,\n     * called after each fabric object created.\n     */\n    enlivenObjects: function(objects, callback, namespace, reviver) {\n      objects = objects || [];\n\n      function onLoaded() {\n        if (++numLoadedObjects === numTotalObjects) {\n          callback && callback(enlivenedObjects);\n        }\n      }\n\n      var enlivenedObjects = [],\n          numLoadedObjects = 0,\n          numTotalObjects = objects.length;\n\n      if (!numTotalObjects) {\n        callback && callback(enlivenedObjects);\n        return;\n      }\n\n      objects.forEach(function (o, index) {\n        // if sparse array\n        if (!o || !o.type) {\n          onLoaded();\n          return;\n        }\n        var klass = fabric.util.getKlass(o.type, namespace);\n        if (klass.async) {\n          klass.fromObject(o, function (obj, error) {\n            if (!error) {\n              enlivenedObjects[index] = obj;\n              reviver && reviver(o, enlivenedObjects[index]);\n            }\n            onLoaded();\n          });\n        }\n        else {\n          enlivenedObjects[index] = klass.fromObject(o);\n          reviver && reviver(o, enlivenedObjects[index]);\n          onLoaded();\n        }\n      });\n    },\n\n    /**\n     * Groups SVG elements (usually those retrieved from SVG document)\n     * @static\n     * @memberOf fabric.util\n     * @param {Array} elements SVG elements to group\n     * @param {Object} [options] Options object\n     * @param {String} path Value to set sourcePath to\n     * @return {fabric.Object|fabric.PathGroup}\n     */\n    groupSVGElements: function(elements, options, path) {\n      var object;\n\n      object = new fabric.PathGroup(elements, options);\n\n      if (typeof path !== 'undefined') {\n        object.setSourcePath(path);\n      }\n      return object;\n    },\n\n    /**\n     * Populates an object with properties of another object\n     * @static\n     * @memberOf fabric.util\n     * @param {Object} source Source object\n     * @param {Object} destination Destination object\n     * @return {Array} properties Propertie names to include\n     */\n    populateWithProperties: function(source, destination, properties) {\n      if (properties && Object.prototype.toString.call(properties) === '[object Array]') {\n        for (var i = 0, len = properties.length; i < len; i++) {\n          if (properties[i] in source) {\n            destination[properties[i]] = source[properties[i]];\n          }\n        }\n      }\n    },\n\n    /**\n     * Draws a dashed line between two points\n     *\n     * This method is used to draw dashed line around selection area.\n     * See <a href=\"http://stackoverflow.com/questions/4576724/dotted-stroke-in-canvas\">dotted stroke in canvas</a>\n     *\n     * @param {CanvasRenderingContext2D} ctx context\n     * @param {Number} x  start x coordinate\n     * @param {Number} y start y coordinate\n     * @param {Number} x2 end x coordinate\n     * @param {Number} y2 end y coordinate\n     * @param {Array} da dash array pattern\n     */\n    drawDashedLine: function(ctx, x, y, x2, y2, da) {\n      var dx = x2 - x,\n          dy = y2 - y,\n          len = sqrt(dx * dx + dy * dy),\n          rot = atan2(dy, dx),\n          dc = da.length,\n          di = 0,\n          draw = true;\n\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.moveTo(0, 0);\n      ctx.rotate(rot);\n\n      x = 0;\n      while (len > x) {\n        x += da[di++ % dc];\n        if (x > len) {\n          x = len;\n        }\n        ctx[draw ? 'lineTo' : 'moveTo'](x, 0);\n        draw = !draw;\n      }\n\n      ctx.restore();\n    },\n\n    /**\n     * Creates canvas element and initializes it via excanvas if necessary\n     * @static\n     * @memberOf fabric.util\n     * @param {CanvasElement} [canvasEl] optional canvas element to initialize;\n     * when not given, element is created implicitly\n     * @return {CanvasElement} initialized canvas element\n     */\n    createCanvasElement: function(canvasEl) {\n      canvasEl || (canvasEl = fabric.document.createElement('canvas'));\n      /* eslint-disable camelcase */\n      if (!canvasEl.getContext && typeof G_vmlCanvasManager !== 'undefined') {\n        G_vmlCanvasManager.initElement(canvasEl);\n      }\n      /* eslint-enable camelcase */\n      return canvasEl;\n    },\n\n    /**\n     * Creates image element (works on client and node)\n     * @static\n     * @memberOf fabric.util\n     * @return {HTMLImageElement} HTML image element\n     */\n    createImage: function() {\n      return fabric.isLikelyNode\n        ? new (require('canvas').Image)()\n        : fabric.document.createElement('img');\n    },\n\n    /**\n     * Creates accessors (getXXX, setXXX) for a \"class\", based on \"stateProperties\" array\n     * @static\n     * @memberOf fabric.util\n     * @param {Object} klass \"Class\" to create accessors for\n     */\n    createAccessors: function(klass) {\n      var proto = klass.prototype, i, propName,\n          capitalizedPropName, setterName, getterName;\n\n      for (i = proto.stateProperties.length; i--; ) {\n\n        propName = proto.stateProperties[i];\n        capitalizedPropName = propName.charAt(0).toUpperCase() + propName.slice(1);\n        setterName = 'set' + capitalizedPropName;\n        getterName = 'get' + capitalizedPropName;\n\n        // using `new Function` for better introspection\n        if (!proto[getterName]) {\n          proto[getterName] = (function(property) {\n            return new Function('return this.get(\"' + property + '\")');\n          })(propName);\n        }\n        if (!proto[setterName]) {\n          proto[setterName] = (function(property) {\n            return new Function('value', 'return this.set(\"' + property + '\", value)');\n          })(propName);\n        }\n      }\n    },\n\n    /**\n     * @static\n     * @memberOf fabric.util\n     * @param {fabric.Object} receiver Object implementing `clipTo` method\n     * @param {CanvasRenderingContext2D} ctx Context to clip\n     */\n    clipContext: function(receiver, ctx) {\n      ctx.save();\n      ctx.beginPath();\n      receiver.clipTo(ctx);\n      ctx.clip();\n    },\n\n    /**\n     * Multiply matrix A by matrix B to nest transformations\n     * @static\n     * @memberOf fabric.util\n     * @param  {Array} a First transformMatrix\n     * @param  {Array} b Second transformMatrix\n     * @param  {Boolean} is2x2 flag to multiply matrices as 2x2 matrices\n     * @return {Array} The product of the two transform matrices\n     */\n    multiplyTransformMatrices: function(a, b, is2x2) {\n      // Matrix multiply a * b\n      return [\n        a[0] * b[0] + a[2] * b[1],\n        a[1] * b[0] + a[3] * b[1],\n        a[0] * b[2] + a[2] * b[3],\n        a[1] * b[2] + a[3] * b[3],\n        is2x2 ? 0 : a[0] * b[4] + a[2] * b[5] + a[4],\n        is2x2 ? 0 : a[1] * b[4] + a[3] * b[5] + a[5]\n      ];\n    },\n\n    /**\n     * Decomposes standard 2x2 matrix into transform componentes\n     * @static\n     * @memberOf fabric.util\n     * @param  {Array} a transformMatrix\n     * @return {Object} Components of transform\n     */\n    qrDecompose: function(a) {\n      var angle = atan2(a[1], a[0]),\n          denom = pow(a[0], 2) + pow(a[1], 2),\n          scaleX = sqrt(denom),\n          scaleY = (a[0] * a[3] - a[2] * a [1]) / scaleX,\n          skewX = atan2(a[0] * a[2] + a[1] * a [3], denom);\n      return {\n        angle: angle  / PiBy180,\n        scaleX: scaleX,\n        scaleY: scaleY,\n        skewX: skewX / PiBy180,\n        skewY: 0,\n        translateX: a[4],\n        translateY: a[5]\n      };\n    },\n\n    customTransformMatrix: function(scaleX, scaleY, skewX) {\n      var skewMatrixX = [1, 0, abs(Math.tan(skewX * PiBy180)), 1],\n          scaleMatrix = [abs(scaleX), 0, 0, abs(scaleY)];\n      return fabric.util.multiplyTransformMatrices(scaleMatrix, skewMatrixX, true);\n    },\n\n    resetObjectTransform: function (target) {\n      target.scaleX = 1;\n      target.scaleY = 1;\n      target.skewX = 0;\n      target.skewY = 0;\n      target.flipX = false;\n      target.flipY = false;\n      target.setAngle(0);\n    },\n\n    /**\n     * Returns string representation of function body\n     * @param {Function} fn Function to get body of\n     * @return {String} Function body\n     */\n    getFunctionBody: function(fn) {\n      return (String(fn).match(/function[^{]*\\{([\\s\\S]*)\\}/) || {})[1];\n    },\n\n    /**\n     * Returns true if context has transparent pixel\n     * at specified location (taking tolerance into account)\n     * @param {CanvasRenderingContext2D} ctx context\n     * @param {Number} x x coordinate\n     * @param {Number} y y coordinate\n     * @param {Number} tolerance Tolerance\n     */\n    isTransparent: function(ctx, x, y, tolerance) {\n\n      // If tolerance is > 0 adjust start coords to take into account.\n      // If moves off Canvas fix to 0\n      if (tolerance > 0) {\n        if (x > tolerance) {\n          x -= tolerance;\n        }\n        else {\n          x = 0;\n        }\n        if (y > tolerance) {\n          y -= tolerance;\n        }\n        else {\n          y = 0;\n        }\n      }\n\n      var _isTransparent = true, i, temp,\n          imageData = ctx.getImageData(x, y, (tolerance * 2) || 1, (tolerance * 2) || 1),\n          l = imageData.data.length;\n\n      // Split image data - for tolerance > 1, pixelDataSize = 4;\n      for (i = 3; i < l; i += 4) {\n        temp = imageData.data[i];\n        _isTransparent = temp <= 0;\n        if (_isTransparent === false) {\n          break; // Stop if colour found\n        }\n      }\n\n      imageData = null;\n\n      return _isTransparent;\n    },\n\n    /**\n     * Parse preserveAspectRatio attribute from element\n     * @param {string} attribute to be parsed\n     * @return {Object} an object containing align and meetOrSlice attribute\n     */\n    parsePreserveAspectRatioAttribute: function(attribute) {\n      var meetOrSlice = 'meet', alignX = 'Mid', alignY = 'Mid',\n          aspectRatioAttrs = attribute.split(' '), align;\n\n      if (aspectRatioAttrs && aspectRatioAttrs.length) {\n        meetOrSlice = aspectRatioAttrs.pop();\n        if (meetOrSlice !== 'meet' && meetOrSlice !== 'slice') {\n          align = meetOrSlice;\n          meetOrSlice = 'meet';\n        }\n        else if (aspectRatioAttrs.length) {\n          align = aspectRatioAttrs.pop();\n        }\n      }\n      //divide align in alignX and alignY\n      alignX = align !== 'none' ? align.slice(1, 4) : 'none';\n      alignY = align !== 'none' ? align.slice(5, 8) : 'none';\n      return {\n        meetOrSlice: meetOrSlice,\n        alignX: alignX,\n        alignY: alignY\n      };\n    },\n\n    /**\n     * Clear char widths cache for a font family.\n     * @memberOf fabric.util\n     * @param {String} [fontFamily] font family to clear\n     */\n    clearFabricFontCache: function(fontFamily) {\n      if (!fontFamily) {\n        fabric.charWidthsCache = { };\n      }\n      else if (fabric.charWidthsCache[fontFamily]) {\n        delete fabric.charWidthsCache[fontFamily];\n      }\n    }\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function() {\n\n  var arcToSegmentsCache = { },\n      segmentToBezierCache = { },\n      boundsOfCurveCache = { },\n      _join = Array.prototype.join;\n\n  /* Adapted from http://dxr.mozilla.org/mozilla-central/source/content/svg/content/src/nsSVGPathDataParser.cpp\n   * by Andrea Bogazzi code is under MPL. if you don't have a copy of the license you can take it here\n   * http://mozilla.org/MPL/2.0/\n   */\n  function arcToSegments(toX, toY, rx, ry, large, sweep, rotateX) {\n    var argsString = _join.call(arguments);\n    if (arcToSegmentsCache[argsString]) {\n      return arcToSegmentsCache[argsString];\n    }\n\n    var PI = Math.PI, th = rotateX * PI / 180,\n        sinTh = Math.sin(th),\n        cosTh = Math.cos(th),\n        fromX = 0, fromY = 0;\n\n    rx = Math.abs(rx);\n    ry = Math.abs(ry);\n\n    var px = -cosTh * toX * 0.5 - sinTh * toY * 0.5,\n        py = -cosTh * toY * 0.5 + sinTh * toX * 0.5,\n        rx2 = rx * rx, ry2 = ry * ry, py2 = py * py, px2 = px * px,\n        pl = rx2 * ry2 - rx2 * py2 - ry2 * px2,\n        root = 0;\n\n    if (pl < 0) {\n      var s = Math.sqrt(1 - pl / (rx2 * ry2));\n      rx *= s;\n      ry *= s;\n    }\n    else {\n      root = (large === sweep ? -1.0 : 1.0) *\n              Math.sqrt( pl / (rx2 * py2 + ry2 * px2));\n    }\n\n    var cx = root * rx * py / ry,\n        cy = -root * ry * px / rx,\n        cx1 = cosTh * cx - sinTh * cy + toX * 0.5,\n        cy1 = sinTh * cx + cosTh * cy + toY * 0.5,\n        mTheta = calcVectorAngle(1, 0, (px - cx) / rx, (py - cy) / ry),\n        dtheta = calcVectorAngle((px - cx) / rx, (py - cy) / ry, (-px - cx) / rx, (-py - cy) / ry);\n\n    if (sweep === 0 && dtheta > 0) {\n      dtheta -= 2 * PI;\n    }\n    else if (sweep === 1 && dtheta < 0) {\n      dtheta += 2 * PI;\n    }\n\n    // Convert into cubic bezier segments <= 90deg\n    var segments = Math.ceil(Math.abs(dtheta / PI * 2)),\n        result = [], mDelta = dtheta / segments,\n        mT = 8 / 3 * Math.sin(mDelta / 4) * Math.sin(mDelta / 4) / Math.sin(mDelta / 2),\n        th3 = mTheta + mDelta;\n\n    for (var i = 0; i < segments; i++) {\n      result[i] = segmentToBezier(mTheta, th3, cosTh, sinTh, rx, ry, cx1, cy1, mT, fromX, fromY);\n      fromX = result[i][4];\n      fromY = result[i][5];\n      mTheta = th3;\n      th3 += mDelta;\n    }\n    arcToSegmentsCache[argsString] = result;\n    return result;\n  }\n\n  function segmentToBezier(th2, th3, cosTh, sinTh, rx, ry, cx1, cy1, mT, fromX, fromY) {\n    var argsString2 = _join.call(arguments);\n    if (segmentToBezierCache[argsString2]) {\n      return segmentToBezierCache[argsString2];\n    }\n\n    var costh2 = Math.cos(th2),\n        sinth2 = Math.sin(th2),\n        costh3 = Math.cos(th3),\n        sinth3 = Math.sin(th3),\n        toX = cosTh * rx * costh3 - sinTh * ry * sinth3 + cx1,\n        toY = sinTh * rx * costh3 + cosTh * ry * sinth3 + cy1,\n        cp1X = fromX + mT * ( -cosTh * rx * sinth2 - sinTh * ry * costh2),\n        cp1Y = fromY + mT * ( -sinTh * rx * sinth2 + cosTh * ry * costh2),\n        cp2X = toX + mT * ( cosTh * rx * sinth3 + sinTh * ry * costh3),\n        cp2Y = toY + mT * ( sinTh * rx * sinth3 - cosTh * ry * costh3);\n\n    segmentToBezierCache[argsString2] = [\n      cp1X, cp1Y,\n      cp2X, cp2Y,\n      toX, toY\n    ];\n    return segmentToBezierCache[argsString2];\n  }\n\n  /*\n   * Private\n   */\n  function calcVectorAngle(ux, uy, vx, vy) {\n    var ta = Math.atan2(uy, ux),\n        tb = Math.atan2(vy, vx);\n    if (tb >= ta) {\n      return tb - ta;\n    }\n    else {\n      return 2 * Math.PI - (ta - tb);\n    }\n  }\n\n  /**\n   * Draws arc\n   * @param {CanvasRenderingContext2D} ctx\n   * @param {Number} fx\n   * @param {Number} fy\n   * @param {Array} coords\n   */\n  fabric.util.drawArc = function(ctx, fx, fy, coords) {\n    var rx = coords[0],\n        ry = coords[1],\n        rot = coords[2],\n        large = coords[3],\n        sweep = coords[4],\n        tx = coords[5],\n        ty = coords[6],\n        segs = [[], [], [], []],\n        segsNorm = arcToSegments(tx - fx, ty - fy, rx, ry, large, sweep, rot);\n\n    for (var i = 0, len = segsNorm.length; i < len; i++) {\n      segs[i][0] = segsNorm[i][0] + fx;\n      segs[i][1] = segsNorm[i][1] + fy;\n      segs[i][2] = segsNorm[i][2] + fx;\n      segs[i][3] = segsNorm[i][3] + fy;\n      segs[i][4] = segsNorm[i][4] + fx;\n      segs[i][5] = segsNorm[i][5] + fy;\n      ctx.bezierCurveTo.apply(ctx, segs[i]);\n    }\n  };\n\n  /**\n   * Calculate bounding box of a elliptic-arc\n   * @param {Number} fx start point of arc\n   * @param {Number} fy\n   * @param {Number} rx horizontal radius\n   * @param {Number} ry vertical radius\n   * @param {Number} rot angle of horizontal axe\n   * @param {Number} large 1 or 0, whatever the arc is the big or the small on the 2 points\n   * @param {Number} sweep 1 or 0, 1 clockwise or counterclockwise direction\n   * @param {Number} tx end point of arc\n   * @param {Number} ty\n   */\n  fabric.util.getBoundsOfArc = function(fx, fy, rx, ry, rot, large, sweep, tx, ty) {\n\n    var fromX = 0, fromY = 0, bound, bounds = [],\n        segs = arcToSegments(tx - fx, ty - fy, rx, ry, large, sweep, rot);\n\n    for (var i = 0, len = segs.length; i < len; i++) {\n      bound = getBoundsOfCurve(fromX, fromY, segs[i][0], segs[i][1], segs[i][2], segs[i][3], segs[i][4], segs[i][5]);\n      bounds.push({ x: bound[0].x + fx, y: bound[0].y + fy });\n      bounds.push({ x: bound[1].x + fx, y: bound[1].y + fy });\n      fromX = segs[i][4];\n      fromY = segs[i][5];\n    }\n    return bounds;\n  };\n\n  /**\n   * Calculate bounding box of a beziercurve\n   * @param {Number} x0 starting point\n   * @param {Number} y0\n   * @param {Number} x1 first control point\n   * @param {Number} y1\n   * @param {Number} x2 secondo control point\n   * @param {Number} y2\n   * @param {Number} x3 end of beizer\n   * @param {Number} y3\n   */\n  // taken from http://jsbin.com/ivomiq/56/edit  no credits available for that.\n  function getBoundsOfCurve(x0, y0, x1, y1, x2, y2, x3, y3) {\n    var argsString = _join.call(arguments);\n    if (boundsOfCurveCache[argsString]) {\n      return boundsOfCurveCache[argsString];\n    }\n\n    var sqrt = Math.sqrt,\n        min = Math.min, max = Math.max,\n        abs = Math.abs, tvalues = [],\n        bounds = [[], []],\n        a, b, c, t, t1, t2, b2ac, sqrtb2ac;\n\n    b = 6 * x0 - 12 * x1 + 6 * x2;\n    a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\n    c = 3 * x1 - 3 * x0;\n\n    for (var i = 0; i < 2; ++i) {\n      if (i > 0) {\n        b = 6 * y0 - 12 * y1 + 6 * y2;\n        a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\n        c = 3 * y1 - 3 * y0;\n      }\n\n      if (abs(a) < 1e-12) {\n        if (abs(b) < 1e-12) {\n          continue;\n        }\n        t = -c / b;\n        if (0 < t && t < 1) {\n          tvalues.push(t);\n        }\n        continue;\n      }\n      b2ac = b * b - 4 * c * a;\n      if (b2ac < 0) {\n        continue;\n      }\n      sqrtb2ac = sqrt(b2ac);\n      t1 = (-b + sqrtb2ac) / (2 * a);\n      if (0 < t1 && t1 < 1) {\n        tvalues.push(t1);\n      }\n      t2 = (-b - sqrtb2ac) / (2 * a);\n      if (0 < t2 && t2 < 1) {\n        tvalues.push(t2);\n      }\n    }\n\n    var x, y, j = tvalues.length, jlen = j, mt;\n    while (j--) {\n      t = tvalues[j];\n      mt = 1 - t;\n      x = (mt * mt * mt * x0) + (3 * mt * mt * t * x1) + (3 * mt * t * t * x2) + (t * t * t * x3);\n      bounds[0][j] = x;\n\n      y = (mt * mt * mt * y0) + (3 * mt * mt * t * y1) + (3 * mt * t * t * y2) + (t * t * t * y3);\n      bounds[1][j] = y;\n    }\n\n    bounds[0][jlen] = x0;\n    bounds[1][jlen] = y0;\n    bounds[0][jlen + 1] = x3;\n    bounds[1][jlen + 1] = y3;\n    var result = [\n      {\n        x: min.apply(null, bounds[0]),\n        y: min.apply(null, bounds[1])\n      },\n      {\n        x: max.apply(null, bounds[0]),\n        y: max.apply(null, bounds[1])\n      }\n    ];\n    boundsOfCurveCache[argsString] = result;\n    return result;\n  }\n\n  fabric.util.getBoundsOfCurve = getBoundsOfCurve;\n\n})();\n\n\n(function() {\n\n  var slice = Array.prototype.slice;\n\n  /* _ES5_COMPAT_START_ */\n\n  if (!Array.prototype.indexOf) {\n    /**\n     * Finds index of an element in an array\n     * @param {*} searchElement\n     * @return {Number}\n     */\n    Array.prototype.indexOf = function (searchElement /*, fromIndex */ ) {\n      if (this === void 0 || this === null) {\n        throw new TypeError();\n      }\n      var t = Object(this), len = t.length >>> 0;\n      if (len === 0) {\n        return -1;\n      }\n      var n = 0;\n      if (arguments.length > 0) {\n        n = Number(arguments[1]);\n        if (n !== n) { // shortcut for verifying if it's NaN\n          n = 0;\n        }\n        else if (n !== 0 && n !== Number.POSITIVE_INFINITY && n !== Number.NEGATIVE_INFINITY) {\n          n = (n > 0 || -1) * Math.floor(Math.abs(n));\n        }\n      }\n      if (n >= len) {\n        return -1;\n      }\n      var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);\n      for (; k < len; k++) {\n        if (k in t && t[k] === searchElement) {\n          return k;\n        }\n      }\n      return -1;\n    };\n  }\n\n  if (!Array.prototype.forEach) {\n    /**\n     * Iterates an array, invoking callback for each element\n     * @param {Function} fn Callback to invoke for each element\n     * @param {Object} [context] Context to invoke callback in\n     * @return {Array}\n     */\n    Array.prototype.forEach = function(fn, context) {\n      for (var i = 0, len = this.length >>> 0; i < len; i++) {\n        if (i in this) {\n          fn.call(context, this[i], i, this);\n        }\n      }\n    };\n  }\n\n  if (!Array.prototype.map) {\n    /**\n     * Returns a result of iterating over an array, invoking callback for each element\n     * @param {Function} fn Callback to invoke for each element\n     * @param {Object} [context] Context to invoke callback in\n     * @return {Array}\n     */\n    Array.prototype.map = function(fn, context) {\n      var result = [];\n      for (var i = 0, len = this.length >>> 0; i < len; i++) {\n        if (i in this) {\n          result[i] = fn.call(context, this[i], i, this);\n        }\n      }\n      return result;\n    };\n  }\n\n  if (!Array.prototype.every) {\n    /**\n     * Returns true if a callback returns truthy value for all elements in an array\n     * @param {Function} fn Callback to invoke for each element\n     * @param {Object} [context] Context to invoke callback in\n     * @return {Boolean}\n     */\n    Array.prototype.every = function(fn, context) {\n      for (var i = 0, len = this.length >>> 0; i < len; i++) {\n        if (i in this && !fn.call(context, this[i], i, this)) {\n          return false;\n        }\n      }\n      return true;\n    };\n  }\n\n  if (!Array.prototype.some) {\n    /**\n     * Returns true if a callback returns truthy value for at least one element in an array\n     * @param {Function} fn Callback to invoke for each element\n     * @param {Object} [context] Context to invoke callback in\n     * @return {Boolean}\n     */\n    Array.prototype.some = function(fn, context) {\n      for (var i = 0, len = this.length >>> 0; i < len; i++) {\n        if (i in this && fn.call(context, this[i], i, this)) {\n          return true;\n        }\n      }\n      return false;\n    };\n  }\n\n  if (!Array.prototype.filter) {\n    /**\n     * Returns the result of iterating over elements in an array\n     * @param {Function} fn Callback to invoke for each element\n     * @param {Object} [context] Context to invoke callback in\n     * @return {Array}\n     */\n    Array.prototype.filter = function(fn, context) {\n      var result = [], val;\n      for (var i = 0, len = this.length >>> 0; i < len; i++) {\n        if (i in this) {\n          val = this[i]; // in case fn mutates this\n          if (fn.call(context, val, i, this)) {\n            result.push(val);\n          }\n        }\n      }\n      return result;\n    };\n  }\n\n  if (!Array.prototype.reduce) {\n    /**\n     * Returns \"folded\" (reduced) result of iterating over elements in an array\n     * @param {Function} fn Callback to invoke for each element\n     * @return {*}\n     */\n    Array.prototype.reduce = function(fn /*, initial*/) {\n      var len = this.length >>> 0,\n          i = 0,\n          rv;\n\n      if (arguments.length > 1) {\n        rv = arguments[1];\n      }\n      else {\n        do {\n          if (i in this) {\n            rv = this[i++];\n            break;\n          }\n          // if array contains no values, no initial value to return\n          if (++i >= len) {\n            throw new TypeError();\n          }\n        }\n        while (true);\n      }\n      for (; i < len; i++) {\n        if (i in this) {\n          rv = fn.call(null, rv, this[i], i, this);\n        }\n      }\n      return rv;\n    };\n  }\n\n  /* _ES5_COMPAT_END_ */\n\n  /**\n   * Invokes method on all items in a given array\n   * @memberOf fabric.util.array\n   * @param {Array} array Array to iterate over\n   * @param {String} method Name of a method to invoke\n   * @return {Array}\n   */\n  function invoke(array, method) {\n    var args = slice.call(arguments, 2), result = [];\n    for (var i = 0, len = array.length; i < len; i++) {\n      result[i] = args.length ? array[i][method].apply(array[i], args) : array[i][method].call(array[i]);\n    }\n    return result;\n  }\n\n  /**\n   * Finds maximum value in array (not necessarily \"first\" one)\n   * @memberOf fabric.util.array\n   * @param {Array} array Array to iterate over\n   * @param {String} byProperty\n   * @return {*}\n   */\n  function max(array, byProperty) {\n    return find(array, byProperty, function(value1, value2) {\n      return value1 >= value2;\n    });\n  }\n\n  /**\n   * Finds minimum value in array (not necessarily \"first\" one)\n   * @memberOf fabric.util.array\n   * @param {Array} array Array to iterate over\n   * @param {String} byProperty\n   * @return {*}\n   */\n  function min(array, byProperty) {\n    return find(array, byProperty, function(value1, value2) {\n      return value1 < value2;\n    });\n  }\n\n  /**\n   * @private\n   */\n  function fill(array, value) {\n    var k = array.length;\n    while (k--) {\n      array[k] = value;\n    }\n    return array;\n  }\n\n  /**\n   * @private\n   */\n  function find(array, byProperty, condition) {\n    if (!array || array.length === 0) {\n      return;\n    }\n\n    var i = array.length - 1,\n        result = byProperty ? array[i][byProperty] : array[i];\n    if (byProperty) {\n      while (i--) {\n        if (condition(array[i][byProperty], result)) {\n          result = array[i][byProperty];\n        }\n      }\n    }\n    else {\n      while (i--) {\n        if (condition(array[i], result)) {\n          result = array[i];\n        }\n      }\n    }\n    return result;\n  }\n\n  /**\n   * @namespace fabric.util.array\n   */\n  fabric.util.array = {\n    fill: fill,\n    invoke: invoke,\n    min: min,\n    max: max\n  };\n\n})();\n\n\n(function() {\n  /**\n   * Copies all enumerable properties of one js object to another\n   * Does not clone or extend fabric.Object subclasses.\n   * @memberOf fabric.util.object\n   * @param {Object} destination Where to copy to\n   * @param {Object} source Where to copy from\n   * @return {Object}\n   */\n\n  function extend(destination, source, deep) {\n    // JScript DontEnum bug is not taken care of\n    // the deep clone is for internal use, is not meant to avoid\n    // javascript traps or cloning html element or self referenced objects.\n    if (deep) {\n      if (!fabric.isLikelyNode && source instanceof Element) {\n        // avoid cloning deep images, canvases,\n        destination = source;\n      }\n      else if (source instanceof Array) {\n        destination = [];\n        for (var i = 0, len = source.length; i < len; i++) {\n          destination[i] = extend({ }, source[i], deep);\n        }\n      }\n      else if (source && typeof source === 'object') {\n        for (var property in source) {\n          if (source.hasOwnProperty(property)) {\n            destination[property] = extend({ }, source[property], deep);\n          }\n        }\n      }\n      else {\n        // this sounds odd for an extend but is ok for recursive use\n        destination = source;\n      }\n    }\n    else {\n      for (var property in source) {\n        destination[property] = source[property];\n      }\n    }\n    return destination;\n  }\n\n  /**\n   * Creates an empty object and copies all enumerable properties of another object to it\n   * @memberOf fabric.util.object\n   * @param {Object} object Object to clone\n   * @return {Object}\n   */\n  function clone(object, deep) {\n    return extend({ }, object, deep);\n  }\n\n  /** @namespace fabric.util.object */\n  fabric.util.object = {\n    extend: extend,\n    clone: clone\n  };\n\n})();\n\n\n(function() {\n\n  /* _ES5_COMPAT_START_ */\n  if (!String.prototype.trim) {\n    /**\n     * Trims a string (removing whitespace from the beginning and the end)\n     * @function external:String#trim\n     * @see <a href=\"https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/Trim\">String#trim on MDN</a>\n     */\n    String.prototype.trim = function () {\n      // this trim is not fully ES3 or ES5 compliant, but it should cover most cases for now\n      return this.replace(/^[\\s\\xA0]+/, '').replace(/[\\s\\xA0]+$/, '');\n    };\n  }\n  /* _ES5_COMPAT_END_ */\n\n  /**\n   * Camelizes a string\n   * @memberOf fabric.util.string\n   * @param {String} string String to camelize\n   * @return {String} Camelized version of a string\n   */\n  function camelize(string) {\n    return string.replace(/-+(.)?/g, function(match, character) {\n      return character ? character.toUpperCase() : '';\n    });\n  }\n\n  /**\n   * Capitalizes a string\n   * @memberOf fabric.util.string\n   * @param {String} string String to capitalize\n   * @param {Boolean} [firstLetterOnly] If true only first letter is capitalized\n   * and other letters stay untouched, if false first letter is capitalized\n   * and other letters are converted to lowercase.\n   * @return {String} Capitalized version of a string\n   */\n  function capitalize(string, firstLetterOnly) {\n    return string.charAt(0).toUpperCase() +\n      (firstLetterOnly ? string.slice(1) : string.slice(1).toLowerCase());\n  }\n\n  /**\n   * Escapes XML in a string\n   * @memberOf fabric.util.string\n   * @param {String} string String to escape\n   * @return {String} Escaped version of a string\n   */\n  function escapeXml(string) {\n    return string.replace(/&/g, '&amp;')\n       .replace(/\"/g, '&quot;')\n       .replace(/'/g, '&apos;')\n       .replace(/</g, '&lt;')\n       .replace(/>/g, '&gt;');\n  }\n\n  /**\n   * String utilities\n   * @namespace fabric.util.string\n   */\n  fabric.util.string = {\n    camelize: camelize,\n    capitalize: capitalize,\n    escapeXml: escapeXml\n  };\n})();\n\n\n/* _ES5_COMPAT_START_ */\n(function() {\n\n  var slice = Array.prototype.slice,\n      apply = Function.prototype.apply,\n      Dummy = function() { };\n\n  if (!Function.prototype.bind) {\n    /**\n     * Cross-browser approximation of ES5 Function.prototype.bind (not fully spec conforming)\n     * @see <a href=\"https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind\">Function#bind on MDN</a>\n     * @param {Object} thisArg Object to bind function to\n     * @param {Any[]} Values to pass to a bound function\n     * @return {Function}\n     */\n    Function.prototype.bind = function(thisArg) {\n      var _this = this, args = slice.call(arguments, 1), bound;\n      if (args.length) {\n        bound = function() {\n          return apply.call(_this, this instanceof Dummy ? this : thisArg, args.concat(slice.call(arguments)));\n        };\n      }\n      else {\n        /** @ignore */\n        bound = function() {\n          return apply.call(_this, this instanceof Dummy ? this : thisArg, arguments);\n        };\n      }\n      Dummy.prototype = this.prototype;\n      bound.prototype = new Dummy();\n\n      return bound;\n    };\n  }\n\n})();\n/* _ES5_COMPAT_END_ */\n\n\n(function() {\n\n  var slice = Array.prototype.slice, emptyFunction = function() { },\n\n      IS_DONTENUM_BUGGY = (function() {\n        for (var p in { toString: 1 }) {\n          if (p === 'toString') {\n            return false;\n          }\n        }\n        return true;\n      })(),\n\n      /** @ignore */\n      addMethods = function(klass, source, parent) {\n        for (var property in source) {\n\n          if (property in klass.prototype &&\n              typeof klass.prototype[property] === 'function' &&\n              (source[property] + '').indexOf('callSuper') > -1) {\n\n            klass.prototype[property] = (function(property) {\n              return function() {\n\n                var superclass = this.constructor.superclass;\n                this.constructor.superclass = parent;\n                var returnValue = source[property].apply(this, arguments);\n                this.constructor.superclass = superclass;\n\n                if (property !== 'initialize') {\n                  return returnValue;\n                }\n              };\n            })(property);\n          }\n          else {\n            klass.prototype[property] = source[property];\n          }\n\n          if (IS_DONTENUM_BUGGY) {\n            if (source.toString !== Object.prototype.toString) {\n              klass.prototype.toString = source.toString;\n            }\n            if (source.valueOf !== Object.prototype.valueOf) {\n              klass.prototype.valueOf = source.valueOf;\n            }\n          }\n        }\n      };\n\n  function Subclass() { }\n\n  function callSuper(methodName) {\n    var fn = this.constructor.superclass.prototype[methodName];\n    return (arguments.length > 1)\n      ? fn.apply(this, slice.call(arguments, 1))\n      : fn.call(this);\n  }\n\n  /**\n   * Helper for creation of \"classes\".\n   * @memberOf fabric.util\n   * @param {Function} [parent] optional \"Class\" to inherit from\n   * @param {Object} [properties] Properties shared by all instances of this class\n   *                  (be careful modifying objects defined here as this would affect all instances)\n   */\n  function createClass() {\n    var parent = null,\n        properties = slice.call(arguments, 0);\n\n    if (typeof properties[0] === 'function') {\n      parent = properties.shift();\n    }\n    function klass() {\n      this.initialize.apply(this, arguments);\n    }\n\n    klass.superclass = parent;\n    klass.subclasses = [];\n\n    if (parent) {\n      Subclass.prototype = parent.prototype;\n      klass.prototype = new Subclass();\n      parent.subclasses.push(klass);\n    }\n    for (var i = 0, length = properties.length; i < length; i++) {\n      addMethods(klass, properties[i], parent);\n    }\n    if (!klass.prototype.initialize) {\n      klass.prototype.initialize = emptyFunction;\n    }\n    klass.prototype.constructor = klass;\n    klass.prototype.callSuper = callSuper;\n    return klass;\n  }\n\n  fabric.util.createClass = createClass;\n})();\n\n\n(function () {\n\n  var unknown = 'unknown';\n\n  /* EVENT HANDLING */\n\n  function areHostMethods(object) {\n    var methodNames = Array.prototype.slice.call(arguments, 1),\n        t, i, len = methodNames.length;\n    for (i = 0; i < len; i++) {\n      t = typeof object[methodNames[i]];\n      if (!(/^(?:function|object|unknown)$/).test(t)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /** @ignore */\n  var getElement,\n      setElement,\n      getUniqueId = (function () {\n        var uid = 0;\n        return function (element) {\n          return element.__uniqueID || (element.__uniqueID = 'uniqueID__' + uid++);\n        };\n      })();\n\n  (function () {\n    var elements = { };\n    /** @ignore */\n    getElement = function (uid) {\n      return elements[uid];\n    };\n    /** @ignore */\n    setElement = function (uid, element) {\n      elements[uid] = element;\n    };\n  })();\n\n  function createListener(uid, handler) {\n    return {\n      handler: handler,\n      wrappedHandler: createWrappedHandler(uid, handler)\n    };\n  }\n\n  function createWrappedHandler(uid, handler) {\n    return function (e) {\n      handler.call(getElement(uid), e || fabric.window.event);\n    };\n  }\n\n  function createDispatcher(uid, eventName) {\n    return function (e) {\n      if (handlers[uid] && handlers[uid][eventName]) {\n        var handlersForEvent = handlers[uid][eventName];\n        for (var i = 0, len = handlersForEvent.length; i < len; i++) {\n          handlersForEvent[i].call(this, e || fabric.window.event);\n        }\n      }\n    };\n  }\n\n  var shouldUseAddListenerRemoveListener = (\n        areHostMethods(fabric.document.documentElement, 'addEventListener', 'removeEventListener') &&\n        areHostMethods(fabric.window, 'addEventListener', 'removeEventListener')),\n\n      shouldUseAttachEventDetachEvent = (\n        areHostMethods(fabric.document.documentElement, 'attachEvent', 'detachEvent') &&\n        areHostMethods(fabric.window, 'attachEvent', 'detachEvent')),\n\n      // IE branch\n      listeners = { },\n\n      // DOM L0 branch\n      handlers = { },\n\n      addListener, removeListener;\n\n  if (shouldUseAddListenerRemoveListener) {\n    /** @ignore */\n    addListener = function (element, eventName, handler) {\n      element.addEventListener(eventName, handler, false);\n    };\n    /** @ignore */\n    removeListener = function (element, eventName, handler) {\n      element.removeEventListener(eventName, handler, false);\n    };\n  }\n\n  else if (shouldUseAttachEventDetachEvent) {\n    /** @ignore */\n    addListener = function (element, eventName, handler) {\n      var uid = getUniqueId(element);\n      setElement(uid, element);\n      if (!listeners[uid]) {\n        listeners[uid] = { };\n      }\n      if (!listeners[uid][eventName]) {\n        listeners[uid][eventName] = [];\n\n      }\n      var listener = createListener(uid, handler);\n      listeners[uid][eventName].push(listener);\n      element.attachEvent('on' + eventName, listener.wrappedHandler);\n    };\n    /** @ignore */\n    removeListener = function (element, eventName, handler) {\n      var uid = getUniqueId(element), listener;\n      if (listeners[uid] && listeners[uid][eventName]) {\n        for (var i = 0, len = listeners[uid][eventName].length; i < len; i++) {\n          listener = listeners[uid][eventName][i];\n          if (listener && listener.handler === handler) {\n            element.detachEvent('on' + eventName, listener.wrappedHandler);\n            listeners[uid][eventName][i] = null;\n          }\n        }\n      }\n    };\n  }\n  else {\n    /** @ignore */\n    addListener = function (element, eventName, handler) {\n      var uid = getUniqueId(element);\n      if (!handlers[uid]) {\n        handlers[uid] = { };\n      }\n      if (!handlers[uid][eventName]) {\n        handlers[uid][eventName] = [];\n        var existingHandler = element['on' + eventName];\n        if (existingHandler) {\n          handlers[uid][eventName].push(existingHandler);\n        }\n        element['on' + eventName] = createDispatcher(uid, eventName);\n      }\n      handlers[uid][eventName].push(handler);\n    };\n    /** @ignore */\n    removeListener = function (element, eventName, handler) {\n      var uid = getUniqueId(element);\n      if (handlers[uid] && handlers[uid][eventName]) {\n        var handlersForEvent = handlers[uid][eventName];\n        for (var i = 0, len = handlersForEvent.length; i < len; i++) {\n          if (handlersForEvent[i] === handler) {\n            handlersForEvent.splice(i, 1);\n          }\n        }\n      }\n    };\n  }\n\n  /**\n   * Adds an event listener to an element\n   * @function\n   * @memberOf fabric.util\n   * @param {HTMLElement} element\n   * @param {String} eventName\n   * @param {Function} handler\n   */\n  fabric.util.addListener = addListener;\n\n  /**\n   * Removes an event listener from an element\n   * @function\n   * @memberOf fabric.util\n   * @param {HTMLElement} element\n   * @param {String} eventName\n   * @param {Function} handler\n   */\n  fabric.util.removeListener = removeListener;\n\n  /**\n   * Cross-browser wrapper for getting event's coordinates\n   * @memberOf fabric.util\n   * @param {Event} event Event object\n   */\n  function getPointer(event) {\n    event || (event = fabric.window.event);\n\n    var element = event.target ||\n                  (typeof event.srcElement !== unknown ? event.srcElement : null),\n\n        scroll = fabric.util.getScrollLeftTop(element);\n\n    return {\n      x: pointerX(event) + scroll.left,\n      y: pointerY(event) + scroll.top\n    };\n  }\n\n  var pointerX = function(event) {\n    // looks like in IE (<9) clientX at certain point (apparently when mouseup fires on VML element)\n    // is represented as COM object, with all the consequences, like \"unknown\" type and error on [[Get]]\n    // need to investigate later\n        return (typeof event.clientX !== unknown ? event.clientX : 0);\n      },\n\n      pointerY = function(event) {\n        return (typeof event.clientY !== unknown ? event.clientY : 0);\n      };\n\n  function _getPointer(event, pageProp, clientProp) {\n    var touchProp = event.type === 'touchend' ? 'changedTouches' : 'touches';\n\n    return (event[touchProp] && event[touchProp][0]\n      ? (event[touchProp][0][pageProp] - (event[touchProp][0][pageProp] - event[touchProp][0][clientProp]))\n        || event[clientProp]\n      : event[clientProp]);\n  }\n\n  if (fabric.isTouchSupported) {\n    pointerX = function(event) {\n      return _getPointer(event, 'pageX', 'clientX');\n    };\n    pointerY = function(event) {\n      return _getPointer(event, 'pageY', 'clientY');\n    };\n  }\n\n  fabric.util.getPointer = getPointer;\n\n  fabric.util.object.extend(fabric.util, fabric.Observable);\n\n})();\n\n\n(function () {\n\n  /**\n   * Cross-browser wrapper for setting element's style\n   * @memberOf fabric.util\n   * @param {HTMLElement} element\n   * @param {Object} styles\n   * @return {HTMLElement} Element that was passed as a first argument\n   */\n  function setStyle(element, styles) {\n    var elementStyle = element.style;\n    if (!elementStyle) {\n      return element;\n    }\n    if (typeof styles === 'string') {\n      element.style.cssText += ';' + styles;\n      return styles.indexOf('opacity') > -1\n        ? setOpacity(element, styles.match(/opacity:\\s*(\\d?\\.?\\d*)/)[1])\n        : element;\n    }\n    for (var property in styles) {\n      if (property === 'opacity') {\n        setOpacity(element, styles[property]);\n      }\n      else {\n        var normalizedProperty = (property === 'float' || property === 'cssFloat')\n          ? (typeof elementStyle.styleFloat === 'undefined' ? 'cssFloat' : 'styleFloat')\n          : property;\n        elementStyle[normalizedProperty] = styles[property];\n      }\n    }\n    return element;\n  }\n\n  var parseEl = fabric.document.createElement('div'),\n      supportsOpacity = typeof parseEl.style.opacity === 'string',\n      supportsFilters = typeof parseEl.style.filter === 'string',\n      reOpacity = /alpha\\s*\\(\\s*opacity\\s*=\\s*([^\\)]+)\\)/,\n\n      /** @ignore */\n      setOpacity = function (element) { return element; };\n\n  if (supportsOpacity) {\n    /** @ignore */\n    setOpacity = function(element, value) {\n      element.style.opacity = value;\n      return element;\n    };\n  }\n  else if (supportsFilters) {\n    /** @ignore */\n    setOpacity = function(element, value) {\n      var es = element.style;\n      if (element.currentStyle && !element.currentStyle.hasLayout) {\n        es.zoom = 1;\n      }\n      if (reOpacity.test(es.filter)) {\n        value = value >= 0.9999 ? '' : ('alpha(opacity=' + (value * 100) + ')');\n        es.filter = es.filter.replace(reOpacity, value);\n      }\n      else {\n        es.filter += ' alpha(opacity=' + (value * 100) + ')';\n      }\n      return element;\n    };\n  }\n\n  fabric.util.setStyle = setStyle;\n\n})();\n\n\n(function() {\n\n  var _slice = Array.prototype.slice;\n\n  /**\n   * Takes id and returns an element with that id (if one exists in a document)\n   * @memberOf fabric.util\n   * @param {String|HTMLElement} id\n   * @return {HTMLElement|null}\n   */\n  function getById(id) {\n    return typeof id === 'string' ? fabric.document.getElementById(id) : id;\n  }\n\n  var sliceCanConvertNodelists,\n      /**\n       * Converts an array-like object (e.g. arguments or NodeList) to an array\n       * @memberOf fabric.util\n       * @param {Object} arrayLike\n       * @return {Array}\n       */\n      toArray = function(arrayLike) {\n        return _slice.call(arrayLike, 0);\n      };\n\n  try {\n    sliceCanConvertNodelists = toArray(fabric.document.childNodes) instanceof Array;\n  }\n  catch (err) { }\n\n  if (!sliceCanConvertNodelists) {\n    toArray = function(arrayLike) {\n      var arr = new Array(arrayLike.length), i = arrayLike.length;\n      while (i--) {\n        arr[i] = arrayLike[i];\n      }\n      return arr;\n    };\n  }\n\n  /**\n   * Creates specified element with specified attributes\n   * @memberOf fabric.util\n   * @param {String} tagName Type of an element to create\n   * @param {Object} [attributes] Attributes to set on an element\n   * @return {HTMLElement} Newly created element\n   */\n  function makeElement(tagName, attributes) {\n    var el = fabric.document.createElement(tagName);\n    for (var prop in attributes) {\n      if (prop === 'class') {\n        el.className = attributes[prop];\n      }\n      else if (prop === 'for') {\n        el.htmlFor = attributes[prop];\n      }\n      else {\n        el.setAttribute(prop, attributes[prop]);\n      }\n    }\n    return el;\n  }\n\n  /**\n   * Adds class to an element\n   * @memberOf fabric.util\n   * @param {HTMLElement} element Element to add class to\n   * @param {String} className Class to add to an element\n   */\n  function addClass(element, className) {\n    if (element && (' ' + element.className + ' ').indexOf(' ' + className + ' ') === -1) {\n      element.className += (element.className ? ' ' : '') + className;\n    }\n  }\n\n  /**\n   * Wraps element with another element\n   * @memberOf fabric.util\n   * @param {HTMLElement} element Element to wrap\n   * @param {HTMLElement|String} wrapper Element to wrap with\n   * @param {Object} [attributes] Attributes to set on a wrapper\n   * @return {HTMLElement} wrapper\n   */\n  function wrapElement(element, wrapper, attributes) {\n    if (typeof wrapper === 'string') {\n      wrapper = makeElement(wrapper, attributes);\n    }\n    if (element.parentNode) {\n      element.parentNode.replaceChild(wrapper, element);\n    }\n    wrapper.appendChild(element);\n    return wrapper;\n  }\n\n  /**\n   * Returns element scroll offsets\n   * @memberOf fabric.util\n   * @param {HTMLElement} element Element to operate on\n   * @return {Object} Object with left/top values\n   */\n  function getScrollLeftTop(element) {\n\n    var left = 0,\n        top = 0,\n        docElement = fabric.document.documentElement,\n        body = fabric.document.body || {\n          scrollLeft: 0, scrollTop: 0\n        };\n\n    // While loop checks (and then sets element to) .parentNode OR .host\n    //  to account for ShadowDOM. We still want to traverse up out of ShadowDOM,\n    //  but the .parentNode of a root ShadowDOM node will always be null, instead\n    //  it should be accessed through .host. See http://stackoverflow.com/a/24765528/4383938\n    while (element && (element.parentNode || element.host)) {\n\n      // Set element to element parent, or 'host' in case of ShadowDOM\n      element = element.parentNode || element.host;\n\n      if (element === fabric.document) {\n        left = body.scrollLeft || docElement.scrollLeft || 0;\n        top = body.scrollTop ||  docElement.scrollTop || 0;\n      }\n      else {\n        left += element.scrollLeft || 0;\n        top += element.scrollTop || 0;\n      }\n\n      if (element.nodeType === 1 &&\n          fabric.util.getElementStyle(element, 'position') === 'fixed') {\n        break;\n      }\n    }\n\n    return { left: left, top: top };\n  }\n\n  /**\n   * Returns offset for a given element\n   * @function\n   * @memberOf fabric.util\n   * @param {HTMLElement} element Element to get offset for\n   * @return {Object} Object with \"left\" and \"top\" properties\n   */\n  function getElementOffset(element) {\n    var docElem,\n        doc = element && element.ownerDocument,\n        box = { left: 0, top: 0 },\n        offset = { left: 0, top: 0 },\n        scrollLeftTop,\n        offsetAttributes = {\n          borderLeftWidth: 'left',\n          borderTopWidth:  'top',\n          paddingLeft:     'left',\n          paddingTop:      'top'\n        };\n\n    if (!doc) {\n      return offset;\n    }\n\n    for (var attr in offsetAttributes) {\n      offset[offsetAttributes[attr]] += parseInt(getElementStyle(element, attr), 10) || 0;\n    }\n\n    docElem = doc.documentElement;\n    if ( typeof element.getBoundingClientRect !== 'undefined' ) {\n      box = element.getBoundingClientRect();\n    }\n\n    scrollLeftTop = getScrollLeftTop(element);\n\n    return {\n      left: box.left + scrollLeftTop.left - (docElem.clientLeft || 0) + offset.left,\n      top: box.top + scrollLeftTop.top - (docElem.clientTop || 0)  + offset.top\n    };\n  }\n\n  /**\n   * Returns style attribute value of a given element\n   * @memberOf fabric.util\n   * @param {HTMLElement} element Element to get style attribute for\n   * @param {String} attr Style attribute to get for element\n   * @return {String} Style attribute value of the given element.\n   */\n  var getElementStyle;\n  if (fabric.document.defaultView && fabric.document.defaultView.getComputedStyle) {\n    getElementStyle = function(element, attr) {\n      var style = fabric.document.defaultView.getComputedStyle(element, null);\n      return style ? style[attr] : undefined;\n    };\n  }\n  else {\n    getElementStyle = function(element, attr) {\n      var value = element.style[attr];\n      if (!value && element.currentStyle) {\n        value = element.currentStyle[attr];\n      }\n      return value;\n    };\n  }\n\n  (function () {\n    var style = fabric.document.documentElement.style,\n        selectProp = 'userSelect' in style\n          ? 'userSelect'\n          : 'MozUserSelect' in style\n            ? 'MozUserSelect'\n            : 'WebkitUserSelect' in style\n              ? 'WebkitUserSelect'\n              : 'KhtmlUserSelect' in style\n                ? 'KhtmlUserSelect'\n                : '';\n\n    /**\n     * Makes element unselectable\n     * @memberOf fabric.util\n     * @param {HTMLElement} element Element to make unselectable\n     * @return {HTMLElement} Element that was passed in\n     */\n    function makeElementUnselectable(element) {\n      if (typeof element.onselectstart !== 'undefined') {\n        element.onselectstart = fabric.util.falseFunction;\n      }\n      if (selectProp) {\n        element.style[selectProp] = 'none';\n      }\n      else if (typeof element.unselectable === 'string') {\n        element.unselectable = 'on';\n      }\n      return element;\n    }\n\n    /**\n     * Makes element selectable\n     * @memberOf fabric.util\n     * @param {HTMLElement} element Element to make selectable\n     * @return {HTMLElement} Element that was passed in\n     */\n    function makeElementSelectable(element) {\n      if (typeof element.onselectstart !== 'undefined') {\n        element.onselectstart = null;\n      }\n      if (selectProp) {\n        element.style[selectProp] = '';\n      }\n      else if (typeof element.unselectable === 'string') {\n        element.unselectable = '';\n      }\n      return element;\n    }\n\n    fabric.util.makeElementUnselectable = makeElementUnselectable;\n    fabric.util.makeElementSelectable = makeElementSelectable;\n  })();\n\n  (function() {\n\n    /**\n     * Inserts a script element with a given url into a document; invokes callback, when that script is finished loading\n     * @memberOf fabric.util\n     * @param {String} url URL of a script to load\n     * @param {Function} callback Callback to execute when script is finished loading\n     */\n    function getScript(url, callback) {\n      var headEl = fabric.document.getElementsByTagName('head')[0],\n          scriptEl = fabric.document.createElement('script'),\n          loading = true;\n\n      /** @ignore */\n      scriptEl.onload = /** @ignore */ scriptEl.onreadystatechange = function(e) {\n        if (loading) {\n          if (typeof this.readyState === 'string' &&\n              this.readyState !== 'loaded' &&\n              this.readyState !== 'complete') {\n            return;\n          }\n          loading = false;\n          callback(e || fabric.window.event);\n          scriptEl = scriptEl.onload = scriptEl.onreadystatechange = null;\n        }\n      };\n      scriptEl.src = url;\n      headEl.appendChild(scriptEl);\n      // causes issue in Opera\n      // headEl.removeChild(scriptEl);\n    }\n\n    fabric.util.getScript = getScript;\n  })();\n\n  fabric.util.getById = getById;\n  fabric.util.toArray = toArray;\n  fabric.util.makeElement = makeElement;\n  fabric.util.addClass = addClass;\n  fabric.util.wrapElement = wrapElement;\n  fabric.util.getScrollLeftTop = getScrollLeftTop;\n  fabric.util.getElementOffset = getElementOffset;\n  fabric.util.getElementStyle = getElementStyle;\n\n})();\n\n\n(function() {\n\n  function addParamToUrl(url, param) {\n    return url + (/\\?/.test(url) ? '&' : '?') + param;\n  }\n\n  var makeXHR = (function() {\n    var factories = [\n      function() { return new ActiveXObject('Microsoft.XMLHTTP'); },\n      function() { return new ActiveXObject('Msxml2.XMLHTTP'); },\n      function() { return new ActiveXObject('Msxml2.XMLHTTP.3.0'); },\n      function() { return new XMLHttpRequest(); }\n    ];\n    for (var i = factories.length; i--; ) {\n      try {\n        var req = factories[i]();\n        if (req) {\n          return factories[i];\n        }\n      }\n      catch (err) { }\n    }\n  })();\n\n  function emptyFn() { }\n\n  /**\n   * Cross-browser abstraction for sending XMLHttpRequest\n   * @memberOf fabric.util\n   * @param {String} url URL to send XMLHttpRequest to\n   * @param {Object} [options] Options object\n   * @param {String} [options.method=\"GET\"]\n   * @param {String} [options.parameters] parameters to append to url in GET or in body\n   * @param {String} [options.body] body to send with POST or PUT request\n   * @param {Function} options.onComplete Callback to invoke when request is completed\n   * @return {XMLHttpRequest} request\n   */\n  function request(url, options) {\n\n    options || (options = { });\n\n    var method = options.method ? options.method.toUpperCase() : 'GET',\n        onComplete = options.onComplete || function() { },\n        xhr = makeXHR(),\n        body = options.body || options.parameters;\n\n    /** @ignore */\n    xhr.onreadystatechange = function() {\n      if (xhr.readyState === 4) {\n        onComplete(xhr);\n        xhr.onreadystatechange = emptyFn;\n      }\n    };\n\n    if (method === 'GET') {\n      body = null;\n      if (typeof options.parameters === 'string') {\n        url = addParamToUrl(url, options.parameters);\n      }\n    }\n\n    xhr.open(method, url, true);\n\n    if (method === 'POST' || method === 'PUT') {\n      xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n    }\n\n    xhr.send(body);\n    return xhr;\n  }\n\n  fabric.util.request = request;\n})();\n\n\n/**\n * Wrapper around `console.log` (when available)\n * @param {*} [values] Values to log\n */\nfabric.log = function() { };\n\n/**\n * Wrapper around `console.warn` (when available)\n * @param {*} [values] Values to log as a warning\n */\nfabric.warn = function() { };\n\n/* eslint-disable */\nif (typeof console !== 'undefined') {\n\n  ['log', 'warn'].forEach(function(methodName) {\n\n    if (typeof console[methodName] !== 'undefined' &&\n        typeof console[methodName].apply === 'function') {\n\n      fabric[methodName] = function() {\n        return console[methodName].apply(console, arguments);\n      };\n    }\n  });\n}\n/* eslint-enable */\n\n\n(function() {\n\n  /**\n   * Changes value from one to another within certain period of time, invoking callbacks as value is being changed.\n   * @memberOf fabric.util\n   * @param {Object} [options] Animation options\n   * @param {Function} [options.onChange] Callback; invoked on every value change\n   * @param {Function} [options.onComplete] Callback; invoked when value change is completed\n   * @param {Number} [options.startValue=0] Starting value\n   * @param {Number} [options.endValue=100] Ending value\n   * @param {Number} [options.byValue=100] Value to modify the property by\n   * @param {Function} [options.easing] Easing function\n   * @param {Number} [options.duration=500] Duration of change (in ms)\n   */\n  function animate(options) {\n\n    requestAnimFrame(function(timestamp) {\n      options || (options = { });\n\n      var start = timestamp || +new Date(),\n          duration = options.duration || 500,\n          finish = start + duration, time,\n          onChange = options.onChange || function() { },\n          abort = options.abort || function() { return false; },\n          easing = options.easing || function(t, b, c, d) {return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;},\n          startValue = 'startValue' in options ? options.startValue : 0,\n          endValue = 'endValue' in options ? options.endValue : 100,\n          byValue = options.byValue || endValue - startValue;\n\n      options.onStart && options.onStart();\n\n      (function tick(ticktime) {\n        time = ticktime || +new Date();\n        var currentTime = time > finish ? duration : (time - start);\n        if (abort()) {\n          options.onComplete && options.onComplete();\n          return;\n        }\n        onChange(easing(currentTime, startValue, byValue, duration));\n        if (time > finish) {\n          options.onComplete && options.onComplete();\n          return;\n        }\n        requestAnimFrame(tick);\n      })(start);\n    });\n\n  }\n\n  var _requestAnimFrame = fabric.window.requestAnimationFrame       ||\n                          fabric.window.webkitRequestAnimationFrame ||\n                          fabric.window.mozRequestAnimationFrame    ||\n                          fabric.window.oRequestAnimationFrame      ||\n                          fabric.window.msRequestAnimationFrame     ||\n                          function(callback) {\n                            fabric.window.setTimeout(callback, 1000 / 60);\n                          };\n\n  /**\n   * requestAnimationFrame polyfill based on http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n   * In order to get a precise start time, `requestAnimFrame` should be called as an entry into the method\n   * @memberOf fabric.util\n   * @param {Function} callback Callback to invoke\n   * @param {DOMElement} element optional Element to associate with animation\n   */\n  function requestAnimFrame() {\n    return _requestAnimFrame.apply(fabric.window, arguments);\n  }\n\n  fabric.util.animate = animate;\n  fabric.util.requestAnimFrame = requestAnimFrame;\n\n})();\n\n\n(function() {\n  // Calculate an in-between color. Returns a \"rgba()\" string.\n  // Credit: Edwin Martin <edwin@bitstorm.org>\n  //         http://www.bitstorm.org/jquery/color-animation/jquery.animate-colors.js\n  function calculateColor(begin, end, pos) {\n    var color = 'rgba('\n        + parseInt((begin[0] + pos * (end[0] - begin[0])), 10) + ','\n        + parseInt((begin[1] + pos * (end[1] - begin[1])), 10) + ','\n        + parseInt((begin[2] + pos * (end[2] - begin[2])), 10);\n\n    color += ',' + (begin && end ? parseFloat(begin[3] + pos * (end[3] - begin[3])) : 1);\n    color += ')';\n    return color;\n  }\n\n  /**\n   * Changes the color from one to another within certain period of time, invoking callbacks as value is being changed.\n   * @memberOf fabric.util\n   * @param {String} fromColor The starting color in hex or rgb(a) format.\n   * @param {String} toColor The starting color in hex or rgb(a) format.\n   * @param {Number} [duration] Duration of change (in ms).\n   * @param {Object} [options] Animation options\n   * @param {Function} [options.onChange] Callback; invoked on every value change\n   * @param {Function} [options.onComplete] Callback; invoked when value change is completed\n   * @param {Function} [options.colorEasing] Easing function. Note that this function only take two arguments (currentTime, duration). Thus the regular animation easing functions cannot be used.\n   */\n  function animateColor(fromColor, toColor, duration, options) {\n    var startColor = new fabric.Color(fromColor).getSource(),\n        endColor = new fabric.Color(toColor).getSource();\n\n    options = options || {};\n\n    fabric.util.animate(fabric.util.object.extend(options, {\n      duration: duration || 500,\n      startValue: startColor,\n      endValue: endColor,\n      byValue: endColor,\n      easing: function (currentTime, startValue, byValue, duration) {\n        var posValue = options.colorEasing\n              ? options.colorEasing(currentTime, duration)\n              : 1 - Math.cos(currentTime / duration * (Math.PI / 2));\n        return calculateColor(startValue, byValue, posValue);\n      }\n    }));\n  }\n\n  fabric.util.animateColor = animateColor;\n\n})();\n\n\n(function() {\n\n  function normalize(a, c, p, s) {\n    if (a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    }\n    else {\n      //handle the 0/0 case:\n      if (c === 0 && a === 0) {\n        s = p / (2 * Math.PI) * Math.asin(1);\n      }\n      else {\n        s = p / (2 * Math.PI) * Math.asin(c / a);\n      }\n    }\n    return { a: a, c: c, p: p, s: s };\n  }\n\n  function elastic(opts, t, d) {\n    return opts.a *\n      Math.pow(2, 10 * (t -= 1)) *\n      Math.sin( (t * d - opts.s) * (2 * Math.PI) / opts.p );\n  }\n\n  /**\n   * Cubic easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutCubic(t, b, c, d) {\n    return c * ((t = t / d - 1) * t * t + 1) + b;\n  }\n\n  /**\n   * Cubic easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutCubic(t, b, c, d) {\n    t /= d / 2;\n    if (t < 1) {\n      return c / 2 * t * t * t + b;\n    }\n    return c / 2 * ((t -= 2) * t * t + 2) + b;\n  }\n\n  /**\n   * Quartic easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInQuart(t, b, c, d) {\n    return c * (t /= d) * t * t * t + b;\n  }\n\n  /**\n   * Quartic easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutQuart(t, b, c, d) {\n    return -c * ((t = t / d - 1) * t * t * t - 1) + b;\n  }\n\n  /**\n   * Quartic easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutQuart(t, b, c, d) {\n    t /= d / 2;\n    if (t < 1) {\n      return c / 2 * t * t * t * t + b;\n    }\n    return -c / 2 * ((t -= 2) * t * t * t - 2) + b;\n  }\n\n  /**\n   * Quintic easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInQuint(t, b, c, d) {\n    return c * (t /= d) * t * t * t * t + b;\n  }\n\n  /**\n   * Quintic easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutQuint(t, b, c, d) {\n    return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n  }\n\n  /**\n   * Quintic easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutQuint(t, b, c, d) {\n    t /= d / 2;\n    if (t < 1) {\n      return c / 2 * t * t * t * t * t + b;\n    }\n    return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\n  }\n\n  /**\n   * Sinusoidal easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInSine(t, b, c, d) {\n    return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;\n  }\n\n  /**\n   * Sinusoidal easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutSine(t, b, c, d) {\n    return c * Math.sin(t / d * (Math.PI / 2)) + b;\n  }\n\n  /**\n   * Sinusoidal easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutSine(t, b, c, d) {\n    return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;\n  }\n\n  /**\n   * Exponential easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInExpo(t, b, c, d) {\n    return (t === 0) ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;\n  }\n\n  /**\n   * Exponential easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutExpo(t, b, c, d) {\n    return (t === d) ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;\n  }\n\n  /**\n   * Exponential easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutExpo(t, b, c, d) {\n    if (t === 0) {\n      return b;\n    }\n    if (t === d) {\n      return b + c;\n    }\n    t /= d / 2;\n    if (t < 1) {\n      return c / 2 * Math.pow(2, 10 * (t - 1)) + b;\n    }\n    return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;\n  }\n\n  /**\n   * Circular easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInCirc(t, b, c, d) {\n    return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n  }\n\n  /**\n   * Circular easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutCirc(t, b, c, d) {\n    return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n  }\n\n  /**\n   * Circular easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutCirc(t, b, c, d) {\n    t /= d / 2;\n    if (t < 1) {\n      return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;\n    }\n    return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\n  }\n\n  /**\n   * Elastic easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInElastic(t, b, c, d) {\n    var s = 1.70158, p = 0, a = c;\n    if (t === 0) {\n      return b;\n    }\n    t /= d;\n    if (t === 1) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * 0.3;\n    }\n    var opts = normalize(a, c, p, s);\n    return -elastic(opts, t, d) + b;\n  }\n\n  /**\n   * Elastic easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutElastic(t, b, c, d) {\n    var s = 1.70158, p = 0, a = c;\n    if (t === 0) {\n      return b;\n    }\n    t /= d;\n    if (t === 1) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * 0.3;\n    }\n    var opts = normalize(a, c, p, s);\n    return opts.a * Math.pow(2, -10 * t) * Math.sin((t * d - opts.s) * (2 * Math.PI) / opts.p ) + opts.c + b;\n  }\n\n  /**\n   * Elastic easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutElastic(t, b, c, d) {\n    var s = 1.70158, p = 0, a = c;\n    if (t === 0) {\n      return b;\n    }\n    t /= d / 2;\n    if (t === 2) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * (0.3 * 1.5);\n    }\n    var opts = normalize(a, c, p, s);\n    if (t < 1) {\n      return -0.5 * elastic(opts, t, d) + b;\n    }\n    return opts.a * Math.pow(2, -10 * (t -= 1)) *\n      Math.sin((t * d - opts.s) * (2 * Math.PI) / opts.p ) * 0.5 + opts.c + b;\n  }\n\n  /**\n   * Backwards easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInBack(t, b, c, d, s) {\n    if (s === undefined) {\n      s = 1.70158;\n    }\n    return c * (t /= d) * t * ((s + 1) * t - s) + b;\n  }\n\n  /**\n   * Backwards easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutBack(t, b, c, d, s) {\n    if (s === undefined) {\n      s = 1.70158;\n    }\n    return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n  }\n\n  /**\n   * Backwards easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutBack(t, b, c, d, s) {\n    if (s === undefined) {\n      s = 1.70158;\n    }\n    t /= d / 2;\n    if (t < 1) {\n      return c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b;\n    }\n    return c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b;\n  }\n\n  /**\n   * Bouncing easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInBounce(t, b, c, d) {\n    return c - easeOutBounce (d - t, 0, c, d) + b;\n  }\n\n  /**\n   * Bouncing easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutBounce(t, b, c, d) {\n    if ((t /= d) < (1 / 2.75)) {\n      return c * (7.5625 * t * t) + b;\n    }\n    else if (t < (2 / 2.75)) {\n      return c * (7.5625 * (t -= (1.5 / 2.75)) * t + 0.75) + b;\n    }\n    else if (t < (2.5 / 2.75)) {\n      return c * (7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375) + b;\n    }\n    else {\n      return c * (7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375) + b;\n    }\n  }\n\n  /**\n   * Bouncing easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutBounce(t, b, c, d) {\n    if (t < d / 2) {\n      return easeInBounce (t * 2, 0, c, d) * 0.5 + b;\n    }\n    return easeOutBounce(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n  }\n\n  /**\n   * Easing functions\n   * See <a href=\"http://gizma.com/easing/\">Easing Equations by Robert Penner</a>\n   * @namespace fabric.util.ease\n   */\n  fabric.util.ease = {\n\n    /**\n     * Quadratic easing in\n     * @memberOf fabric.util.ease\n     */\n    easeInQuad: function(t, b, c, d) {\n      return c * (t /= d) * t + b;\n    },\n\n    /**\n     * Quadratic easing out\n     * @memberOf fabric.util.ease\n     */\n    easeOutQuad: function(t, b, c, d) {\n      return -c * (t /= d) * (t - 2) + b;\n    },\n\n    /**\n     * Quadratic easing in and out\n     * @memberOf fabric.util.ease\n     */\n    easeInOutQuad: function(t, b, c, d) {\n      t /= (d / 2);\n      if (t < 1) {\n        return c / 2 * t * t + b;\n      }\n      return -c / 2 * ((--t) * (t - 2) - 1) + b;\n    },\n\n    /**\n     * Cubic easing in\n     * @memberOf fabric.util.ease\n     */\n    easeInCubic: function(t, b, c, d) {\n      return c * (t /= d) * t * t + b;\n    },\n\n    easeOutCubic: easeOutCubic,\n    easeInOutCubic: easeInOutCubic,\n    easeInQuart: easeInQuart,\n    easeOutQuart: easeOutQuart,\n    easeInOutQuart: easeInOutQuart,\n    easeInQuint: easeInQuint,\n    easeOutQuint: easeOutQuint,\n    easeInOutQuint: easeInOutQuint,\n    easeInSine: easeInSine,\n    easeOutSine: easeOutSine,\n    easeInOutSine: easeInOutSine,\n    easeInExpo: easeInExpo,\n    easeOutExpo: easeOutExpo,\n    easeInOutExpo: easeInOutExpo,\n    easeInCirc: easeInCirc,\n    easeOutCirc: easeOutCirc,\n    easeInOutCirc: easeInOutCirc,\n    easeInElastic: easeInElastic,\n    easeOutElastic: easeOutElastic,\n    easeInOutElastic: easeInOutElastic,\n    easeInBack: easeInBack,\n    easeOutBack: easeOutBack,\n    easeInOutBack: easeInOutBack,\n    easeInBounce: easeInBounce,\n    easeOutBounce: easeOutBounce,\n    easeInOutBounce: easeInOutBounce\n  };\n\n})();\n\n\n(function(global) {\n\n  'use strict';\n\n  /**\n   * @name fabric\n   * @namespace\n   */\n\n  var fabric = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      capitalize = fabric.util.string.capitalize,\n      clone = fabric.util.object.clone,\n      toFixed = fabric.util.toFixed,\n      parseUnit = fabric.util.parseUnit,\n      multiplyTransformMatrices = fabric.util.multiplyTransformMatrices,\n\n      reAllowedSVGTagNames = /^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/i,\n      reViewBoxTagNames = /^(symbol|image|marker|pattern|view|svg)$/i,\n      reNotAllowedAncestors = /^(?:pattern|defs|symbol|metadata)$/i,\n      reAllowedParents = /^(symbol|g|a|svg)$/i,\n\n      attributesMap = {\n        cx:                   'left',\n        x:                    'left',\n        r:                    'radius',\n        cy:                   'top',\n        y:                    'top',\n        display:              'visible',\n        visibility:           'visible',\n        transform:            'transformMatrix',\n        'fill-opacity':       'fillOpacity',\n        'fill-rule':          'fillRule',\n        'font-family':        'fontFamily',\n        'font-size':          'fontSize',\n        'font-style':         'fontStyle',\n        'font-weight':        'fontWeight',\n        'stroke-dasharray':   'strokeDashArray',\n        'stroke-linecap':     'strokeLineCap',\n        'stroke-linejoin':    'strokeLineJoin',\n        'stroke-miterlimit':  'strokeMiterLimit',\n        'stroke-opacity':     'strokeOpacity',\n        'stroke-width':       'strokeWidth',\n        'text-decoration':    'textDecoration',\n        'text-anchor':        'originX'\n      },\n\n      colorAttributes = {\n        stroke: 'strokeOpacity',\n        fill:   'fillOpacity'\n      };\n\n  fabric.cssRules = { };\n  fabric.gradientDefs = { };\n\n  function normalizeAttr(attr) {\n    // transform attribute names\n    if (attr in attributesMap) {\n      return attributesMap[attr];\n    }\n    return attr;\n  }\n\n  function normalizeValue(attr, value, parentAttributes, fontSize) {\n    var isArray = Object.prototype.toString.call(value) === '[object Array]',\n        parsed;\n\n    if ((attr === 'fill' || attr === 'stroke') && value === 'none') {\n      value = '';\n    }\n    else if (attr === 'strokeDashArray') {\n      if (value === 'none') {\n        value = null;\n      }\n      else {\n        value = value.replace(/,/g, ' ').split(/\\s+/).map(function(n) {\n          return parseFloat(n);\n        });\n      }\n    }\n    else if (attr === 'transformMatrix') {\n      if (parentAttributes && parentAttributes.transformMatrix) {\n        value = multiplyTransformMatrices(\n          parentAttributes.transformMatrix, fabric.parseTransformAttribute(value));\n      }\n      else {\n        value = fabric.parseTransformAttribute(value);\n      }\n    }\n    else if (attr === 'visible') {\n      value = (value === 'none' || value === 'hidden') ? false : true;\n      // display=none on parent element always takes precedence over child element\n      if (parentAttributes && parentAttributes.visible === false) {\n        value = false;\n      }\n    }\n    else if (attr === 'originX' /* text-anchor */) {\n      value = value === 'start' ? 'left' : value === 'end' ? 'right' : 'center';\n    }\n    else {\n      parsed = isArray ? value.map(parseUnit) : parseUnit(value, fontSize);\n    }\n\n    return (!isArray && isNaN(parsed) ? value : parsed);\n  }\n\n  /**\n   * @private\n   * @param {Object} attributes Array of attributes to parse\n   */\n  function _setStrokeFillOpacity(attributes) {\n    for (var attr in colorAttributes) {\n\n      if (typeof attributes[colorAttributes[attr]] === 'undefined' || attributes[attr] === '') {\n        continue;\n      }\n\n      if (typeof attributes[attr] === 'undefined') {\n        if (!fabric.Object.prototype[attr]) {\n          continue;\n        }\n        attributes[attr] = fabric.Object.prototype[attr];\n      }\n\n      if (attributes[attr].indexOf('url(') === 0) {\n        continue;\n      }\n\n      var color = new fabric.Color(attributes[attr]);\n      attributes[attr] = color.setAlpha(toFixed(color.getAlpha() * attributes[colorAttributes[attr]], 2)).toRgba();\n    }\n    return attributes;\n  }\n\n  /**\n   * @private\n   */\n  function _getMultipleNodes(doc, nodeNames) {\n    var nodeName, nodeArray = [], nodeList;\n    for (var i = 0; i < nodeNames.length; i++) {\n      nodeName = nodeNames[i];\n      nodeList = doc.getElementsByTagName(nodeName);\n      nodeArray = nodeArray.concat(Array.prototype.slice.call(nodeList));\n    }\n    return nodeArray;\n  }\n\n  /**\n   * Parses \"transform\" attribute, returning an array of values\n   * @static\n   * @function\n   * @memberOf fabric\n   * @param {String} attributeValue String containing attribute value\n   * @return {Array} Array of 6 elements representing transformation matrix\n   */\n  fabric.parseTransformAttribute = (function() {\n    function rotateMatrix(matrix, args) {\n      var angle = args[0],\n          x = (args.length === 3) ? args[1] : 0,\n          y = (args.length === 3) ? args[2] : 0;\n\n      matrix[0] = Math.cos(angle);\n      matrix[1] = Math.sin(angle);\n      matrix[2] = -Math.sin(angle);\n      matrix[3] = Math.cos(angle);\n      matrix[4] = x - (matrix[0] * x + matrix[2] * y);\n      matrix[5] = y - (matrix[1] * x + matrix[3] * y);\n    }\n\n    function scaleMatrix(matrix, args) {\n      var multiplierX = args[0],\n          multiplierY = (args.length === 2) ? args[1] : args[0];\n\n      matrix[0] = multiplierX;\n      matrix[3] = multiplierY;\n    }\n\n    function skewXMatrix(matrix, args) {\n      matrix[2] = Math.tan(fabric.util.degreesToRadians(args[0]));\n    }\n\n    function skewYMatrix(matrix, args) {\n      matrix[1] = Math.tan(fabric.util.degreesToRadians(args[0]));\n    }\n\n    function translateMatrix(matrix, args) {\n      matrix[4] = args[0];\n      if (args.length === 2) {\n        matrix[5] = args[1];\n      }\n    }\n\n    // identity matrix\n    var iMatrix = [\n          1, // a\n          0, // b\n          0, // c\n          1, // d\n          0, // e\n          0  // f\n        ],\n\n        // == begin transform regexp\n        number = fabric.reNum,\n\n        commaWsp = '(?:\\\\s+,?\\\\s*|,\\\\s*)',\n\n        skewX = '(?:(skewX)\\\\s*\\\\(\\\\s*(' + number + ')\\\\s*\\\\))',\n\n        skewY = '(?:(skewY)\\\\s*\\\\(\\\\s*(' + number + ')\\\\s*\\\\))',\n\n        rotate = '(?:(rotate)\\\\s*\\\\(\\\\s*(' + number + ')(?:' +\n                    commaWsp + '(' + number + ')' +\n                    commaWsp + '(' + number + '))?\\\\s*\\\\))',\n\n        scale = '(?:(scale)\\\\s*\\\\(\\\\s*(' + number + ')(?:' +\n                    commaWsp + '(' + number + '))?\\\\s*\\\\))',\n\n        translate = '(?:(translate)\\\\s*\\\\(\\\\s*(' + number + ')(?:' +\n                    commaWsp + '(' + number + '))?\\\\s*\\\\))',\n\n        matrix = '(?:(matrix)\\\\s*\\\\(\\\\s*' +\n                  '(' + number + ')' + commaWsp +\n                  '(' + number + ')' + commaWsp +\n                  '(' + number + ')' + commaWsp +\n                  '(' + number + ')' + commaWsp +\n                  '(' + number + ')' + commaWsp +\n                  '(' + number + ')' +\n                  '\\\\s*\\\\))',\n\n        transform = '(?:' +\n                    matrix + '|' +\n                    translate + '|' +\n                    scale + '|' +\n                    rotate + '|' +\n                    skewX + '|' +\n                    skewY +\n                    ')',\n\n        transforms = '(?:' + transform + '(?:' + commaWsp + '*' + transform + ')*' + ')',\n\n        transformList = '^\\\\s*(?:' + transforms + '?)\\\\s*$',\n\n        // http://www.w3.org/TR/SVG/coords.html#TransformAttribute\n        reTransformList = new RegExp(transformList),\n        // == end transform regexp\n\n        reTransform = new RegExp(transform, 'g');\n\n    return function(attributeValue) {\n\n      // start with identity matrix\n      var matrix = iMatrix.concat(),\n          matrices = [];\n\n      // return if no argument was given or\n      // an argument does not match transform attribute regexp\n      if (!attributeValue || (attributeValue && !reTransformList.test(attributeValue))) {\n        return matrix;\n      }\n\n      attributeValue.replace(reTransform, function(match) {\n\n        var m = new RegExp(transform).exec(match).filter(function (match) {\n              // match !== '' && match != null\n              return (!!match);\n            }),\n            operation = m[1],\n            args = m.slice(2).map(parseFloat);\n\n        switch (operation) {\n          case 'translate':\n            translateMatrix(matrix, args);\n            break;\n          case 'rotate':\n            args[0] = fabric.util.degreesToRadians(args[0]);\n            rotateMatrix(matrix, args);\n            break;\n          case 'scale':\n            scaleMatrix(matrix, args);\n            break;\n          case 'skewX':\n            skewXMatrix(matrix, args);\n            break;\n          case 'skewY':\n            skewYMatrix(matrix, args);\n            break;\n          case 'matrix':\n            matrix = args;\n            break;\n        }\n\n        // snapshot current matrix into matrices array\n        matrices.push(matrix.concat());\n        // reset\n        matrix = iMatrix.concat();\n      });\n\n      var combinedMatrix = matrices[0];\n      while (matrices.length > 1) {\n        matrices.shift();\n        combinedMatrix = fabric.util.multiplyTransformMatrices(combinedMatrix, matrices[0]);\n      }\n      return combinedMatrix;\n    };\n  })();\n\n  /**\n   * @private\n   */\n  function parseStyleString(style, oStyle) {\n    var attr, value;\n    style.replace(/;\\s*$/, '').split(';').forEach(function (chunk) {\n      var pair = chunk.split(':');\n\n      attr = normalizeAttr(pair[0].trim().toLowerCase());\n      value = normalizeValue(attr, pair[1].trim());\n\n      oStyle[attr] = value;\n    });\n  }\n\n  /**\n   * @private\n   */\n  function parseStyleObject(style, oStyle) {\n    var attr, value;\n    for (var prop in style) {\n      if (typeof style[prop] === 'undefined') {\n        continue;\n      }\n\n      attr = normalizeAttr(prop.toLowerCase());\n      value = normalizeValue(attr, style[prop]);\n\n      oStyle[attr] = value;\n    }\n  }\n\n  /**\n   * @private\n   */\n  function getGlobalStylesForElement(element, svgUid) {\n    var styles = { };\n    for (var rule in fabric.cssRules[svgUid]) {\n      if (elementMatchesRule(element, rule.split(' '))) {\n        for (var property in fabric.cssRules[svgUid][rule]) {\n          styles[property] = fabric.cssRules[svgUid][rule][property];\n        }\n      }\n    }\n    return styles;\n  }\n\n  /**\n   * @private\n   */\n  function elementMatchesRule(element, selectors) {\n    var firstMatching, parentMatching = true;\n    //start from rightmost selector.\n    firstMatching = selectorMatches(element, selectors.pop());\n    if (firstMatching && selectors.length) {\n      parentMatching = doesSomeParentMatch(element, selectors);\n    }\n    return firstMatching && parentMatching && (selectors.length === 0);\n  }\n\n  function doesSomeParentMatch(element, selectors) {\n    var selector, parentMatching = true;\n    while (element.parentNode && element.parentNode.nodeType === 1 && selectors.length) {\n      if (parentMatching) {\n        selector = selectors.pop();\n      }\n      element = element.parentNode;\n      parentMatching = selectorMatches(element, selector);\n    }\n    return selectors.length === 0;\n  }\n\n  /**\n   * @private\n   */\n  function selectorMatches(element, selector) {\n    var nodeName = element.nodeName,\n        classNames = element.getAttribute('class'),\n        id = element.getAttribute('id'), matcher;\n    // i check if a selector matches slicing away part from it.\n    // if i get empty string i should match\n    matcher = new RegExp('^' + nodeName, 'i');\n    selector = selector.replace(matcher, '');\n    if (id && selector.length) {\n      matcher = new RegExp('#' + id + '(?![a-zA-Z\\\\-]+)', 'i');\n      selector = selector.replace(matcher, '');\n    }\n    if (classNames && selector.length) {\n      classNames = classNames.split(' ');\n      for (var i = classNames.length; i--;) {\n        matcher = new RegExp('\\\\.' + classNames[i] + '(?![a-zA-Z\\\\-]+)', 'i');\n        selector = selector.replace(matcher, '');\n      }\n    }\n    return selector.length === 0;\n  }\n\n  /**\n   * @private\n   * to support IE8 missing getElementById on SVGdocument\n   */\n  function elementById(doc, id) {\n    var el;\n    doc.getElementById && (el = doc.getElementById(id));\n    if (el) {\n      return el;\n    }\n    var node, i, nodelist = doc.getElementsByTagName('*');\n    for (i = 0; i < nodelist.length; i++) {\n      node = nodelist[i];\n      if (id === node.getAttribute('id')) {\n        return node;\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  function parseUseDirectives(doc) {\n    var nodelist = _getMultipleNodes(doc, ['use', 'svg:use']), i = 0;\n\n    while (nodelist.length && i < nodelist.length) {\n      var el = nodelist[i],\n          xlink = el.getAttribute('xlink:href').substr(1),\n          x = el.getAttribute('x') || 0,\n          y = el.getAttribute('y') || 0,\n          el2 = elementById(doc, xlink).cloneNode(true),\n          currentTrans = (el2.getAttribute('transform') || '') + ' translate(' + x + ', ' + y + ')',\n          parentNode, oldLength = nodelist.length, attr, j, attrs, l;\n\n      applyViewboxTransform(el2);\n      if (/^svg$/i.test(el2.nodeName)) {\n        var el3 = el2.ownerDocument.createElement('g');\n        for (j = 0, attrs = el2.attributes, l = attrs.length; j < l; j++) {\n          attr = attrs.item(j);\n          el3.setAttribute(attr.nodeName, attr.nodeValue);\n        }\n        // el2.firstChild != null\n        while (el2.firstChild) {\n          el3.appendChild(el2.firstChild);\n        }\n        el2 = el3;\n      }\n\n      for (j = 0, attrs = el.attributes, l = attrs.length; j < l; j++) {\n        attr = attrs.item(j);\n        if (attr.nodeName === 'x' || attr.nodeName === 'y' || attr.nodeName === 'xlink:href') {\n          continue;\n        }\n\n        if (attr.nodeName === 'transform') {\n          currentTrans = attr.nodeValue + ' ' + currentTrans;\n        }\n        else {\n          el2.setAttribute(attr.nodeName, attr.nodeValue);\n        }\n      }\n\n      el2.setAttribute('transform', currentTrans);\n      el2.setAttribute('instantiated_by_use', '1');\n      el2.removeAttribute('id');\n      parentNode = el.parentNode;\n      parentNode.replaceChild(el2, el);\n      // some browsers do not shorten nodelist after replaceChild (IE8)\n      if (nodelist.length === oldLength) {\n        i++;\n      }\n    }\n  }\n\n  // http://www.w3.org/TR/SVG/coords.html#ViewBoxAttribute\n  // matches, e.g.: +14.56e-12, etc.\n  var reViewBoxAttrValue = new RegExp(\n    '^' +\n    '\\\\s*(' + fabric.reNum + '+)\\\\s*,?' +\n    '\\\\s*(' + fabric.reNum + '+)\\\\s*,?' +\n    '\\\\s*(' + fabric.reNum + '+)\\\\s*,?' +\n    '\\\\s*(' + fabric.reNum + '+)\\\\s*' +\n    '$'\n  );\n\n  /**\n   * Add a <g> element that envelop all child elements and makes the viewbox transformMatrix descend on all elements\n   */\n  function applyViewboxTransform(element) {\n\n    var viewBoxAttr = element.getAttribute('viewBox'),\n        scaleX = 1,\n        scaleY = 1,\n        minX = 0,\n        minY = 0,\n        viewBoxWidth, viewBoxHeight, matrix, el,\n        widthAttr = element.getAttribute('width'),\n        heightAttr = element.getAttribute('height'),\n        x = element.getAttribute('x') || 0,\n        y = element.getAttribute('y') || 0,\n        preserveAspectRatio = element.getAttribute('preserveAspectRatio') || '',\n        missingViewBox = (!viewBoxAttr || !reViewBoxTagNames.test(element.nodeName)\n                           || !(viewBoxAttr = viewBoxAttr.match(reViewBoxAttrValue))),\n        missingDimAttr = (!widthAttr || !heightAttr || widthAttr === '100%' || heightAttr === '100%'),\n        toBeParsed = missingViewBox && missingDimAttr,\n        parsedDim = { }, translateMatrix = '';\n\n    parsedDim.width = 0;\n    parsedDim.height = 0;\n    parsedDim.toBeParsed = toBeParsed;\n\n    if (toBeParsed) {\n      return parsedDim;\n    }\n\n    if (missingViewBox) {\n      parsedDim.width = parseUnit(widthAttr);\n      parsedDim.height = parseUnit(heightAttr);\n      return parsedDim;\n    }\n\n    minX = -parseFloat(viewBoxAttr[1]);\n    minY = -parseFloat(viewBoxAttr[2]);\n    viewBoxWidth = parseFloat(viewBoxAttr[3]);\n    viewBoxHeight = parseFloat(viewBoxAttr[4]);\n\n    if (!missingDimAttr) {\n      parsedDim.width = parseUnit(widthAttr);\n      parsedDim.height = parseUnit(heightAttr);\n      scaleX = parsedDim.width / viewBoxWidth;\n      scaleY = parsedDim.height / viewBoxHeight;\n    }\n    else {\n      parsedDim.width = viewBoxWidth;\n      parsedDim.height = viewBoxHeight;\n    }\n\n    // default is to preserve aspect ratio\n    preserveAspectRatio = fabric.util.parsePreserveAspectRatioAttribute(preserveAspectRatio);\n    if (preserveAspectRatio.alignX !== 'none') {\n      //translate all container for the effect of Mid, Min, Max\n      scaleY = scaleX = (scaleX > scaleY ? scaleY : scaleX);\n    }\n\n    if (scaleX === 1 && scaleY === 1 && minX === 0 && minY === 0 && x === 0 && y === 0) {\n      return parsedDim;\n    }\n\n    if (x || y) {\n      translateMatrix = ' translate(' + parseUnit(x) + ' ' + parseUnit(y) + ') ';\n    }\n\n    matrix = translateMatrix + ' matrix(' + scaleX +\n                  ' 0' +\n                  ' 0 ' +\n                  scaleY + ' ' +\n                  (minX * scaleX) + ' ' +\n                  (minY * scaleY) + ') ';\n\n    if (element.nodeName === 'svg') {\n      el = element.ownerDocument.createElement('g');\n      // element.firstChild != null\n      while (element.firstChild) {\n        el.appendChild(element.firstChild);\n      }\n      element.appendChild(el);\n    }\n    else {\n      el = element;\n      matrix = el.getAttribute('transform') + matrix;\n    }\n\n    el.setAttribute('transform', matrix);\n    return parsedDim;\n  }\n\n  /**\n   * Parses an SVG document, converts it to an array of corresponding fabric.* instances and passes them to a callback\n   * @static\n   * @function\n   * @memberOf fabric\n   * @param {SVGDocument} doc SVG document to parse\n   * @param {Function} callback Callback to call when parsing is finished;\n   * It's being passed an array of elements (parsed from a document).\n   * @param {Function} [reviver] Method for further parsing of SVG elements, called after each fabric object created.\n   */\n  fabric.parseSVGDocument = (function() {\n\n    function hasAncestorWithNodeName(element, nodeName) {\n      while (element && (element = element.parentNode)) {\n        if (element.nodeName && nodeName.test(element.nodeName.replace('svg:', ''))\n          && !element.getAttribute('instantiated_by_use')) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    return function(doc, callback, reviver) {\n      if (!doc) {\n        return;\n      }\n\n      parseUseDirectives(doc);\n\n      var startTime = new Date(),\n          svgUid =  fabric.Object.__uid++,\n          options = applyViewboxTransform(doc),\n          descendants = fabric.util.toArray(doc.getElementsByTagName('*'));\n\n      options.svgUid = svgUid;\n\n      if (descendants.length === 0 && fabric.isLikelyNode) {\n        // we're likely in node, where \"o3-xml\" library fails to gEBTN(\"*\")\n        // https://github.com/ajaxorg/node-o3-xml/issues/21\n        descendants = doc.selectNodes('//*[name(.)!=\"svg\"]');\n        var arr = [];\n        for (var i = 0, len = descendants.length; i < len; i++) {\n          arr[i] = descendants[i];\n        }\n        descendants = arr;\n      }\n\n      var elements = descendants.filter(function(el) {\n        applyViewboxTransform(el);\n        return reAllowedSVGTagNames.test(el.nodeName.replace('svg:', '')) &&\n              !hasAncestorWithNodeName(el, reNotAllowedAncestors); // http://www.w3.org/TR/SVG/struct.html#DefsElement\n      });\n\n      if (!elements || (elements && !elements.length)) {\n        callback && callback([], {});\n        return;\n      }\n\n      fabric.gradientDefs[svgUid] = fabric.getGradientDefs(doc);\n      fabric.cssRules[svgUid] = fabric.getCSSRules(doc);\n      // Precedence of rules:   style > class > attribute\n      fabric.parseElements(elements, function(instances) {\n        fabric.documentParsingTime = new Date() - startTime;\n        if (callback) {\n          callback(instances, options);\n        }\n      }, clone(options), reviver);\n    };\n  })();\n\n  /**\n   * Used for caching SVG documents (loaded via `fabric.Canvas#loadSVGFromURL`)\n   * @namespace\n   */\n  var svgCache = {\n\n    /**\n     * @param {String} name\n     * @param {Function} callback\n     */\n    has: function (name, callback) {\n      callback(false);\n    },\n\n    get: function () {\n      /* NOOP */\n    },\n\n    set: function () {\n      /* NOOP */\n    }\n  };\n\n  /**\n   * @private\n   */\n  function _enlivenCachedObject(cachedObject) {\n\n    var objects = cachedObject.objects,\n        options = cachedObject.options;\n\n    objects = objects.map(function (o) {\n      return fabric[capitalize(o.type)].fromObject(o);\n    });\n\n    return ({ objects: objects, options: options });\n  }\n\n  /**\n   * @private\n   */\n  function _createSVGPattern(markup, canvas, property) {\n    if (canvas[property] && canvas[property].toSVG) {\n      markup.push(\n        '\\t<pattern x=\"0\" y=\"0\" id=\"', property, 'Pattern\" ',\n          'width=\"', canvas[property].source.width,\n          '\" height=\"', canvas[property].source.height,\n          '\" patternUnits=\"userSpaceOnUse\">\\n',\n        '\\t\\t<image x=\"0\" y=\"0\" ',\n        'width=\"', canvas[property].source.width,\n        '\" height=\"', canvas[property].source.height,\n        '\" xlink:href=\"', canvas[property].source.src,\n        '\"></image>\\n\\t</pattern>\\n'\n      );\n    }\n  }\n\n  var reFontDeclaration = new RegExp(\n    '(normal|italic)?\\\\s*(normal|small-caps)?\\\\s*' +\n    '(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\\\s*(' +\n      fabric.reNum +\n    '(?:px|cm|mm|em|pt|pc|in)*)(?:\\\\/(normal|' + fabric.reNum + '))?\\\\s+(.*)');\n\n  extend(fabric, {\n    /**\n     * Parses a short font declaration, building adding its properties to a style object\n     * @static\n     * @function\n     * @memberOf fabric\n     * @param {String} value font declaration\n     * @param {Object} oStyle definition\n     */\n    parseFontDeclaration: function(value, oStyle) {\n      var match = value.match(reFontDeclaration);\n\n      if (!match) {\n        return;\n      }\n      var fontStyle = match[1],\n          // font variant is not used\n          // fontVariant = match[2],\n          fontWeight = match[3],\n          fontSize = match[4],\n          lineHeight = match[5],\n          fontFamily = match[6];\n\n      if (fontStyle) {\n        oStyle.fontStyle = fontStyle;\n      }\n      if (fontWeight) {\n        oStyle.fontWeight = isNaN(parseFloat(fontWeight)) ? fontWeight : parseFloat(fontWeight);\n      }\n      if (fontSize) {\n        oStyle.fontSize = parseUnit(fontSize);\n      }\n      if (fontFamily) {\n        oStyle.fontFamily = fontFamily;\n      }\n      if (lineHeight) {\n        oStyle.lineHeight = lineHeight === 'normal' ? 1 : lineHeight;\n      }\n    },\n\n    /**\n     * Parses an SVG document, returning all of the gradient declarations found in it\n     * @static\n     * @function\n     * @memberOf fabric\n     * @param {SVGDocument} doc SVG document to parse\n     * @return {Object} Gradient definitions; key corresponds to element id, value -- to gradient definition element\n     */\n    getGradientDefs: function(doc) {\n      var tagArray = [\n            'linearGradient',\n            'radialGradient',\n            'svg:linearGradient',\n            'svg:radialGradient'],\n          elList = _getMultipleNodes(doc, tagArray),\n          el, j = 0, id, xlink,\n          gradientDefs = { }, idsToXlinkMap = { };\n\n      j = elList.length;\n\n      while (j--) {\n        el = elList[j];\n        xlink = el.getAttribute('xlink:href');\n        id = el.getAttribute('id');\n        if (xlink) {\n          idsToXlinkMap[id] = xlink.substr(1);\n        }\n        gradientDefs[id] = el;\n      }\n\n      for (id in idsToXlinkMap) {\n        var el2 = gradientDefs[idsToXlinkMap[id]].cloneNode(true);\n        el = gradientDefs[id];\n        while (el2.firstChild) {\n          el.appendChild(el2.firstChild);\n        }\n      }\n      return gradientDefs;\n    },\n\n    /**\n     * Returns an object of attributes' name/value, given element and an array of attribute names;\n     * Parses parent \"g\" nodes recursively upwards.\n     * @static\n     * @memberOf fabric\n     * @param {DOMElement} element Element to parse\n     * @param {Array} attributes Array of attributes to parse\n     * @return {Object} object containing parsed attributes' names/values\n     */\n    parseAttributes: function(element, attributes, svgUid) {\n\n      if (!element) {\n        return;\n      }\n\n      var value,\n          parentAttributes = { },\n          fontSize;\n\n      if (typeof svgUid === 'undefined') {\n        svgUid = element.getAttribute('svgUid');\n      }\n      // if there's a parent container (`g` or `a` or `symbol` node), parse its attributes recursively upwards\n      if (element.parentNode && reAllowedParents.test(element.parentNode.nodeName)) {\n        parentAttributes = fabric.parseAttributes(element.parentNode, attributes, svgUid);\n      }\n      fontSize = (parentAttributes && parentAttributes.fontSize ) ||\n                 element.getAttribute('font-size') || fabric.Text.DEFAULT_SVG_FONT_SIZE;\n\n      var ownAttributes = attributes.reduce(function(memo, attr) {\n        value = element.getAttribute(attr);\n        if (value) {\n          attr = normalizeAttr(attr);\n          value = normalizeValue(attr, value, parentAttributes, fontSize);\n\n          memo[attr] = value;\n        }\n        return memo;\n      }, { });\n\n      // add values parsed from style, which take precedence over attributes\n      // (see: http://www.w3.org/TR/SVG/styling.html#UsingPresentationAttributes)\n      ownAttributes = extend(ownAttributes,\n        extend(getGlobalStylesForElement(element, svgUid), fabric.parseStyleAttribute(element)));\n      if (ownAttributes.font) {\n        fabric.parseFontDeclaration(ownAttributes.font, ownAttributes);\n      }\n      return _setStrokeFillOpacity(extend(parentAttributes, ownAttributes));\n    },\n\n    /**\n     * Transforms an array of svg elements to corresponding fabric.* instances\n     * @static\n     * @memberOf fabric\n     * @param {Array} elements Array of elements to parse\n     * @param {Function} callback Being passed an array of fabric instances (transformed from SVG elements)\n     * @param {Object} [options] Options object\n     * @param {Function} [reviver] Method for further parsing of SVG elements, called after each fabric object created.\n     */\n    parseElements: function(elements, callback, options, reviver) {\n      new fabric.ElementsParser(elements, callback, options, reviver).parse();\n    },\n\n    /**\n     * Parses \"style\" attribute, retuning an object with values\n     * @static\n     * @memberOf fabric\n     * @param {SVGElement} element Element to parse\n     * @return {Object} Objects with values parsed from style attribute of an element\n     */\n    parseStyleAttribute: function(element) {\n      var oStyle = { },\n          style = element.getAttribute('style');\n\n      if (!style) {\n        return oStyle;\n      }\n\n      if (typeof style === 'string') {\n        parseStyleString(style, oStyle);\n      }\n      else {\n        parseStyleObject(style, oStyle);\n      }\n\n      return oStyle;\n    },\n\n    /**\n     * Parses \"points\" attribute, returning an array of values\n     * @static\n     * @memberOf fabric\n     * @param {String} points points attribute string\n     * @return {Array} array of points\n     */\n    parsePointsAttribute: function(points) {\n\n      // points attribute is required and must not be empty\n      if (!points) {\n        return null;\n      }\n\n      // replace commas with whitespace and remove bookending whitespace\n      points = points.replace(/,/g, ' ').trim();\n\n      points = points.split(/\\s+/);\n      var parsedPoints = [], i, len;\n\n      i = 0;\n      len = points.length;\n      for (; i < len; i += 2) {\n        parsedPoints.push({\n          x: parseFloat(points[i]),\n          y: parseFloat(points[i + 1])\n        });\n      }\n\n      // odd number of points is an error\n      // if (parsedPoints.length % 2 !== 0) {\n      //   return null;\n      // }\n\n      return parsedPoints;\n    },\n\n    /**\n     * Returns CSS rules for a given SVG document\n     * @static\n     * @function\n     * @memberOf fabric\n     * @param {SVGDocument} doc SVG document to parse\n     * @return {Object} CSS rules of this document\n     */\n    getCSSRules: function(doc) {\n      var styles = doc.getElementsByTagName('style'),\n          allRules = { }, rules;\n\n      // very crude parsing of style contents\n      for (var i = 0, len = styles.length; i < len; i++) {\n        // IE9 doesn't support textContent, but provides text instead.\n        var styleContents = styles[i].textContent || styles[i].text;\n\n        // remove comments\n        styleContents = styleContents.replace(/\\/\\*[\\s\\S]*?\\*\\//g, '');\n        if (styleContents.trim() === '') {\n          continue;\n        }\n        rules = styleContents.match(/[^{]*\\{[\\s\\S]*?\\}/g);\n        rules = rules.map(function(rule) { return rule.trim(); });\n        rules.forEach(function(rule) {\n\n          var match = rule.match(/([\\s\\S]*?)\\s*\\{([^}]*)\\}/),\n              ruleObj = { }, declaration = match[2].trim(),\n              propertyValuePairs = declaration.replace(/;$/, '').split(/\\s*;\\s*/);\n\n          for (var i = 0, len = propertyValuePairs.length; i < len; i++) {\n            var pair = propertyValuePairs[i].split(/\\s*:\\s*/),\n                property = normalizeAttr(pair[0]),\n                value = normalizeValue(property, pair[1], pair[0]);\n            ruleObj[property] = value;\n          }\n          rule = match[1];\n          rule.split(',').forEach(function(_rule) {\n            _rule = _rule.replace(/^svg/i, '').trim();\n            if (_rule === '') {\n              return;\n            }\n            if (allRules[_rule]) {\n              fabric.util.object.extend(allRules[_rule], ruleObj);\n            }\n            else {\n              allRules[_rule] = fabric.util.object.clone(ruleObj);\n            }\n          });\n        });\n      }\n      return allRules;\n    },\n\n    /**\n     * Takes url corresponding to an SVG document, and parses it into a set of fabric objects.\n     * Note that SVG is fetched via XMLHttpRequest, so it needs to conform to SOP (Same Origin Policy)\n     * @memberOf fabric\n     * @param {String} url\n     * @param {Function} callback\n     * @param {Function} [reviver] Method for further parsing of SVG elements, called after each fabric object created.\n     */\n    loadSVGFromURL: function(url, callback, reviver) {\n\n      url = url.replace(/^\\n\\s*/, '').trim();\n      svgCache.has(url, function (hasUrl) {\n        if (hasUrl) {\n          svgCache.get(url, function (value) {\n            var enlivedRecord = _enlivenCachedObject(value);\n            callback(enlivedRecord.objects, enlivedRecord.options);\n          });\n        }\n        else {\n          new fabric.util.request(url, {\n            method: 'get',\n            onComplete: onComplete\n          });\n        }\n      });\n\n      function onComplete(r) {\n\n        var xml = r.responseXML;\n        if (xml && !xml.documentElement && fabric.window.ActiveXObject && r.responseText) {\n          xml = new ActiveXObject('Microsoft.XMLDOM');\n          xml.async = 'false';\n          //IE chokes on DOCTYPE\n          xml.loadXML(r.responseText.replace(/<!DOCTYPE[\\s\\S]*?(\\[[\\s\\S]*\\])*?>/i, ''));\n        }\n        if (!xml || !xml.documentElement) {\n          callback && callback(null);\n        }\n\n        fabric.parseSVGDocument(xml.documentElement, function (results, options) {\n          svgCache.set(url, {\n            objects: fabric.util.array.invoke(results, 'toObject'),\n            options: options\n          });\n          callback && callback(results, options);\n        }, reviver);\n      }\n    },\n\n    /**\n     * Takes string corresponding to an SVG document, and parses it into a set of fabric objects\n     * @memberOf fabric\n     * @param {String} string\n     * @param {Function} callback\n     * @param {Function} [reviver] Method for further parsing of SVG elements, called after each fabric object created.\n     */\n    loadSVGFromString: function(string, callback, reviver) {\n      string = string.trim();\n      var doc;\n      if (typeof DOMParser !== 'undefined') {\n        var parser = new DOMParser();\n        if (parser && parser.parseFromString) {\n          doc = parser.parseFromString(string, 'text/xml');\n        }\n      }\n      else if (fabric.window.ActiveXObject) {\n        doc = new ActiveXObject('Microsoft.XMLDOM');\n        doc.async = 'false';\n        // IE chokes on DOCTYPE\n        doc.loadXML(string.replace(/<!DOCTYPE[\\s\\S]*?(\\[[\\s\\S]*\\])*?>/i, ''));\n      }\n\n      fabric.parseSVGDocument(doc.documentElement, function (results, options) {\n        callback(results, options);\n      }, reviver);\n    },\n\n    /**\n     * Creates markup containing SVG font faces,\n     * font URLs for font faces must be collected by developers\n     * and are not extracted from the DOM by fabricjs\n     * @param {Array} objects Array of fabric objects\n     * @return {String}\n     */\n    createSVGFontFacesMarkup: function(objects) {\n      var markup = '', fontList = { }, obj, fontFamily,\n          style, row, rowIndex, _char, charIndex,\n          fontPaths = fabric.fontPaths;\n\n      for (var i = 0, len = objects.length; i < len; i++) {\n        obj = objects[i];\n        fontFamily = obj.fontFamily;\n        if (obj.type.indexOf('text') === -1 || fontList[fontFamily] || !fontPaths[fontFamily]) {\n          continue;\n        }\n        fontList[fontFamily] = true;\n        if (!obj.styles) {\n          continue;\n        }\n        style = obj.styles;\n        for (rowIndex in style) {\n          row = style[rowIndex];\n          for (charIndex in row) {\n            _char = row[charIndex];\n            fontFamily = _char.fontFamily;\n            if (!fontList[fontFamily] && fontPaths[fontFamily]) {\n              fontList[fontFamily] = true;\n            }\n          }\n        }\n      }\n\n      for (var j in fontList) {\n        markup += [\n          '\\t\\t@font-face {\\n',\n          '\\t\\t\\tfont-family: \\'', j, '\\';\\n',\n          '\\t\\t\\tsrc: url(\\'', fontPaths[j], '\\');\\n',\n          '\\t\\t}\\n'\n        ].join('');\n      }\n\n      if (markup) {\n        markup = [\n          '\\t<style type=\"text/css\">',\n          '<![CDATA[\\n',\n          markup,\n          ']]>',\n          '</style>\\n'\n        ].join('');\n      }\n\n      return markup;\n    },\n\n    /**\n     * Creates markup containing SVG referenced elements like patterns, gradients etc.\n     * @param {fabric.Canvas} canvas instance of fabric.Canvas\n     * @return {String}\n     */\n    createSVGRefElementsMarkup: function(canvas) {\n      var markup = [];\n\n      _createSVGPattern(markup, canvas, 'backgroundColor');\n      _createSVGPattern(markup, canvas, 'overlayColor');\n\n      return markup.join('');\n    }\n  });\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\nfabric.ElementsParser = function(elements, callback, options, reviver) {\n  this.elements = elements;\n  this.callback = callback;\n  this.options = options;\n  this.reviver = reviver;\n  this.svgUid = (options && options.svgUid) || 0;\n};\n\nfabric.ElementsParser.prototype.parse = function() {\n  this.instances = new Array(this.elements.length);\n  this.numElements = this.elements.length;\n\n  this.createObjects();\n};\n\nfabric.ElementsParser.prototype.createObjects = function() {\n  for (var i = 0, len = this.elements.length; i < len; i++) {\n    this.elements[i].setAttribute('svgUid', this.svgUid);\n    (function(_obj, i) {\n      setTimeout(function() {\n        _obj.createObject(_obj.elements[i], i);\n      }, 0);\n    })(this, i);\n  }\n};\n\nfabric.ElementsParser.prototype.createObject = function(el, index) {\n  var klass = fabric[fabric.util.string.capitalize(el.tagName.replace('svg:', ''))];\n  if (klass && klass.fromElement) {\n    try {\n      this._createObject(klass, el, index);\n    }\n    catch (err) {\n      fabric.log(err);\n    }\n  }\n  else {\n    this.checkIfDone();\n  }\n};\n\nfabric.ElementsParser.prototype._createObject = function(klass, el, index) {\n  if (klass.async) {\n    klass.fromElement(el, this.createCallback(index, el), this.options);\n  }\n  else {\n    var obj = klass.fromElement(el, this.options);\n    this.resolveGradient(obj, 'fill');\n    this.resolveGradient(obj, 'stroke');\n    this.reviver && this.reviver(el, obj);\n    this.instances[index] = obj;\n    this.checkIfDone();\n  }\n};\n\nfabric.ElementsParser.prototype.createCallback = function(index, el) {\n  var _this = this;\n  return function(obj) {\n    _this.resolveGradient(obj, 'fill');\n    _this.resolveGradient(obj, 'stroke');\n    _this.reviver && _this.reviver(el, obj);\n    _this.instances[index] = obj;\n    _this.checkIfDone();\n  };\n};\n\nfabric.ElementsParser.prototype.resolveGradient = function(obj, property) {\n\n  var instanceFillValue = obj.get(property);\n  if (!(/^url\\(/).test(instanceFillValue)) {\n    return;\n  }\n  var gradientId = instanceFillValue.slice(5, instanceFillValue.length - 1);\n  if (fabric.gradientDefs[this.svgUid][gradientId]) {\n    obj.set(property,\n      fabric.Gradient.fromElement(fabric.gradientDefs[this.svgUid][gradientId], obj));\n  }\n};\n\nfabric.ElementsParser.prototype.checkIfDone = function() {\n  if (--this.numElements === 0) {\n    this.instances = this.instances.filter(function(el) {\n      // eslint-disable-next-line no-eq-null, eqeqeq\n      return el != null;\n    });\n    this.callback(this.instances);\n  }\n};\n\n\n(function(global) {\n\n  'use strict';\n\n  /* Adaptation of work of Kevin Lindsey (kevin@kevlindev.com) */\n\n  var fabric = global.fabric || (global.fabric = { });\n\n  if (fabric.Point) {\n    fabric.warn('fabric.Point is already defined');\n    return;\n  }\n\n  fabric.Point = Point;\n\n  /**\n   * Point class\n   * @class fabric.Point\n   * @memberOf fabric\n   * @constructor\n   * @param {Number} x\n   * @param {Number} y\n   * @return {fabric.Point} thisArg\n   */\n  function Point(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  Point.prototype = /** @lends fabric.Point.prototype */ {\n\n    type: 'point',\n\n    constructor: Point,\n\n    /**\n     * Adds another point to this one and returns another one\n     * @param {fabric.Point} that\n     * @return {fabric.Point} new Point instance with added values\n     */\n    add: function (that) {\n      return new Point(this.x + that.x, this.y + that.y);\n    },\n\n    /**\n     * Adds another point to this one\n     * @param {fabric.Point} that\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    addEquals: function (that) {\n      this.x += that.x;\n      this.y += that.y;\n      return this;\n    },\n\n    /**\n     * Adds value to this point and returns a new one\n     * @param {Number} scalar\n     * @return {fabric.Point} new Point with added value\n     */\n    scalarAdd: function (scalar) {\n      return new Point(this.x + scalar, this.y + scalar);\n    },\n\n    /**\n     * Adds value to this point\n     * @param {Number} scalar\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    scalarAddEquals: function (scalar) {\n      this.x += scalar;\n      this.y += scalar;\n      return this;\n    },\n\n    /**\n     * Subtracts another point from this point and returns a new one\n     * @param {fabric.Point} that\n     * @return {fabric.Point} new Point object with subtracted values\n     */\n    subtract: function (that) {\n      return new Point(this.x - that.x, this.y - that.y);\n    },\n\n    /**\n     * Subtracts another point from this point\n     * @param {fabric.Point} that\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    subtractEquals: function (that) {\n      this.x -= that.x;\n      this.y -= that.y;\n      return this;\n    },\n\n    /**\n     * Subtracts value from this point and returns a new one\n     * @param {Number} scalar\n     * @return {fabric.Point}\n     */\n    scalarSubtract: function (scalar) {\n      return new Point(this.x - scalar, this.y - scalar);\n    },\n\n    /**\n     * Subtracts value from this point\n     * @param {Number} scalar\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    scalarSubtractEquals: function (scalar) {\n      this.x -= scalar;\n      this.y -= scalar;\n      return this;\n    },\n\n    /**\n     * Miltiplies this point by a value and returns a new one\n     * TODO: rename in scalarMultiply in 2.0\n     * @param {Number} scalar\n     * @return {fabric.Point}\n     */\n    multiply: function (scalar) {\n      return new Point(this.x * scalar, this.y * scalar);\n    },\n\n    /**\n     * Miltiplies this point by a value\n     * TODO: rename in scalarMultiplyEquals in 2.0\n     * @param {Number} scalar\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    multiplyEquals: function (scalar) {\n      this.x *= scalar;\n      this.y *= scalar;\n      return this;\n    },\n\n    /**\n     * Divides this point by a value and returns a new one\n     * TODO: rename in scalarDivide in 2.0\n     * @param {Number} scalar\n     * @return {fabric.Point}\n     */\n    divide: function (scalar) {\n      return new Point(this.x / scalar, this.y / scalar);\n    },\n\n    /**\n     * Divides this point by a value\n     * TODO: rename in scalarDivideEquals in 2.0\n     * @param {Number} scalar\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    divideEquals: function (scalar) {\n      this.x /= scalar;\n      this.y /= scalar;\n      return this;\n    },\n\n    /**\n     * Returns true if this point is equal to another one\n     * @param {fabric.Point} that\n     * @return {Boolean}\n     */\n    eq: function (that) {\n      return (this.x === that.x && this.y === that.y);\n    },\n\n    /**\n     * Returns true if this point is less than another one\n     * @param {fabric.Point} that\n     * @return {Boolean}\n     */\n    lt: function (that) {\n      return (this.x < that.x && this.y < that.y);\n    },\n\n    /**\n     * Returns true if this point is less than or equal to another one\n     * @param {fabric.Point} that\n     * @return {Boolean}\n     */\n    lte: function (that) {\n      return (this.x <= that.x && this.y <= that.y);\n    },\n\n    /**\n\n     * Returns true if this point is greater another one\n     * @param {fabric.Point} that\n     * @return {Boolean}\n     */\n    gt: function (that) {\n      return (this.x > that.x && this.y > that.y);\n    },\n\n    /**\n     * Returns true if this point is greater than or equal to another one\n     * @param {fabric.Point} that\n     * @return {Boolean}\n     */\n    gte: function (that) {\n      return (this.x >= that.x && this.y >= that.y);\n    },\n\n    /**\n     * Returns new point which is the result of linear interpolation with this one and another one\n     * @param {fabric.Point} that\n     * @param {Number} t , position of interpolation, between 0 and 1 default 0.5\n     * @return {fabric.Point}\n     */\n    lerp: function (that, t) {\n      if (typeof t === 'undefined') {\n        t = 0.5;\n      }\n      t = Math.max(Math.min(1, t), 0);\n      return new Point(this.x + (that.x - this.x) * t, this.y + (that.y - this.y) * t);\n    },\n\n    /**\n     * Returns distance from this point and another one\n     * @param {fabric.Point} that\n     * @return {Number}\n     */\n    distanceFrom: function (that) {\n      var dx = this.x - that.x,\n          dy = this.y - that.y;\n      return Math.sqrt(dx * dx + dy * dy);\n    },\n\n    /**\n     * Returns the point between this point and another one\n     * @param {fabric.Point} that\n     * @return {fabric.Point}\n     */\n    midPointFrom: function (that) {\n      return this.lerp(that);\n    },\n\n    /**\n     * Returns a new point which is the min of this and another one\n     * @param {fabric.Point} that\n     * @return {fabric.Point}\n     */\n    min: function (that) {\n      return new Point(Math.min(this.x, that.x), Math.min(this.y, that.y));\n    },\n\n    /**\n     * Returns a new point which is the max of this and another one\n     * @param {fabric.Point} that\n     * @return {fabric.Point}\n     */\n    max: function (that) {\n      return new Point(Math.max(this.x, that.x), Math.max(this.y, that.y));\n    },\n\n    /**\n     * Returns string representation of this point\n     * @return {String}\n     */\n    toString: function () {\n      return this.x + ',' + this.y;\n    },\n\n    /**\n     * Sets x/y of this point\n     * @param {Number} x\n     * @param {Number} y\n     * @chainable\n     */\n    setXY: function (x, y) {\n      this.x = x;\n      this.y = y;\n      return this;\n    },\n\n    /**\n     * Sets x of this point\n     * @param {Number} x\n     * @chainable\n     */\n    setX: function (x) {\n      this.x = x;\n      return this;\n    },\n\n    /**\n     * Sets y of this point\n     * @param {Number} y\n     * @chainable\n     */\n    setY: function (y) {\n      this.y = y;\n      return this;\n    },\n\n    /**\n     * Sets x/y of this point from another point\n     * @param {fabric.Point} that\n     * @chainable\n     */\n    setFromPoint: function (that) {\n      this.x = that.x;\n      this.y = that.y;\n      return this;\n    },\n\n    /**\n     * Swaps x/y of this point and another point\n     * @param {fabric.Point} that\n     */\n    swap: function (that) {\n      var x = this.x,\n          y = this.y;\n      this.x = that.x;\n      this.y = that.y;\n      that.x = x;\n      that.y = y;\n    },\n\n    /**\n     * return a cloned instance of the point\n     * @return {fabric.Point}\n     */\n    clone: function () {\n      return new Point(this.x, this.y);\n    }\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  /* Adaptation of work of Kevin Lindsey (kevin@kevlindev.com) */\n  var fabric = global.fabric || (global.fabric = { });\n\n  if (fabric.Intersection) {\n    fabric.warn('fabric.Intersection is already defined');\n    return;\n  }\n\n  /**\n   * Intersection class\n   * @class fabric.Intersection\n   * @memberOf fabric\n   * @constructor\n   */\n  function Intersection(status) {\n    this.status = status;\n    this.points = [];\n  }\n\n  fabric.Intersection = Intersection;\n\n  fabric.Intersection.prototype = /** @lends fabric.Intersection.prototype */ {\n\n    constructor: Intersection,\n\n    /**\n     * Appends a point to intersection\n     * @param {fabric.Point} point\n     * @return {fabric.Intersection} thisArg\n     * @chainable\n     */\n    appendPoint: function (point) {\n      this.points.push(point);\n      return this;\n    },\n\n    /**\n     * Appends points to intersection\n     * @param {Array} points\n     * @return {fabric.Intersection} thisArg\n     * @chainable\n     */\n    appendPoints: function (points) {\n      this.points = this.points.concat(points);\n      return this;\n    }\n  };\n\n  /**\n   * Checks if one line intersects another\n   * TODO: rename in intersectSegmentSegment\n   * @static\n   * @param {fabric.Point} a1\n   * @param {fabric.Point} a2\n   * @param {fabric.Point} b1\n   * @param {fabric.Point} b2\n   * @return {fabric.Intersection}\n   */\n  fabric.Intersection.intersectLineLine = function (a1, a2, b1, b2) {\n    var result,\n        uaT = (b2.x - b1.x) * (a1.y - b1.y) - (b2.y - b1.y) * (a1.x - b1.x),\n        ubT = (a2.x - a1.x) * (a1.y - b1.y) - (a2.y - a1.y) * (a1.x - b1.x),\n        uB = (b2.y - b1.y) * (a2.x - a1.x) - (b2.x - b1.x) * (a2.y - a1.y);\n    if (uB !== 0) {\n      var ua = uaT / uB,\n          ub = ubT / uB;\n      if (0 <= ua && ua <= 1 && 0 <= ub && ub <= 1) {\n        result = new Intersection('Intersection');\n        result.appendPoint(new fabric.Point(a1.x + ua * (a2.x - a1.x), a1.y + ua * (a2.y - a1.y)));\n      }\n      else {\n        result = new Intersection();\n      }\n    }\n    else {\n      if (uaT === 0 || ubT === 0) {\n        result = new Intersection('Coincident');\n      }\n      else {\n        result = new Intersection('Parallel');\n      }\n    }\n    return result;\n  };\n\n  /**\n   * Checks if line intersects polygon\n   * TODO: rename in intersectSegmentPolygon\n   * fix detection of coincident\n   * @static\n   * @param {fabric.Point} a1\n   * @param {fabric.Point} a2\n   * @param {Array} points\n   * @return {fabric.Intersection}\n   */\n  fabric.Intersection.intersectLinePolygon = function(a1, a2, points) {\n    var result = new Intersection(),\n        length = points.length,\n        b1, b2, inter;\n\n    for (var i = 0; i < length; i++) {\n      b1 = points[i];\n      b2 = points[(i + 1) % length];\n      inter = Intersection.intersectLineLine(a1, a2, b1, b2);\n\n      result.appendPoints(inter.points);\n    }\n    if (result.points.length > 0) {\n      result.status = 'Intersection';\n    }\n    return result;\n  };\n\n  /**\n   * Checks if polygon intersects another polygon\n   * @static\n   * @param {Array} points1\n   * @param {Array} points2\n   * @return {fabric.Intersection}\n   */\n  fabric.Intersection.intersectPolygonPolygon = function (points1, points2) {\n    var result = new Intersection(),\n        length = points1.length;\n\n    for (var i = 0; i < length; i++) {\n      var a1 = points1[i],\n          a2 = points1[(i + 1) % length],\n          inter = Intersection.intersectLinePolygon(a1, a2, points2);\n\n      result.appendPoints(inter.points);\n    }\n    if (result.points.length > 0) {\n      result.status = 'Intersection';\n    }\n    return result;\n  };\n\n  /**\n   * Checks if polygon intersects rectangle\n   * @static\n   * @param {Array} points\n   * @param {fabric.Point} r1\n   * @param {fabric.Point} r2\n   * @return {fabric.Intersection}\n   */\n  fabric.Intersection.intersectPolygonRectangle = function (points, r1, r2) {\n    var min = r1.min(r2),\n        max = r1.max(r2),\n        topRight = new fabric.Point(max.x, min.y),\n        bottomLeft = new fabric.Point(min.x, max.y),\n        inter1 = Intersection.intersectLinePolygon(min, topRight, points),\n        inter2 = Intersection.intersectLinePolygon(topRight, max, points),\n        inter3 = Intersection.intersectLinePolygon(max, bottomLeft, points),\n        inter4 = Intersection.intersectLinePolygon(bottomLeft, min, points),\n        result = new Intersection();\n\n    result.appendPoints(inter1.points);\n    result.appendPoints(inter2.points);\n    result.appendPoints(inter3.points);\n    result.appendPoints(inter4.points);\n\n    if (result.points.length > 0) {\n      result.status = 'Intersection';\n    }\n    return result;\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { });\n\n  if (fabric.Color) {\n    fabric.warn('fabric.Color is already defined.');\n    return;\n  }\n\n  /**\n   * Color class\n   * The purpose of {@link fabric.Color} is to abstract and encapsulate common color operations;\n   * {@link fabric.Color} is a constructor and creates instances of {@link fabric.Color} objects.\n   *\n   * @class fabric.Color\n   * @param {String} color optional in hex or rgb(a) or hsl format or from known color list\n   * @return {fabric.Color} thisArg\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-2/#colors}\n   */\n  function Color(color) {\n    if (!color) {\n      this.setSource([0, 0, 0, 1]);\n    }\n    else {\n      this._tryParsingColor(color);\n    }\n  }\n\n  fabric.Color = Color;\n\n  fabric.Color.prototype = /** @lends fabric.Color.prototype */ {\n\n    /**\n     * @private\n     * @param {String|Array} color Color value to parse\n     */\n    _tryParsingColor: function(color) {\n      var source;\n\n      if (color in Color.colorNameMap) {\n        color = Color.colorNameMap[color];\n      }\n\n      if (color === 'transparent') {\n        source = [255, 255, 255, 0];\n      }\n\n      if (!source) {\n        source = Color.sourceFromHex(color);\n      }\n      if (!source) {\n        source = Color.sourceFromRgb(color);\n      }\n      if (!source) {\n        source = Color.sourceFromHsl(color);\n      }\n      if (!source) {\n        //if color is not recognize let's make black as canvas does\n        source = [0, 0, 0, 1];\n      }\n      if (source) {\n        this.setSource(source);\n      }\n    },\n\n    /**\n     * Adapted from <a href=\"https://rawgithub.com/mjijackson/mjijackson.github.com/master/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript.html\">https://github.com/mjijackson</a>\n     * @private\n     * @param {Number} r Red color value\n     * @param {Number} g Green color value\n     * @param {Number} b Blue color value\n     * @return {Array} Hsl color\n     */\n    _rgbToHsl: function(r, g, b) {\n      r /= 255; g /= 255; b /= 255;\n\n      var h, s, l,\n          max = fabric.util.array.max([r, g, b]),\n          min = fabric.util.array.min([r, g, b]);\n\n      l = (max + min) / 2;\n\n      if (max === min) {\n        h = s = 0; // achromatic\n      }\n      else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch (max) {\n          case r:\n            h = (g - b) / d + (g < b ? 6 : 0);\n            break;\n          case g:\n            h = (b - r) / d + 2;\n            break;\n          case b:\n            h = (r - g) / d + 4;\n            break;\n        }\n        h /= 6;\n      }\n\n      return [\n        Math.round(h * 360),\n        Math.round(s * 100),\n        Math.round(l * 100)\n      ];\n    },\n\n    /**\n     * Returns source of this color (where source is an array representation; ex: [200, 200, 100, 1])\n     * @return {Array}\n     */\n    getSource: function() {\n      return this._source;\n    },\n\n    /**\n     * Sets source of this color (where source is an array representation; ex: [200, 200, 100, 1])\n     * @param {Array} source\n     */\n    setSource: function(source) {\n      this._source = source;\n    },\n\n    /**\n     * Returns color represenation in RGB format\n     * @return {String} ex: rgb(0-255,0-255,0-255)\n     */\n    toRgb: function() {\n      var source = this.getSource();\n      return 'rgb(' + source[0] + ',' + source[1] + ',' + source[2] + ')';\n    },\n\n    /**\n     * Returns color represenation in RGBA format\n     * @return {String} ex: rgba(0-255,0-255,0-255,0-1)\n     */\n    toRgba: function() {\n      var source = this.getSource();\n      return 'rgba(' + source[0] + ',' + source[1] + ',' + source[2] + ',' + source[3] + ')';\n    },\n\n    /**\n     * Returns color represenation in HSL format\n     * @return {String} ex: hsl(0-360,0%-100%,0%-100%)\n     */\n    toHsl: function() {\n      var source = this.getSource(),\n          hsl = this._rgbToHsl(source[0], source[1], source[2]);\n\n      return 'hsl(' + hsl[0] + ',' + hsl[1] + '%,' + hsl[2] + '%)';\n    },\n\n    /**\n     * Returns color represenation in HSLA format\n     * @return {String} ex: hsla(0-360,0%-100%,0%-100%,0-1)\n     */\n    toHsla: function() {\n      var source = this.getSource(),\n          hsl = this._rgbToHsl(source[0], source[1], source[2]);\n\n      return 'hsla(' + hsl[0] + ',' + hsl[1] + '%,' + hsl[2] + '%,' + source[3] + ')';\n    },\n\n    /**\n     * Returns color represenation in HEX format\n     * @return {String} ex: FF5555\n     */\n    toHex: function() {\n      var source = this.getSource(), r, g, b;\n\n      r = source[0].toString(16);\n      r = (r.length === 1) ? ('0' + r) : r;\n\n      g = source[1].toString(16);\n      g = (g.length === 1) ? ('0' + g) : g;\n\n      b = source[2].toString(16);\n      b = (b.length === 1) ? ('0' + b) : b;\n\n      return r.toUpperCase() + g.toUpperCase() + b.toUpperCase();\n    },\n\n    /**\n     * Gets value of alpha channel for this color\n     * @return {Number} 0-1\n     */\n    getAlpha: function() {\n      return this.getSource()[3];\n    },\n\n    /**\n     * Sets value of alpha channel for this color\n     * @param {Number} alpha Alpha value 0-1\n     * @return {fabric.Color} thisArg\n     */\n    setAlpha: function(alpha) {\n      var source = this.getSource();\n      source[3] = alpha;\n      this.setSource(source);\n      return this;\n    },\n\n    /**\n     * Transforms color to its grayscale representation\n     * @return {fabric.Color} thisArg\n     */\n    toGrayscale: function() {\n      var source = this.getSource(),\n          average = parseInt((source[0] * 0.3 + source[1] * 0.59 + source[2] * 0.11).toFixed(0), 10),\n          currentAlpha = source[3];\n      this.setSource([average, average, average, currentAlpha]);\n      return this;\n    },\n\n    /**\n     * Transforms color to its black and white representation\n     * @param {Number} threshold\n     * @return {fabric.Color} thisArg\n     */\n    toBlackWhite: function(threshold) {\n      var source = this.getSource(),\n          average = (source[0] * 0.3 + source[1] * 0.59 + source[2] * 0.11).toFixed(0),\n          currentAlpha = source[3];\n\n      threshold = threshold || 127;\n\n      average = (Number(average) < Number(threshold)) ? 0 : 255;\n      this.setSource([average, average, average, currentAlpha]);\n      return this;\n    },\n\n    /**\n     * Overlays color with another color\n     * @param {String|fabric.Color} otherColor\n     * @return {fabric.Color} thisArg\n     */\n    overlayWith: function(otherColor) {\n      if (!(otherColor instanceof Color)) {\n        otherColor = new Color(otherColor);\n      }\n\n      var result = [],\n          alpha = this.getAlpha(),\n          otherAlpha = 0.5,\n          source = this.getSource(),\n          otherSource = otherColor.getSource();\n\n      for (var i = 0; i < 3; i++) {\n        result.push(Math.round((source[i] * (1 - otherAlpha)) + (otherSource[i] * otherAlpha)));\n      }\n\n      result[3] = alpha;\n      this.setSource(result);\n      return this;\n    }\n  };\n\n  /**\n   * Regex matching color in RGB or RGBA formats (ex: rgb(0, 0, 0), rgba(255, 100, 10, 0.5), rgba( 255 , 100 , 10 , 0.5 ), rgb(1,1,1), rgba(100%, 60%, 10%, 0.5))\n   * @static\n   * @field\n   * @memberOf fabric.Color\n   */\n   // eslint-disable-next-line max-len\n  fabric.Color.reRGBa = /^rgba?\\(\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*,\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*,\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*(?:\\s*,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)$/;\n\n  /**\n   * Regex matching color in HSL or HSLA formats (ex: hsl(200, 80%, 10%), hsla(300, 50%, 80%, 0.5), hsla( 300 , 50% , 80% , 0.5 ))\n   * @static\n   * @field\n   * @memberOf fabric.Color\n   */\n  fabric.Color.reHSLa = /^hsla?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3}\\%)\\s*,\\s*(\\d{1,3}\\%)\\s*(?:\\s*,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)$/;\n\n  /**\n   * Regex matching color in HEX format (ex: #FF5544CC, #FF5555, 010155, aff)\n   * @static\n   * @field\n   * @memberOf fabric.Color\n   */\n  fabric.Color.reHex = /^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i;\n\n  /**\n   * Map of the 17 basic color names with HEX code\n   * @static\n   * @field\n   * @memberOf fabric.Color\n   * @see: http://www.w3.org/TR/CSS2/syndata.html#color-units\n   */\n  fabric.Color.colorNameMap = {\n    aqua:    '#00FFFF',\n    black:   '#000000',\n    blue:    '#0000FF',\n    fuchsia: '#FF00FF',\n    gray:    '#808080',\n    grey:    '#808080',\n    green:   '#008000',\n    lime:    '#00FF00',\n    maroon:  '#800000',\n    navy:    '#000080',\n    olive:   '#808000',\n    orange:  '#FFA500',\n    purple:  '#800080',\n    red:     '#FF0000',\n    silver:  '#C0C0C0',\n    teal:    '#008080',\n    white:   '#FFFFFF',\n    yellow:  '#FFFF00'\n  };\n\n  /**\n   * @private\n   * @param {Number} p\n   * @param {Number} q\n   * @param {Number} t\n   * @return {Number}\n   */\n  function hue2rgb(p, q, t) {\n    if (t < 0) {\n      t += 1;\n    }\n    if (t > 1) {\n      t -= 1;\n    }\n    if (t < 1 / 6) {\n      return p + (q - p) * 6 * t;\n    }\n    if (t < 1 / 2) {\n      return q;\n    }\n    if (t < 2 / 3) {\n      return p + (q - p) * (2 / 3 - t) * 6;\n    }\n    return p;\n  }\n\n  /**\n   * Returns new color object, when given a color in RGB format\n   * @memberOf fabric.Color\n   * @param {String} color Color value ex: rgb(0-255,0-255,0-255)\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromRgb = function(color) {\n    return Color.fromSource(Color.sourceFromRgb(color));\n  };\n\n  /**\n   * Returns array representation (ex: [100, 100, 200, 1]) of a color that's in RGB or RGBA format\n   * @memberOf fabric.Color\n   * @param {String} color Color value ex: rgb(0-255,0-255,0-255), rgb(0%-100%,0%-100%,0%-100%)\n   * @return {Array} source\n   */\n  fabric.Color.sourceFromRgb = function(color) {\n    var match = color.match(Color.reRGBa);\n    if (match) {\n      var r = parseInt(match[1], 10) / (/%$/.test(match[1]) ? 100 : 1) * (/%$/.test(match[1]) ? 255 : 1),\n          g = parseInt(match[2], 10) / (/%$/.test(match[2]) ? 100 : 1) * (/%$/.test(match[2]) ? 255 : 1),\n          b = parseInt(match[3], 10) / (/%$/.test(match[3]) ? 100 : 1) * (/%$/.test(match[3]) ? 255 : 1);\n\n      return [\n        parseInt(r, 10),\n        parseInt(g, 10),\n        parseInt(b, 10),\n        match[4] ? parseFloat(match[4]) : 1\n      ];\n    }\n  };\n\n  /**\n   * Returns new color object, when given a color in RGBA format\n   * @static\n   * @function\n   * @memberOf fabric.Color\n   * @param {String} color\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromRgba = Color.fromRgb;\n\n  /**\n   * Returns new color object, when given a color in HSL format\n   * @param {String} color Color value ex: hsl(0-260,0%-100%,0%-100%)\n   * @memberOf fabric.Color\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromHsl = function(color) {\n    return Color.fromSource(Color.sourceFromHsl(color));\n  };\n\n  /**\n   * Returns array representation (ex: [100, 100, 200, 1]) of a color that's in HSL or HSLA format.\n   * Adapted from <a href=\"https://rawgithub.com/mjijackson/mjijackson.github.com/master/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript.html\">https://github.com/mjijackson</a>\n   * @memberOf fabric.Color\n   * @param {String} color Color value ex: hsl(0-360,0%-100%,0%-100%) or hsla(0-360,0%-100%,0%-100%, 0-1)\n   * @return {Array} source\n   * @see http://http://www.w3.org/TR/css3-color/#hsl-color\n   */\n  fabric.Color.sourceFromHsl = function(color) {\n    var match = color.match(Color.reHSLa);\n    if (!match) {\n      return;\n    }\n\n    var h = (((parseFloat(match[1]) % 360) + 360) % 360) / 360,\n        s = parseFloat(match[2]) / (/%$/.test(match[2]) ? 100 : 1),\n        l = parseFloat(match[3]) / (/%$/.test(match[3]) ? 100 : 1),\n        r, g, b;\n\n    if (s === 0) {\n      r = g = b = l;\n    }\n    else {\n      var q = l <= 0.5 ? l * (s + 1) : l + s - l * s,\n          p = l * 2 - q;\n\n      r = hue2rgb(p, q, h + 1 / 3);\n      g = hue2rgb(p, q, h);\n      b = hue2rgb(p, q, h - 1 / 3);\n    }\n\n    return [\n      Math.round(r * 255),\n      Math.round(g * 255),\n      Math.round(b * 255),\n      match[4] ? parseFloat(match[4]) : 1\n    ];\n  };\n\n  /**\n   * Returns new color object, when given a color in HSLA format\n   * @static\n   * @function\n   * @memberOf fabric.Color\n   * @param {String} color\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromHsla = Color.fromHsl;\n\n  /**\n   * Returns new color object, when given a color in HEX format\n   * @static\n   * @memberOf fabric.Color\n   * @param {String} color Color value ex: FF5555\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromHex = function(color) {\n    return Color.fromSource(Color.sourceFromHex(color));\n  };\n\n  /**\n   * Returns array representation (ex: [100, 100, 200, 1]) of a color that's in HEX format\n   * @static\n   * @memberOf fabric.Color\n   * @param {String} color ex: FF5555 or FF5544CC (RGBa)\n   * @return {Array} source\n   */\n  fabric.Color.sourceFromHex = function(color) {\n    if (color.match(Color.reHex)) {\n      var value = color.slice(color.indexOf('#') + 1),\n          isShortNotation = (value.length === 3 || value.length === 4),\n          isRGBa = (value.length === 8 || value.length === 4),\n          r = isShortNotation ? (value.charAt(0) + value.charAt(0)) : value.substring(0, 2),\n          g = isShortNotation ? (value.charAt(1) + value.charAt(1)) : value.substring(2, 4),\n          b = isShortNotation ? (value.charAt(2) + value.charAt(2)) : value.substring(4, 6),\n          a = isRGBa ? (isShortNotation ? (value.charAt(3) + value.charAt(3)) : value.substring(6, 8)) : 'FF';\n\n      return [\n        parseInt(r, 16),\n        parseInt(g, 16),\n        parseInt(b, 16),\n        parseFloat((parseInt(a, 16) / 255).toFixed(2))\n      ];\n    }\n  };\n\n  /**\n   * Returns new color object, when given color in array representation (ex: [200, 100, 100, 0.5])\n   * @static\n   * @memberOf fabric.Color\n   * @param {Array} source\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromSource = function(source) {\n    var oColor = new Color();\n    oColor.setSource(source);\n    return oColor;\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function() {\n\n  /* _FROM_SVG_START_ */\n  function getColorStop(el) {\n    var style = el.getAttribute('style'),\n        offset = el.getAttribute('offset') || 0,\n        color, colorAlpha, opacity;\n\n    // convert percents to absolute values\n    offset = parseFloat(offset) / (/%$/.test(offset) ? 100 : 1);\n    offset = offset < 0 ? 0 : offset > 1 ? 1 : offset;\n    if (style) {\n      var keyValuePairs = style.split(/\\s*;\\s*/);\n\n      if (keyValuePairs[keyValuePairs.length - 1] === '') {\n        keyValuePairs.pop();\n      }\n\n      for (var i = keyValuePairs.length; i--; ) {\n\n        var split = keyValuePairs[i].split(/\\s*:\\s*/),\n            key = split[0].trim(),\n            value = split[1].trim();\n\n        if (key === 'stop-color') {\n          color = value;\n        }\n        else if (key === 'stop-opacity') {\n          opacity = value;\n        }\n      }\n    }\n\n    if (!color) {\n      color = el.getAttribute('stop-color') || 'rgb(0,0,0)';\n    }\n    if (!opacity) {\n      opacity = el.getAttribute('stop-opacity');\n    }\n\n    color = new fabric.Color(color);\n    colorAlpha = color.getAlpha();\n    opacity = isNaN(parseFloat(opacity)) ? 1 : parseFloat(opacity);\n    opacity *= colorAlpha;\n\n    return {\n      offset: offset,\n      color: color.toRgb(),\n      opacity: opacity\n    };\n  }\n\n  function getLinearCoords(el) {\n    return {\n      x1: el.getAttribute('x1') || 0,\n      y1: el.getAttribute('y1') || 0,\n      x2: el.getAttribute('x2') || '100%',\n      y2: el.getAttribute('y2') || 0\n    };\n  }\n\n  function getRadialCoords(el) {\n    return {\n      x1: el.getAttribute('fx') || el.getAttribute('cx') || '50%',\n      y1: el.getAttribute('fy') || el.getAttribute('cy') || '50%',\n      r1: 0,\n      x2: el.getAttribute('cx') || '50%',\n      y2: el.getAttribute('cy') || '50%',\n      r2: el.getAttribute('r') || '50%'\n    };\n  }\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Gradient class\n   * @class fabric.Gradient\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-2#gradients}\n   * @see {@link fabric.Gradient#initialize} for constructor definition\n   */\n  fabric.Gradient = fabric.util.createClass(/** @lends fabric.Gradient.prototype */ {\n\n    /**\n     * Horizontal offset for aligning gradients coming from SVG when outside pathgroups\n     * @type Number\n     * @default 0\n     */\n    offsetX: 0,\n\n    /**\n     * Vertical offset for aligning gradients coming from SVG when outside pathgroups\n     * @type Number\n     * @default 0\n     */\n    offsetY: 0,\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object with type, coords, gradientUnits and colorStops\n     * @return {fabric.Gradient} thisArg\n     */\n    initialize: function(options) {\n      options || (options = { });\n\n      var coords = { };\n\n      this.id = fabric.Object.__uid++;\n      this.type = options.type || 'linear';\n\n      coords = {\n        x1: options.coords.x1 || 0,\n        y1: options.coords.y1 || 0,\n        x2: options.coords.x2 || 0,\n        y2: options.coords.y2 || 0\n      };\n\n      if (this.type === 'radial') {\n        coords.r1 = options.coords.r1 || 0;\n        coords.r2 = options.coords.r2 || 0;\n      }\n      this.coords = coords;\n      this.colorStops = options.colorStops.slice();\n      if (options.gradientTransform) {\n        this.gradientTransform = options.gradientTransform;\n      }\n      this.offsetX = options.offsetX || this.offsetX;\n      this.offsetY = options.offsetY || this.offsetY;\n    },\n\n    /**\n     * Adds another colorStop\n     * @param {Object} colorStop Object with offset and color\n     * @return {fabric.Gradient} thisArg\n     */\n    addColorStop: function(colorStop) {\n      for (var position in colorStop) {\n        var color = new fabric.Color(colorStop[position]);\n        this.colorStops.push({\n          offset: position,\n          color: color.toRgb(),\n          opacity: color.getAlpha()\n        });\n      }\n      return this;\n    },\n\n    /**\n     * Returns object representation of a gradient\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object}\n     */\n    toObject: function(propertiesToInclude) {\n      var object = {\n        type: this.type,\n        coords: this.coords,\n        colorStops: this.colorStops,\n        offsetX: this.offsetX,\n        offsetY: this.offsetY,\n        gradientTransform: this.gradientTransform ? this.gradientTransform.concat() : this.gradientTransform\n      };\n      fabric.util.populateWithProperties(this, object, propertiesToInclude);\n\n      return object;\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns SVG representation of an gradient\n     * @param {Object} object Object to create a gradient for\n     * @return {String} SVG representation of an gradient (linear/radial)\n     */\n    toSVG: function(object) {\n      var coords = fabric.util.object.clone(this.coords),\n          markup, commonAttributes;\n\n      // colorStops must be sorted ascending\n      this.colorStops.sort(function(a, b) {\n        return a.offset - b.offset;\n      });\n\n      if (!(object.group && object.group.type === 'path-group')) {\n        for (var prop in coords) {\n          if (prop === 'x1' || prop === 'x2' || prop === 'r2') {\n            coords[prop] += this.offsetX - object.width / 2;\n          }\n          else if (prop === 'y1' || prop === 'y2') {\n            coords[prop] += this.offsetY - object.height / 2;\n          }\n        }\n      }\n\n      commonAttributes = 'id=\"SVGID_' + this.id +\n                     '\" gradientUnits=\"userSpaceOnUse\"';\n      if (this.gradientTransform) {\n        commonAttributes += ' gradientTransform=\"matrix(' + this.gradientTransform.join(' ') + ')\" ';\n      }\n      if (this.type === 'linear') {\n        markup = [\n          '<linearGradient ',\n          commonAttributes,\n          ' x1=\"', coords.x1,\n          '\" y1=\"', coords.y1,\n          '\" x2=\"', coords.x2,\n          '\" y2=\"', coords.y2,\n          '\">\\n'\n        ];\n      }\n      else if (this.type === 'radial') {\n        markup = [\n          '<radialGradient ',\n          commonAttributes,\n          ' cx=\"', coords.x2,\n          '\" cy=\"', coords.y2,\n          '\" r=\"', coords.r2,\n          '\" fx=\"', coords.x1,\n          '\" fy=\"', coords.y1,\n          '\">\\n'\n        ];\n      }\n\n      for (var i = 0; i < this.colorStops.length; i++) {\n        markup.push(\n          '<stop ',\n            'offset=\"', (this.colorStops[i].offset * 100) + '%',\n            '\" style=\"stop-color:', this.colorStops[i].color,\n            (this.colorStops[i].opacity !== null ? ';stop-opacity: ' + this.colorStops[i].opacity : ';'),\n          '\"/>\\n'\n        );\n      }\n\n      markup.push((this.type === 'linear' ? '</linearGradient>\\n' : '</radialGradient>\\n'));\n\n      return markup.join('');\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Returns an instance of CanvasGradient\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Object} object\n     * @return {CanvasGradient}\n     */\n    toLive: function(ctx, object) {\n      var gradient, prop, coords = fabric.util.object.clone(this.coords);\n\n      if (!this.type) {\n        return;\n      }\n\n      if (object.group && object.group.type === 'path-group') {\n        for (prop in coords) {\n          if (prop === 'x1' || prop === 'x2') {\n            coords[prop] += -this.offsetX + object.width / 2;\n          }\n          else if (prop === 'y1' || prop === 'y2') {\n            coords[prop] += -this.offsetY + object.height / 2;\n          }\n        }\n      }\n\n      if (this.type === 'linear') {\n        gradient = ctx.createLinearGradient(\n          coords.x1, coords.y1, coords.x2, coords.y2);\n      }\n      else if (this.type === 'radial') {\n        gradient = ctx.createRadialGradient(\n          coords.x1, coords.y1, coords.r1, coords.x2, coords.y2, coords.r2);\n      }\n\n      for (var i = 0, len = this.colorStops.length; i < len; i++) {\n        var color = this.colorStops[i].color,\n            opacity = this.colorStops[i].opacity,\n            offset = this.colorStops[i].offset;\n\n        if (typeof opacity !== 'undefined') {\n          color = new fabric.Color(color).setAlpha(opacity).toRgba();\n        }\n        gradient.addColorStop(parseFloat(offset), color);\n      }\n\n      return gradient;\n    }\n  });\n\n  fabric.util.object.extend(fabric.Gradient, {\n\n    /* _FROM_SVG_START_ */\n    /**\n     * Returns {@link fabric.Gradient} instance from an SVG element\n     * @static\n     * @memberOf fabric.Gradient\n     * @param {SVGGradientElement} el SVG gradient element\n     * @param {fabric.Object} instance\n     * @return {fabric.Gradient} Gradient instance\n     * @see http://www.w3.org/TR/SVG/pservers.html#LinearGradientElement\n     * @see http://www.w3.org/TR/SVG/pservers.html#RadialGradientElement\n     */\n    fromElement: function(el, instance) {\n\n      /**\n       *  @example:\n       *\n       *  <linearGradient id=\"linearGrad1\">\n       *    <stop offset=\"0%\" stop-color=\"white\"/>\n       *    <stop offset=\"100%\" stop-color=\"black\"/>\n       *  </linearGradient>\n       *\n       *  OR\n       *\n       *  <linearGradient id=\"linearGrad2\">\n       *    <stop offset=\"0\" style=\"stop-color:rgb(255,255,255)\"/>\n       *    <stop offset=\"1\" style=\"stop-color:rgb(0,0,0)\"/>\n       *  </linearGradient>\n       *\n       *  OR\n       *\n       *  <radialGradient id=\"radialGrad1\">\n       *    <stop offset=\"0%\" stop-color=\"white\" stop-opacity=\"1\" />\n       *    <stop offset=\"50%\" stop-color=\"black\" stop-opacity=\"0.5\" />\n       *    <stop offset=\"100%\" stop-color=\"white\" stop-opacity=\"1\" />\n       *  </radialGradient>\n       *\n       *  OR\n       *\n       *  <radialGradient id=\"radialGrad2\">\n       *    <stop offset=\"0\" stop-color=\"rgb(255,255,255)\" />\n       *    <stop offset=\"0.5\" stop-color=\"rgb(0,0,0)\" />\n       *    <stop offset=\"1\" stop-color=\"rgb(255,255,255)\" />\n       *  </radialGradient>\n       *\n       */\n\n      var colorStopEls = el.getElementsByTagName('stop'),\n          type,\n          gradientUnits = el.getAttribute('gradientUnits') || 'objectBoundingBox',\n          gradientTransform = el.getAttribute('gradientTransform'),\n          colorStops = [],\n          coords, ellipseMatrix;\n\n      if (el.nodeName === 'linearGradient' || el.nodeName === 'LINEARGRADIENT') {\n        type = 'linear';\n      }\n      else {\n        type = 'radial';\n      }\n\n      if (type === 'linear') {\n        coords = getLinearCoords(el);\n      }\n      else if (type === 'radial') {\n        coords = getRadialCoords(el);\n      }\n\n      for (var i = colorStopEls.length; i--; ) {\n        colorStops.push(getColorStop(colorStopEls[i]));\n      }\n\n      ellipseMatrix = _convertPercentUnitsToValues(instance, coords, gradientUnits);\n\n      var gradient = new fabric.Gradient({\n        type: type,\n        coords: coords,\n        colorStops: colorStops,\n        offsetX: -instance.left,\n        offsetY: -instance.top\n      });\n\n      if (gradientTransform || ellipseMatrix !== '') {\n        gradient.gradientTransform = fabric.parseTransformAttribute((gradientTransform || '') + ellipseMatrix);\n      }\n      return gradient;\n    },\n    /* _FROM_SVG_END_ */\n\n    /**\n     * Returns {@link fabric.Gradient} instance from its object representation\n     * @static\n     * @memberOf fabric.Gradient\n     * @param {Object} obj\n     * @param {Object} [options] Options object\n     */\n    forObject: function(obj, options) {\n      options || (options = { });\n      _convertPercentUnitsToValues(obj, options.coords, 'userSpaceOnUse');\n      return new fabric.Gradient(options);\n    }\n  });\n\n  /**\n   * @private\n   */\n  function _convertPercentUnitsToValues(object, options, gradientUnits) {\n    var propValue, addFactor = 0, multFactor = 1, ellipseMatrix = '';\n    for (var prop in options) {\n      if (options[prop] === 'Infinity') {\n        options[prop] = 1;\n      }\n      else if (options[prop] === '-Infinity') {\n        options[prop] = 0;\n      }\n      propValue = parseFloat(options[prop], 10);\n      if (typeof options[prop] === 'string' && /^\\d+%$/.test(options[prop])) {\n        multFactor = 0.01;\n      }\n      else {\n        multFactor = 1;\n      }\n      if (prop === 'x1' || prop === 'x2' || prop === 'r2') {\n        multFactor *= gradientUnits === 'objectBoundingBox' ? object.width : 1;\n        addFactor = gradientUnits === 'objectBoundingBox' ? object.left || 0 : 0;\n      }\n      else if (prop === 'y1' || prop === 'y2') {\n        multFactor *= gradientUnits === 'objectBoundingBox' ? object.height : 1;\n        addFactor = gradientUnits === 'objectBoundingBox' ? object.top || 0 : 0;\n      }\n      options[prop] = propValue * multFactor + addFactor;\n    }\n    if (object.type === 'ellipse' &&\n        options.r2 !== null &&\n        gradientUnits === 'objectBoundingBox' &&\n        object.rx !== object.ry) {\n\n      var scaleFactor = object.ry / object.rx;\n      ellipseMatrix = ' scale(1, ' + scaleFactor + ')';\n      if (options.y1) {\n        options.y1 /= scaleFactor;\n      }\n      if (options.y2) {\n        options.y2 /= scaleFactor;\n      }\n    }\n    return ellipseMatrix;\n  }\n})();\n\n\n/**\n * Pattern class\n * @class fabric.Pattern\n * @see {@link http://fabricjs.com/patterns|Pattern demo}\n * @see {@link http://fabricjs.com/dynamic-patterns|DynamicPattern demo}\n * @see {@link fabric.Pattern#initialize} for constructor definition\n */\nfabric.Pattern = fabric.util.createClass(/** @lends fabric.Pattern.prototype */ {\n\n  /**\n   * Repeat property of a pattern (one of repeat, repeat-x, repeat-y or no-repeat)\n   * @type String\n   * @default\n   */\n  repeat: 'repeat',\n\n  /**\n   * Pattern horizontal offset from object's left/top corner\n   * @type Number\n   * @default\n   */\n  offsetX: 0,\n\n  /**\n   * Pattern vertical offset from object's left/top corner\n   * @type Number\n   * @default\n   */\n  offsetY: 0,\n\n  /**\n   * Constructor\n   * @param {Object} [options] Options object\n   * @return {fabric.Pattern} thisArg\n   */\n  initialize: function(options) {\n    options || (options = { });\n\n    this.id = fabric.Object.__uid++;\n\n    if (options.source) {\n      if (typeof options.source === 'string') {\n        // function string\n        if (typeof fabric.util.getFunctionBody(options.source) !== 'undefined') {\n          this.source = new Function(fabric.util.getFunctionBody(options.source));\n        }\n        else {\n          // img src string\n          var _this = this;\n          this.source = fabric.util.createImage();\n          fabric.util.loadImage(options.source, function(img) {\n            _this.source = img;\n          });\n        }\n      }\n      else {\n        // img element\n        this.source = options.source;\n      }\n    }\n    if (options.repeat) {\n      this.repeat = options.repeat;\n    }\n    if (options.offsetX) {\n      this.offsetX = options.offsetX;\n    }\n    if (options.offsetY) {\n      this.offsetY = options.offsetY;\n    }\n  },\n\n  /**\n   * Returns object representation of a pattern\n   * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n   * @return {Object} Object representation of a pattern instance\n   */\n  toObject: function(propertiesToInclude) {\n\n    var source, object;\n\n    // callback\n    if (typeof this.source === 'function') {\n      source = String(this.source);\n    }\n    // <img> element\n    else if (typeof this.source.src === 'string') {\n      source = this.source.src;\n    }\n    // <canvas> element\n    else if (typeof this.source === 'object' && this.source.toDataURL) {\n      source = this.source.toDataURL();\n    }\n\n    object = {\n      source: source,\n      repeat: this.repeat,\n      offsetX: this.offsetX,\n      offsetY: this.offsetY\n    };\n    fabric.util.populateWithProperties(this, object, propertiesToInclude);\n\n    return object;\n  },\n\n  /* _TO_SVG_START_ */\n  /**\n   * Returns SVG representation of a pattern\n   * @param {fabric.Object} object\n   * @return {String} SVG representation of a pattern\n   */\n  toSVG: function(object) {\n    var patternSource = typeof this.source === 'function' ? this.source() : this.source,\n        patternWidth = patternSource.width / object.getWidth(),\n        patternHeight = patternSource.height / object.getHeight(),\n        patternOffsetX = this.offsetX / object.getWidth(),\n        patternOffsetY = this.offsetY / object.getHeight(),\n        patternImgSrc = '';\n    if (this.repeat === 'repeat-x' || this.repeat === 'no-repeat') {\n      patternHeight = 1;\n    }\n    if (this.repeat === 'repeat-y' || this.repeat === 'no-repeat') {\n      patternWidth = 1;\n    }\n    if (patternSource.src) {\n      patternImgSrc = patternSource.src;\n    }\n    else if (patternSource.toDataURL) {\n      patternImgSrc = patternSource.toDataURL();\n    }\n\n    return '<pattern id=\"SVGID_' + this.id +\n                  '\" x=\"' + patternOffsetX +\n                  '\" y=\"' + patternOffsetY +\n                  '\" width=\"' + patternWidth +\n                  '\" height=\"' + patternHeight + '\">\\n' +\n             '<image x=\"0\" y=\"0\"' +\n                    ' width=\"' + patternSource.width +\n                    '\" height=\"' + patternSource.height +\n                    '\" xlink:href=\"' + patternImgSrc +\n             '\"></image>\\n' +\n           '</pattern>\\n';\n  },\n  /* _TO_SVG_END_ */\n\n  /**\n   * Returns an instance of CanvasPattern\n   * @param {CanvasRenderingContext2D} ctx Context to create pattern\n   * @return {CanvasPattern}\n   */\n  toLive: function(ctx) {\n    var source = typeof this.source === 'function'\n      ? this.source()\n      : this.source;\n\n    // if the image failed to load, return, and allow rest to continue loading\n    if (!source) {\n      return '';\n    }\n\n    // if an image\n    if (typeof source.src !== 'undefined') {\n      if (!source.complete) {\n        return '';\n      }\n      if (source.naturalWidth === 0 || source.naturalHeight === 0) {\n        return '';\n      }\n    }\n    return ctx.createPattern(source, this.repeat);\n  }\n});\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      toFixed = fabric.util.toFixed;\n\n  if (fabric.Shadow) {\n    fabric.warn('fabric.Shadow is already defined.');\n    return;\n  }\n\n  /**\n   * Shadow class\n   * @class fabric.Shadow\n   * @see {@link http://fabricjs.com/shadows|Shadow demo}\n   * @see {@link fabric.Shadow#initialize} for constructor definition\n   */\n  fabric.Shadow = fabric.util.createClass(/** @lends fabric.Shadow.prototype */ {\n\n    /**\n     * Shadow color\n     * @type String\n     * @default\n     */\n    color: 'rgb(0,0,0)',\n\n    /**\n     * Shadow blur\n     * @type Number\n     */\n    blur: 0,\n\n    /**\n     * Shadow horizontal offset\n     * @type Number\n     * @default\n     */\n    offsetX: 0,\n\n    /**\n     * Shadow vertical offset\n     * @type Number\n     * @default\n     */\n    offsetY: 0,\n\n    /**\n     * Whether the shadow should affect stroke operations\n     * @type Boolean\n     * @default\n     */\n    affectStroke: false,\n\n    /**\n     * Indicates whether toObject should include default values\n     * @type Boolean\n     * @default\n     */\n    includeDefaultValues: true,\n\n    /**\n     * Constructor\n     * @param {Object|String} [options] Options object with any of color, blur, offsetX, offsetX properties or string (e.g. \"rgba(0,0,0,0.2) 2px 2px 10px, \"2px 2px 10px rgba(0,0,0,0.2)\")\n     * @return {fabric.Shadow} thisArg\n     */\n    initialize: function(options) {\n\n      if (typeof options === 'string') {\n        options = this._parseShadow(options);\n      }\n\n      for (var prop in options) {\n        this[prop] = options[prop];\n      }\n\n      this.id = fabric.Object.__uid++;\n    },\n\n    /**\n     * @private\n     * @param {String} shadow Shadow value to parse\n     * @return {Object} Shadow object with color, offsetX, offsetY and blur\n     */\n    _parseShadow: function(shadow) {\n      var shadowStr = shadow.trim(),\n          offsetsAndBlur = fabric.Shadow.reOffsetsAndBlur.exec(shadowStr) || [],\n          color = shadowStr.replace(fabric.Shadow.reOffsetsAndBlur, '') || 'rgb(0,0,0)';\n\n      return {\n        color: color.trim(),\n        offsetX: parseInt(offsetsAndBlur[1], 10) || 0,\n        offsetY: parseInt(offsetsAndBlur[2], 10) || 0,\n        blur: parseInt(offsetsAndBlur[3], 10) || 0\n      };\n    },\n\n    /**\n     * Returns a string representation of an instance\n     * @see http://www.w3.org/TR/css-text-decor-3/#text-shadow\n     * @return {String} Returns CSS3 text-shadow declaration\n     */\n    toString: function() {\n      return [this.offsetX, this.offsetY, this.blur, this.color].join('px ');\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns SVG representation of a shadow\n     * @param {fabric.Object} object\n     * @return {String} SVG representation of a shadow\n     */\n    toSVG: function(object) {\n      var fBoxX = 40, fBoxY = 40, NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS,\n          offset = fabric.util.rotateVector(\n            { x: this.offsetX, y: this.offsetY },\n            fabric.util.degreesToRadians(-object.angle)),\n          BLUR_BOX = 20;\n\n      if (object.width && object.height) {\n        //http://www.w3.org/TR/SVG/filters.html#FilterEffectsRegion\n        // we add some extra space to filter box to contain the blur ( 20 )\n        fBoxX = toFixed((Math.abs(offset.x) + this.blur) / object.width, NUM_FRACTION_DIGITS) * 100 + BLUR_BOX;\n        fBoxY = toFixed((Math.abs(offset.y) + this.blur) / object.height, NUM_FRACTION_DIGITS) * 100 + BLUR_BOX;\n      }\n      if (object.flipX) {\n        offset.x *= -1;\n      }\n      if (object.flipY) {\n        offset.y *= -1;\n      }\n      return (\n        '<filter id=\"SVGID_' + this.id + '\" y=\"-' + fBoxY + '%\" height=\"' + (100 + 2 * fBoxY) + '%\" ' +\n          'x=\"-' + fBoxX + '%\" width=\"' + (100 + 2 * fBoxX) + '%\" ' + '>\\n' +\n          '\\t<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"' +\n            toFixed(this.blur ? this.blur / 2 : 0, NUM_FRACTION_DIGITS) + '\"></feGaussianBlur>\\n' +\n          '\\t<feOffset dx=\"' + toFixed(offset.x, NUM_FRACTION_DIGITS) +\n          '\" dy=\"' + toFixed(offset.y, NUM_FRACTION_DIGITS) + '\" result=\"oBlur\" ></feOffset>\\n' +\n          '\\t<feFlood flood-color=\"' + this.color + '\"/>\\n' +\n          '\\t<feComposite in2=\"oBlur\" operator=\"in\" />\\n' +\n          '\\t<feMerge>\\n' +\n            '\\t\\t<feMergeNode></feMergeNode>\\n' +\n            '\\t\\t<feMergeNode in=\"SourceGraphic\"></feMergeNode>\\n' +\n          '\\t</feMerge>\\n' +\n        '</filter>\\n');\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Returns object representation of a shadow\n     * @return {Object} Object representation of a shadow instance\n     */\n    toObject: function() {\n      if (this.includeDefaultValues) {\n        return {\n          color: this.color,\n          blur: this.blur,\n          offsetX: this.offsetX,\n          offsetY: this.offsetY,\n          affectStroke: this.affectStroke\n        };\n      }\n      var obj = { }, proto = fabric.Shadow.prototype;\n\n      ['color', 'blur', 'offsetX', 'offsetY', 'affectStroke'].forEach(function(prop) {\n        if (this[prop] !== proto[prop]) {\n          obj[prop] = this[prop];\n        }\n      }, this);\n\n      return obj;\n    }\n  });\n\n  /**\n   * Regex matching shadow offsetX, offsetY and blur (ex: \"2px 2px 10px rgba(0,0,0,0.2)\", \"rgb(0,255,0) 2px 2px\")\n   * @static\n   * @field\n   * @memberOf fabric.Shadow\n   */\n  // eslint-disable-next-line max-len\n  fabric.Shadow.reOffsetsAndBlur = /(?:\\s|^)(-?\\d+(?:px)?(?:\\s?|$))?(-?\\d+(?:px)?(?:\\s?|$))?(\\d+(?:px)?)?(?:\\s?|$)(?:$|\\s)/;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function () {\n\n  'use strict';\n\n  if (fabric.StaticCanvas) {\n    fabric.warn('fabric.StaticCanvas is already defined.');\n    return;\n  }\n\n  // aliases for faster resolution\n  var extend = fabric.util.object.extend,\n      getElementOffset = fabric.util.getElementOffset,\n      removeFromArray = fabric.util.removeFromArray,\n      toFixed = fabric.util.toFixed,\n\n      CANVAS_INIT_ERROR = new Error('Could not initialize `canvas` element');\n\n  /**\n   * Static canvas class\n   * @class fabric.StaticCanvas\n   * @mixes fabric.Collection\n   * @mixes fabric.Observable\n   * @see {@link http://fabricjs.com/static_canvas|StaticCanvas demo}\n   * @see {@link fabric.StaticCanvas#initialize} for constructor definition\n   * @fires before:render\n   * @fires after:render\n   * @fires canvas:cleared\n   * @fires object:added\n   * @fires object:removed\n   */\n  fabric.StaticCanvas = fabric.util.createClass(/** @lends fabric.StaticCanvas.prototype */ {\n\n    /**\n     * Constructor\n     * @param {HTMLElement | String} el &lt;canvas> element to initialize instance on\n     * @param {Object} [options] Options object\n     * @return {Object} thisArg\n     */\n    initialize: function(el, options) {\n      options || (options = { });\n\n      this._initStatic(el, options);\n    },\n\n    /**\n     * Background color of canvas instance.\n     * Should be set via {@link fabric.StaticCanvas#setBackgroundColor}.\n     * @type {(String|fabric.Pattern)}\n     * @default\n     */\n    backgroundColor: '',\n\n    /**\n     * Background image of canvas instance.\n     * Should be set via {@link fabric.StaticCanvas#setBackgroundImage}.\n     * <b>Backwards incompatibility note:</b> The \"backgroundImageOpacity\"\n     * and \"backgroundImageStretch\" properties are deprecated since 1.3.9.\n     * Use {@link fabric.Image#opacity}, {@link fabric.Image#width} and {@link fabric.Image#height}.\n     * @type fabric.Image\n     * @default\n     */\n    backgroundImage: null,\n\n    /**\n     * Overlay color of canvas instance.\n     * Should be set via {@link fabric.StaticCanvas#setOverlayColor}\n     * @since 1.3.9\n     * @type {(String|fabric.Pattern)}\n     * @default\n     */\n    overlayColor: '',\n\n    /**\n     * Overlay image of canvas instance.\n     * Should be set via {@link fabric.StaticCanvas#setOverlayImage}.\n     * <b>Backwards incompatibility note:</b> The \"overlayImageLeft\"\n     * and \"overlayImageTop\" properties are deprecated since 1.3.9.\n     * Use {@link fabric.Image#left} and {@link fabric.Image#top}.\n     * @type fabric.Image\n     * @default\n     */\n    overlayImage: null,\n\n    /**\n     * Indicates whether toObject/toDatalessObject should include default values\n     * @type Boolean\n     * @default\n     */\n    includeDefaultValues: true,\n\n    /**\n     * Indicates whether objects' state should be saved\n     * @type Boolean\n     * @default\n     */\n    stateful: false,\n\n    /**\n     * Indicates whether {@link fabric.Collection.add}, {@link fabric.Collection.insertAt} and {@link fabric.Collection.remove} should also re-render canvas.\n     * Disabling this option could give a great performance boost when adding/removing a lot of objects to/from canvas at once\n     * (followed by a manual rendering after addition/deletion)\n     * @type Boolean\n     * @default\n     */\n    renderOnAddRemove: true,\n\n    /**\n     * Function that determines clipping of entire canvas area\n     * Being passed context as first argument. See clipping canvas area in {@link https://github.com/kangax/fabric.js/wiki/FAQ}\n     * @type Function\n     * @default\n     */\n    clipTo: null,\n\n    /**\n     * Indicates whether object controls (borders/controls) are rendered above overlay image\n     * @type Boolean\n     * @default\n     */\n    controlsAboveOverlay: false,\n\n    /**\n     * Indicates whether the browser can be scrolled when using a touchscreen and dragging on the canvas\n     * @type Boolean\n     * @default\n     */\n    allowTouchScrolling: false,\n\n    /**\n     * Indicates whether this canvas will use image smoothing, this is on by default in browsers\n     * @type Boolean\n     * @default\n     */\n    imageSmoothingEnabled: true,\n\n    /**\n     * The transformation (in the format of Canvas transform) which focuses the viewport\n     * @type Array\n     * @default\n     */\n    viewportTransform: [1, 0, 0, 1, 0, 0],\n\n    /**\n     * if set to false background image is not affected by viewport transform\n     * @since 1.6.3\n     * @type Boolean\n     * @default\n     */\n    backgroundVpt: true,\n\n    /**\n     * if set to false overlya image is not affected by viewport transform\n     * @since 1.6.3\n     * @type Boolean\n     * @default\n     */\n    overlayVpt: true,\n\n    /**\n     * Callback; invoked right before object is about to be scaled/rotated\n     */\n    onBeforeScaleRotate: function () {\n      /* NOOP */\n    },\n\n    /**\n     * When true, canvas is scaled by devicePixelRatio for better rendering on retina screens\n     */\n    enableRetinaScaling: true,\n\n    /**\n     * @private\n     * @param {HTMLElement | String} el &lt;canvas> element to initialize instance on\n     * @param {Object} [options] Options object\n     */\n    _initStatic: function(el, options) {\n      var cb = fabric.StaticCanvas.prototype.renderAll.bind(this);\n      this._objects = [];\n      this._createLowerCanvas(el);\n      this._initOptions(options);\n      this._setImageSmoothing();\n      // only initialize retina scaling once\n      if (!this.interactive) {\n        this._initRetinaScaling();\n      }\n\n      if (options.overlayImage) {\n        this.setOverlayImage(options.overlayImage, cb);\n      }\n      if (options.backgroundImage) {\n        this.setBackgroundImage(options.backgroundImage, cb);\n      }\n      if (options.backgroundColor) {\n        this.setBackgroundColor(options.backgroundColor, cb);\n      }\n      if (options.overlayColor) {\n        this.setOverlayColor(options.overlayColor, cb);\n      }\n      this.calcOffset();\n    },\n\n    /**\n     * @private\n     */\n    _isRetinaScaling: function() {\n      return (fabric.devicePixelRatio !== 1 && this.enableRetinaScaling);\n    },\n\n    /**\n     * @private\n     * @return {Number} retinaScaling if applied, otherwise 1;\n     */\n    getRetinaScaling: function() {\n      return this._isRetinaScaling() ? fabric.devicePixelRatio : 1;\n    },\n\n    /**\n     * @private\n     */\n    _initRetinaScaling: function() {\n      if (!this._isRetinaScaling()) {\n        return;\n      }\n      this.lowerCanvasEl.setAttribute('width', this.width * fabric.devicePixelRatio);\n      this.lowerCanvasEl.setAttribute('height', this.height * fabric.devicePixelRatio);\n\n      this.contextContainer.scale(fabric.devicePixelRatio, fabric.devicePixelRatio);\n    },\n\n    /**\n     * Calculates canvas element offset relative to the document\n     * This method is also attached as \"resize\" event handler of window\n     * @return {fabric.Canvas} instance\n     * @chainable\n     */\n    calcOffset: function () {\n      this._offset = getElementOffset(this.lowerCanvasEl);\n      return this;\n    },\n\n    /**\n     * Sets {@link fabric.StaticCanvas#overlayImage|overlay image} for this canvas\n     * @param {(fabric.Image|String)} image fabric.Image instance or URL of an image to set overlay to\n     * @param {Function} callback callback to invoke when image is loaded and set as an overlay\n     * @param {Object} [options] Optional options to set for the {@link fabric.Image|overlay image}.\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     * @see {@link http://jsfiddle.net/fabricjs/MnzHT/|jsFiddle demo}\n     * @example <caption>Normal overlayImage with left/top = 0</caption>\n     * canvas.setOverlayImage('http://fabricjs.com/assets/jail_cell_bars.png', canvas.renderAll.bind(canvas), {\n     *   // Needed to position overlayImage at 0/0\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>overlayImage with different properties</caption>\n     * canvas.setOverlayImage('http://fabricjs.com/assets/jail_cell_bars.png', canvas.renderAll.bind(canvas), {\n     *   opacity: 0.5,\n     *   angle: 45,\n     *   left: 400,\n     *   top: 400,\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>Stretched overlayImage #1 - width/height correspond to canvas width/height</caption>\n     * fabric.Image.fromURL('http://fabricjs.com/assets/jail_cell_bars.png', function(img) {\n     *    img.set({width: canvas.width, height: canvas.height, originX: 'left', originY: 'top'});\n     *    canvas.setOverlayImage(img, canvas.renderAll.bind(canvas));\n     * });\n     * @example <caption>Stretched overlayImage #2 - width/height correspond to canvas width/height</caption>\n     * canvas.setOverlayImage('http://fabricjs.com/assets/jail_cell_bars.png', canvas.renderAll.bind(canvas), {\n     *   width: canvas.width,\n     *   height: canvas.height,\n     *   // Needed to position overlayImage at 0/0\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>overlayImage loaded from cross-origin</caption>\n     * canvas.setOverlayImage('http://fabricjs.com/assets/jail_cell_bars.png', canvas.renderAll.bind(canvas), {\n     *   opacity: 0.5,\n     *   angle: 45,\n     *   left: 400,\n     *   top: 400,\n     *   originX: 'left',\n     *   originY: 'top',\n     *   crossOrigin: 'anonymous'\n     * });\n     */\n    setOverlayImage: function (image, callback, options) {\n      return this.__setBgOverlayImage('overlayImage', image, callback, options);\n    },\n\n    /**\n     * Sets {@link fabric.StaticCanvas#backgroundImage|background image} for this canvas\n     * @param {(fabric.Image|String)} image fabric.Image instance or URL of an image to set background to\n     * @param {Function} callback Callback to invoke when image is loaded and set as background\n     * @param {Object} [options] Optional options to set for the {@link fabric.Image|background image}.\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     * @see {@link http://jsfiddle.net/fabricjs/YH9yD/|jsFiddle demo}\n     * @example <caption>Normal backgroundImage with left/top = 0</caption>\n     * canvas.setBackgroundImage('http://fabricjs.com/assets/honey_im_subtle.png', canvas.renderAll.bind(canvas), {\n     *   // Needed to position backgroundImage at 0/0\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>backgroundImage with different properties</caption>\n     * canvas.setBackgroundImage('http://fabricjs.com/assets/honey_im_subtle.png', canvas.renderAll.bind(canvas), {\n     *   opacity: 0.5,\n     *   angle: 45,\n     *   left: 400,\n     *   top: 400,\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>Stretched backgroundImage #1 - width/height correspond to canvas width/height</caption>\n     * fabric.Image.fromURL('http://fabricjs.com/assets/honey_im_subtle.png', function(img) {\n     *    img.set({width: canvas.width, height: canvas.height, originX: 'left', originY: 'top'});\n     *    canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas));\n     * });\n     * @example <caption>Stretched backgroundImage #2 - width/height correspond to canvas width/height</caption>\n     * canvas.setBackgroundImage('http://fabricjs.com/assets/honey_im_subtle.png', canvas.renderAll.bind(canvas), {\n     *   width: canvas.width,\n     *   height: canvas.height,\n     *   // Needed to position backgroundImage at 0/0\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>backgroundImage loaded from cross-origin</caption>\n     * canvas.setBackgroundImage('http://fabricjs.com/assets/honey_im_subtle.png', canvas.renderAll.bind(canvas), {\n     *   opacity: 0.5,\n     *   angle: 45,\n     *   left: 400,\n     *   top: 400,\n     *   originX: 'left',\n     *   originY: 'top',\n     *   crossOrigin: 'anonymous'\n     * });\n     */\n    setBackgroundImage: function (image, callback, options) {\n      return this.__setBgOverlayImage('backgroundImage', image, callback, options);\n    },\n\n    /**\n     * Sets {@link fabric.StaticCanvas#overlayColor|background color} for this canvas\n     * @param {(String|fabric.Pattern)} overlayColor Color or pattern to set background color to\n     * @param {Function} callback Callback to invoke when background color is set\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     * @see {@link http://jsfiddle.net/fabricjs/pB55h/|jsFiddle demo}\n     * @example <caption>Normal overlayColor - color value</caption>\n     * canvas.setOverlayColor('rgba(255, 73, 64, 0.6)', canvas.renderAll.bind(canvas));\n     * @example <caption>fabric.Pattern used as overlayColor</caption>\n     * canvas.setOverlayColor({\n     *   source: 'http://fabricjs.com/assets/escheresque_ste.png'\n     * }, canvas.renderAll.bind(canvas));\n     * @example <caption>fabric.Pattern used as overlayColor with repeat and offset</caption>\n     * canvas.setOverlayColor({\n     *   source: 'http://fabricjs.com/assets/escheresque_ste.png',\n     *   repeat: 'repeat',\n     *   offsetX: 200,\n     *   offsetY: 100\n     * }, canvas.renderAll.bind(canvas));\n     */\n    setOverlayColor: function(overlayColor, callback) {\n      return this.__setBgOverlayColor('overlayColor', overlayColor, callback);\n    },\n\n    /**\n     * Sets {@link fabric.StaticCanvas#backgroundColor|background color} for this canvas\n     * @param {(String|fabric.Pattern)} backgroundColor Color or pattern to set background color to\n     * @param {Function} callback Callback to invoke when background color is set\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     * @see {@link http://jsfiddle.net/fabricjs/hXzvk/|jsFiddle demo}\n     * @example <caption>Normal backgroundColor - color value</caption>\n     * canvas.setBackgroundColor('rgba(255, 73, 64, 0.6)', canvas.renderAll.bind(canvas));\n     * @example <caption>fabric.Pattern used as backgroundColor</caption>\n     * canvas.setBackgroundColor({\n     *   source: 'http://fabricjs.com/assets/escheresque_ste.png'\n     * }, canvas.renderAll.bind(canvas));\n     * @example <caption>fabric.Pattern used as backgroundColor with repeat and offset</caption>\n     * canvas.setBackgroundColor({\n     *   source: 'http://fabricjs.com/assets/escheresque_ste.png',\n     *   repeat: 'repeat',\n     *   offsetX: 200,\n     *   offsetY: 100\n     * }, canvas.renderAll.bind(canvas));\n     */\n    setBackgroundColor: function(backgroundColor, callback) {\n      return this.__setBgOverlayColor('backgroundColor', backgroundColor, callback);\n    },\n\n    /**\n     * @private\n     * @see {@link http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-imagesmoothingenabled|WhatWG Canvas Standard}\n     */\n    _setImageSmoothing: function() {\n      var ctx = this.getContext();\n\n      ctx.imageSmoothingEnabled = ctx.imageSmoothingEnabled || ctx.webkitImageSmoothingEnabled\n        || ctx.mozImageSmoothingEnabled || ctx.msImageSmoothingEnabled || ctx.oImageSmoothingEnabled;\n      ctx.imageSmoothingEnabled = this.imageSmoothingEnabled;\n    },\n\n    /**\n     * @private\n     * @param {String} property Property to set ({@link fabric.StaticCanvas#backgroundImage|backgroundImage}\n     * or {@link fabric.StaticCanvas#overlayImage|overlayImage})\n     * @param {(fabric.Image|String|null)} image fabric.Image instance, URL of an image or null to set background or overlay to\n     * @param {Function} callback Callback to invoke when image is loaded and set as background or overlay\n     * @param {Object} [options] Optional options to set for the {@link fabric.Image|image}.\n     */\n    __setBgOverlayImage: function(property, image, callback, options) {\n      if (typeof image === 'string') {\n        fabric.util.loadImage(image, function(img) {\n          img && (this[property] = new fabric.Image(img, options));\n          callback && callback(img);\n        }, this, options && options.crossOrigin);\n      }\n      else {\n        options && image.setOptions(options);\n        this[property] = image;\n        callback && callback(image);\n      }\n\n      return this;\n    },\n\n    /**\n     * @private\n     * @param {String} property Property to set ({@link fabric.StaticCanvas#backgroundColor|backgroundColor}\n     * or {@link fabric.StaticCanvas#overlayColor|overlayColor})\n     * @param {(Object|String|null)} color Object with pattern information, color value or null\n     * @param {Function} [callback] Callback is invoked when color is set\n     */\n    __setBgOverlayColor: function(property, color, callback) {\n      if (color && color.source) {\n        var _this = this;\n        fabric.util.loadImage(color.source, function(img) {\n          _this[property] = new fabric.Pattern({\n            source: img,\n            repeat: color.repeat,\n            offsetX: color.offsetX,\n            offsetY: color.offsetY\n          });\n          callback && callback();\n        });\n      }\n      else {\n        this[property] = color;\n        callback && callback();\n      }\n\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _createCanvasElement: function(canvasEl) {\n      var element = fabric.util.createCanvasElement(canvasEl)\n      if (!element.style) {\n        element.style = { };\n      }\n      if (!element) {\n        throw CANVAS_INIT_ERROR;\n      }\n      if (typeof element.getContext === 'undefined') {\n        throw CANVAS_INIT_ERROR;\n      }\n      return element;\n    },\n\n    /**\n     * @private\n     * @param {Object} [options] Options object\n     */\n    _initOptions: function (options) {\n      for (var prop in options) {\n        this[prop] = options[prop];\n      }\n\n      this.width = this.width || parseInt(this.lowerCanvasEl.width, 10) || 0;\n      this.height = this.height || parseInt(this.lowerCanvasEl.height, 10) || 0;\n\n      if (!this.lowerCanvasEl.style) {\n        return;\n      }\n\n      this.lowerCanvasEl.width = this.width;\n      this.lowerCanvasEl.height = this.height;\n\n      this.lowerCanvasEl.style.width = this.width + 'px';\n      this.lowerCanvasEl.style.height = this.height + 'px';\n\n      this.viewportTransform = this.viewportTransform.slice();\n    },\n\n    /**\n     * Creates a bottom canvas\n     * @private\n     * @param {HTMLElement} [canvasEl]\n     */\n    _createLowerCanvas: function (canvasEl) {\n      this.lowerCanvasEl = fabric.util.getById(canvasEl) || this._createCanvasElement(canvasEl);\n\n      fabric.util.addClass(this.lowerCanvasEl, 'lower-canvas');\n\n      if (this.interactive) {\n        this._applyCanvasStyle(this.lowerCanvasEl);\n      }\n\n      this.contextContainer = this.lowerCanvasEl.getContext('2d');\n    },\n\n    /**\n     * Returns canvas width (in px)\n     * @return {Number}\n     */\n    getWidth: function () {\n      return this.width;\n    },\n\n    /**\n     * Returns canvas height (in px)\n     * @return {Number}\n     */\n    getHeight: function () {\n      return this.height;\n    },\n\n    /**\n     * Sets width of this canvas instance\n     * @param {Number|String} value                         Value to set width to\n     * @param {Object}        [options]                     Options object\n     * @param {Boolean}       [options.backstoreOnly=false] Set the given dimensions only as canvas backstore dimensions\n     * @param {Boolean}       [options.cssOnly=false]       Set the given dimensions only as css dimensions\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    setWidth: function (value, options) {\n      return this.setDimensions({ width: value }, options);\n    },\n\n    /**\n     * Sets height of this canvas instance\n     * @param {Number|String} value                         Value to set height to\n     * @param {Object}        [options]                     Options object\n     * @param {Boolean}       [options.backstoreOnly=false] Set the given dimensions only as canvas backstore dimensions\n     * @param {Boolean}       [options.cssOnly=false]       Set the given dimensions only as css dimensions\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    setHeight: function (value, options) {\n      return this.setDimensions({ height: value }, options);\n    },\n\n    /**\n     * Sets dimensions (width, height) of this canvas instance. when options.cssOnly flag active you should also supply the unit of measure (px/%/em)\n     * @param {Object}        dimensions                    Object with width/height properties\n     * @param {Number|String} [dimensions.width]            Width of canvas element\n     * @param {Number|String} [dimensions.height]           Height of canvas element\n     * @param {Object}        [options]                     Options object\n     * @param {Boolean}       [options.backstoreOnly=false] Set the given dimensions only as canvas backstore dimensions\n     * @param {Boolean}       [options.cssOnly=false]       Set the given dimensions only as css dimensions\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    setDimensions: function (dimensions, options) {\n      var cssValue;\n\n      options = options || {};\n\n      for (var prop in dimensions) {\n        cssValue = dimensions[prop];\n\n        if (!options.cssOnly) {\n          this._setBackstoreDimension(prop, dimensions[prop]);\n          cssValue += 'px';\n        }\n\n        if (!options.backstoreOnly) {\n          this._setCssDimension(prop, cssValue);\n        }\n      }\n      this._initRetinaScaling();\n      this._setImageSmoothing();\n      this.calcOffset();\n\n      if (!options.cssOnly) {\n        this.renderAll();\n      }\n\n      return this;\n    },\n\n    /**\n     * Helper for setting width/height\n     * @private\n     * @param {String} prop property (width|height)\n     * @param {Number} value value to set property to\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    _setBackstoreDimension: function (prop, value) {\n      this.lowerCanvasEl[prop] = value;\n\n      if (this.upperCanvasEl) {\n        this.upperCanvasEl[prop] = value;\n      }\n\n      if (this.cacheCanvasEl) {\n        this.cacheCanvasEl[prop] = value;\n      }\n\n      this[prop] = value;\n\n      return this;\n    },\n\n    /**\n     * Helper for setting css width/height\n     * @private\n     * @param {String} prop property (width|height)\n     * @param {String} value value to set property to\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    _setCssDimension: function (prop, value) {\n      this.lowerCanvasEl.style[prop] = value;\n\n      if (this.upperCanvasEl) {\n        this.upperCanvasEl.style[prop] = value;\n      }\n\n      if (this.wrapperEl) {\n        this.wrapperEl.style[prop] = value;\n      }\n\n      return this;\n    },\n\n    /**\n     * Returns canvas zoom level\n     * @return {Number}\n     */\n    getZoom: function () {\n      return this.viewportTransform[0];\n    },\n\n    /**\n     * Sets viewport transform of this canvas instance\n     * @param {Array} vpt the transform in the form of context.transform\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    setViewportTransform: function (vpt) {\n      var activeGroup = this._activeGroup, object, ingoreVpt = false, skipAbsolute = true;\n      this.viewportTransform = vpt;\n      for (var i = 0, len = this._objects.length; i < len; i++) {\n        object = this._objects[i];\n        object.group || object.setCoords(ingoreVpt, skipAbsolute);\n      }\n      if (activeGroup) {\n        activeGroup.setCoords(ingoreVpt, skipAbsolute);\n      }\n      this.renderAll();\n      return this;\n    },\n\n    /**\n     * Sets zoom level of this canvas instance, zoom centered around point\n     * @param {fabric.Point} point to zoom with respect to\n     * @param {Number} value to set zoom to, less than 1 zooms out\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    zoomToPoint: function (point, value) {\n      // TODO: just change the scale, preserve other transformations\n      var before = point, vpt = this.viewportTransform.slice(0);\n      point = fabric.util.transformPoint(point, fabric.util.invertTransform(this.viewportTransform));\n      vpt[0] = value;\n      vpt[3] = value;\n      var after = fabric.util.transformPoint(point, vpt);\n      vpt[4] += before.x - after.x;\n      vpt[5] += before.y - after.y;\n      return this.setViewportTransform(vpt);\n    },\n\n    /**\n     * Sets zoom level of this canvas instance\n     * @param {Number} value to set zoom to, less than 1 zooms out\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    setZoom: function (value) {\n      this.zoomToPoint(new fabric.Point(0, 0), value);\n      return this;\n    },\n\n    /**\n     * Pan viewport so as to place point at top left corner of canvas\n     * @param {fabric.Point} point to move to\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    absolutePan: function (point) {\n      var vpt = this.viewportTransform.slice(0);\n      vpt[4] = -point.x;\n      vpt[5] = -point.y;\n      return this.setViewportTransform(vpt);\n    },\n\n    /**\n     * Pans viewpoint relatively\n     * @param {fabric.Point} point (position vector) to move by\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    relativePan: function (point) {\n      return this.absolutePan(new fabric.Point(\n        -point.x - this.viewportTransform[4],\n        -point.y - this.viewportTransform[5]\n      ));\n    },\n\n    /**\n     * Returns &lt;canvas> element corresponding to this instance\n     * @return {HTMLCanvasElement}\n     */\n    getElement: function () {\n      return this.lowerCanvasEl;\n    },\n\n    /**\n     * @private\n     * @param {fabric.Object} obj Object that was added\n     */\n    _onObjectAdded: function(obj) {\n      this.stateful && obj.setupState();\n      obj._set('canvas', this);\n      obj.setCoords();\n      this.fire('object:added', { target: obj });\n      obj.fire('added');\n    },\n\n    /**\n     * @private\n     * @param {fabric.Object} obj Object that was removed\n     */\n    _onObjectRemoved: function(obj) {\n      this.fire('object:removed', { target: obj });\n      obj.fire('removed');\n      delete obj.canvas;\n    },\n\n    /**\n     * Clears specified context of canvas element\n     * @param {CanvasRenderingContext2D} ctx Context to clear\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    clearContext: function(ctx) {\n      ctx.clearRect(0, 0, this.width, this.height);\n      return this;\n    },\n\n    /**\n     * Returns context of canvas where objects are drawn\n     * @return {CanvasRenderingContext2D}\n     */\n    getContext: function () {\n      return this.contextContainer;\n    },\n\n    /**\n     * Clears all contexts (background, main, top) of an instance\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    clear: function () {\n      this._objects.length = 0;\n      this.backgroundImage = null;\n      this.overlayImage = null;\n      this.backgroundColor = '';\n      this.overlayColor = ''\n      if (this._hasITextHandlers) {\n        this.off('selection:cleared', this._canvasITextSelectionClearedHanlder);\n        this.off('object:selected', this._canvasITextSelectionClearedHanlder);\n        this.off('mouse:up', this._mouseUpITextHandler);\n        this._iTextInstances = null;\n        this._hasITextHandlers = false;\n      }\n      this.clearContext(this.contextContainer);\n      this.fire('canvas:cleared');\n      this.renderAll();\n      return this;\n    },\n\n    /**\n     * Renders both the canvas.\n     * @return {fabric.Canvas} instance\n     * @chainable\n     */\n    renderAll: function () {\n      var canvasToDrawOn = this.contextContainer;\n      this.renderCanvas(canvasToDrawOn, this._objects);\n      return this;\n    },\n\n    /**\n     * Renders background, objects, overlay and controls.\n     * @param {CanvasRenderingContext2D} ctx\n     * @param {Array} objects to render\n     * @return {fabric.Canvas} instance\n     * @chainable\n     */\n    renderCanvas: function(ctx, objects) {\n      this.clearContext(ctx);\n      this.fire('before:render');\n      if (this.clipTo) {\n        fabric.util.clipContext(this, ctx);\n      }\n      this._renderBackground(ctx);\n\n      ctx.save();\n      //apply viewport transform once for all rendering process\n      ctx.transform.apply(ctx, this.viewportTransform);\n      this._renderObjects(ctx, objects);\n      ctx.restore();\n      if (!this.controlsAboveOverlay && this.interactive) {\n        this.drawControls(ctx);\n      }\n      if (this.clipTo) {\n        ctx.restore();\n      }\n      this._renderOverlay(ctx);\n      if (this.controlsAboveOverlay && this.interactive) {\n        this.drawControls(ctx);\n      }\n      this.fire('after:render');\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Array} objects to render\n     */\n    _renderObjects: function(ctx, objects) {\n      for (var i = 0, length = objects.length; i < length; ++i) {\n        objects[i] && objects[i].render(ctx);\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {string} property 'background' or 'overlay'\n     */\n    _renderBackgroundOrOverlay: function(ctx, property) {\n      var object = this[property + 'Color'];\n      if (object) {\n        ctx.fillStyle = object.toLive\n          ? object.toLive(ctx)\n          : object;\n\n        ctx.fillRect(\n          object.offsetX || 0,\n          object.offsetY || 0,\n          this.width,\n          this.height);\n      }\n      object = this[property + 'Image'];\n      if (object) {\n        if (this[property + 'Vpt']) {\n          ctx.save();\n          ctx.transform.apply(ctx, this.viewportTransform);\n        }\n        object.render(ctx);\n        this[property + 'Vpt'] && ctx.restore();\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderBackground: function(ctx) {\n      this._renderBackgroundOrOverlay(ctx, 'background');\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderOverlay: function(ctx) {\n      this._renderBackgroundOrOverlay(ctx, 'overlay');\n    },\n\n    /**\n     * Returns coordinates of a center of canvas.\n     * Returned value is an object with top and left properties\n     * @return {Object} object with \"top\" and \"left\" number values\n     */\n    getCenter: function () {\n      return {\n        top: this.getHeight() / 2,\n        left: this.getWidth() / 2\n      };\n    },\n\n    /**\n     * Centers object horizontally in the canvas\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @param {fabric.Object} object Object to center horizontally\n     * @return {fabric.Canvas} thisArg\n     */\n    centerObjectH: function (object) {\n      return this._centerObject(object, new fabric.Point(this.getCenter().left, object.getCenterPoint().y));\n    },\n\n    /**\n     * Centers object vertically in the canvas\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @param {fabric.Object} object Object to center vertically\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    centerObjectV: function (object) {\n      return this._centerObject(object, new fabric.Point(object.getCenterPoint().x, this.getCenter().top));\n    },\n\n    /**\n     * Centers object vertically and horizontally in the canvas\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @param {fabric.Object} object Object to center vertically and horizontally\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    centerObject: function(object) {\n      var center = this.getCenter();\n\n      return this._centerObject(object, new fabric.Point(center.left, center.top));\n    },\n\n    /**\n     * Centers object vertically and horizontally in the viewport\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @param {fabric.Object} object Object to center vertically and horizontally\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    viewportCenterObject: function(object) {\n      var vpCenter = this.getVpCenter();\n\n      return this._centerObject(object, vpCenter);\n    },\n\n    /**\n     * Centers object horizontally in the viewport, object.top is unchanged\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @param {fabric.Object} object Object to center vertically and horizontally\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    viewportCenterObjectH: function(object) {\n      var vpCenter = this.getVpCenter();\n      this._centerObject(object, new fabric.Point(vpCenter.x, object.getCenterPoint().y));\n      return this;\n    },\n\n    /**\n     * Centers object Vertically in the viewport, object.top is unchanged\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @param {fabric.Object} object Object to center vertically and horizontally\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    viewportCenterObjectV: function(object) {\n      var vpCenter = this.getVpCenter();\n\n      return this._centerObject(object, new fabric.Point(object.getCenterPoint().x, vpCenter.y));\n    },\n\n    /**\n     * Calculate the point in canvas that correspond to the center of actual viewport.\n     * @return {fabric.Point} vpCenter, viewport center\n     * @chainable\n     */\n    getVpCenter: function() {\n      var center = this.getCenter(),\n          iVpt = fabric.util.invertTransform(this.viewportTransform);\n      return fabric.util.transformPoint({ x: center.left, y: center.top }, iVpt);\n    },\n\n    /**\n     * @private\n     * @param {fabric.Object} object Object to center\n     * @param {fabric.Point} center Center point\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    _centerObject: function(object, center) {\n      object.setPositionByOrigin(center, 'center', 'center');\n      this.renderAll();\n      return this;\n    },\n\n    /**\n     * Returs dataless JSON representation of canvas\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {String} json string\n     */\n    toDatalessJSON: function (propertiesToInclude) {\n      return this.toDatalessObject(propertiesToInclude);\n    },\n\n    /**\n     * Returns object representation of canvas\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function (propertiesToInclude) {\n      return this._toObjectMethod('toObject', propertiesToInclude);\n    },\n\n    /**\n     * Returns dataless object representation of canvas\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toDatalessObject: function (propertiesToInclude) {\n      return this._toObjectMethod('toDatalessObject', propertiesToInclude);\n    },\n\n    /**\n     * @private\n     */\n    _toObjectMethod: function (methodName, propertiesToInclude) {\n\n      var data = {\n        objects: this._toObjects(methodName, propertiesToInclude)\n      };\n\n      extend(data, this.__serializeBgOverlay(methodName, propertiesToInclude));\n\n      fabric.util.populateWithProperties(this, data, propertiesToInclude);\n\n      return data;\n    },\n\n    /**\n     * @private\n     */\n    _toObjects: function(methodName, propertiesToInclude) {\n      return this.getObjects().filter(function(object) {\n        return !object.excludeFromExport;\n      }).map(function(instance) {\n        return this._toObject(instance, methodName, propertiesToInclude);\n      }, this);\n    },\n\n    /**\n     * @private\n     */\n    _toObject: function(instance, methodName, propertiesToInclude) {\n      var originalValue;\n\n      if (!this.includeDefaultValues) {\n        originalValue = instance.includeDefaultValues;\n        instance.includeDefaultValues = false;\n      }\n\n      var object = instance[methodName](propertiesToInclude);\n      if (!this.includeDefaultValues) {\n        instance.includeDefaultValues = originalValue;\n      }\n      return object;\n    },\n\n    /**\n     * @private\n     */\n    __serializeBgOverlay: function(methodName, propertiesToInclude) {\n      var data = { }\n\n      if (this.backgroundColor) {\n        data.background = this.backgroundColor.toObject\n          ? this.backgroundColor.toObject(propertiesToInclude)\n          : this.backgroundColor\n      }\n\n      if (this.overlayColor) {\n        data.overlay = this.overlayColor.toObject\n          ? this.overlayColor.toObject(propertiesToInclude)\n          : this.overlayColor;\n      }\n      if (this.backgroundImage) {\n        data.backgroundImage = this._toObject(this.backgroundImage, methodName, propertiesToInclude);\n      }\n      if (this.overlayImage) {\n        data.overlayImage = this._toObject(this.overlayImage, methodName, propertiesToInclude);\n      }\n\n      return data;\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * When true, getSvgTransform() will apply the StaticCanvas.viewportTransform to the SVG transformation. When true,\n     * a zoomed canvas will then produce zoomed SVG output.\n     * @type Boolean\n     * @default\n     */\n    svgViewportTransformation: true,\n\n    /**\n     * Returns SVG representation of canvas\n     * @function\n     * @param {Object} [options] Options object for SVG output\n     * @param {Boolean} [options.suppressPreamble=false] If true xml tag is not included\n     * @param {Object} [options.viewBox] SVG viewbox object\n     * @param {Number} [options.viewBox.x] x-cooridnate of viewbox\n     * @param {Number} [options.viewBox.y] y-coordinate of viewbox\n     * @param {Number} [options.viewBox.width] Width of viewbox\n     * @param {Number} [options.viewBox.height] Height of viewbox\n     * @param {String} [options.encoding=UTF-8] Encoding of SVG output\n     * @param {String} [options.width] desired width of svg with or without units\n     * @param {String} [options.height] desired height of svg with or without units\n     * @param {Function} [reviver] Method for further parsing of svg elements, called after each fabric object converted into svg representation.\n     * @return {String} SVG string\n     * @tutorial {@link http://fabricjs.com/fabric-intro-part-3#serialization}\n     * @see {@link http://jsfiddle.net/fabricjs/jQ3ZZ/|jsFiddle demo}\n     * @example <caption>Normal SVG output</caption>\n     * var svg = canvas.toSVG();\n     * @example <caption>SVG output without preamble (without &lt;?xml ../>)</caption>\n     * var svg = canvas.toSVG({suppressPreamble: true});\n     * @example <caption>SVG output with viewBox attribute</caption>\n     * var svg = canvas.toSVG({\n     *   viewBox: {\n     *     x: 100,\n     *     y: 100,\n     *     width: 200,\n     *     height: 300\n     *   }\n     * });\n     * @example <caption>SVG output with different encoding (default: UTF-8)</caption>\n     * var svg = canvas.toSVG({encoding: 'ISO-8859-1'});\n     * @example <caption>Modify SVG output with reviver function</caption>\n     * var svg = canvas.toSVG(null, function(svg) {\n     *   return svg.replace('stroke-dasharray: ; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; ', '');\n     * });\n     */\n    toSVG: function(options, reviver) {\n      options || (options = { });\n\n      var markup = [];\n\n      this._setSVGPreamble(markup, options);\n      this._setSVGHeader(markup, options);\n\n      this._setSVGBgOverlayColor(markup, 'backgroundColor');\n      this._setSVGBgOverlayImage(markup, 'backgroundImage', reviver);\n\n      this._setSVGObjects(markup, reviver);\n\n      this._setSVGBgOverlayColor(markup, 'overlayColor');\n      this._setSVGBgOverlayImage(markup, 'overlayImage', reviver);\n\n      markup.push('</svg>');\n\n      return markup.join('');\n    },\n\n    /**\n     * @private\n     */\n    _setSVGPreamble: function(markup, options) {\n      if (options.suppressPreamble) {\n        return;\n      }\n      markup.push(\n        '<?xml version=\"1.0\" encoding=\"', (options.encoding || 'UTF-8'), '\" standalone=\"no\" ?>\\n',\n          '<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" ',\n            '\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\\n'\n      );\n    },\n\n    /**\n     * @private\n     */\n    _setSVGHeader: function(markup, options) {\n      var width = options.width || this.width,\n          height = options.height || this.height,\n          vpt, viewBox = 'viewBox=\"0 0 ' + this.width + ' ' + this.height + '\" ',\n          NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS;\n\n      if (options.viewBox) {\n        viewBox = 'viewBox=\"' +\n                options.viewBox.x + ' ' +\n                options.viewBox.y + ' ' +\n                options.viewBox.width + ' ' +\n                options.viewBox.height + '\" ';\n      }\n      else {\n        if (this.svgViewportTransformation) {\n          vpt = this.viewportTransform;\n          viewBox = 'viewBox=\"' +\n                  toFixed(-vpt[4] / vpt[0], NUM_FRACTION_DIGITS) + ' ' +\n                  toFixed(-vpt[5] / vpt[3], NUM_FRACTION_DIGITS) + ' ' +\n                  toFixed(this.width / vpt[0], NUM_FRACTION_DIGITS) + ' ' +\n                  toFixed(this.height / vpt[3], NUM_FRACTION_DIGITS) + '\" ';\n        }\n      }\n\n      markup.push(\n        '<svg ',\n          'xmlns=\"http://www.w3.org/2000/svg\" ',\n          'xmlns:xlink=\"http://www.w3.org/1999/xlink\" ',\n          'version=\"1.1\" ',\n          'width=\"', width, '\" ',\n          'height=\"', height, '\" ',\n          (this.backgroundColor && !this.backgroundColor.toLive\n            ? 'style=\"background-color: ' + this.backgroundColor + '\" '\n            : null),\n          viewBox,\n          'xml:space=\"preserve\">\\n',\n        '<desc>Created with Fabric.js ', fabric.version, '</desc>\\n',\n        '<defs>',\n          fabric.createSVGFontFacesMarkup(this.getObjects()),\n          fabric.createSVGRefElementsMarkup(this),\n        '</defs>\\n'\n      );\n    },\n\n    /**\n     * @private\n     */\n    _setSVGObjects: function(markup, reviver) {\n      var instance;\n      for (var i = 0, objects = this.getObjects(), len = objects.length; i < len; i++) {\n        instance = objects[i];\n        if (instance.excludeFromExport) {\n          continue;\n        }\n        this._setSVGObject(markup, instance, reviver);\n      }\n    },\n\n    /**\n     * push single object svg representation in the markup\n     * @private\n     */\n    _setSVGObject: function(markup, instance, reviver) {\n      markup.push(instance.toSVG(reviver));\n    },\n\n    /**\n     * @private\n     */\n    _setSVGBgOverlayImage: function(markup, property, reviver) {\n      if (this[property] && this[property].toSVG) {\n        markup.push(this[property].toSVG(reviver));\n      }\n    },\n\n    /**\n     * @private\n     */\n    _setSVGBgOverlayColor: function(markup, property) {\n      if (this[property] && this[property].source) {\n        markup.push(\n          '<rect x=\"', this[property].offsetX, '\" y=\"', this[property].offsetY, '\" ',\n            'width=\"',\n              (this[property].repeat === 'repeat-y' || this[property].repeat === 'no-repeat'\n                ? this[property].source.width\n                : this.width),\n            '\" height=\"',\n              (this[property].repeat === 'repeat-x' || this[property].repeat === 'no-repeat'\n                ? this[property].source.height\n                : this.height),\n            '\" fill=\"url(#' + property + 'Pattern)\"',\n          '></rect>\\n'\n        );\n      }\n      else if (this[property] && property === 'overlayColor') {\n        markup.push(\n          '<rect x=\"0\" y=\"0\" ',\n            'width=\"', this.width,\n            '\" height=\"', this.height,\n            '\" fill=\"', this[property], '\"',\n          '></rect>\\n'\n        );\n      }\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Moves an object or the objects of a multiple selection\n     * to the bottom of the stack of drawn objects\n     * @param {fabric.Object} object Object to send to back\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    sendToBack: function (object) {\n      if (!object) {\n        return this;\n      }\n      var activeGroup = this._activeGroup,\n          i, obj, objs;\n      if (object === activeGroup) {\n        objs = activeGroup._objects;\n        for (i = objs.length; i--;) {\n          obj = objs[i];\n          removeFromArray(this._objects, obj);\n          this._objects.unshift(obj);\n        }\n      }\n      else {\n        removeFromArray(this._objects, object);\n        this._objects.unshift(object);\n      }\n      return this.renderAll && this.renderAll();\n    },\n\n    /**\n     * Moves an object or the objects of a multiple selection\n     * to the top of the stack of drawn objects\n     * @param {fabric.Object} object Object to send\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    bringToFront: function (object) {\n      if (!object) {\n        return this;\n      }\n      var activeGroup = this._activeGroup,\n          i, obj, objs;\n      if (object === activeGroup) {\n        objs = activeGroup._objects;\n        for (i = 0; i < objs.length; i++) {\n          obj = objs[i];\n          removeFromArray(this._objects, obj);\n          this._objects.push(obj);\n        }\n      }\n      else {\n        removeFromArray(this._objects, object);\n        this._objects.push(object);\n      }\n      return this.renderAll && this.renderAll();\n    },\n\n    /**\n     * Moves an object or a selection down in stack of drawn objects\n     * @param {fabric.Object} object Object to send\n     * @param {Boolean} [intersecting] If `true`, send object behind next lower intersecting object\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    sendBackwards: function (object, intersecting) {\n      if (!object) {\n        return this;\n      }\n      var activeGroup = this._activeGroup,\n          i, obj, idx, newIdx, objs;\n\n      if (object === activeGroup) {\n        objs = activeGroup._objects;\n        for (i = 0; i < objs.length; i++) {\n          obj = objs[i];\n          idx = this._objects.indexOf(obj);\n          if (idx !== 0) {\n            newIdx = idx - 1;\n            removeFromArray(this._objects, obj);\n            this._objects.splice(newIdx, 0, obj);\n          }\n        }\n      }\n      else {\n        idx = this._objects.indexOf(object);\n        if (idx !== 0) {\n          // if object is not on the bottom of stack\n          newIdx = this._findNewLowerIndex(object, idx, intersecting);\n          removeFromArray(this._objects, object);\n          this._objects.splice(newIdx, 0, object);\n        }\n      }\n      this.renderAll && this.renderAll();\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _findNewLowerIndex: function(object, idx, intersecting) {\n      var newIdx;\n\n      if (intersecting) {\n        newIdx = idx;\n\n        // traverse down the stack looking for the nearest intersecting object\n        for (var i = idx - 1; i >= 0; --i) {\n\n          var isIntersecting = object.intersectsWithObject(this._objects[i]) ||\n                               object.isContainedWithinObject(this._objects[i]) ||\n                               this._objects[i].isContainedWithinObject(object);\n\n          if (isIntersecting) {\n            newIdx = i;\n            break;\n          }\n        }\n      }\n      else {\n        newIdx = idx - 1;\n      }\n\n      return newIdx;\n    },\n\n    /**\n     * Moves an object or a selection up in stack of drawn objects\n     * @param {fabric.Object} object Object to send\n     * @param {Boolean} [intersecting] If `true`, send object in front of next upper intersecting object\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    bringForward: function (object, intersecting) {\n      if (!object) {\n        return this;\n      }\n      var activeGroup = this._activeGroup,\n          i, obj, idx, newIdx, objs;\n\n      if (object === activeGroup) {\n        objs = activeGroup._objects;\n        for (i = objs.length; i--;) {\n          obj = objs[i];\n          idx = this._objects.indexOf(obj);\n          if (idx !== this._objects.length - 1) {\n            newIdx = idx + 1;\n            removeFromArray(this._objects, obj);\n            this._objects.splice(newIdx, 0, obj);\n          }\n        }\n      }\n      else {\n        idx = this._objects.indexOf(object);\n        if (idx !== this._objects.length - 1) {\n          // if object is not on top of stack (last item in an array)\n          newIdx = this._findNewUpperIndex(object, idx, intersecting);\n          removeFromArray(this._objects, object);\n          this._objects.splice(newIdx, 0, object);\n        }\n      }\n      this.renderAll && this.renderAll();\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _findNewUpperIndex: function(object, idx, intersecting) {\n      var newIdx;\n\n      if (intersecting) {\n        newIdx = idx;\n\n        // traverse up the stack looking for the nearest intersecting object\n        for (var i = idx + 1; i < this._objects.length; ++i) {\n\n          var isIntersecting = object.intersectsWithObject(this._objects[i]) ||\n                               object.isContainedWithinObject(this._objects[i]) ||\n                               this._objects[i].isContainedWithinObject(object);\n\n          if (isIntersecting) {\n            newIdx = i;\n            break;\n          }\n        }\n      }\n      else {\n        newIdx = idx + 1;\n      }\n\n      return newIdx;\n    },\n\n    /**\n     * Moves an object to specified level in stack of drawn objects\n     * @param {fabric.Object} object Object to send\n     * @param {Number} index Position to move to\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    moveTo: function (object, index) {\n      removeFromArray(this._objects, object);\n      this._objects.splice(index, 0, object);\n      return this.renderAll && this.renderAll();\n    },\n\n    /**\n     * Clears a canvas element and removes all event listeners\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    dispose: function () {\n      this.clear();\n      return this;\n    },\n\n    /**\n     * Returns a string representation of an instance\n     * @return {String} string representation of an instance\n     */\n    toString: function () {\n      return '#<fabric.Canvas (' + this.complexity() + '): ' +\n               '{ objects: ' + this.getObjects().length + ' }>';\n    }\n  });\n\n  extend(fabric.StaticCanvas.prototype, fabric.Observable);\n  extend(fabric.StaticCanvas.prototype, fabric.Collection);\n  extend(fabric.StaticCanvas.prototype, fabric.DataURLExporter);\n\n  extend(fabric.StaticCanvas, /** @lends fabric.StaticCanvas */ {\n\n    /**\n     * @static\n     * @type String\n     * @default\n     */\n    EMPTY_JSON: '{\"objects\": [], \"background\": \"white\"}',\n\n    /**\n     * Provides a way to check support of some of the canvas methods\n     * (either those of HTMLCanvasElement itself, or rendering context)\n     *\n     * @param {String} methodName Method to check support for;\n     *                            Could be one of \"getImageData\", \"toDataURL\", \"toDataURLWithQuality\" or \"setLineDash\"\n     * @return {Boolean | null} `true` if method is supported (or at least exists),\n     *                          `null` if canvas element or context can not be initialized\n     */\n    supports: function (methodName) {\n      var el = fabric.util.createCanvasElement();\n\n      if (!el || !el.getContext) {\n        return null;\n      }\n\n      var ctx = el.getContext('2d');\n      if (!ctx) {\n        return null;\n      }\n\n      switch (methodName) {\n\n        case 'getImageData':\n          return typeof ctx.getImageData !== 'undefined';\n\n        case 'setLineDash':\n          return typeof ctx.setLineDash !== 'undefined';\n\n        case 'toDataURL':\n          return typeof el.toDataURL !== 'undefined';\n\n        case 'toDataURLWithQuality':\n          try {\n            el.toDataURL('image/jpeg', 0);\n            return true;\n          }\n          catch (e) { }\n          return false;\n\n        default:\n          return null;\n      }\n    }\n  });\n\n  /**\n   * Returns JSON representation of canvas\n   * @function\n   * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n   * @return {String} JSON string\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-3#serialization}\n   * @see {@link http://jsfiddle.net/fabricjs/pec86/|jsFiddle demo}\n   * @example <caption>JSON without additional properties</caption>\n   * var json = canvas.toJSON();\n   * @example <caption>JSON with additional properties included</caption>\n   * var json = canvas.toJSON(['lockMovementX', 'lockMovementY', 'lockRotation', 'lockScalingX', 'lockScalingY', 'lockUniScaling']);\n   * @example <caption>JSON without default values</caption>\n   * canvas.includeDefaultValues = false;\n   * var json = canvas.toJSON();\n   */\n  fabric.StaticCanvas.prototype.toJSON = fabric.StaticCanvas.prototype.toObject;\n\n})();\n\n\n/**\n * BaseBrush class\n * @class fabric.BaseBrush\n * @see {@link http://fabricjs.com/freedrawing|Freedrawing demo}\n */\nfabric.BaseBrush = fabric.util.createClass(/** @lends fabric.BaseBrush.prototype */ {\n\n  /**\n   * Color of a brush\n   * @type String\n   * @default\n   */\n  color: 'rgb(0, 0, 0)',\n\n  /**\n   * Width of a brush\n   * @type Number\n   * @default\n   */\n  width: 1,\n\n  /**\n   * Shadow object representing shadow of this shape.\n   * <b>Backwards incompatibility note:</b> This property replaces \"shadowColor\" (String), \"shadowOffsetX\" (Number),\n   * \"shadowOffsetY\" (Number) and \"shadowBlur\" (Number) since v1.2.12\n   * @type fabric.Shadow\n   * @default\n   */\n  shadow: null,\n\n  /**\n   * Line endings style of a brush (one of \"butt\", \"round\", \"square\")\n   * @type String\n   * @default\n   */\n  strokeLineCap: 'round',\n\n  /**\n   * Corner style of a brush (one of \"bevil\", \"round\", \"miter\")\n   * @type String\n   * @default\n   */\n  strokeLineJoin: 'round',\n\n  /**\n   * Stroke Dash Array.\n   * @type Array\n   * @default\n   */\n  strokeDashArray: null,\n\n  /**\n   * Sets shadow of an object\n   * @param {Object|String} [options] Options object or string (e.g. \"2px 2px 10px rgba(0,0,0,0.2)\")\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  setShadow: function(options) {\n    this.shadow = new fabric.Shadow(options);\n    return this;\n  },\n\n  /**\n   * Sets brush styles\n   * @private\n   */\n  _setBrushStyles: function() {\n    var ctx = this.canvas.contextTop;\n\n    ctx.strokeStyle = this.color;\n    ctx.lineWidth = this.width;\n    ctx.lineCap = this.strokeLineCap;\n    ctx.lineJoin = this.strokeLineJoin;\n    if (this.strokeDashArray && fabric.StaticCanvas.supports('setLineDash')) {\n      ctx.setLineDash(this.strokeDashArray);\n    }\n  },\n\n  /**\n   * Sets brush shadow styles\n   * @private\n   */\n  _setShadow: function() {\n    if (!this.shadow) {\n      return;\n    }\n\n    var ctx = this.canvas.contextTop,\n        zoom = this.canvas.getZoom();\n\n    ctx.shadowColor = this.shadow.color;\n    ctx.shadowBlur = this.shadow.blur * zoom;\n    ctx.shadowOffsetX = this.shadow.offsetX * zoom;\n    ctx.shadowOffsetY = this.shadow.offsetY * zoom;\n  },\n\n  /**\n   * Removes brush shadow styles\n   * @private\n   */\n  _resetShadow: function() {\n    var ctx = this.canvas.contextTop;\n\n    ctx.shadowColor = '';\n    ctx.shadowBlur = ctx.shadowOffsetX = ctx.shadowOffsetY = 0;\n  }\n});\n\n\n(function() {\n\n  /**\n   * PencilBrush class\n   * @class fabric.PencilBrush\n   * @extends fabric.BaseBrush\n   */\n  fabric.PencilBrush = fabric.util.createClass(fabric.BaseBrush, /** @lends fabric.PencilBrush.prototype */ {\n\n    /**\n     * Constructor\n     * @param {fabric.Canvas} canvas\n     * @return {fabric.PencilBrush} Instance of a pencil brush\n     */\n    initialize: function(canvas) {\n      this.canvas = canvas;\n      this._points = [];\n    },\n\n    /**\n     * Inovoked on mouse down\n     * @param {Object} pointer\n     */\n    onMouseDown: function(pointer) {\n      this._prepareForDrawing(pointer);\n      // capture coordinates immediately\n      // this allows to draw dots (when movement never occurs)\n      this._captureDrawingPath(pointer);\n      this._render();\n    },\n\n    /**\n     * Inovoked on mouse move\n     * @param {Object} pointer\n     */\n    onMouseMove: function(pointer) {\n      this._captureDrawingPath(pointer);\n      // redraw curve\n      // clear top canvas\n      this.canvas.clearContext(this.canvas.contextTop);\n      this._render();\n    },\n\n    /**\n     * Invoked on mouse up\n     */\n    onMouseUp: function() {\n      this._finalizeAndAddPath();\n    },\n\n    /**\n     * @private\n     * @param {Object} pointer Actual mouse position related to the canvas.\n     */\n    _prepareForDrawing: function(pointer) {\n\n      var p = new fabric.Point(pointer.x, pointer.y);\n\n      this._reset();\n      this._addPoint(p);\n\n      this.canvas.contextTop.moveTo(p.x, p.y);\n    },\n\n    /**\n     * @private\n     * @param {fabric.Point} point Point to be added to points array\n     */\n    _addPoint: function(point) {\n      this._points.push(point);\n    },\n\n    /**\n     * Clear points array and set contextTop canvas style.\n     * @private\n     */\n    _reset: function() {\n      this._points.length = 0;\n\n      this._setBrushStyles();\n      this._setShadow();\n    },\n\n    /**\n     * @private\n     * @param {Object} pointer Actual mouse position related to the canvas.\n     */\n    _captureDrawingPath: function(pointer) {\n      var pointerPoint = new fabric.Point(pointer.x, pointer.y);\n      this._addPoint(pointerPoint);\n    },\n\n    /**\n     * Draw a smooth path on the topCanvas using quadraticCurveTo\n     * @private\n     */\n    _render: function() {\n      var ctx  = this.canvas.contextTop,\n          v = this.canvas.viewportTransform,\n          p1 = this._points[0],\n          p2 = this._points[1];\n\n      ctx.save();\n      ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n      ctx.beginPath();\n\n      //if we only have 2 points in the path and they are the same\n      //it means that the user only clicked the canvas without moving the mouse\n      //then we should be drawing a dot. A path isn't drawn between two identical dots\n      //that's why we set them apart a bit\n      if (this._points.length === 2 && p1.x === p2.x && p1.y === p2.y) {\n        p1.x -= 0.5;\n        p2.x += 0.5;\n      }\n      ctx.moveTo(p1.x, p1.y);\n\n      for (var i = 1, len = this._points.length; i < len; i++) {\n        // we pick the point between pi + 1 & pi + 2 as the\n        // end point and p1 as our control point.\n        var midPoint = p1.midPointFrom(p2);\n        ctx.quadraticCurveTo(p1.x, p1.y, midPoint.x, midPoint.y);\n\n        p1 = this._points[i];\n        p2 = this._points[i + 1];\n      }\n      // Draw last line as a straight line while\n      // we wait for the next point to be able to calculate\n      // the bezier control point\n      ctx.lineTo(p1.x, p1.y);\n      ctx.stroke();\n      ctx.restore();\n    },\n\n    /**\n     * Converts points to SVG path\n     * @param {Array} points Array of points\n     * @return {String} SVG path\n     */\n    convertPointsToSVGPath: function(points) {\n      var path = [],\n          p1 = new fabric.Point(points[0].x, points[0].y),\n          p2 = new fabric.Point(points[1].x, points[1].y);\n\n      path.push('M ', points[0].x, ' ', points[0].y, ' ');\n      for (var i = 1, len = points.length; i < len; i++) {\n        var midPoint = p1.midPointFrom(p2);\n        // p1 is our bezier control point\n        // midpoint is our endpoint\n        // start point is p(i-1) value.\n        path.push('Q ', p1.x, ' ', p1.y, ' ', midPoint.x, ' ', midPoint.y, ' ');\n        p1 = new fabric.Point(points[i].x, points[i].y);\n        if ((i + 1) < points.length) {\n          p2 = new fabric.Point(points[i + 1].x, points[i + 1].y);\n        }\n      }\n      path.push('L ', p1.x, ' ', p1.y, ' ');\n      return path;\n    },\n\n    /**\n     * Creates fabric.Path object to add on canvas\n     * @param {String} pathData Path data\n     * @return {fabric.Path} Path to add on canvas\n     */\n    createPath: function(pathData) {\n      var path = new fabric.Path(pathData, {\n        fill: null,\n        stroke: this.color,\n        strokeWidth: this.width,\n        strokeLineCap: this.strokeLineCap,\n        strokeLineJoin: this.strokeLineJoin,\n        strokeDashArray: this.strokeDashArray,\n        originX: 'center',\n        originY: 'center'\n      });\n\n      if (this.shadow) {\n        this.shadow.affectStroke = true;\n        path.setShadow(this.shadow);\n      }\n\n      return path;\n    },\n\n    /**\n     * On mouseup after drawing the path on contextTop canvas\n     * we use the points captured to create an new fabric path object\n     * and add it to the fabric canvas.\n     */\n    _finalizeAndAddPath: function() {\n      var ctx = this.canvas.contextTop;\n      ctx.closePath();\n\n      var pathData = this.convertPointsToSVGPath(this._points).join('');\n      if (pathData === 'M 0 0 Q 0 0 0 0 L 0 0') {\n        // do not create 0 width/height paths, as they are\n        // rendered inconsistently across browsers\n        // Firefox 4, for example, renders a dot,\n        // whereas Chrome 10 renders nothing\n        this.canvas.renderAll();\n        return;\n      }\n\n      var path = this.createPath(pathData);\n\n      this.canvas.add(path);\n      path.setCoords();\n\n      this.canvas.clearContext(this.canvas.contextTop);\n      this._resetShadow();\n      this.canvas.renderAll();\n\n      // fire event 'path' created\n      this.canvas.fire('path:created', { path: path });\n    }\n  });\n})();\n\n\n/**\n * CircleBrush class\n * @class fabric.CircleBrush\n */\nfabric.CircleBrush = fabric.util.createClass(fabric.BaseBrush, /** @lends fabric.CircleBrush.prototype */ {\n\n  /**\n   * Width of a brush\n   * @type Number\n   * @default\n   */\n  width: 10,\n\n  /**\n   * Constructor\n   * @param {fabric.Canvas} canvas\n   * @return {fabric.CircleBrush} Instance of a circle brush\n   */\n  initialize: function(canvas) {\n    this.canvas = canvas;\n    this.points = [];\n  },\n\n  /**\n   * Invoked inside on mouse down and mouse move\n   * @param {Object} pointer\n   */\n  drawDot: function(pointer) {\n    var point = this.addPoint(pointer),\n        ctx = this.canvas.contextTop,\n        v = this.canvas.viewportTransform;\n    ctx.save();\n    ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n\n    ctx.fillStyle = point.fill;\n    ctx.beginPath();\n    ctx.arc(point.x, point.y, point.radius, 0, Math.PI * 2, false);\n    ctx.closePath();\n    ctx.fill();\n\n    ctx.restore();\n  },\n\n  /**\n   * Invoked on mouse down\n   */\n  onMouseDown: function(pointer) {\n    this.points.length = 0;\n    this.canvas.clearContext(this.canvas.contextTop);\n    this._setShadow();\n    this.drawDot(pointer);\n  },\n\n  /**\n   * Invoked on mouse move\n   * @param {Object} pointer\n   */\n  onMouseMove: function(pointer) {\n    this.drawDot(pointer);\n  },\n\n  /**\n   * Invoked on mouse up\n   */\n  onMouseUp: function() {\n    var originalRenderOnAddRemove = this.canvas.renderOnAddRemove;\n    this.canvas.renderOnAddRemove = false;\n\n    var circles = [];\n\n    for (var i = 0, len = this.points.length; i < len; i++) {\n      var point = this.points[i],\n          circle = new fabric.Circle({\n            radius: point.radius,\n            left: point.x,\n            top: point.y,\n            originX: 'center',\n            originY: 'center',\n            fill: point.fill\n          });\n\n      this.shadow && circle.setShadow(this.shadow);\n\n      circles.push(circle);\n    }\n    var group = new fabric.Group(circles, { originX: 'center', originY: 'center' });\n    group.canvas = this.canvas;\n\n    this.canvas.add(group);\n    this.canvas.fire('path:created', { path: group });\n\n    this.canvas.clearContext(this.canvas.contextTop);\n    this._resetShadow();\n    this.canvas.renderOnAddRemove = originalRenderOnAddRemove;\n    this.canvas.renderAll();\n  },\n\n  /**\n   * @param {Object} pointer\n   * @return {fabric.Point} Just added pointer point\n   */\n  addPoint: function(pointer) {\n    var pointerPoint = new fabric.Point(pointer.x, pointer.y),\n\n        circleRadius = fabric.util.getRandomInt(\n                        Math.max(0, this.width - 20), this.width + 20) / 2,\n\n        circleColor = new fabric.Color(this.color)\n                        .setAlpha(fabric.util.getRandomInt(0, 100) / 100)\n                        .toRgba();\n\n    pointerPoint.radius = circleRadius;\n    pointerPoint.fill = circleColor;\n\n    this.points.push(pointerPoint);\n\n    return pointerPoint;\n  }\n});\n\n\n/**\n * SprayBrush class\n * @class fabric.SprayBrush\n */\nfabric.SprayBrush = fabric.util.createClass( fabric.BaseBrush, /** @lends fabric.SprayBrush.prototype */ {\n\n  /**\n   * Width of a spray\n   * @type Number\n   * @default\n   */\n  width:              10,\n\n  /**\n   * Density of a spray (number of dots per chunk)\n   * @type Number\n   * @default\n   */\n  density:            20,\n\n  /**\n   * Width of spray dots\n   * @type Number\n   * @default\n   */\n  dotWidth:           1,\n\n  /**\n   * Width variance of spray dots\n   * @type Number\n   * @default\n   */\n  dotWidthVariance:   1,\n\n  /**\n   * Whether opacity of a dot should be random\n   * @type Boolean\n   * @default\n   */\n  randomOpacity:        false,\n\n  /**\n   * Whether overlapping dots (rectangles) should be removed (for performance reasons)\n   * @type Boolean\n   * @default\n   */\n  optimizeOverlapping:  true,\n\n  /**\n   * Constructor\n   * @param {fabric.Canvas} canvas\n   * @return {fabric.SprayBrush} Instance of a spray brush\n   */\n  initialize: function(canvas) {\n    this.canvas = canvas;\n    this.sprayChunks = [];\n  },\n\n  /**\n   * Invoked on mouse down\n   * @param {Object} pointer\n   */\n  onMouseDown: function(pointer) {\n    this.sprayChunks.length = 0;\n    this.canvas.clearContext(this.canvas.contextTop);\n    this._setShadow();\n\n    this.addSprayChunk(pointer);\n    this.render();\n  },\n\n  /**\n   * Invoked on mouse move\n   * @param {Object} pointer\n   */\n  onMouseMove: function(pointer) {\n    this.addSprayChunk(pointer);\n    this.render();\n  },\n\n  /**\n   * Invoked on mouse up\n   */\n  onMouseUp: function() {\n    var originalRenderOnAddRemove = this.canvas.renderOnAddRemove;\n    this.canvas.renderOnAddRemove = false;\n\n    var rects = [];\n\n    for (var i = 0, ilen = this.sprayChunks.length; i < ilen; i++) {\n      var sprayChunk = this.sprayChunks[i];\n\n      for (var j = 0, jlen = sprayChunk.length; j < jlen; j++) {\n\n        var rect = new fabric.Rect({\n          width: sprayChunk[j].width,\n          height: sprayChunk[j].width,\n          left: sprayChunk[j].x + 1,\n          top: sprayChunk[j].y + 1,\n          originX: 'center',\n          originY: 'center',\n          fill: this.color\n        });\n\n        this.shadow && rect.setShadow(this.shadow);\n        rects.push(rect);\n      }\n    }\n\n    if (this.optimizeOverlapping) {\n      rects = this._getOptimizedRects(rects);\n    }\n\n    var group = new fabric.Group(rects, { originX: 'center', originY: 'center' });\n    group.canvas = this.canvas;\n\n    this.canvas.add(group);\n    this.canvas.fire('path:created', { path: group });\n\n    this.canvas.clearContext(this.canvas.contextTop);\n    this._resetShadow();\n    this.canvas.renderOnAddRemove = originalRenderOnAddRemove;\n    this.canvas.renderAll();\n  },\n\n  /**\n   * @private\n   * @param {Array} rects\n   */\n  _getOptimizedRects: function(rects) {\n\n    // avoid creating duplicate rects at the same coordinates\n    var uniqueRects = { }, key;\n\n    for (var i = 0, len = rects.length; i < len; i++) {\n      key = rects[i].left + '' + rects[i].top;\n      if (!uniqueRects[key]) {\n        uniqueRects[key] = rects[i];\n      }\n    }\n    var uniqueRectsArray = [];\n    for (key in uniqueRects) {\n      uniqueRectsArray.push(uniqueRects[key]);\n    }\n\n    return uniqueRectsArray;\n  },\n\n  /**\n   * Renders brush\n   */\n  render: function() {\n    var ctx = this.canvas.contextTop;\n    ctx.fillStyle = this.color;\n\n    var v = this.canvas.viewportTransform;\n    ctx.save();\n    ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n\n    for (var i = 0, len = this.sprayChunkPoints.length; i < len; i++) {\n      var point = this.sprayChunkPoints[i];\n      if (typeof point.opacity !== 'undefined') {\n        ctx.globalAlpha = point.opacity;\n      }\n      ctx.fillRect(point.x, point.y, point.width, point.width);\n    }\n    ctx.restore();\n  },\n\n  /**\n   * @param {Object} pointer\n   */\n  addSprayChunk: function(pointer) {\n    this.sprayChunkPoints = [];\n\n    var x, y, width, radius = this.width / 2;\n\n    for (var i = 0; i < this.density; i++) {\n\n      x = fabric.util.getRandomInt(pointer.x - radius, pointer.x + radius);\n      y = fabric.util.getRandomInt(pointer.y - radius, pointer.y + radius);\n\n      if (this.dotWidthVariance) {\n        width = fabric.util.getRandomInt(\n          // bottom clamp width to 1\n          Math.max(1, this.dotWidth - this.dotWidthVariance),\n          this.dotWidth + this.dotWidthVariance);\n      }\n      else {\n        width = this.dotWidth;\n      }\n\n      var point = new fabric.Point(x, y);\n      point.width = width;\n\n      if (this.randomOpacity) {\n        point.opacity = fabric.util.getRandomInt(0, 100) / 100;\n      }\n\n      this.sprayChunkPoints.push(point);\n    }\n\n    this.sprayChunks.push(this.sprayChunkPoints);\n  }\n});\n\n\n/**\n * PatternBrush class\n * @class fabric.PatternBrush\n * @extends fabric.BaseBrush\n */\nfabric.PatternBrush = fabric.util.createClass(fabric.PencilBrush, /** @lends fabric.PatternBrush.prototype */ {\n\n  getPatternSrc: function() {\n\n    var dotWidth = 20,\n        dotDistance = 5,\n        patternCanvas = fabric.document.createElement('canvas'),\n        patternCtx = patternCanvas.getContext('2d');\n\n    patternCanvas.width = patternCanvas.height = dotWidth + dotDistance;\n\n    patternCtx.fillStyle = this.color;\n    patternCtx.beginPath();\n    patternCtx.arc(dotWidth / 2, dotWidth / 2, dotWidth / 2, 0, Math.PI * 2, false);\n    patternCtx.closePath();\n    patternCtx.fill();\n\n    return patternCanvas;\n  },\n\n  getPatternSrcFunction: function() {\n    return String(this.getPatternSrc).replace('this.color', '\"' + this.color + '\"');\n  },\n\n  /**\n   * Creates \"pattern\" instance property\n   */\n  getPattern: function() {\n    return this.canvas.contextTop.createPattern(this.source || this.getPatternSrc(), 'repeat');\n  },\n\n  /**\n   * Sets brush styles\n   */\n  _setBrushStyles: function() {\n    this.callSuper('_setBrushStyles');\n    this.canvas.contextTop.strokeStyle = this.getPattern();\n  },\n\n  /**\n   * Creates path\n   */\n  createPath: function(pathData) {\n    var path = this.callSuper('createPath', pathData),\n        topLeft = path._getLeftTopCoords().scalarAdd(path.strokeWidth / 2);\n\n    path.stroke = new fabric.Pattern({\n      source: this.source || this.getPatternSrcFunction(),\n      offsetX: -topLeft.x,\n      offsetY: -topLeft.y\n    });\n    return path;\n  }\n});\n\n\n(function() {\n\n  var getPointer = fabric.util.getPointer,\n      degreesToRadians = fabric.util.degreesToRadians,\n      radiansToDegrees = fabric.util.radiansToDegrees,\n      atan2 = Math.atan2,\n      abs = Math.abs,\n      supportLineDash = fabric.StaticCanvas.supports('setLineDash'),\n\n      STROKE_OFFSET = 0.5;\n\n  /**\n   * Canvas class\n   * @class fabric.Canvas\n   * @extends fabric.StaticCanvas\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-1#canvas}\n   * @see {@link fabric.Canvas#initialize} for constructor definition\n   *\n   * @fires object:added\n   * @fires object:modified\n   * @fires object:rotating\n   * @fires object:scaling\n   * @fires object:moving\n   * @fires object:selected\n   *\n   * @fires before:selection:cleared\n   * @fires selection:cleared\n   * @fires selection:created\n   *\n   * @fires path:created\n   * @fires mouse:down\n   * @fires mouse:move\n   * @fires mouse:up\n   * @fires mouse:over\n   * @fires mouse:out\n   *\n   */\n  fabric.Canvas = fabric.util.createClass(fabric.StaticCanvas, /** @lends fabric.Canvas.prototype */ {\n\n    /**\n     * Constructor\n     * @param {HTMLElement | String} el &lt;canvas> element to initialize instance on\n     * @param {Object} [options] Options object\n     * @return {Object} thisArg\n     */\n    initialize: function(el, options) {\n      options || (options = { });\n\n      this._initStatic(el, options);\n      this._initInteractive();\n      this._createCacheCanvas();\n    },\n\n    /**\n     * When true, objects can be transformed by one side (unproportionally)\n     * @type Boolean\n     * @default\n     */\n    uniScaleTransform:      false,\n\n    /**\n     * Indicates which key enable unproportional scaling\n     * values: 'altKey', 'shiftKey', 'ctrlKey'.\n     * If `null` or 'none' or any other string that is not a modifier key\n     * feature is disabled feature disabled.\n     * @since 1.6.2\n     * @type String\n     * @default\n     */\n    uniScaleKey:           'shiftKey',\n\n    /**\n     * When true, objects use center point as the origin of scale transformation.\n     * <b>Backwards incompatibility note:</b> This property replaces \"centerTransform\" (Boolean).\n     * @since 1.3.4\n     * @type Boolean\n     * @default\n     */\n    centeredScaling:        false,\n\n    /**\n     * When true, objects use center point as the origin of rotate transformation.\n     * <b>Backwards incompatibility note:</b> This property replaces \"centerTransform\" (Boolean).\n     * @since 1.3.4\n     * @type Boolean\n     * @default\n     */\n    centeredRotation:       false,\n\n    /**\n     * Indicates which key enable centered Transfrom\n     * values: 'altKey', 'shiftKey', 'ctrlKey'.\n     * If `null` or 'none' or any other string that is not a modifier key\n     * feature is disabled feature disabled.\n     * @since 1.6.2\n     * @type String\n     * @default\n     */\n    centeredKey:           'altKey',\n\n    /**\n     * Indicates which key enable alternate action on corner\n     * values: 'altKey', 'shiftKey', 'ctrlKey'.\n     * If `null` or 'none' or any other string that is not a modifier key\n     * feature is disabled feature disabled.\n     * @since 1.6.2\n     * @type String\n     * @default\n     */\n    altActionKey:           'shiftKey',\n\n    /**\n     * Indicates that canvas is interactive. This property should not be changed.\n     * @type Boolean\n     * @default\n     */\n    interactive:            true,\n\n    /**\n     * Indicates whether group selection should be enabled\n     * @type Boolean\n     * @default\n     */\n    selection:              true,\n\n    /**\n     * Indicates which key enable multiple click selection\n     * values: 'altKey', 'shiftKey', 'ctrlKey'.\n     * If `null` or 'none' or any other string that is not a modifier key\n     * feature is disabled feature disabled.\n     * @since 1.6.2\n     * @type String\n     * @default\n     */\n    selectionKey:           'shiftKey',\n\n    /**\n     * Indicates which key enable alternative selection\n     * in case of target overlapping with active object\n     * values: 'altKey', 'shiftKey', 'ctrlKey'.\n     * If `null` or 'none' or any other string that is not a modifier key\n     * feature is disabled feature disabled.\n     * @since 1.6.5\n     * @type null|String\n     * @default\n     */\n    altSelectionKey:           null,\n\n    /**\n     * Color of selection\n     * @type String\n     * @default\n     */\n    selectionColor:         'rgba(100, 100, 255, 0.3)', // blue\n\n    /**\n     * Default dash array pattern\n     * If not empty the selection border is dashed\n     * @type Array\n     */\n    selectionDashArray:     [],\n\n    /**\n     * Color of the border of selection (usually slightly darker than color of selection itself)\n     * @type String\n     * @default\n     */\n    selectionBorderColor:   'rgba(255, 255, 255, 0.3)',\n\n    /**\n     * Width of a line used in object/group selection\n     * @type Number\n     * @default\n     */\n    selectionLineWidth:     1,\n\n    /**\n     * Default cursor value used when hovering over an object on canvas\n     * @type String\n     * @default\n     */\n    hoverCursor:            'move',\n\n    /**\n     * Default cursor value used when moving an object on canvas\n     * @type String\n     * @default\n     */\n    moveCursor:             'move',\n\n    /**\n     * Default cursor value used for the entire canvas\n     * @type String\n     * @default\n     */\n    defaultCursor:          'default',\n\n    /**\n     * Cursor value used during free drawing\n     * @type String\n     * @default\n     */\n    freeDrawingCursor:      'crosshair',\n\n    /**\n     * Cursor value used for rotation point\n     * @type String\n     * @default\n     */\n    rotationCursor:         'crosshair',\n\n    /**\n     * Default element class that's given to wrapper (div) element of canvas\n     * @type String\n     * @default\n     */\n    containerClass:         'canvas-container',\n\n    /**\n     * When true, object detection happens on per-pixel basis rather than on per-bounding-box\n     * @type Boolean\n     * @default\n     */\n    perPixelTargetFind:     false,\n\n    /**\n     * Number of pixels around target pixel to tolerate (consider active) during object detection\n     * @type Number\n     * @default\n     */\n    targetFindTolerance:    0,\n\n    /**\n     * When true, target detection is skipped when hovering over canvas. This can be used to improve performance.\n     * @type Boolean\n     * @default\n     */\n    skipTargetFind:         false,\n\n    /**\n     * When true, mouse events on canvas (mousedown/mousemove/mouseup) result in free drawing.\n     * After mousedown, mousemove creates a shape,\n     * and then mouseup finalizes it and adds an instance of `fabric.Path` onto canvas.\n     * @tutorial {@link http://fabricjs.com/fabric-intro-part-4#free_drawing}\n     * @type Boolean\n     * @default\n     */\n    isDrawingMode:          false,\n\n    /**\n     * Indicates whether objects should remain in current stack position when selected.\n     * When false objects are brought to top and rendered as part of the selection group\n     * @type Boolean\n     * @default\n     */\n    preserveObjectStacking: false,\n\n    /**\n     * Indicates the angle that an object will lock to while rotating.\n     * @type Number\n     * @since 1.6.7\n     * @default\n     */\n    snapAngle: 0,\n\n    /**\n     * Indicates the distance from the snapAngle the rotation will lock to the snapAngle.\n     * When `null`, the snapThreshold will default to the snapAngle.\n     * @type null|Number\n     * @since 1.6.7\n     * @default\n     */\n    snapThreshold: null,\n\n    /**\n     * Indicates if the right click on canvas can output the context menu or not\n     * @type Boolean\n     * @since 1.6.5\n     * @default\n     */\n    stopContextMenu: false,\n\n    /**\n     * Indicates if the canvas can fire right click events\n     * @type Boolean\n     * @since 1.6.5\n     * @default\n     */\n    fireRightClick: false,\n\n    /**\n     * @private\n     */\n    _initInteractive: function() {\n      this._currentTransform = null;\n      this._groupSelector = null;\n      this._initWrapperElement();\n      this._createUpperCanvas();\n      this._initEventListeners();\n\n      this._initRetinaScaling();\n\n      this.freeDrawingBrush = fabric.PencilBrush && new fabric.PencilBrush(this);\n\n      this.calcOffset();\n    },\n\n    /**\n     * Divides objects in two groups, one to render immediately\n     * and one to render as activeGroup.\n     * @return {Array} objects to render immediately and pushes the other in the activeGroup.\n     */\n    _chooseObjectsToRender: function() {\n      var activeGroup = this.getActiveGroup(),\n          activeObject = this.getActiveObject(),\n          object, objsToRender = [], activeGroupObjects = [];\n\n      if ((activeGroup || activeObject) && !this.preserveObjectStacking) {\n        for (var i = 0, length = this._objects.length; i < length; i++) {\n          object = this._objects[i];\n          if ((!activeGroup || !activeGroup.contains(object)) && object !== activeObject) {\n            objsToRender.push(object);\n          }\n          else {\n            activeGroupObjects.push(object);\n          }\n        }\n        if (activeGroup) {\n          activeGroup._set('_objects', activeGroupObjects);\n          objsToRender.push(activeGroup);\n        }\n        activeObject && objsToRender.push(activeObject);\n      }\n      else {\n        objsToRender = this._objects;\n      }\n      return objsToRender;\n    },\n\n    /**\n     * Renders both the top canvas and the secondary container canvas.\n     * @return {fabric.Canvas} instance\n     * @chainable\n     */\n    renderAll: function () {\n      if (this.contextTopDirty && !this._groupSelector && !this.isDrawingMode) {\n        this.clearContext(this.contextTop);\n        this.contextTopDirty = false;\n      }\n      var canvasToDrawOn = this.contextContainer;\n      this.renderCanvas(canvasToDrawOn, this._chooseObjectsToRender());\n      return this;\n    },\n\n    /**\n     * Method to render only the top canvas.\n     * Also used to render the group selection box.\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    renderTop: function () {\n      var ctx = this.contextTop;\n      this.clearContext(ctx);\n\n      // we render the top context - last object\n      if (this.selection && this._groupSelector) {\n        this._drawSelection(ctx);\n      }\n\n      this.fire('after:render');\n      this.contextTopDirty = true;\n      return this;\n    },\n\n    /**\n     * Resets the current transform to its original values and chooses the type of resizing based on the event\n     * @private\n     */\n    _resetCurrentTransform: function() {\n      var t = this._currentTransform;\n\n      t.target.set({\n        scaleX: t.original.scaleX,\n        scaleY: t.original.scaleY,\n        skewX: t.original.skewX,\n        skewY: t.original.skewY,\n        left: t.original.left,\n        top: t.original.top\n      });\n\n      if (this._shouldCenterTransform(t.target)) {\n        if (t.action === 'rotate') {\n          this._setOriginToCenter(t.target);\n        }\n        else {\n          if (t.originX !== 'center') {\n            if (t.originX === 'right') {\n              t.mouseXSign = -1;\n            }\n            else {\n              t.mouseXSign = 1;\n            }\n          }\n          if (t.originY !== 'center') {\n            if (t.originY === 'bottom') {\n              t.mouseYSign = -1;\n            }\n            else {\n              t.mouseYSign = 1;\n            }\n          }\n\n          t.originX = 'center';\n          t.originY = 'center';\n        }\n      }\n      else {\n        t.originX = t.original.originX;\n        t.originY = t.original.originY;\n      }\n    },\n\n    /**\n     * Checks if point is contained within an area of given object\n     * @param {Event} e Event object\n     * @param {fabric.Object} target Object to test against\n     * @param {Object} [point] x,y object of point coordinates we want to check.\n     * @return {Boolean} true if point is contained within an area of given object\n     */\n    containsPoint: function (e, target, point) {\n      var ignoreZoom = true,\n          pointer = point || this.getPointer(e, ignoreZoom),\n          xy;\n\n      if (target.group && target.group === this.getActiveGroup()) {\n        xy = this._normalizePointer(target.group, pointer);\n      }\n      else {\n        xy = { x: pointer.x, y: pointer.y };\n      }\n      // http://www.geog.ubc.ca/courses/klink/gis.notes/ncgia/u32.html\n      // http://idav.ucdavis.edu/~okreylos/TAship/Spring2000/PointInPolygon.html\n      return (target.containsPoint(xy) || target._findTargetCorner(pointer));\n    },\n\n    /**\n     * @private\n     */\n    _normalizePointer: function (object, pointer) {\n      var m = object.calcTransformMatrix(),\n          invertedM = fabric.util.invertTransform(m),\n          vptPointer = this.restorePointerVpt(pointer);\n      return fabric.util.transformPoint(vptPointer, invertedM);\n    },\n\n    /**\n     * Returns true if object is transparent at a certain location\n     * @param {fabric.Object} target Object to check\n     * @param {Number} x Left coordinate\n     * @param {Number} y Top coordinate\n     * @return {Boolean}\n     */\n    isTargetTransparent: function (target, x, y) {\n      var hasBorders = target.hasBorders,\n          transparentCorners = target.transparentCorners,\n          ctx = this.contextCache,\n          originalColor = target.selectionBackgroundColor;\n\n      target.hasBorders = target.transparentCorners = false;\n      target.selectionBackgroundColor = '';\n\n      ctx.save();\n      ctx.transform.apply(ctx, this.viewportTransform);\n      target.render(ctx);\n      ctx.restore();\n\n      target.active && target._renderControls(ctx);\n\n      target.hasBorders = hasBorders;\n      target.transparentCorners = transparentCorners;\n      target.selectionBackgroundColor = originalColor;\n\n      var isTransparent = fabric.util.isTransparent(\n        ctx, x, y, this.targetFindTolerance);\n\n      this.clearContext(ctx);\n\n      return isTransparent;\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object\n     * @param {fabric.Object} target\n     */\n    _shouldClearSelection: function (e, target) {\n      var activeGroup = this.getActiveGroup(),\n          activeObject = this.getActiveObject();\n\n      return (\n        !target\n        ||\n        (target &&\n          activeGroup &&\n          !activeGroup.contains(target) &&\n          activeGroup !== target &&\n          !e[this.selectionKey])\n        ||\n        (target && !target.evented)\n        ||\n        (target &&\n          !target.selectable &&\n          activeObject &&\n          activeObject !== target)\n      );\n    },\n\n    /**\n     * @private\n     * @param {fabric.Object} target\n     */\n    _shouldCenterTransform: function (target) {\n      if (!target) {\n        return;\n      }\n\n      var t = this._currentTransform,\n          centerTransform;\n\n      if (t.action === 'scale' || t.action === 'scaleX' || t.action === 'scaleY') {\n        centerTransform = this.centeredScaling || target.centeredScaling;\n      }\n      else if (t.action === 'rotate') {\n        centerTransform = this.centeredRotation || target.centeredRotation;\n      }\n\n      return centerTransform ? !t.altKey : t.altKey;\n    },\n\n    /**\n     * @private\n     */\n    _getOriginFromCorner: function(target, corner) {\n      var origin = {\n        x: target.originX,\n        y: target.originY\n      };\n\n      if (corner === 'ml' || corner === 'tl' || corner === 'bl') {\n        origin.x = 'right';\n      }\n      else if (corner === 'mr' || corner === 'tr' || corner === 'br') {\n        origin.x = 'left';\n      }\n\n      if (corner === 'tl' || corner === 'mt' || corner === 'tr') {\n        origin.y = 'bottom';\n      }\n      else if (corner === 'bl' || corner === 'mb' || corner === 'br') {\n        origin.y = 'top';\n      }\n\n      return origin;\n    },\n\n    /**\n     * @private\n     */\n    _getActionFromCorner: function(target, corner, e) {\n      if (!corner) {\n        return 'drag';\n      }\n\n      switch (corner) {\n        case 'mtr':\n          return 'rotate';\n        case 'ml':\n        case 'mr':\n          return e[this.altActionKey] ? 'skewY' : 'scaleX';\n        case 'mt':\n        case 'mb':\n          return e[this.altActionKey] ? 'skewX' : 'scaleY';\n        default:\n          return 'scale';\n      }\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object\n     * @param {fabric.Object} target\n     */\n    _setupCurrentTransform: function (e, target) {\n      if (!target) {\n        return;\n      }\n\n      var pointer = this.getPointer(e),\n          corner = target._findTargetCorner(this.getPointer(e, true)),\n          action = this._getActionFromCorner(target, corner, e),\n          origin = this._getOriginFromCorner(target, corner);\n\n      this._currentTransform = {\n        target: target,\n        action: action,\n        corner: corner,\n        scaleX: target.scaleX,\n        scaleY: target.scaleY,\n        skewX: target.skewX,\n        skewY: target.skewY,\n        offsetX: pointer.x - target.left,\n        offsetY: pointer.y - target.top,\n        originX: origin.x,\n        originY: origin.y,\n        ex: pointer.x,\n        ey: pointer.y,\n        lastX: pointer.x,\n        lastY: pointer.y,\n        left: target.left,\n        top: target.top,\n        theta: degreesToRadians(target.angle),\n        width: target.width * target.scaleX,\n        mouseXSign: 1,\n        mouseYSign: 1,\n        shiftKey: e.shiftKey,\n        altKey: e[this.centeredKey]\n      };\n\n      this._currentTransform.original = {\n        left: target.left,\n        top: target.top,\n        scaleX: target.scaleX,\n        scaleY: target.scaleY,\n        skewX: target.skewX,\n        skewY: target.skewY,\n        originX: origin.x,\n        originY: origin.y\n      };\n\n      this._resetCurrentTransform();\n    },\n\n    /**\n     * Translates object by \"setting\" its left/top\n     * @private\n     * @param {Number} x pointer's x coordinate\n     * @param {Number} y pointer's y coordinate\n     * @return {Boolean} true if the translation occurred\n     */\n    _translateObject: function (x, y) {\n      var transform = this._currentTransform,\n          target = transform.target,\n          newLeft = x - transform.offsetX,\n          newTop = y - transform.offsetY,\n          moveX = !target.get('lockMovementX') && target.left !== newLeft,\n          moveY = !target.get('lockMovementY') && target.top !== newTop;\n\n      moveX && target.set('left', newLeft);\n      moveY && target.set('top', newTop);\n      return moveX || moveY;\n    },\n\n    /**\n     * Check if we are increasing a positive skew or lower it,\n     * checking mouse direction and pressed corner.\n     * @private\n     */\n    _changeSkewTransformOrigin: function(mouseMove, t, by) {\n      var property = 'originX', origins = { 0: 'center' },\n          skew = t.target.skewX, originA = 'left', originB = 'right',\n          corner = t.corner === 'mt' || t.corner === 'ml' ? 1 : -1,\n          flipSign = 1;\n\n      mouseMove = mouseMove > 0 ? 1 : -1;\n      if (by === 'y') {\n        skew = t.target.skewY;\n        originA = 'top';\n        originB = 'bottom';\n        property = 'originY';\n      }\n      origins[-1] = originA;\n      origins[1] = originB;\n\n      t.target.flipX && (flipSign *= -1);\n      t.target.flipY && (flipSign *= -1);\n\n      if (skew === 0) {\n        t.skewSign = -corner * mouseMove * flipSign;\n        t[property] = origins[-mouseMove];\n      }\n      else {\n        skew = skew > 0 ? 1 : -1;\n        t.skewSign = skew;\n        t[property] = origins[skew * corner * flipSign];\n      }\n    },\n\n    /**\n     * Skew object by mouse events\n     * @private\n     * @param {Number} x pointer's x coordinate\n     * @param {Number} y pointer's y coordinate\n     * @param {String} by Either 'x' or 'y'\n     * @return {Boolean} true if the skewing occurred\n     */\n    _skewObject: function (x, y, by) {\n      var t = this._currentTransform,\n          target = t.target, skewed = false,\n          lockSkewingX = target.get('lockSkewingX'),\n          lockSkewingY = target.get('lockSkewingY');\n\n      if ((lockSkewingX && by === 'x') || (lockSkewingY && by === 'y')) {\n        return false;\n      }\n\n      // Get the constraint point\n      var center = target.getCenterPoint(),\n          actualMouseByCenter = target.toLocalPoint(new fabric.Point(x, y), 'center', 'center')[by],\n          lastMouseByCenter = target.toLocalPoint(new fabric.Point(t.lastX, t.lastY), 'center', 'center')[by],\n          actualMouseByOrigin, constraintPosition, dim = target._getTransformedDimensions();\n\n      this._changeSkewTransformOrigin(actualMouseByCenter - lastMouseByCenter, t, by);\n      actualMouseByOrigin = target.toLocalPoint(new fabric.Point(x, y), t.originX, t.originY)[by];\n      constraintPosition = target.translateToOriginPoint(center, t.originX, t.originY);\n      // Actually skew the object\n      skewed = this._setObjectSkew(actualMouseByOrigin, t, by, dim);\n      t.lastX = x;\n      t.lastY = y;\n      // Make sure the constraints apply\n      target.setPositionByOrigin(constraintPosition, t.originX, t.originY);\n      return skewed;\n    },\n\n    /**\n     * Set object skew\n     * @private\n     * @return {Boolean} true if the skewing occurred\n     */\n    _setObjectSkew: function(localMouse, transform, by, _dim) {\n      var target = transform.target, newValue, skewed = false,\n          skewSign = transform.skewSign, newDim, dimNoSkew,\n          otherBy, _otherBy, _by, newDimMouse, skewX, skewY;\n\n      if (by === 'x') {\n        otherBy = 'y';\n        _otherBy = 'Y';\n        _by = 'X';\n        skewX = 0;\n        skewY = target.skewY;\n      }\n      else {\n        otherBy = 'x';\n        _otherBy = 'X';\n        _by = 'Y';\n        skewX = target.skewX;\n        skewY = 0;\n      }\n\n      dimNoSkew = target._getTransformedDimensions(skewX, skewY);\n      newDimMouse = 2 * Math.abs(localMouse) - dimNoSkew[by];\n      if (newDimMouse <= 2) {\n        newValue = 0;\n      }\n      else {\n        newValue = skewSign * Math.atan((newDimMouse / target['scale' + _by]) /\n                                        (dimNoSkew[otherBy] / target['scale' + _otherBy]));\n        newValue = fabric.util.radiansToDegrees(newValue);\n      }\n      skewed = target['skew' + _by] !== newValue;\n      target.set('skew' + _by, newValue);\n      if (target['skew' + _otherBy] !== 0) {\n        newDim = target._getTransformedDimensions();\n        newValue = (_dim[otherBy] / newDim[otherBy]) * target['scale' + _otherBy];\n        target.set('scale' + _otherBy, newValue);\n      }\n      return skewed;\n    },\n\n    /**\n     * Scales object by invoking its scaleX/scaleY methods\n     * @private\n     * @param {Number} x pointer's x coordinate\n     * @param {Number} y pointer's y coordinate\n     * @param {String} by Either 'x' or 'y' - specifies dimension constraint by which to scale an object.\n     *                    When not provided, an object is scaled by both dimensions equally\n     * @return {Boolean} true if the scaling occurred\n     */\n    _scaleObject: function (x, y, by) {\n      var t = this._currentTransform,\n          target = t.target,\n          lockScalingX = target.get('lockScalingX'),\n          lockScalingY = target.get('lockScalingY'),\n          lockScalingFlip = target.get('lockScalingFlip');\n\n      if (lockScalingX && lockScalingY) {\n        return false;\n      }\n\n      // Get the constraint point\n      var constraintPosition = target.translateToOriginPoint(target.getCenterPoint(), t.originX, t.originY),\n          localMouse = target.toLocalPoint(new fabric.Point(x, y), t.originX, t.originY),\n          dim = target._getTransformedDimensions(), scaled = false;\n\n      this._setLocalMouse(localMouse, t);\n\n      // Actually scale the object\n      scaled = this._setObjectScale(localMouse, t, lockScalingX, lockScalingY, by, lockScalingFlip, dim);\n\n      // Make sure the constraints apply\n      target.setPositionByOrigin(constraintPosition, t.originX, t.originY);\n      return scaled;\n    },\n\n    /**\n     * @private\n     * @return {Boolean} true if the scaling occurred\n     */\n    _setObjectScale: function(localMouse, transform, lockScalingX, lockScalingY, by, lockScalingFlip, _dim) {\n      var target = transform.target, forbidScalingX = false, forbidScalingY = false, scaled = false,\n          changeX, changeY, scaleX, scaleY;\n\n      scaleX = localMouse.x * target.scaleX / _dim.x;\n      scaleY = localMouse.y * target.scaleY / _dim.y;\n      changeX = target.scaleX !== scaleX;\n      changeY = target.scaleY !== scaleY;\n\n      if (lockScalingFlip && scaleX <= 0 && scaleX < target.scaleX) {\n        forbidScalingX = true;\n      }\n\n      if (lockScalingFlip && scaleY <= 0 && scaleY < target.scaleY) {\n        forbidScalingY = true;\n      }\n\n      if (by === 'equally' && !lockScalingX && !lockScalingY) {\n        forbidScalingX || forbidScalingY || (scaled = this._scaleObjectEqually(localMouse, target, transform, _dim));\n      }\n      else if (!by) {\n        forbidScalingX || lockScalingX || (target.set('scaleX', scaleX) && (scaled = scaled || changeX));\n        forbidScalingY || lockScalingY || (target.set('scaleY', scaleY) && (scaled = scaled || changeY));\n      }\n      else if (by === 'x' && !target.get('lockUniScaling')) {\n        forbidScalingX || lockScalingX || (target.set('scaleX', scaleX) && (scaled = scaled || changeX));\n      }\n      else if (by === 'y' && !target.get('lockUniScaling')) {\n        forbidScalingY || lockScalingY || (target.set('scaleY', scaleY) && (scaled = scaled || changeY));\n      }\n      transform.newScaleX = scaleX;\n      transform.newScaleY = scaleY;\n      forbidScalingX || forbidScalingY || this._flipObject(transform, by);\n      return scaled;\n    },\n\n    /**\n     * @private\n     * @return {Boolean} true if the scaling occurred\n     */\n    _scaleObjectEqually: function(localMouse, target, transform, _dim) {\n\n      var dist = localMouse.y + localMouse.x,\n          lastDist = _dim.y * transform.original.scaleY / target.scaleY +\n                     _dim.x * transform.original.scaleX / target.scaleX,\n          scaled;\n\n      // We use transform.scaleX/Y instead of target.scaleX/Y\n      // because the object may have a min scale and we'll loose the proportions\n      transform.newScaleX = transform.original.scaleX * dist / lastDist;\n      transform.newScaleY = transform.original.scaleY * dist / lastDist;\n      scaled = transform.newScaleX !== target.scaleX || transform.newScaleY !== target.scaleY;\n      target.set('scaleX', transform.newScaleX);\n      target.set('scaleY', transform.newScaleY);\n      return scaled;\n    },\n\n    /**\n     * @private\n     */\n    _flipObject: function(transform, by) {\n      if (transform.newScaleX < 0 && by !== 'y') {\n        if (transform.originX === 'left') {\n          transform.originX = 'right';\n        }\n        else if (transform.originX === 'right') {\n          transform.originX = 'left';\n        }\n      }\n\n      if (transform.newScaleY < 0 && by !== 'x') {\n        if (transform.originY === 'top') {\n          transform.originY = 'bottom';\n        }\n        else if (transform.originY === 'bottom') {\n          transform.originY = 'top';\n        }\n      }\n    },\n\n    /**\n     * @private\n     */\n    _setLocalMouse: function(localMouse, t) {\n      var target = t.target;\n\n      if (t.originX === 'right') {\n        localMouse.x *= -1;\n      }\n      else if (t.originX === 'center') {\n        localMouse.x *= t.mouseXSign * 2;\n        if (localMouse.x < 0) {\n          t.mouseXSign = -t.mouseXSign;\n        }\n      }\n\n      if (t.originY === 'bottom') {\n        localMouse.y *= -1;\n      }\n      else if (t.originY === 'center') {\n        localMouse.y *= t.mouseYSign * 2;\n        if (localMouse.y < 0) {\n          t.mouseYSign = -t.mouseYSign;\n        }\n      }\n\n      // adjust the mouse coordinates when dealing with padding\n      if (abs(localMouse.x) > target.padding) {\n        if (localMouse.x < 0) {\n          localMouse.x += target.padding;\n        }\n        else {\n          localMouse.x -= target.padding;\n        }\n      }\n      else { // mouse is within the padding, set to 0\n        localMouse.x = 0;\n      }\n\n      if (abs(localMouse.y) > target.padding) {\n        if (localMouse.y < 0) {\n          localMouse.y += target.padding;\n        }\n        else {\n          localMouse.y -= target.padding;\n        }\n      }\n      else {\n        localMouse.y = 0;\n      }\n    },\n\n    /**\n     * Rotates object by invoking its rotate method\n     * @private\n     * @param {Number} x pointer's x coordinate\n     * @param {Number} y pointer's y coordinate\n     * @return {Boolean} true if the rotation occurred\n     */\n    _rotateObject: function (x, y) {\n\n      var t = this._currentTransform;\n\n      if (t.target.get('lockRotation')) {\n        return false;\n      }\n\n      var lastAngle = atan2(t.ey - t.top, t.ex - t.left),\n          curAngle = atan2(y - t.top, x - t.left),\n          angle = radiansToDegrees(curAngle - lastAngle + t.theta),\n          hasRoated = true;\n\n      // normalize angle to positive value\n      if (angle < 0) {\n        angle = 360 + angle;\n      }\n\n      angle %= 360;\n\n      if (t.target.snapAngle > 0) {\n        var snapAngle  = t.target.snapAngle,\n            snapThreshold  = t.target.snapThreshold || snapAngle,\n            rightAngleLocked = Math.ceil(angle / snapAngle) * snapAngle,\n            leftAngleLocked = Math.floor(angle / snapAngle) * snapAngle;\n\n        if (Math.abs(angle - leftAngleLocked) < snapThreshold) {\n          angle = leftAngleLocked;\n        }\n        else if (Math.abs(angle - rightAngleLocked) < snapThreshold) {\n          angle = rightAngleLocked;\n        }\n\n        if (t.target.angle === angle) {\n          hasRoated = false;\n        }\n      }\n\n      t.target.angle = angle;\n      return hasRoated;\n    },\n\n    /**\n     * Set the cursor type of the canvas element\n     * @param {String} value Cursor type of the canvas element.\n     * @see http://www.w3.org/TR/css3-ui/#cursor\n     */\n    setCursor: function (value) {\n      this.upperCanvasEl.style.cursor = value;\n    },\n\n    /**\n     * @param {fabric.Object} target to reset transform\n     * @private\n     */\n    _resetObjectTransform: function (target) {\n      target.scaleX = 1;\n      target.scaleY = 1;\n      target.skewX = 0;\n      target.skewY = 0;\n      target.setAngle(0);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx to draw the selection on\n     */\n    _drawSelection: function (ctx) {\n      var groupSelector = this._groupSelector,\n          left = groupSelector.left,\n          top = groupSelector.top,\n          aleft = abs(left),\n          atop = abs(top);\n\n      if (this.selectionColor) {\n        ctx.fillStyle = this.selectionColor;\n\n        ctx.fillRect(\n          groupSelector.ex - ((left > 0) ? 0 : -left),\n          groupSelector.ey - ((top > 0) ? 0 : -top),\n          aleft,\n          atop\n        );\n      }\n\n      if (!this.selectionLineWidth || !this.selectionBorderColor) {\n        return;\n      }\n      ctx.lineWidth = this.selectionLineWidth;\n      ctx.strokeStyle = this.selectionBorderColor;\n\n      // selection border\n      if (this.selectionDashArray.length > 1 && !supportLineDash) {\n\n        var px = groupSelector.ex + STROKE_OFFSET - ((left > 0) ? 0 : aleft),\n            py = groupSelector.ey + STROKE_OFFSET - ((top > 0) ? 0 : atop);\n\n        ctx.beginPath();\n\n        fabric.util.drawDashedLine(ctx, px, py, px + aleft, py, this.selectionDashArray);\n        fabric.util.drawDashedLine(ctx, px, py + atop - 1, px + aleft, py + atop - 1, this.selectionDashArray);\n        fabric.util.drawDashedLine(ctx, px, py, px, py + atop, this.selectionDashArray);\n        fabric.util.drawDashedLine(ctx, px + aleft - 1, py, px + aleft - 1, py + atop, this.selectionDashArray);\n\n        ctx.closePath();\n        ctx.stroke();\n      }\n      else {\n        fabric.Object.prototype._setLineDash.call(this, ctx, this.selectionDashArray);\n        ctx.strokeRect(\n          groupSelector.ex + STROKE_OFFSET - ((left > 0) ? 0 : aleft),\n          groupSelector.ey + STROKE_OFFSET - ((top > 0) ? 0 : atop),\n          aleft,\n          atop\n        );\n      }\n    },\n\n    /**\n     * Method that determines what object we are clicking on\n     * @param {Event} e mouse event\n     * @param {Boolean} skipGroup when true, activeGroup is skipped and only objects are traversed through\n     */\n    findTarget: function (e, skipGroup) {\n      if (this.skipTargetFind) {\n        return;\n      }\n\n      var ignoreZoom = true,\n          pointer = this.getPointer(e, ignoreZoom),\n          activeGroup = this.getActiveGroup(),\n          activeObject = this.getActiveObject(),\n          activeTarget;\n\n      // first check current group (if one exists)\n      // active group does not check sub targets like normal groups.\n      // if active group just exits.\n      if (activeGroup && !skipGroup && this._checkTarget(pointer, activeGroup)) {\n        this._fireOverOutEvents(activeGroup, e);\n        return activeGroup;\n      }\n      // if we hit the corner of an activeObject, let's return that.\n      if (activeObject && activeObject._findTargetCorner(pointer)) {\n        this._fireOverOutEvents(activeObject, e);\n        return activeObject;\n      }\n      if (activeObject && this._checkTarget(pointer, activeObject)) {\n        if (!this.preserveObjectStacking) {\n          this._fireOverOutEvents(activeObject, e);\n          return activeObject;\n        }\n        else {\n          activeTarget = activeObject;\n        }\n      }\n\n      this.targets = [];\n\n      var target = this._searchPossibleTargets(this._objects, pointer);\n      if (e[this.altSelectionKey] && target && activeTarget && target !== activeTarget) {\n        target = activeTarget;\n      }\n      this._fireOverOutEvents(target, e);\n      return target;\n    },\n\n    /**\n     * @private\n     */\n    _fireOverOutEvents: function(target, e) {\n      if (target) {\n        if (this._hoveredTarget !== target) {\n          if (this._hoveredTarget) {\n            this.fire('mouse:out', { target: this._hoveredTarget, e: e });\n            this._hoveredTarget.fire('mouseout');\n          }\n          this.fire('mouse:over', { target: target, e: e });\n          target.fire('mouseover');\n          this._hoveredTarget = target;\n        }\n      }\n      else if (this._hoveredTarget) {\n        this.fire('mouse:out', { target: this._hoveredTarget, e: e });\n        this._hoveredTarget.fire('mouseout');\n        this._hoveredTarget = null;\n      }\n    },\n\n    /**\n     * @private\n     */\n    _checkTarget: function(pointer, obj) {\n      if (obj &&\n          obj.visible &&\n          obj.evented &&\n          this.containsPoint(null, obj, pointer)){\n        if ((this.perPixelTargetFind || obj.perPixelTargetFind) && !obj.isEditing) {\n          var isTransparent = this.isTargetTransparent(obj, pointer.x, pointer.y);\n          if (!isTransparent) {\n            return true;\n          }\n        }\n        else {\n          return true;\n        }\n      }\n    },\n\n    /**\n     * @private\n     */\n    _searchPossibleTargets: function(objects, pointer) {\n\n      // Cache all targets where their bounding box contains point.\n      var target, i = objects.length, normalizedPointer, subTarget;\n      // Do not check for currently grouped objects, since we check the parent group itself.\n      // untill we call this function specifically to search inside the activeGroup\n      while (i--) {\n        if (this._checkTarget(pointer, objects[i])) {\n          target = objects[i];\n          if (target.type === 'group' && target.subTargetCheck) {\n            normalizedPointer = this._normalizePointer(target, pointer);\n            subTarget = this._searchPossibleTargets(target._objects, normalizedPointer);\n            subTarget && this.targets.push(subTarget);\n          }\n          break;\n        }\n      }\n      return target;\n    },\n\n    /**\n     * Returns pointer coordinates without the effect of the viewport\n     * @param {Object} pointer with \"x\" and \"y\" number values\n     * @return {Object} object with \"x\" and \"y\" number values\n     */\n    restorePointerVpt: function(pointer) {\n      return fabric.util.transformPoint(\n        pointer,\n        fabric.util.invertTransform(this.viewportTransform)\n      );\n    },\n\n    /**\n     * Returns pointer coordinates relative to canvas.\n     * @param {Event} e\n     * @param {Boolean} ignoreZoom\n     * @return {Object} object with \"x\" and \"y\" number values\n     */\n    getPointer: function (e, ignoreZoom, upperCanvasEl) {\n      if (!upperCanvasEl) {\n        upperCanvasEl = this.upperCanvasEl;\n      }\n      var pointer = getPointer(e),\n          bounds = upperCanvasEl.getBoundingClientRect(),\n          boundsWidth = bounds.width || 0,\n          boundsHeight = bounds.height || 0,\n          cssScale;\n\n      if (!boundsWidth || !boundsHeight ) {\n        if ('top' in bounds && 'bottom' in bounds) {\n          boundsHeight = Math.abs( bounds.top - bounds.bottom );\n        }\n        if ('right' in bounds && 'left' in bounds) {\n          boundsWidth = Math.abs( bounds.right - bounds.left );\n        }\n      }\n\n      this.calcOffset();\n\n      pointer.x = pointer.x - this._offset.left;\n      pointer.y = pointer.y - this._offset.top;\n      if (!ignoreZoom) {\n        pointer = this.restorePointerVpt(pointer);\n      }\n\n      if (boundsWidth === 0 || boundsHeight === 0) {\n        // If bounds are not available (i.e. not visible), do not apply scale.\n        cssScale = { width: 1, height: 1 };\n      }\n      else {\n        cssScale = {\n          width: upperCanvasEl.width / boundsWidth,\n          height: upperCanvasEl.height / boundsHeight\n        };\n      }\n\n      return {\n        x: pointer.x * cssScale.width,\n        y: pointer.y * cssScale.height\n      };\n    },\n\n    /**\n     * @private\n     * @throws {CANVAS_INIT_ERROR} If canvas can not be initialized\n     */\n    _createUpperCanvas: function () {\n      var lowerCanvasClass = this.lowerCanvasEl.className.replace(/\\s*lower-canvas\\s*/, '');\n\n      this.upperCanvasEl = this._createCanvasElement();\n      fabric.util.addClass(this.upperCanvasEl, 'upper-canvas ' + lowerCanvasClass);\n\n      this.wrapperEl.appendChild(this.upperCanvasEl);\n\n      this._copyCanvasStyle(this.lowerCanvasEl, this.upperCanvasEl);\n      this._applyCanvasStyle(this.upperCanvasEl);\n      this.contextTop = this.upperCanvasEl.getContext('2d');\n    },\n\n    /**\n     * @private\n     */\n    _createCacheCanvas: function () {\n      this.cacheCanvasEl = this._createCanvasElement();\n      this.cacheCanvasEl.setAttribute('width', this.width);\n      this.cacheCanvasEl.setAttribute('height', this.height);\n      this.contextCache = this.cacheCanvasEl.getContext('2d');\n    },\n\n    /**\n     * @private\n     */\n    _initWrapperElement: function () {\n      this.wrapperEl = fabric.util.wrapElement(this.lowerCanvasEl, 'div', {\n        'class': this.containerClass\n      });\n      fabric.util.setStyle(this.wrapperEl, {\n        width: this.getWidth() + 'px',\n        height: this.getHeight() + 'px',\n        position: 'relative'\n      });\n      fabric.util.makeElementUnselectable(this.wrapperEl);\n    },\n\n    /**\n     * @private\n     * @param {HTMLElement} element canvas element to apply styles on\n     */\n    _applyCanvasStyle: function (element) {\n      var width = this.getWidth() || element.width,\n          height = this.getHeight() || element.height;\n\n      fabric.util.setStyle(element, {\n        position: 'absolute',\n        width: width + 'px',\n        height: height + 'px',\n        left: 0,\n        top: 0\n      });\n      element.width = width;\n      element.height = height;\n      fabric.util.makeElementUnselectable(element);\n    },\n\n    /**\n     * Copys the the entire inline style from one element (fromEl) to another (toEl)\n     * @private\n     * @param {Element} fromEl Element style is copied from\n     * @param {Element} toEl Element copied style is applied to\n     */\n    _copyCanvasStyle: function (fromEl, toEl) {\n      toEl.style.cssText = fromEl.style.cssText;\n    },\n\n    /**\n     * Returns context of canvas where object selection is drawn\n     * @return {CanvasRenderingContext2D}\n     */\n    getSelectionContext: function() {\n      return this.contextTop;\n    },\n\n    /**\n     * Returns &lt;canvas> element on which object selection is drawn\n     * @return {HTMLCanvasElement}\n     */\n    getSelectionElement: function () {\n      return this.upperCanvasEl;\n    },\n\n    /**\n     * @private\n     * @param {Object} object\n     */\n    _setActiveObject: function(object) {\n      if (this._activeObject) {\n        this._activeObject.set('active', false);\n      }\n      this._activeObject = object;\n      object.set('active', true);\n    },\n\n    /**\n     * Sets given object as the only active object on canvas\n     * @param {fabric.Object} object Object to set as an active one\n     * @param {Event} [e] Event (passed along when firing \"object:selected\")\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    setActiveObject: function (object, e) {\n      this._setActiveObject(object);\n      this.renderAll();\n      this.fire('object:selected', { target: object, e: e });\n      object.fire('selected', { e: e });\n      return this;\n    },\n\n    /**\n     * Returns currently active object\n     * @return {fabric.Object} active object\n     */\n    getActiveObject: function () {\n      return this._activeObject;\n    },\n\n    /**\n     * @private\n     * @param {fabric.Object} obj Object that was removed\n     */\n    _onObjectRemoved: function(obj) {\n      // removing active object should fire \"selection:cleared\" events\n      if (this.getActiveObject() === obj) {\n        this.fire('before:selection:cleared', { target: obj });\n        this._discardActiveObject();\n        this.fire('selection:cleared', { target: obj });\n        obj.fire('deselected');\n      }\n      this.callSuper('_onObjectRemoved', obj);\n    },\n\n    /**\n     * @private\n     */\n    _discardActiveObject: function() {\n      if (this._activeObject) {\n        this._activeObject.set('active', false);\n      }\n      this._activeObject = null;\n    },\n\n    /**\n     * Discards currently active object and fire events\n     * @param {event} e\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    discardActiveObject: function (e) {\n      var activeObject = this._activeObject;\n      this.fire('before:selection:cleared', { target: activeObject, e: e });\n      this._discardActiveObject();\n      this.fire('selection:cleared', { e: e });\n      activeObject && activeObject.fire('deselected', { e: e });\n      return this;\n    },\n\n    /**\n     * @private\n     * @param {fabric.Group} group\n     */\n    _setActiveGroup: function(group) {\n      this._activeGroup = group;\n      if (group) {\n        group.set('active', true);\n      }\n    },\n\n    /**\n     * Sets active group to a specified one\n     * @param {fabric.Group} group Group to set as a current one\n     * @param {Event} e Event object\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    setActiveGroup: function (group, e) {\n      this._setActiveGroup(group);\n      if (group) {\n        this.fire('object:selected', { target: group, e: e });\n        group.fire('selected', { e: e });\n      }\n      return this;\n    },\n\n    /**\n     * Returns currently active group\n     * @return {fabric.Group} Current group\n     */\n    getActiveGroup: function () {\n      return this._activeGroup;\n    },\n\n    /**\n     * @private\n     */\n    _discardActiveGroup: function() {\n      var g = this.getActiveGroup();\n      if (g) {\n        g.destroy();\n      }\n      this.setActiveGroup(null);\n    },\n\n    /**\n     * Discards currently active group and fire events\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    discardActiveGroup: function (e) {\n      var g = this.getActiveGroup();\n      this.fire('before:selection:cleared', { e: e, target: g });\n      this._discardActiveGroup();\n      this.fire('selection:cleared', { e: e });\n      return this;\n    },\n\n    /**\n     * Deactivates all objects on canvas, removing any active group or object\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    deactivateAll: function () {\n      var allObjects = this.getObjects(),\n          i = 0,\n          len = allObjects.length,\n          obj;\n      for ( ; i < len; i++) {\n        obj = allObjects[i];\n        obj && obj.set('active', false);\n      }\n      this._discardActiveGroup();\n      this._discardActiveObject();\n      return this;\n    },\n\n    /**\n     * Deactivates all objects and dispatches appropriate events\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    deactivateAllWithDispatch: function (e) {\n      var activeGroup = this.getActiveGroup(),\n          activeObject = this.getActiveObject();\n      if (activeObject || activeGroup) {\n        this.fire('before:selection:cleared', { target: activeObject || activeGroup, e: e });\n      }\n      this.deactivateAll();\n      if (activeObject || activeGroup) {\n        this.fire('selection:cleared', { e: e, target: activeObject });\n        activeObject && activeObject.fire('deselected');\n      }\n      return this;\n    },\n\n    /**\n     * Clears a canvas element and removes all event listeners\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    dispose: function () {\n      this.callSuper('dispose');\n      var wrapper = this.wrapperEl;\n      this.removeListeners();\n      wrapper.removeChild(this.upperCanvasEl);\n      wrapper.removeChild(this.lowerCanvasEl);\n      delete this.upperCanvasEl;\n      if (wrapper.parentNode) {\n        wrapper.parentNode.replaceChild(this.lowerCanvasEl, this.wrapperEl);\n      }\n      delete this.wrapperEl;\n      return this;\n    },\n\n    /**\n     * Clears all contexts (background, main, top) of an instance\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    clear: function () {\n      this.discardActiveGroup();\n      this.discardActiveObject();\n      this.clearContext(this.contextTop);\n      return this.callSuper('clear');\n    },\n\n    /**\n     * Draws objects' controls (borders/controls)\n     * @param {CanvasRenderingContext2D} ctx Context to render controls on\n     */\n    drawControls: function(ctx) {\n      var activeGroup = this.getActiveGroup();\n\n      if (activeGroup) {\n        activeGroup._renderControls(ctx);\n      }\n      else {\n        this._drawObjectsControls(ctx);\n      }\n    },\n\n    /**\n     * @private\n     */\n    _drawObjectsControls: function(ctx) {\n      for (var i = 0, len = this._objects.length; i < len; ++i) {\n        if (!this._objects[i] || !this._objects[i].active) {\n          continue;\n        }\n        this._objects[i]._renderControls(ctx);\n      }\n    },\n\n    /**\n     * @private\n     */\n    _toObject: function(instance, methodName, propertiesToInclude) {\n      //If the object is part of the current selection group, it should\n      //be transformed appropriately\n      //i.e. it should be serialised as it would appear if the selection group\n      //were to be destroyed.\n      var originalProperties = this._realizeGroupTransformOnObject(instance),\n          object = this.callSuper('_toObject', instance, methodName, propertiesToInclude);\n      //Undo the damage we did by changing all of its properties\n      this._unwindGroupTransformOnObject(instance, originalProperties);\n      return object;\n    },\n\n    /**\n     * Realises an object's group transformation on it\n     * @private\n     * @param {fabric.Object} [instance] the object to transform (gets mutated)\n     * @returns the original values of instance which were changed\n     */\n    _realizeGroupTransformOnObject: function(instance) {\n      var layoutProps = ['angle', 'flipX', 'flipY', 'height', 'left', 'scaleX', 'scaleY', 'top', 'width'];\n      if (instance.group && instance.group === this.getActiveGroup()) {\n        //Copy all the positionally relevant properties across now\n        var originalValues = {};\n        layoutProps.forEach(function(prop) {\n          originalValues[prop] = instance[prop];\n        });\n        this.getActiveGroup().realizeTransform(instance);\n        return originalValues;\n      }\n      else {\n        return null;\n      }\n    },\n\n    /**\n     * Restores the changed properties of instance\n     * @private\n     * @param {fabric.Object} [instance] the object to un-transform (gets mutated)\n     * @param {Object} [originalValues] the original values of instance, as returned by _realizeGroupTransformOnObject\n     */\n    _unwindGroupTransformOnObject: function(instance, originalValues) {\n      if (originalValues) {\n        instance.set(originalValues);\n      }\n    },\n\n    /**\n     * @private\n     */\n    _setSVGObject: function(markup, instance, reviver) {\n      var originalProperties;\n      //If the object is in a selection group, simulate what would happen to that\n      //object when the group is deselected\n      originalProperties = this._realizeGroupTransformOnObject(instance);\n      this.callSuper('_setSVGObject', markup, instance, reviver);\n      this._unwindGroupTransformOnObject(instance, originalProperties);\n    },\n  });\n\n  // copying static properties manually to work around Opera's bug,\n  // where \"prototype\" property is enumerable and overrides existing prototype\n  for (var prop in fabric.StaticCanvas) {\n    if (prop !== 'prototype') {\n      fabric.Canvas[prop] = fabric.StaticCanvas[prop];\n    }\n  }\n\n  if (fabric.isTouchSupported) {\n    /** @ignore */\n    fabric.Canvas.prototype._setCursorFromEvent = function() { };\n  }\n\n  /**\n   * @ignore\n   * @class fabric.Element\n   * @alias fabric.Canvas\n   * @deprecated Use {@link fabric.Canvas} instead.\n   * @constructor\n   */\n  fabric.Element = fabric.Canvas;\n})();\n\n\n(function() {\n\n  var cursorOffset = {\n        mt: 0, // n\n        tr: 1, // ne\n        mr: 2, // e\n        br: 3, // se\n        mb: 4, // s\n        bl: 5, // sw\n        ml: 6, // w\n        tl: 7 // nw\n      },\n      addListener = fabric.util.addListener,\n      removeListener = fabric.util.removeListener;\n\n  fabric.util.object.extend(fabric.Canvas.prototype, /** @lends fabric.Canvas.prototype */ {\n\n    /**\n     * Map of cursor style values for each of the object controls\n     * @private\n     */\n    cursorMap: [\n      'n-resize',\n      'ne-resize',\n      'e-resize',\n      'se-resize',\n      's-resize',\n      'sw-resize',\n      'w-resize',\n      'nw-resize'\n    ],\n\n    /**\n     * Adds mouse listeners to canvas\n     * @private\n     */\n    _initEventListeners: function () {\n\n      this._bindEvents();\n\n      addListener(fabric.window, 'resize', this._onResize);\n\n      // mouse events\n      addListener(this.upperCanvasEl, 'mousedown', this._onMouseDown);\n      addListener(this.upperCanvasEl, 'mousemove', this._onMouseMove);\n      addListener(this.upperCanvasEl, 'mouseout', this._onMouseOut);\n      addListener(this.upperCanvasEl, 'mouseenter', this._onMouseEnter);\n      addListener(this.upperCanvasEl, 'wheel', this._onMouseWheel);\n      addListener(this.upperCanvasEl, 'contextmenu', this._onContextMenu);\n\n      // touch events\n      addListener(this.upperCanvasEl, 'touchstart', this._onMouseDown);\n      addListener(this.upperCanvasEl, 'touchmove', this._onMouseMove);\n\n      if (typeof eventjs !== 'undefined' && 'add' in eventjs) {\n        eventjs.add(this.upperCanvasEl, 'gesture', this._onGesture);\n        eventjs.add(this.upperCanvasEl, 'drag', this._onDrag);\n        eventjs.add(this.upperCanvasEl, 'orientation', this._onOrientationChange);\n        eventjs.add(this.upperCanvasEl, 'shake', this._onShake);\n        eventjs.add(this.upperCanvasEl, 'longpress', this._onLongPress);\n      }\n    },\n\n    /**\n     * @private\n     */\n    _bindEvents: function() {\n      this._onMouseDown = this._onMouseDown.bind(this);\n      this._onMouseMove = this._onMouseMove.bind(this);\n      this._onMouseUp = this._onMouseUp.bind(this);\n      this._onResize = this._onResize.bind(this);\n      this._onGesture = this._onGesture.bind(this);\n      this._onDrag = this._onDrag.bind(this);\n      this._onShake = this._onShake.bind(this);\n      this._onLongPress = this._onLongPress.bind(this);\n      this._onOrientationChange = this._onOrientationChange.bind(this);\n      this._onMouseWheel = this._onMouseWheel.bind(this);\n      this._onMouseOut = this._onMouseOut.bind(this);\n      this._onMouseEnter = this._onMouseEnter.bind(this);\n      this._onContextMenu = this._onContextMenu.bind(this);\n    },\n\n    /**\n     * Removes all event listeners\n     */\n    removeListeners: function() {\n      removeListener(fabric.window, 'resize', this._onResize);\n\n      removeListener(this.upperCanvasEl, 'mousedown', this._onMouseDown);\n      removeListener(this.upperCanvasEl, 'mousemove', this._onMouseMove);\n      removeListener(this.upperCanvasEl, 'mouseout', this._onMouseOut);\n      removeListener(this.upperCanvasEl, 'mouseenter', this._onMouseEnter);\n      removeListener(this.upperCanvasEl, 'wheel', this._onMouseWheel);\n      removeListener(this.upperCanvasEl, 'contextmenu', this._onContextMenu);\n\n      removeListener(this.upperCanvasEl, 'touchstart', this._onMouseDown);\n      removeListener(this.upperCanvasEl, 'touchmove', this._onMouseMove);\n\n      if (typeof eventjs !== 'undefined' && 'remove' in eventjs) {\n        eventjs.remove(this.upperCanvasEl, 'gesture', this._onGesture);\n        eventjs.remove(this.upperCanvasEl, 'drag', this._onDrag);\n        eventjs.remove(this.upperCanvasEl, 'orientation', this._onOrientationChange);\n        eventjs.remove(this.upperCanvasEl, 'shake', this._onShake);\n        eventjs.remove(this.upperCanvasEl, 'longpress', this._onLongPress);\n      }\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on Event.js gesture\n     * @param {Event} [self] Inner Event object\n     */\n    _onGesture: function(e, self) {\n      this.__onTransformGesture && this.__onTransformGesture(e, self);\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on Event.js drag\n     * @param {Event} [self] Inner Event object\n     */\n    _onDrag: function(e, self) {\n      this.__onDrag && this.__onDrag(e, self);\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on wheel event\n     */\n    _onMouseWheel: function(e) {\n      this.__onMouseWheel(e);\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onMouseOut: function(e) {\n      var target = this._hoveredTarget;\n      this.fire('mouse:out', { target: target, e: e });\n      this._hoveredTarget = null;\n      target && target.fire('mouseout', { e: e });\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mouseenter\n     */\n    _onMouseEnter: function(e) {\n      if (!this.findTarget(e)) {\n        this.fire('mouse:over', { target: null, e: e });\n        this._hoveredTarget = null;\n      }\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on Event.js orientation change\n     * @param {Event} [self] Inner Event object\n     */\n    _onOrientationChange: function(e, self) {\n      this.__onOrientationChange && this.__onOrientationChange(e, self);\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on Event.js shake\n     * @param {Event} [self] Inner Event object\n     */\n    _onShake: function(e, self) {\n      this.__onShake && this.__onShake(e, self);\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on Event.js shake\n     * @param {Event} [self] Inner Event object\n     */\n    _onLongPress: function(e, self) {\n      this.__onLongPress && this.__onLongPress(e, self);\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onContextMenu: function (e) {\n      if (this.stopContextMenu) {\n        e.stopPropagation()\n        e.preventDefault();\n      }\n      return false;\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onMouseDown: function (e) {\n      this.__onMouseDown(e);\n\n      addListener(fabric.document, 'touchend', this._onMouseUp);\n      addListener(fabric.document, 'touchmove', this._onMouseMove);\n\n      removeListener(this.upperCanvasEl, 'mousemove', this._onMouseMove);\n      removeListener(this.upperCanvasEl, 'touchmove', this._onMouseMove);\n\n      if (e.type === 'touchstart') {\n        // Unbind mousedown to prevent double triggers from touch devices\n        removeListener(this.upperCanvasEl, 'mousedown', this._onMouseDown);\n      }\n      else {\n        addListener(fabric.document, 'mouseup', this._onMouseUp);\n        addListener(fabric.document, 'mousemove', this._onMouseMove);\n      }\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mouseup\n     */\n    _onMouseUp: function (e) {\n      this.__onMouseUp(e);\n\n      removeListener(fabric.document, 'mouseup', this._onMouseUp);\n      removeListener(fabric.document, 'touchend', this._onMouseUp);\n\n      removeListener(fabric.document, 'mousemove', this._onMouseMove);\n      removeListener(fabric.document, 'touchmove', this._onMouseMove);\n\n      addListener(this.upperCanvasEl, 'mousemove', this._onMouseMove);\n      addListener(this.upperCanvasEl, 'touchmove', this._onMouseMove);\n\n      if (e.type === 'touchend') {\n        // Wait 400ms before rebinding mousedown to prevent double triggers\n        // from touch devices\n        var _this = this;\n        setTimeout(function() {\n          addListener(_this.upperCanvasEl, 'mousedown', _this._onMouseDown);\n        }, 400);\n      }\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousemove\n     */\n    _onMouseMove: function (e) {\n      !this.allowTouchScrolling && e.preventDefault && e.preventDefault();\n      this.__onMouseMove(e);\n    },\n\n    /**\n     * @private\n     */\n    _onResize: function () {\n      this.calcOffset();\n    },\n\n    /**\n     * Decides whether the canvas should be redrawn in mouseup and mousedown events.\n     * @private\n     * @param {Object} target\n     * @param {Object} pointer\n     */\n    _shouldRender: function(target, pointer) {\n      var activeObject = this.getActiveGroup() || this.getActiveObject();\n\n      if (activeObject && activeObject.isEditing) {\n        // if we mouse up/down over a editing textbox a cursor change,\n        // there is no need to re render\n        return false;\n      }\n      return !!(\n        (target && (\n          target.isMoving ||\n          target !== activeObject))\n        ||\n        (!target && !!activeObject)\n        ||\n        (!target && !activeObject && !this._groupSelector)\n        ||\n        (pointer &&\n          this._previousPointer &&\n          this.selection && (\n          pointer.x !== this._previousPointer.x ||\n          pointer.y !== this._previousPointer.y))\n      );\n    },\n\n    /**\n     * Method that defines the actions when mouse is released on canvas.\n     * The method resets the currentTransform parameters, store the image corner\n     * position in the image object and render the canvas on top.\n     * @private\n     * @param {Event} e Event object fired on mouseup\n     */\n    __onMouseUp: function (e) {\n      var target, searchTarget = true, transform = this._currentTransform,\n          groupSelector = this._groupSelector,\n          isClick = (!groupSelector || (groupSelector.left === 0 && groupSelector.top === 0));\n\n      if (this.isDrawingMode && this._isCurrentlyDrawing) {\n        this._onMouseUpInDrawingMode(e);\n        return;\n      }\n\n      if (transform) {\n        this._finalizeCurrentTransform();\n        searchTarget = !transform.actionPerformed;\n      }\n\n      target = searchTarget ? this.findTarget(e, true) : transform.target;\n\n      var shouldRender = this._shouldRender(target, this.getPointer(e));\n\n      if (target || !isClick) {\n        this._maybeGroupObjects(e);\n      }\n      else {\n        // those are done by default on mouse up\n        // by _maybeGroupObjects, we are skipping it in case of no target find\n        this._groupSelector = null;\n        this._currentTransform = null;\n      }\n\n      if (target) {\n        target.isMoving = false;\n      }\n\n      this._handleCursorAndEvent(e, target, 'up');\n      target && (target.__corner = 0);\n      shouldRender && this.renderAll();\n    },\n\n    /**\n     * set cursor for mouse up and handle mouseUp event\n     * @param {Event} e event from mouse\n     * @param {fabric.Object} target receiving event\n     * @param {String} eventType event to fire (up, down or move)\n     */\n    _handleCursorAndEvent: function(e, target, eventType) {\n      this._setCursorFromEvent(e, target);\n      this._handleEvent(e, eventType, target ? target : null);\n    },\n\n    /**\n     * Handle event firing for target and subtargets\n     * @param {Event} e event from mouse\n     * @param {String} eventType event to fire (up, down or move)\n     * @param {fabric.Object} targetObj receiving event\n     */\n    _handleEvent: function(e, eventType, targetObj) {\n      var target = typeof targetObj === undefined ? this.findTarget(e) : targetObj,\n          targets = this.targets || [],\n          options = { e: e, target: target, subTargets: targets };\n\n      this.fire('mouse:' + eventType, options);\n      target && target.fire('mouse' + eventType, options);\n      for (var i = 0; i < targets.length; i++) {\n        targets[i].fire('mouse' + eventType, options);\n      }\n    },\n\n    /**\n     * @private\n     */\n    _finalizeCurrentTransform: function() {\n\n      var transform = this._currentTransform,\n          target = transform.target;\n\n      if (target._scaling) {\n        target._scaling = false;\n      }\n\n      target.setCoords();\n      this._restoreOriginXY(target);\n\n      if (transform.actionPerformed || (this.stateful && target.hasStateChanged())) {\n        this.fire('object:modified', { target: target });\n        target.fire('modified');\n      }\n    },\n\n    /**\n     * @private\n     * @param {Object} target Object to restore\n     */\n    _restoreOriginXY: function(target) {\n      if (this._previousOriginX && this._previousOriginY) {\n\n        var originPoint = target.translateToOriginPoint(\n          target.getCenterPoint(),\n          this._previousOriginX,\n          this._previousOriginY);\n\n        target.originX = this._previousOriginX;\n        target.originY = this._previousOriginY;\n\n        target.left = originPoint.x;\n        target.top = originPoint.y;\n\n        this._previousOriginX = null;\n        this._previousOriginY = null;\n      }\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onMouseDownInDrawingMode: function(e) {\n      this._isCurrentlyDrawing = true;\n      this.discardActiveObject(e).renderAll();\n      if (this.clipTo) {\n        fabric.util.clipContext(this, this.contextTop);\n      }\n      var pointer = this.getPointer(e);\n      this.freeDrawingBrush.onMouseDown(pointer);\n      this._handleEvent(e, 'down');\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousemove\n     */\n    _onMouseMoveInDrawingMode: function(e) {\n      if (this._isCurrentlyDrawing) {\n        var pointer = this.getPointer(e);\n        this.freeDrawingBrush.onMouseMove(pointer);\n      }\n      this.setCursor(this.freeDrawingCursor);\n      this._handleEvent(e, 'move');\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mouseup\n     */\n    _onMouseUpInDrawingMode: function(e) {\n      this._isCurrentlyDrawing = false;\n      if (this.clipTo) {\n        this.contextTop.restore();\n      }\n      this.freeDrawingBrush.onMouseUp();\n      this._handleEvent(e, 'up');\n    },\n\n    /**\n     * Method that defines the actions when mouse is clic ked on canvas.\n     * The method inits the currentTransform parameters and renders all the\n     * canvas so the current image can be placed on the top canvas and the rest\n     * in on the container one.\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    __onMouseDown: function (e) {\n\n      var target = this.findTarget(e),\n          pointer = this.getPointer(e, true);\n\n      // if right click just fire events\n      var isRightClick  = 'which' in e ? e.which === 3 : e.button === 2;\n      if (isRightClick) {\n        if (this.fireRightClick) {\n          this._handleEvent(e, 'down', target ? target : null);\n        }\n        return;\n      }\n\n      if (this.isDrawingMode) {\n        this._onMouseDownInDrawingMode(e);\n        return;\n      }\n\n      // ignore if some object is being transformed at this moment\n      if (this._currentTransform) {\n        return;\n      }\n\n      // save pointer for check in __onMouseUp event\n      this._previousPointer = pointer;\n\n      var shouldRender = this._shouldRender(target, pointer),\n          shouldGroup = this._shouldGroup(e, target);\n\n      if (this._shouldClearSelection(e, target)) {\n        this._clearSelection(e, target, pointer);\n      }\n      else if (shouldGroup) {\n        this._handleGrouping(e, target);\n        target = this.getActiveGroup();\n      }\n\n      if (target) {\n        if (target.selectable && (target.__corner || !shouldGroup)) {\n          this._beforeTransform(e, target);\n          this._setupCurrentTransform(e, target);\n        }\n\n        if (target !== this.getActiveGroup() && target !== this.getActiveObject()) {\n          this.deactivateAll();\n          target.selectable && this.setActiveObject(target, e);\n        }\n      }\n      this._handleEvent(e, 'down', target ? target : null);\n      // we must renderAll so that we update the visuals\n      shouldRender && this.renderAll();\n    },\n\n    /**\n     * @private\n     */\n    _beforeTransform: function(e, target) {\n      this.stateful && target.saveState();\n\n      // determine if it's a drag or rotate case\n      if (target._findTargetCorner(this.getPointer(e))) {\n        this.onBeforeScaleRotate(target);\n      }\n\n    },\n\n    /**\n     * @private\n     */\n    _clearSelection: function(e, target, pointer) {\n      this.deactivateAllWithDispatch(e);\n\n      if (target && target.selectable) {\n        this.setActiveObject(target, e);\n      }\n      else if (this.selection) {\n        this._groupSelector = {\n          ex: pointer.x,\n          ey: pointer.y,\n          top: 0,\n          left: 0\n        };\n      }\n    },\n\n    /**\n     * @private\n     * @param {Object} target Object for that origin is set to center\n     */\n    _setOriginToCenter: function(target) {\n      this._previousOriginX = this._currentTransform.target.originX;\n      this._previousOriginY = this._currentTransform.target.originY;\n\n      var center = target.getCenterPoint();\n\n      target.originX = 'center';\n      target.originY = 'center';\n\n      target.left = center.x;\n      target.top = center.y;\n\n      this._currentTransform.left = target.left;\n      this._currentTransform.top = target.top;\n    },\n\n    /**\n     * @private\n     * @param {Object} target Object for that center is set to origin\n     */\n    _setCenterToOrigin: function(target) {\n      var originPoint = target.translateToOriginPoint(\n        target.getCenterPoint(),\n        this._previousOriginX,\n        this._previousOriginY);\n\n      target.originX = this._previousOriginX;\n      target.originY = this._previousOriginY;\n\n      target.left = originPoint.x;\n      target.top = originPoint.y;\n\n      this._previousOriginX = null;\n      this._previousOriginY = null;\n    },\n\n    /**\n     * Method that defines the actions when mouse is hovering the canvas.\n     * The currentTransform parameter will definde whether the user is rotating/scaling/translating\n     * an image or neither of them (only hovering). A group selection is also possible and would cancel\n     * all any other type of action.\n     * In case of an image transformation only the top canvas will be rendered.\n     * @private\n     * @param {Event} e Event object fired on mousemove\n     */\n    __onMouseMove: function (e) {\n\n      var target, pointer;\n\n      if (this.isDrawingMode) {\n        this._onMouseMoveInDrawingMode(e);\n        return;\n      }\n      if (typeof e.touches !== 'undefined' && e.touches.length > 1) {\n        return;\n      }\n\n      var groupSelector = this._groupSelector;\n\n      // We initially clicked in an empty area, so we draw a box for multiple selection\n      if (groupSelector) {\n        pointer = this.getPointer(e, true);\n\n        groupSelector.left = pointer.x - groupSelector.ex;\n        groupSelector.top = pointer.y - groupSelector.ey;\n\n        this.renderTop();\n      }\n      else if (!this._currentTransform) {\n        target = this.findTarget(e);\n        this._setCursorFromEvent(e, target);\n      }\n      else {\n        this._transformObject(e);\n      }\n      this._handleEvent(e, 'move', target ? target : null);\n    },\n\n    /**\n     * Method that defines actions when an Event Mouse Wheel\n     * @param {Event} e Event object fired on mouseup\n     */\n    __onMouseWheel: function(e) {\n      this.fire('mouse:wheel', {\n        e: e\n      });\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event fired on mousemove\n     */\n    _transformObject: function(e) {\n      var pointer = this.getPointer(e),\n          transform = this._currentTransform;\n\n      transform.reset = false;\n      transform.target.isMoving = true;\n      transform.shiftKey = e.shiftKey;\n      transform.altKey = e[this.centeredKey];\n\n      this._beforeScaleTransform(e, transform);\n      this._performTransformAction(e, transform, pointer);\n\n      transform.actionPerformed && this.renderAll();\n    },\n\n    /**\n     * @private\n     */\n    _performTransformAction: function(e, transform, pointer) {\n      var x = pointer.x,\n          y = pointer.y,\n          target = transform.target,\n          action = transform.action,\n          actionPerformed = false;\n\n      if (action === 'rotate') {\n        (actionPerformed = this._rotateObject(x, y)) && this._fire('rotating', target, e);\n      }\n      else if (action === 'scale') {\n        (actionPerformed = this._onScale(e, transform, x, y)) && this._fire('scaling', target, e);\n      }\n      else if (action === 'scaleX') {\n        (actionPerformed = this._scaleObject(x, y, 'x')) && this._fire('scaling', target, e);\n      }\n      else if (action === 'scaleY') {\n        (actionPerformed = this._scaleObject(x, y, 'y')) && this._fire('scaling', target, e);\n      }\n      else if (action === 'skewX') {\n        (actionPerformed = this._skewObject(x, y, 'x')) && this._fire('skewing', target, e);\n      }\n      else if (action === 'skewY') {\n        (actionPerformed = this._skewObject(x, y, 'y')) && this._fire('skewing', target, e);\n      }\n      else {\n        actionPerformed = this._translateObject(x, y);\n        if (actionPerformed) {\n          this._fire('moving', target, e);\n          this.setCursor(target.moveCursor || this.moveCursor);\n        }\n      }\n      transform.actionPerformed = transform.actionPerformed || actionPerformed;\n    },\n\n    /**\n     * @private\n     */\n    _fire: function(eventName, target, e) {\n      this.fire('object:' + eventName, { target: target, e: e });\n      target.fire(eventName, { e: e });\n    },\n\n    /**\n     * @private\n     */\n    _beforeScaleTransform: function(e, transform) {\n      if (transform.action === 'scale' || transform.action === 'scaleX' || transform.action === 'scaleY') {\n        var centerTransform = this._shouldCenterTransform(transform.target);\n\n        // Switch from a normal resize to center-based\n        if ((centerTransform && (transform.originX !== 'center' || transform.originY !== 'center')) ||\n           // Switch from center-based resize to normal one\n           (!centerTransform && transform.originX === 'center' && transform.originY === 'center')\n        ) {\n          this._resetCurrentTransform();\n          transform.reset = true;\n        }\n      }\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object\n     * @param {Object} transform current tranform\n     * @param {Number} x mouse position x from origin\n     * @param {Number} y mouse poistion y from origin\n     * @return {Boolean} true if the scaling occurred\n     */\n    _onScale: function(e, transform, x, y) {\n      if ((e[this.uniScaleKey] || this.uniScaleTransform) && !transform.target.get('lockUniScaling')) {\n        transform.currentAction = 'scale';\n        return this._scaleObject(x, y);\n      }\n      else {\n        // Switch from a normal resize to proportional\n        if (!transform.reset && transform.currentAction === 'scale') {\n          this._resetCurrentTransform();\n        }\n\n        transform.currentAction = 'scaleEqually';\n        return this._scaleObject(x, y, 'equally');\n      }\n    },\n\n    /**\n     * Sets the cursor depending on where the canvas is being hovered.\n     * Note: very buggy in Opera\n     * @param {Event} e Event object\n     * @param {Object} target Object that the mouse is hovering, if so.\n     */\n    _setCursorFromEvent: function (e, target) {\n      if (!target) {\n        this.setCursor(this.defaultCursor);\n        return false;\n      }\n\n      var hoverCursor = target.hoverCursor || this.hoverCursor;\n      if (!target.selectable) {\n        //let's skip _findTargetCorner if object is not selectable\n        this.setCursor(hoverCursor);\n      }\n      else {\n        var activeGroup = this.getActiveGroup(),\n            // only show proper corner when group selection is not active\n            corner = target._findTargetCorner\n                      && (!activeGroup || !activeGroup.contains(target))\n                      && target._findTargetCorner(this.getPointer(e, true));\n\n        if (!corner) {\n          this.setCursor(hoverCursor);\n        }\n        else {\n          this._setCornerCursor(corner, target, e);\n        }\n      }\n      //actually unclear why it should return something\n      //is never evaluated\n      return true;\n    },\n\n    /**\n     * @private\n     */\n    _setCornerCursor: function(corner, target, e) {\n      if (corner in cursorOffset) {\n        this.setCursor(this._getRotatedCornerCursor(corner, target, e));\n      }\n      else if (corner === 'mtr' && target.hasRotatingPoint) {\n        this.setCursor(this.rotationCursor);\n      }\n      else {\n        this.setCursor(this.defaultCursor);\n        return false;\n      }\n    },\n\n    /**\n     * @private\n     */\n    _getRotatedCornerCursor: function(corner, target, e) {\n      var n = Math.round((target.getAngle() % 360) / 45);\n\n      if (n < 0) {\n        n += 8; // full circle ahead\n      }\n      n += cursorOffset[corner];\n      if (e[this.altActionKey] && cursorOffset[corner] % 2 === 0) {\n        //if we are holding shift and we are on a mx corner...\n        n += 2;\n      }\n      // normalize n to be from 0 to 7\n      n %= 8;\n\n      return this.cursorMap[n];\n    }\n  });\n})();\n\n\n(function() {\n\n  var min = Math.min,\n      max = Math.max;\n\n  fabric.util.object.extend(fabric.Canvas.prototype, /** @lends fabric.Canvas.prototype */ {\n\n    /**\n     * @private\n     * @param {Event} e Event object\n     * @param {fabric.Object} target\n     * @return {Boolean}\n     */\n    _shouldGroup: function(e, target) {\n      var activeObject = this.getActiveObject();\n      return e[this.selectionKey] && target && target.selectable &&\n            (this.getActiveGroup() || (activeObject && activeObject !== target))\n            && this.selection;\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object\n     * @param {fabric.Object} target\n     */\n    _handleGrouping: function (e, target) {\n      var activeGroup = this.getActiveGroup();\n\n      if (target === activeGroup) {\n        // if it's a group, find target again, using activeGroup objects\n        target = this.findTarget(e, true);\n        // if even object is not found, bail out\n        if (!target) {\n          return;\n        }\n      }\n      if (activeGroup) {\n        this._updateActiveGroup(target, e);\n      }\n      else {\n        this._createActiveGroup(target, e);\n      }\n\n      if (this._activeGroup) {\n        this._activeGroup.saveCoords();\n      }\n    },\n\n    /**\n     * @private\n     */\n    _updateActiveGroup: function(target, e) {\n      var activeGroup = this.getActiveGroup();\n\n      if (activeGroup.contains(target)) {\n\n        activeGroup.removeWithUpdate(target);\n        target.set('active', false);\n\n        if (activeGroup.size() === 1) {\n          // remove group alltogether if after removal it only contains 1 object\n          this.discardActiveGroup(e);\n          // activate last remaining object\n          this.setActiveObject(activeGroup.item(0));\n          return;\n        }\n      }\n      else {\n        activeGroup.addWithUpdate(target);\n      }\n      this.fire('selection:created', { target: activeGroup, e: e });\n      activeGroup.set('active', true);\n    },\n\n    /**\n     * @private\n     */\n    _createActiveGroup: function(target, e) {\n\n      if (this._activeObject && target !== this._activeObject) {\n\n        var group = this._createGroup(target);\n        group.addWithUpdate();\n\n        this.setActiveGroup(group);\n        this._activeObject = null;\n\n        this.fire('selection:created', { target: group, e: e });\n      }\n\n      target.set('active', true);\n    },\n\n    /**\n     * @private\n     * @param {Object} target\n     */\n    _createGroup: function(target) {\n\n      var objects = this.getObjects(),\n          isActiveLower = objects.indexOf(this._activeObject) < objects.indexOf(target),\n          groupObjects = isActiveLower\n            ? [this._activeObject, target]\n            : [target, this._activeObject];\n      this._activeObject.isEditing && this._activeObject.exitEditing();\n      return new fabric.Group(groupObjects, {\n        canvas: this\n      });\n    },\n\n    /**\n     * @private\n     * @param {Event} e mouse event\n     */\n    _groupSelectedObjects: function (e) {\n\n      var group = this._collectObjects();\n\n      // do not create group for 1 element only\n      if (group.length === 1) {\n        this.setActiveObject(group[0], e);\n      }\n      else if (group.length > 1) {\n        group = new fabric.Group(group.reverse(), {\n          canvas: this\n        });\n        group.addWithUpdate();\n        this.setActiveGroup(group, e);\n        group.saveCoords();\n        this.fire('selection:created', { target: group });\n        this.renderAll();\n      }\n    },\n\n    /**\n     * @private\n     */\n    _collectObjects: function() {\n      var group = [],\n          currentObject,\n          x1 = this._groupSelector.ex,\n          y1 = this._groupSelector.ey,\n          x2 = x1 + this._groupSelector.left,\n          y2 = y1 + this._groupSelector.top,\n          selectionX1Y1 = new fabric.Point(min(x1, x2), min(y1, y2)),\n          selectionX2Y2 = new fabric.Point(max(x1, x2), max(y1, y2)),\n          isClick = x1 === x2 && y1 === y2;\n\n      for (var i = this._objects.length; i--; ) {\n        currentObject = this._objects[i];\n\n        if (!currentObject || !currentObject.selectable || !currentObject.visible) {\n          continue;\n        }\n\n        if (currentObject.intersectsWithRect(selectionX1Y1, selectionX2Y2) ||\n            currentObject.isContainedWithinRect(selectionX1Y1, selectionX2Y2) ||\n            currentObject.containsPoint(selectionX1Y1) ||\n            currentObject.containsPoint(selectionX2Y2)\n        ) {\n          currentObject.set('active', true);\n          group.push(currentObject);\n\n          // only add one object if it's a click\n          if (isClick) {\n            break;\n          }\n        }\n      }\n\n      return group;\n    },\n\n    /**\n     * @private\n     */\n    _maybeGroupObjects: function(e) {\n      if (this.selection && this._groupSelector) {\n        this._groupSelectedObjects(e);\n      }\n\n      var activeGroup = this.getActiveGroup();\n      if (activeGroup) {\n        activeGroup.setObjectsCoords().setCoords();\n        activeGroup.isMoving = false;\n        this.setCursor(this.defaultCursor);\n      }\n\n      // clear selection and current transformation\n      this._groupSelector = null;\n      this._currentTransform = null;\n    }\n  });\n\n})();\n\n\n(function () {\n\n  var supportQuality = fabric.StaticCanvas.supports('toDataURLWithQuality');\n\n  fabric.util.object.extend(fabric.StaticCanvas.prototype, /** @lends fabric.StaticCanvas.prototype */ {\n\n    /**\n     * Exports canvas element to a dataurl image. Note that when multiplier is used, cropping is scaled appropriately\n     * @param {Object} [options] Options object\n     * @param {String} [options.format=png] The format of the output image. Either \"jpeg\" or \"png\"\n     * @param {Number} [options.quality=1] Quality level (0..1). Only used for jpeg.\n     * @param {Number} [options.multiplier=1] Multiplier to scale by\n     * @param {Number} [options.left] Cropping left offset. Introduced in v1.2.14\n     * @param {Number} [options.top] Cropping top offset. Introduced in v1.2.14\n     * @param {Number} [options.width] Cropping width. Introduced in v1.2.14\n     * @param {Number} [options.height] Cropping height. Introduced in v1.2.14\n     * @return {String} Returns a data: URL containing a representation of the object in the format specified by options.format\n     * @see {@link http://jsfiddle.net/fabricjs/NfZVb/|jsFiddle demo}\n     * @example <caption>Generate jpeg dataURL with lower quality</caption>\n     * var dataURL = canvas.toDataURL({\n     *   format: 'jpeg',\n     *   quality: 0.8\n     * });\n     * @example <caption>Generate cropped png dataURL (clipping of canvas)</caption>\n     * var dataURL = canvas.toDataURL({\n     *   format: 'png',\n     *   left: 100,\n     *   top: 100,\n     *   width: 200,\n     *   height: 200\n     * });\n     * @example <caption>Generate double scaled png dataURL</caption>\n     * var dataURL = canvas.toDataURL({\n     *   format: 'png',\n     *   multiplier: 2\n     * });\n     */\n    toDataURL: function (options) {\n      options || (options = { });\n\n      var format = options.format || 'png',\n          quality = options.quality || 1,\n          multiplier = options.multiplier || 1,\n          cropping = {\n            left: options.left || 0,\n            top: options.top || 0,\n            width: options.width || 0,\n            height: options.height || 0,\n          };\n      return this.__toDataURLWithMultiplier(format, quality, cropping, multiplier);\n    },\n\n    /**\n     * @private\n     */\n    __toDataURLWithMultiplier: function(format, quality, cropping, multiplier) {\n\n      var origWidth = this.getWidth(),\n          origHeight = this.getHeight(),\n          scaledWidth = (cropping.width || this.getWidth()) * multiplier,\n          scaledHeight = (cropping.height || this.getHeight()) * multiplier,\n          zoom = this.getZoom(),\n          newZoom = zoom * multiplier,\n          vp = this.viewportTransform,\n          translateX = (vp[4] - cropping.left) * multiplier,\n          translateY = (vp[5] - cropping.top) * multiplier,\n          newVp = [newZoom, 0, 0, newZoom, translateX, translateY],\n          originalInteractive = this.interactive;\n\n      this.viewportTransform = newVp;\n      // setting interactive to false avoid exporting controls\n      this.interactive && (this.interactive = false);\n      if (origWidth !== scaledWidth || origHeight !== scaledHeight) {\n        // this.setDimensions is going to renderAll also;\n        this.setDimensions({ width: scaledWidth, height: scaledHeight });\n      }\n      else {\n        this.renderAll();\n      }\n      var data = this.__toDataURL(format, quality, cropping);\n      originalInteractive && (this.interactive = originalInteractive);\n      this.viewportTransform = vp;\n      //setDimensions with no option object is taking care of:\n      //this.width, this.height, this.renderAll()\n      this.setDimensions({ width: origWidth, height: origHeight });\n      return data;\n    },\n\n    /**\n     * @private\n     */\n    __toDataURL: function(format, quality) {\n\n      var canvasEl = this.contextContainer.canvas;\n      // to avoid common confusion https://github.com/kangax/fabric.js/issues/806\n      if (format === 'jpg') {\n        format = 'jpeg';\n      }\n\n      var data = supportQuality\n                ? canvasEl.toDataURL('image/' + format, quality)\n                : canvasEl.toDataURL('image/' + format);\n\n      return data;\n    },\n\n    /**\n     * Exports canvas element to a dataurl image (allowing to change image size via multiplier).\n     * @deprecated since 1.0.13\n     * @param {String} format (png|jpeg)\n     * @param {Number} multiplier\n     * @param {Number} quality (0..1)\n     * @return {String}\n     */\n    toDataURLWithMultiplier: function (format, multiplier, quality) {\n      return this.toDataURL({\n        format: format,\n        multiplier: multiplier,\n        quality: quality\n      });\n    },\n  });\n\n})();\n\n\nfabric.util.object.extend(fabric.StaticCanvas.prototype, /** @lends fabric.StaticCanvas.prototype */ {\n\n  /**\n   * Populates canvas with data from the specified dataless JSON.\n   * JSON format must conform to the one of {@link fabric.Canvas#toDatalessJSON}\n   * @deprecated since 1.2.2\n   * @param {String|Object} json JSON string or object\n   * @param {Function} callback Callback, invoked when json is parsed\n   *                            and corresponding objects (e.g: {@link fabric.Image})\n   *                            are initialized\n   * @param {Function} [reviver] Method for further parsing of JSON elements, called after each fabric object created.\n   * @return {fabric.Canvas} instance\n   * @chainable\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-3#deserialization}\n   */\n  loadFromDatalessJSON: function (json, callback, reviver) {\n    return this.loadFromJSON(json, callback, reviver);\n  },\n\n  /**\n   * Populates canvas with data from the specified JSON.\n   * JSON format must conform to the one of {@link fabric.Canvas#toJSON}\n   * @param {String|Object} json JSON string or object\n   * @param {Function} callback Callback, invoked when json is parsed\n   *                            and corresponding objects (e.g: {@link fabric.Image})\n   *                            are initialized\n   * @param {Function} [reviver] Method for further parsing of JSON elements, called after each fabric object created.\n   * @return {fabric.Canvas} instance\n   * @chainable\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-3#deserialization}\n   * @see {@link http://jsfiddle.net/fabricjs/fmgXt/|jsFiddle demo}\n   * @example <caption>loadFromJSON</caption>\n   * canvas.loadFromJSON(json, canvas.renderAll.bind(canvas));\n   * @example <caption>loadFromJSON with reviver</caption>\n   * canvas.loadFromJSON(json, canvas.renderAll.bind(canvas), function(o, object) {\n   *   // `o` = json object\n   *   // `object` = fabric.Object instance\n   *   // ... do some stuff ...\n   * });\n   */\n  loadFromJSON: function (json, callback, reviver) {\n    if (!json) {\n      return;\n    }\n\n    // serialize if it wasn't already\n    var serialized = (typeof json === 'string')\n      ? JSON.parse(json)\n      : fabric.util.object.clone(json);\n\n    this.clear();\n\n    var _this = this;\n    this._enlivenObjects(serialized.objects, function () {\n      _this._setBgOverlay(serialized, function () {\n        // remove parts i cannot set as options\n        delete serialized.objects;\n        delete serialized.backgroundImage;\n        delete serialized.overlayImage;\n        delete serialized.background;\n        delete serialized.overlay;\n        // this._initOptions does too many things to just\n        // call it. Normally loading an Object from JSON\n        // create the Object instance. Here the Canvas is\n        // already an instance and we are just loading things over it\n        for (var prop in serialized) {\n          _this[prop] = serialized[prop];\n        }\n        callback && callback();\n      });\n    }, reviver);\n    return this;\n  },\n\n  /**\n   * @private\n   * @param {Object} serialized Object with background and overlay information\n   * @param {Function} callback Invoked after all background and overlay images/patterns loaded\n   */\n  _setBgOverlay: function(serialized, callback) {\n    var _this = this,\n        loaded = {\n          backgroundColor: false,\n          overlayColor: false,\n          backgroundImage: false,\n          overlayImage: false\n        };\n\n    if (!serialized.backgroundImage && !serialized.overlayImage && !serialized.background && !serialized.overlay) {\n      callback && callback();\n      return;\n    }\n\n    var cbIfLoaded = function () {\n      if (loaded.backgroundImage && loaded.overlayImage && loaded.backgroundColor && loaded.overlayColor) {\n        _this.renderAll();\n        callback && callback();\n      }\n    };\n\n    this.__setBgOverlay('backgroundImage', serialized.backgroundImage, loaded, cbIfLoaded);\n    this.__setBgOverlay('overlayImage', serialized.overlayImage, loaded, cbIfLoaded);\n    this.__setBgOverlay('backgroundColor', serialized.background, loaded, cbIfLoaded);\n    this.__setBgOverlay('overlayColor', serialized.overlay, loaded, cbIfLoaded);\n\n    cbIfLoaded();\n  },\n\n  /**\n   * @private\n   * @param {String} property Property to set (backgroundImage, overlayImage, backgroundColor, overlayColor)\n   * @param {(Object|String)} value Value to set\n   * @param {Object} loaded Set loaded property to true if property is set\n   * @param {Object} callback Callback function to invoke after property is set\n   */\n  __setBgOverlay: function(property, value, loaded, callback) {\n    var _this = this;\n\n    if (!value) {\n      loaded[property] = true;\n      return;\n    }\n\n    if (property === 'backgroundImage' || property === 'overlayImage') {\n      fabric.Image.fromObject(value, function(img) {\n        _this[property] = img;\n        loaded[property] = true;\n        callback && callback();\n      });\n    }\n    else {\n      this['set' + fabric.util.string.capitalize(property, true)](value, function() {\n        loaded[property] = true;\n        callback && callback();\n      });\n    }\n  },\n\n  /**\n   * @private\n   * @param {Array} objects\n   * @param {Function} callback\n   * @param {Function} [reviver]\n   */\n  _enlivenObjects: function (objects, callback, reviver) {\n    var _this = this;\n\n    if (!objects || objects.length === 0) {\n      callback && callback();\n      return;\n    }\n\n    var renderOnAddRemove = this.renderOnAddRemove;\n    this.renderOnAddRemove = false;\n\n    fabric.util.enlivenObjects(objects, function(enlivenedObjects) {\n      enlivenedObjects.forEach(function(obj, index) {\n        // we splice the array just in case some custom classes restored from JSON\n        // will add more object to canvas at canvas init.\n        _this.insertAt(obj, index);\n      });\n\n      _this.renderOnAddRemove = renderOnAddRemove;\n      callback && callback();\n    }, null, reviver);\n  },\n\n  /**\n   * @private\n   * @param {String} format\n   * @param {Function} callback\n   */\n  _toDataURL: function (format, callback) {\n    this.clone(function (clone) {\n      callback(clone.toDataURL(format));\n    });\n  },\n\n  /**\n   * @private\n   * @param {String} format\n   * @param {Number} multiplier\n   * @param {Function} callback\n   */\n  _toDataURLWithMultiplier: function (format, multiplier, callback) {\n    this.clone(function (clone) {\n      callback(clone.toDataURLWithMultiplier(format, multiplier));\n    });\n  },\n\n  /**\n   * Clones canvas instance\n   * @param {Object} [callback] Receives cloned instance as a first argument\n   * @param {Array} [properties] Array of properties to include in the cloned canvas and children\n   */\n  clone: function (callback, properties) {\n    var data = JSON.stringify(this.toJSON(properties));\n    this.cloneWithoutData(function(clone) {\n      clone.loadFromJSON(data, function() {\n        callback && callback(clone);\n      });\n    });\n  },\n\n  /**\n   * Clones canvas instance without cloning existing data.\n   * This essentially copies canvas dimensions, clipping properties, etc.\n   * but leaves data empty (so that you can populate it with your own)\n   * @param {Object} [callback] Receives cloned instance as a first argument\n   */\n  cloneWithoutData: function(callback) {\n    var el = fabric.document.createElement('canvas');\n\n    el.width = this.getWidth();\n    el.height = this.getHeight();\n\n    var clone = new fabric.Canvas(el);\n    clone.clipTo = this.clipTo;\n    if (this.backgroundImage) {\n      clone.setBackgroundImage(this.backgroundImage.src, function() {\n        clone.renderAll();\n        callback && callback(clone);\n      });\n      clone.backgroundImageOpacity = this.backgroundImageOpacity;\n      clone.backgroundImageStretch = this.backgroundImageStretch;\n    }\n    else {\n      callback && callback(clone);\n    }\n  }\n});\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      toFixed = fabric.util.toFixed,\n      capitalize = fabric.util.string.capitalize,\n      degreesToRadians = fabric.util.degreesToRadians,\n      supportsLineDash = fabric.StaticCanvas.supports('setLineDash'),\n      objectCaching = !fabric.isLikelyNode;\n\n  if (fabric.Object) {\n    return;\n  }\n\n  /**\n   * Root object class from which all 2d shape classes inherit from\n   * @class fabric.Object\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-1#objects}\n   * @see {@link fabric.Object#initialize} for constructor definition\n   *\n   * @fires added\n   * @fires removed\n   *\n   * @fires selected\n   * @fires deselected\n   * @fires modified\n   * @fires rotating\n   * @fires scaling\n   * @fires moving\n   * @fires skewing\n   *\n   * @fires mousedown\n   * @fires mouseup\n   * @fires mouseover\n   * @fires mouseout\n   */\n  fabric.Object = fabric.util.createClass(/** @lends fabric.Object.prototype */ {\n\n    /**\n     * Retrieves object's {@link fabric.Object#clipTo|clipping function}\n     * @method getClipTo\n     * @memberOf fabric.Object.prototype\n     * @return {Function}\n     */\n\n    /**\n     * Sets object's {@link fabric.Object#clipTo|clipping function}\n     * @method setClipTo\n     * @memberOf fabric.Object.prototype\n     * @param {Function} clipTo Clipping function\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n\n    /**\n     * Retrieves object's {@link fabric.Object#transformMatrix|transformMatrix}\n     * @method getTransformMatrix\n     * @memberOf fabric.Object.prototype\n     * @return {Array} transformMatrix\n     */\n\n    /**\n     * Sets object's {@link fabric.Object#transformMatrix|transformMatrix}\n     * @method setTransformMatrix\n     * @memberOf fabric.Object.prototype\n     * @param {Array} transformMatrix\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n\n    /**\n     * Retrieves object's {@link fabric.Object#visible|visible} state\n     * @method getVisible\n     * @memberOf fabric.Object.prototype\n     * @return {Boolean} True if visible\n     */\n\n    /**\n     * Sets object's {@link fabric.Object#visible|visible} state\n     * @method setVisible\n     * @memberOf fabric.Object.prototype\n     * @param {Boolean} value visible value\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n\n    /**\n     * Retrieves object's {@link fabric.Object#shadow|shadow}\n     * @method getShadow\n     * @memberOf fabric.Object.prototype\n     * @return {Object} Shadow instance\n     */\n\n    /**\n     * Retrieves object's {@link fabric.Object#stroke|stroke}\n     * @method getStroke\n     * @memberOf fabric.Object.prototype\n     * @return {String} stroke value\n     */\n\n    /**\n     * Sets object's {@link fabric.Object#stroke|stroke}\n     * @method setStroke\n     * @memberOf fabric.Object.prototype\n     * @param {String} value stroke value\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n\n    /**\n     * Retrieves object's {@link fabric.Object#strokeWidth|strokeWidth}\n     * @method getStrokeWidth\n     * @memberOf fabric.Object.prototype\n     * @return {Number} strokeWidth value\n     */\n\n    /**\n     * Sets object's {@link fabric.Object#strokeWidth|strokeWidth}\n     * @method setStrokeWidth\n     * @memberOf fabric.Object.prototype\n     * @param {Number} value strokeWidth value\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n\n    /**\n     * Retrieves object's {@link fabric.Object#originX|originX}\n     * @method getOriginX\n     * @memberOf fabric.Object.prototype\n     * @return {String} originX value\n     */\n\n    /**\n     * Sets object's {@link fabric.Object#originX|originX}\n     * @method setOriginX\n     * @memberOf fabric.Object.prototype\n     * @param {String} value originX value\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n\n    /**\n     * Retrieves object's {@link fabric.Object#originY|originY}\n     * @method getOriginY\n     * @memberOf fabric.Object.prototype\n     * @return {String} originY value\n     */\n\n    /**\n     * Sets object's {@link fabric.Object#originY|originY}\n     * @method setOriginY\n     * @memberOf fabric.Object.prototype\n     * @param {String} value originY value\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n\n    /**\n     * Retrieves object's {@link fabric.Object#fill|fill}\n     * @method getFill\n     * @memberOf fabric.Object.prototype\n     * @return {String} Fill value\n     */\n\n    /**\n     * Sets object's {@link fabric.Object#fill|fill}\n     * @method setFill\n     * @memberOf fabric.Object.prototype\n     * @param {String} value Fill value\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n\n    /**\n     * Retrieves object's {@link fabric.Object#opacity|opacity}\n     * @method getOpacity\n     * @memberOf fabric.Object.prototype\n     * @return {Number} Opacity value (0-1)\n     */\n\n    /**\n     * Sets object's {@link fabric.Object#opacity|opacity}\n     * @method setOpacity\n     * @memberOf fabric.Object.prototype\n     * @param {Number} value Opacity value (0-1)\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n\n    /**\n     * Retrieves object's {@link fabric.Object#angle|angle} (in degrees)\n     * @method getAngle\n     * @memberOf fabric.Object.prototype\n     * @return {Number}\n     */\n\n    /**\n     * Retrieves object's {@link fabric.Object#top|top position}\n     * @method getTop\n     * @memberOf fabric.Object.prototype\n     * @return {Number} Top value (in pixels)\n     */\n\n    /**\n     * Sets object's {@link fabric.Object#top|top position}\n     * @method setTop\n     * @memberOf fabric.Object.prototype\n     * @param {Number} value Top value (in pixels)\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n\n    /**\n     * Retrieves object's {@link fabric.Object#left|left position}\n     * @method getLeft\n     * @memberOf fabric.Object.prototype\n     * @return {Number} Left value (in pixels)\n     */\n\n    /**\n     * Sets object's {@link fabric.Object#left|left position}\n     * @method setLeft\n     * @memberOf fabric.Object.prototype\n     * @param {Number} value Left value (in pixels)\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n\n    /**\n     * Retrieves object's {@link fabric.Object#scaleX|scaleX} value\n     * @method getScaleX\n     * @memberOf fabric.Object.prototype\n     * @return {Number} scaleX value\n     */\n\n    /**\n     * Sets object's {@link fabric.Object#scaleX|scaleX} value\n     * @method setScaleX\n     * @memberOf fabric.Object.prototype\n     * @param {Number} value scaleX value\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n\n    /**\n     * Retrieves object's {@link fabric.Object#scaleY|scaleY} value\n     * @method getScaleY\n     * @memberOf fabric.Object.prototype\n     * @return {Number} scaleY value\n     */\n\n    /**\n     * Sets object's {@link fabric.Object#scaleY|scaleY} value\n     * @method setScaleY\n     * @memberOf fabric.Object.prototype\n     * @param {Number} value scaleY value\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n\n    /**\n     * Retrieves object's {@link fabric.Object#flipX|flipX} value\n     * @method getFlipX\n     * @memberOf fabric.Object.prototype\n     * @return {Boolean} flipX value\n     */\n\n    /**\n     * Sets object's {@link fabric.Object#flipX|flipX} value\n     * @method setFlipX\n     * @memberOf fabric.Object.prototype\n     * @param {Boolean} value flipX value\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n\n    /**\n     * Retrieves object's {@link fabric.Object#flipY|flipY} value\n     * @method getFlipY\n     * @memberOf fabric.Object.prototype\n     * @return {Boolean} flipY value\n     */\n\n    /**\n     * Sets object's {@link fabric.Object#flipY|flipY} value\n     * @method setFlipY\n     * @memberOf fabric.Object.prototype\n     * @param {Boolean} value flipY value\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n\n    /**\n     * Type of an object (rect, circle, path, etc.).\n     * Note that this property is meant to be read-only and not meant to be modified.\n     * If you modify, certain parts of Fabric (such as JSON loading) won't work correctly.\n     * @type String\n     * @default\n     */\n    type:                     'object',\n\n    /**\n     * Horizontal origin of transformation of an object (one of \"left\", \"right\", \"center\")\n     * See http://jsfiddle.net/1ow02gea/40/ on how originX/originY affect objects in groups\n     * @type String\n     * @default\n     */\n    originX:                  'left',\n\n    /**\n     * Vertical origin of transformation of an object (one of \"top\", \"bottom\", \"center\")\n     * See http://jsfiddle.net/1ow02gea/40/ on how originX/originY affect objects in groups\n     * @type String\n     * @default\n     */\n    originY:                  'top',\n\n    /**\n     * Top position of an object. Note that by default it's relative to object top. You can change this by setting originY={top/center/bottom}\n     * @type Number\n     * @default\n     */\n    top:                      0,\n\n    /**\n     * Left position of an object. Note that by default it's relative to object left. You can change this by setting originX={left/center/right}\n     * @type Number\n     * @default\n     */\n    left:                     0,\n\n    /**\n     * Object width\n     * @type Number\n     * @default\n     */\n    width:                    0,\n\n    /**\n     * Object height\n     * @type Number\n     * @default\n     */\n    height:                   0,\n\n    /**\n     * Object scale factor (horizontal)\n     * @type Number\n     * @default\n     */\n    scaleX:                   1,\n\n    /**\n     * Object scale factor (vertical)\n     * @type Number\n     * @default\n     */\n    scaleY:                   1,\n\n    /**\n     * When true, an object is rendered as flipped horizontally\n     * @type Boolean\n     * @default\n     */\n    flipX:                    false,\n\n    /**\n     * When true, an object is rendered as flipped vertically\n     * @type Boolean\n     * @default\n     */\n    flipY:                    false,\n\n    /**\n     * Opacity of an object\n     * @type Number\n     * @default\n     */\n    opacity:                  1,\n\n    /**\n     * Angle of rotation of an object (in degrees)\n     * @type Number\n     * @default\n     */\n    angle:                    0,\n\n    /**\n     * Angle of skew on x axes of an object (in degrees)\n     * @type Number\n     * @default\n     */\n    skewX:                    0,\n\n    /**\n     * Angle of skew on y axes of an object (in degrees)\n     * @type Number\n     * @default\n     */\n    skewY:                    0,\n\n    /**\n     * Size of object's controlling corners (in pixels)\n     * @type Number\n     * @default\n     */\n    cornerSize:               13,\n\n    /**\n     * When true, object's controlling corners are rendered as transparent inside (i.e. stroke instead of fill)\n     * @type Boolean\n     * @default\n     */\n    transparentCorners:       true,\n\n    /**\n     * Default cursor value used when hovering over this object on canvas\n     * @type String\n     * @default\n     */\n    hoverCursor:              null,\n\n    /**\n     * Default cursor value used when moving this object on canvas\n     * @type String\n     * @default\n     */\n    moveCursor:               null,\n\n    /**\n     * Padding between object and its controlling borders (in pixels)\n     * @type Number\n     * @default\n     */\n    padding:                  0,\n\n    /**\n     * Color of controlling borders of an object (when it's active)\n     * @type String\n     * @default\n     */\n    borderColor:              'rgba(102,153,255,0.75)',\n\n    /**\n     * Array specifying dash pattern of an object's borders (hasBorder must be true)\n     * @since 1.6.2\n     * @type Array\n     */\n    borderDashArray:          null,\n\n    /**\n     * Color of controlling corners of an object (when it's active)\n     * @type String\n     * @default\n     */\n    cornerColor:              'rgba(102,153,255,0.5)',\n\n    /**\n     * Color of controlling corners of an object (when it's active and transparentCorners false)\n     * @since 1.6.2\n     * @type String\n     * @default\n     */\n    cornerStrokeColor:        null,\n\n    /**\n     * Specify style of control, 'rect' or 'circle'\n     * @since 1.6.2\n     * @type String\n     */\n    cornerStyle:          'rect',\n\n    /**\n     * Array specifying dash pattern of an object's control (hasBorder must be true)\n     * @since 1.6.2\n     * @type Array\n     */\n    cornerDashArray:          null,\n\n    /**\n     * When true, this object will use center point as the origin of transformation\n     * when being scaled via the controls.\n     * <b>Backwards incompatibility note:</b> This property replaces \"centerTransform\" (Boolean).\n     * @since 1.3.4\n     * @type Boolean\n     * @default\n     */\n    centeredScaling:          false,\n\n    /**\n     * When true, this object will use center point as the origin of transformation\n     * when being rotated via the controls.\n     * <b>Backwards incompatibility note:</b> This property replaces \"centerTransform\" (Boolean).\n     * @since 1.3.4\n     * @type Boolean\n     * @default\n     */\n    centeredRotation:         true,\n\n    /**\n     * Color of object's fill\n     * @type String\n     * @default\n     */\n    fill:                     'rgb(0,0,0)',\n\n    /**\n     * Fill rule used to fill an object\n     * accepted values are nonzero, evenodd\n     * <b>Backwards incompatibility note:</b> This property was used for setting globalCompositeOperation until v1.4.12 (use `fabric.Object#globalCompositeOperation` instead)\n     * @type String\n     * @default\n     */\n    fillRule:                 'nonzero',\n\n    /**\n     * Composite rule used for canvas globalCompositeOperation\n     * @type String\n     * @default\n     */\n    globalCompositeOperation: 'source-over',\n\n    /**\n     * Background color of an object. Only works with text objects at the moment.\n     * @type String\n     * @default\n     */\n    backgroundColor:          '',\n\n    /**\n     * Selection Background color of an object. colored layer behind the object when it is active.\n     * does not mix good with globalCompositeOperation methods.\n     * @type String\n     * @default\n     */\n    selectionBackgroundColor:          '',\n\n    /**\n     * When defined, an object is rendered via stroke and this property specifies its color\n     * @type String\n     * @default\n     */\n    stroke:                   null,\n\n    /**\n     * Width of a stroke used to render this object\n     * @type Number\n     * @default\n     */\n    strokeWidth:              1,\n\n    /**\n     * Array specifying dash pattern of an object's stroke (stroke must be defined)\n     * @type Array\n     */\n    strokeDashArray:          null,\n\n    /**\n     * Line endings style of an object's stroke (one of \"butt\", \"round\", \"square\")\n     * @type String\n     * @default\n     */\n    strokeLineCap:            'butt',\n\n    /**\n     * Corner style of an object's stroke (one of \"bevil\", \"round\", \"miter\")\n     * @type String\n     * @default\n     */\n    strokeLineJoin:           'miter',\n\n    /**\n     * Maximum miter length (used for strokeLineJoin = \"miter\") of an object's stroke\n     * @type Number\n     * @default\n     */\n    strokeMiterLimit:         10,\n\n    /**\n     * Shadow object representing shadow of this shape\n     * @type fabric.Shadow\n     * @default\n     */\n    shadow:                   null,\n\n    /**\n     * Opacity of object's controlling borders when object is active and moving\n     * @type Number\n     * @default\n     */\n    borderOpacityWhenMoving:  0.4,\n\n    /**\n     * Scale factor of object's controlling borders\n     * @type Number\n     * @default\n     */\n    borderScaleFactor:        1,\n\n    /**\n     * Transform matrix (similar to SVG's transform matrix)\n     * @type Array\n     */\n    transformMatrix:          null,\n\n    /**\n     * Minimum allowed scale value of an object\n     * @type Number\n     * @default\n     */\n    minScaleLimit:            0.01,\n\n    /**\n     * When set to `false`, an object can not be selected for modification (using either point-click-based or group-based selection).\n     * But events still fire on it.\n     * @type Boolean\n     * @default\n     */\n    selectable:               true,\n\n    /**\n     * When set to `false`, an object can not be a target of events. All events propagate through it. Introduced in v1.3.4\n     * @type Boolean\n     * @default\n     */\n    evented:                  true,\n\n    /**\n     * When set to `false`, an object is not rendered on canvas\n     * @type Boolean\n     * @default\n     */\n    visible:                  true,\n\n    /**\n     * When set to `false`, object's controls are not displayed and can not be used to manipulate object\n     * @type Boolean\n     * @default\n     */\n    hasControls:              true,\n\n    /**\n     * When set to `false`, object's controlling borders are not rendered\n     * @type Boolean\n     * @default\n     */\n    hasBorders:               true,\n\n    /**\n     * When set to `false`, object's controlling rotating point will not be visible or selectable\n     * @type Boolean\n     * @default\n     */\n    hasRotatingPoint:         true,\n\n    /**\n     * Offset for object's controlling rotating point (when enabled via `hasRotatingPoint`)\n     * @type Number\n     * @default\n     */\n    rotatingPointOffset:      40,\n\n    /**\n     * When set to `true`, objects are \"found\" on canvas on per-pixel basis rather than according to bounding box\n     * @type Boolean\n     * @default\n     */\n    perPixelTargetFind:       false,\n\n    /**\n     * When `false`, default object's values are not included in its serialization\n     * @type Boolean\n     * @default\n     */\n    includeDefaultValues:     true,\n\n    /**\n     * Function that determines clipping of an object (context is passed as a first argument)\n     * Note that context origin is at the object's center point (not left/top corner)\n     * @type Function\n     */\n    clipTo:                   null,\n\n    /**\n     * When `true`, object horizontal movement is locked\n     * @type Boolean\n     * @default\n     */\n    lockMovementX:            false,\n\n    /**\n     * When `true`, object vertical movement is locked\n     * @type Boolean\n     * @default\n     */\n    lockMovementY:            false,\n\n    /**\n     * When `true`, object rotation is locked\n     * @type Boolean\n     * @default\n     */\n    lockRotation:             false,\n\n    /**\n     * When `true`, object horizontal scaling is locked\n     * @type Boolean\n     * @default\n     */\n    lockScalingX:             false,\n\n    /**\n     * When `true`, object vertical scaling is locked\n     * @type Boolean\n     * @default\n     */\n    lockScalingY:             false,\n\n    /**\n     * When `true`, object non-uniform scaling is locked\n     * @type Boolean\n     * @default\n     */\n    lockUniScaling:           false,\n\n    /**\n     * When `true`, object horizontal skewing is locked\n     * @type Boolean\n     * @default\n     */\n    lockSkewingX:             false,\n\n    /**\n     * When `true`, object vertical skewing is locked\n     * @type Boolean\n     * @default\n     */\n    lockSkewingY:             false,\n\n    /**\n     * When `true`, object cannot be flipped by scaling into negative values\n     * @type Boolean\n     * @default\n     */\n    lockScalingFlip:          false,\n\n    /**\n     * When `true`, object is not exported in SVG or OBJECT/JSON\n     * since 1.6.3\n     * @type Boolean\n     * @default\n     */\n    excludeFromExport:        false,\n\n    /**\n     * When `true`, object is cached on an additional canvas.\n     * default to true\n     * since 1.7.0\n     * @type Boolean\n     * @default true\n     */\n    objectCaching:            objectCaching,\n\n    /**\n     * When `true`, object properties are checked for cache invalidation. In some particular\n     * situation you may want this to be disabled ( spray brush, very big pathgroups, groups)\n     * or if your application does not allow you to modify properties for groups child you want\n     * to disable it for groups.\n     * default to false\n     * since 1.7.0\n     * @type Boolean\n     * @default false\n     */\n    statefullCache:            false,\n\n    /**\n     * When `true`, cache does not get updated during scaling. The picture will get blocky if scaled\n     * too much and will be redrawn with correct details at the end of scaling.\n     * this setting is performance and application dependant.\n     * default to true\n     * since 1.7.0\n     * @type Boolean\n     * @default true\n     */\n    noScaleCache:              true,\n\n    /**\n     * When set to `true`, object's cache will be rerendered next render call.\n     * since 1.7.0\n     * @type Boolean\n     * @default false\n     */\n    dirty:                false,\n\n    /**\n     * List of properties to consider when checking if state\n     * of an object is changed (fabric.Object#hasStateChanged)\n     * as well as for history (undo/redo) purposes\n     * @type Array\n     */\n    stateProperties: (\n      'top left width height scaleX scaleY flipX flipY originX originY transformMatrix ' +\n      'stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit ' +\n      'angle opacity fill fillRule globalCompositeOperation shadow clipTo visible backgroundColor ' +\n      'skewX skewY'\n    ).split(' '),\n\n    /**\n     * List of properties to consider when checking if cache needs refresh\n     * @type Array\n     */\n    cacheProperties: (\n      'fill stroke strokeWidth strokeDashArray width height stroke strokeWidth strokeDashArray' +\n      ' strokeLineCap strokeLineJoin strokeMiterLimit fillRule backgroundColor'\n    ).split(' '),\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     */\n    initialize: function(options) {\n      options = options || { };\n      if (options) {\n        this.setOptions(options);\n      }\n      if (this.objectCaching) {\n        this._createCacheCanvas();\n        this.setupState({ propertySet: 'cacheProperties' });\n      }\n    },\n\n    /**\n     * Create a the canvas used to keep the cached copy of the object\n     * @private\n     */\n    _createCacheCanvas: function() {\n      this._cacheCanvas = fabric.document.createElement('canvas');\n      this._cacheContext = this._cacheCanvas.getContext('2d');\n      this._updateCacheCanvas();\n    },\n\n    /**\n     * Return the dimension and the zoom level needed to create a cache canvas\n     * big enough to host the object to be cached.\n     * @private\n     * @return {Object}.width width of canvas\n     * @return {Object}.height height of canvas\n     * @return {Object}.zoomX zoomX zoom value to unscale the canvas before drawing cache\n     * @return {Object}.zoomY zoomY zoom value to unscale the canvas before drawing cache\n     */\n    _getCacheCanvasDimensions: function() {\n      var zoom = this.canvas && this.canvas.getZoom() || 1,\n          objectScale = this.getObjectScaling(),\n          dim = this._getNonTransformedDimensions(),\n          retina = this.canvas && this.canvas._isRetinaScaling() ? fabric.devicePixelRatio : 1,\n          zoomX = objectScale.scaleX * zoom * retina,\n          zoomY = objectScale.scaleY * zoom * retina,\n          width = dim.x * zoomX,\n          height = dim.y * zoomY;\n      return {\n        width: width,\n        height: height,\n        zoomX: zoomX,\n        zoomY: zoomY\n      };\n    },\n\n    /**\n     * Update width and height of the canvas for cache\n     * returns true or false if canvas needed resize.\n     * @private\n     * @return {Boolean} true if the canvas has been resized\n     */\n    _updateCacheCanvas: function() {\n      if (this.noScaleCache && this.canvas && this.canvas._currentTransform) {\n        var action = this.canvas._currentTransform.action;\n        if (action.slice(0, 5) === 'scale') {\n          return false;\n        }\n      }\n      var dims = this._getCacheCanvasDimensions(),\n          width = dims.width, height = dims.height,\n          zoomX = dims.zoomX, zoomY = dims.zoomY;\n\n      if (width !== this.cacheWidth || height !== this.cacheHeight) {\n        this._cacheCanvas.width = width;\n        this._cacheCanvas.height = height;\n        this._cacheContext.translate(width / 2, height / 2);\n        this._cacheContext.scale(zoomX, zoomY);\n        this.cacheWidth = width;\n        this.cacheHeight = height;\n        this.zoomX = zoomX;\n        this.zoomY = zoomY;\n        return true\n      }\n      return false\n    },\n\n    /**\n     * @private\n     * @param {Object} [options] Options object\n     */\n    _initGradient: function(options) {\n      if (options.fill && options.fill.colorStops && !(options.fill instanceof fabric.Gradient)) {\n        this.set('fill', new fabric.Gradient(options.fill));\n      }\n      if (options.stroke && options.stroke.colorStops && !(options.stroke instanceof fabric.Gradient)) {\n        this.set('stroke', new fabric.Gradient(options.stroke));\n      }\n    },\n\n    /**\n     * @private\n     * @param {Object} [options] Options object\n     */\n    _initPattern: function(options) {\n      if (options.fill && options.fill.source && !(options.fill instanceof fabric.Pattern)) {\n        this.set('fill', new fabric.Pattern(options.fill));\n      }\n      if (options.stroke && options.stroke.source && !(options.stroke instanceof fabric.Pattern)) {\n        this.set('stroke', new fabric.Pattern(options.stroke));\n      }\n    },\n\n    /**\n     * @private\n     * @param {Object} [options] Options object\n     */\n    _initClipping: function(options) {\n      if (!options.clipTo || typeof options.clipTo !== 'string') {\n        return;\n      }\n\n      var functionBody = fabric.util.getFunctionBody(options.clipTo);\n      if (typeof functionBody !== 'undefined') {\n        this.clipTo = new Function('ctx', functionBody);\n      }\n    },\n\n    /**\n     * Sets object's properties from options\n     * @param {Object} [options] Options object\n     */\n    setOptions: function(options) {\n      for (var prop in options) {\n        this.set(prop, options[prop]);\n      }\n      this._initGradient(options);\n      this._initPattern(options);\n      this._initClipping(options);\n    },\n\n    /**\n     * Transforms context when rendering an object\n     * @param {CanvasRenderingContext2D} ctx Context\n     * @param {Boolean} fromLeft When true, context is transformed to object's top/left corner. This is used when rendering text on Node\n     */\n    transform: function(ctx, fromLeft) {\n      if (this.group && !this.group._transformDone && this.group === this.canvas._activeGroup) {\n        this.group.transform(ctx);\n      }\n      var center = fromLeft ? this._getLeftTopCoords() : this.getCenterPoint();\n      ctx.translate(center.x, center.y);\n      ctx.rotate(degreesToRadians(this.angle));\n      ctx.scale(\n        this.scaleX * (this.flipX ? -1 : 1),\n        this.scaleY * (this.flipY ? -1 : 1)\n      );\n      ctx.transform(1, 0, Math.tan(degreesToRadians(this.skewX)), 1, 0, 0);\n      ctx.transform(1, Math.tan(degreesToRadians(this.skewY)), 0, 1, 0, 0);\n    },\n\n    /**\n     * Returns an object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      var NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS,\n\n          object = {\n            type:                     this.type,\n            originX:                  this.originX,\n            originY:                  this.originY,\n            left:                     toFixed(this.left, NUM_FRACTION_DIGITS),\n            top:                      toFixed(this.top, NUM_FRACTION_DIGITS),\n            width:                    toFixed(this.width, NUM_FRACTION_DIGITS),\n            height:                   toFixed(this.height, NUM_FRACTION_DIGITS),\n            fill:                     (this.fill && this.fill.toObject) ? this.fill.toObject() : this.fill,\n            stroke:                   (this.stroke && this.stroke.toObject) ? this.stroke.toObject() : this.stroke,\n            strokeWidth:              toFixed(this.strokeWidth, NUM_FRACTION_DIGITS),\n            strokeDashArray:          this.strokeDashArray ? this.strokeDashArray.concat() : this.strokeDashArray,\n            strokeLineCap:            this.strokeLineCap,\n            strokeLineJoin:           this.strokeLineJoin,\n            strokeMiterLimit:         toFixed(this.strokeMiterLimit, NUM_FRACTION_DIGITS),\n            scaleX:                   toFixed(this.scaleX, NUM_FRACTION_DIGITS),\n            scaleY:                   toFixed(this.scaleY, NUM_FRACTION_DIGITS),\n            angle:                    toFixed(this.getAngle(), NUM_FRACTION_DIGITS),\n            flipX:                    this.flipX,\n            flipY:                    this.flipY,\n            opacity:                  toFixed(this.opacity, NUM_FRACTION_DIGITS),\n            shadow:                   (this.shadow && this.shadow.toObject) ? this.shadow.toObject() : this.shadow,\n            visible:                  this.visible,\n            clipTo:                   this.clipTo && String(this.clipTo),\n            backgroundColor:          this.backgroundColor,\n            fillRule:                 this.fillRule,\n            globalCompositeOperation: this.globalCompositeOperation,\n            transformMatrix:          this.transformMatrix ? this.transformMatrix.concat() : this.transformMatrix,\n            skewX:                    toFixed(this.skewX, NUM_FRACTION_DIGITS),\n            skewY:                    toFixed(this.skewY, NUM_FRACTION_DIGITS)\n          };\n\n      fabric.util.populateWithProperties(this, object, propertiesToInclude);\n\n      if (!this.includeDefaultValues) {\n        object = this._removeDefaultValues(object);\n      }\n\n      return object;\n    },\n\n    /**\n     * Returns (dataless) object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of an instance\n     */\n    toDatalessObject: function(propertiesToInclude) {\n      // will be overwritten by subclasses\n      return this.toObject(propertiesToInclude);\n    },\n\n    /**\n     * @private\n     * @param {Object} object\n     */\n    _removeDefaultValues: function(object) {\n      var prototype = fabric.util.getKlass(object.type).prototype,\n          stateProperties = prototype.stateProperties;\n      stateProperties.forEach(function(prop) {\n        if (object[prop] === prototype[prop]) {\n          delete object[prop];\n        }\n        var isArray = Object.prototype.toString.call(object[prop]) === '[object Array]' &&\n                      Object.prototype.toString.call(prototype[prop]) === '[object Array]';\n\n        // basically a check for [] === []\n        if (isArray && object[prop].length === 0 && prototype[prop].length === 0) {\n          delete object[prop];\n        }\n      });\n\n      return object;\n    },\n\n    /**\n     * Returns a string representation of an instance\n     * @return {String}\n     */\n    toString: function() {\n      return '#<fabric.' + capitalize(this.type) + '>';\n    },\n\n    /**\n     * Basic getter\n     * @param {String} property Property name\n     * @return {*} value of a property\n     */\n    get: function(property) {\n      return this[property];\n    },\n\n    /**\n     * Return the object scale factor counting also the group scaling\n     * @return {Object} object with scaleX and scaleY properties\n     */\n    getObjectScaling: function() {\n      var scaleX = this.scaleX, scaleY = this.scaleY;\n      if (this.group) {\n        var scaling = this.group.getObjectScaling();\n        scaleX *= scaling.scaleX;\n        scaleY *= scaling.scaleY;\n      }\n      return { scaleX: scaleX, scaleY: scaleY };\n    },\n\n    /**\n     * @private\n     */\n    _setObject: function(obj) {\n      for (var prop in obj) {\n        this._set(prop, obj[prop]);\n      }\n    },\n\n    /**\n     * Sets property to a given value. When changing position/dimension -related properties (left, top, scale, angle, etc.) `set` does not update position of object's borders/controls. If you need to update those, call `setCoords()`.\n     * @param {String|Object} key Property name or object (if object, iterate over the object properties)\n     * @param {Object|Function} value Property value (if function, the value is passed into it and its return value is used as a new one)\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    set: function(key, value) {\n      if (typeof key === 'object') {\n        this._setObject(key);\n      }\n      else {\n        if (typeof value === 'function' && key !== 'clipTo') {\n          this._set(key, value(this.get(key)));\n        }\n        else {\n          this._set(key, value);\n        }\n      }\n      return this;\n    },\n\n    /**\n     * @private\n     * @param {String} key\n     * @param {*} value\n     * @return {fabric.Object} thisArg\n     */\n    _set: function(key, value) {\n      var shouldConstrainValue = (key === 'scaleX' || key === 'scaleY');\n\n      if (shouldConstrainValue) {\n        value = this._constrainScale(value);\n      }\n      if (key === 'scaleX' && value < 0) {\n        this.flipX = !this.flipX;\n        value *= -1;\n      }\n      else if (key === 'scaleY' && value < 0) {\n        this.flipY = !this.flipY;\n        value *= -1;\n      }\n      else if (key === 'shadow' && value && !(value instanceof fabric.Shadow)) {\n        value = new fabric.Shadow(value);\n      }\n\n      this[key] = value;\n\n      if (this.cacheProperties.indexOf(key) > -1) {\n        this.dirty = true;\n      }\n\n      if (key === 'width' || key === 'height') {\n        this.minScaleLimit = Math.min(0.1, 1 / Math.max(this.width, this.height));\n      }\n\n      return this;\n    },\n\n    /**\n     * This callback function is called by the parent group of an object every\n     * time a non-delegated property changes on the group. It is passed the key\n     * and value as parameters. Not adding in this function's signature to avoid\n     * Travis build error about unused variables.\n     */\n    setOnGroup: function() {\n      // implemented by sub-classes, as needed.\n    },\n\n    /**\n     * Toggles specified property from `true` to `false` or from `false` to `true`\n     * @param {String} property Property to toggle\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    toggle: function(property) {\n      var value = this.get(property);\n      if (typeof value === 'boolean') {\n        this.set(property, !value);\n      }\n      return this;\n    },\n\n    /**\n     * Sets sourcePath of an object\n     * @param {String} value Value to set sourcePath to\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    setSourcePath: function(value) {\n      this.sourcePath = value;\n      return this;\n    },\n\n    /**\n     * Retrieves viewportTransform from Object's canvas if possible\n     * @method getViewportTransform\n     * @memberOf fabric.Object.prototype\n     * @return {Boolean} flipY value // TODO\n     */\n    getViewportTransform: function() {\n      if (this.canvas && this.canvas.viewportTransform) {\n        return this.canvas.viewportTransform;\n      }\n      return [1, 0, 0, 1, 0, 0];\n    },\n\n    /**\n     * Renders an object on a specified context\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Boolean} [noTransform] When true, context is not transformed\n     */\n    render: function(ctx, noTransform) {\n      // do not render if width/height are zeros or object is not visible\n      if ((this.width === 0 && this.height === 0) || !this.visible) {\n        return;\n      }\n      ctx.save();\n      //setup fill rule for current object\n      this._setupCompositeOperation(ctx);\n      this.drawSelectionBackground(ctx);\n      if (!noTransform) {\n        this.transform(ctx);\n      }\n      this._setOpacity(ctx);\n      this._setShadow(ctx);\n      if (this.transformMatrix) {\n        ctx.transform.apply(ctx, this.transformMatrix);\n      }\n      this.clipTo && fabric.util.clipContext(this, ctx);\n      if (this.objectCaching && !this.group) {\n        if (this.isCacheDirty(noTransform)) {\n          this.statefullCache && this.saveState({ propertySet: 'cacheProperties' });\n          this.drawObject(this._cacheContext, noTransform);\n          this.dirty = false;\n        }\n        this.drawCacheOnCanvas(ctx);\n      }\n      else {\n        this.drawObject(ctx, noTransform);\n        if (noTransform && this.objectCaching && this.statefullCache) {\n          this.saveState({ propertySet: 'cacheProperties' });\n        }\n      }\n      this.clipTo && ctx.restore();\n      ctx.restore();\n    },\n\n    /**\n     * Execute the drawing operation for an object on a specified context\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Boolean} [noTransform] When true, context is not transformed\n     */\n    drawObject: function(ctx, noTransform) {\n      this._renderBackground(ctx);\n      this._setStrokeStyles(ctx);\n      this._setFillStyles(ctx);\n      this._render(ctx, noTransform);\n    },\n\n    /**\n     * Paint the cached copy of the object on the target context.\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    drawCacheOnCanvas: function(ctx) {\n      ctx.scale(1 / this.zoomX, 1 / this.zoomY);\n      ctx.drawImage(this._cacheCanvas, -this.cacheWidth / 2, -this.cacheHeight / 2);\n    },\n\n    /**\n     * Check if cache is dirty\n     * @param {Boolean} skipCanvas skip canvas checks because this object is painted\n     * on parent canvas.\n     */\n    isCacheDirty: function(skipCanvas) {\n      if (!skipCanvas && this._updateCacheCanvas()) {\n        // in this case the context is already cleared.\n        return true;\n      }\n      else {\n        if (this.dirty || (this.statefullCache && this.hasStateChanged('cacheProperties'))) {\n          if (!skipCanvas) {\n            var dim = this._getNonTransformedDimensions();\n            this._cacheContext.clearRect(-dim.x / 2, -dim.y / 2, dim.x, dim.y);\n          }\n          return true;\n        }\n      }\n      return false;\n    },\n\n    /**\n     * Draws a background for the object big as its untrasformed dimensions\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderBackground: function(ctx) {\n      if (!this.backgroundColor) {\n        return;\n      }\n      var dim = this._getNonTransformedDimensions();\n      ctx.fillStyle = this.backgroundColor;\n\n      ctx.fillRect(\n        -dim.x / 2,\n        -dim.y / 2,\n        dim.x,\n        dim.y\n      );\n      // if there is background color no other shadows\n      // should be casted\n      this._removeShadow(ctx);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _setOpacity: function(ctx) {\n      ctx.globalAlpha *= this.opacity;\n    },\n\n    _setStrokeStyles: function(ctx) {\n      if (this.stroke) {\n        ctx.lineWidth = this.strokeWidth;\n        ctx.lineCap = this.strokeLineCap;\n        ctx.lineJoin = this.strokeLineJoin;\n        ctx.miterLimit = this.strokeMiterLimit;\n        ctx.strokeStyle = this.stroke.toLive\n          ? this.stroke.toLive(ctx, this)\n          : this.stroke;\n      }\n    },\n\n    _setFillStyles: function(ctx) {\n      if (this.fill) {\n        ctx.fillStyle = this.fill.toLive\n          ? this.fill.toLive(ctx, this)\n          : this.fill;\n      }\n    },\n\n    /**\n     * @private\n     * Sets line dash\n     * @param {CanvasRenderingContext2D} ctx Context to set the dash line on\n     * @param {Array} dashArray array representing dashes\n     * @param {Function} alternative function to call if browaser does not support lineDash\n     */\n    _setLineDash: function(ctx, dashArray, alternative) {\n      if (!dashArray) {\n        return;\n      }\n      // Spec requires the concatenation of two copies the dash list when the number of elements is odd\n      if (1 & dashArray.length) {\n        dashArray.push.apply(dashArray, dashArray);\n      }\n      if (supportsLineDash) {\n        ctx.setLineDash(dashArray);\n      }\n      else {\n        alternative && alternative(ctx);\n      }\n    },\n\n    /**\n     * Renders controls and borders for the object\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Boolean} [noTransform] When true, context is not transformed\n     */\n    _renderControls: function(ctx, noTransform) {\n      if (!this.active || noTransform\n          || (this.group && this.group !== this.canvas.getActiveGroup())) {\n        return;\n      }\n\n      var vpt = this.getViewportTransform(),\n          matrix = this.calcTransformMatrix(),\n          options;\n      matrix = fabric.util.multiplyTransformMatrices(vpt, matrix);\n      options = fabric.util.qrDecompose(matrix);\n\n      ctx.save();\n      ctx.translate(options.translateX, options.translateY);\n      ctx.lineWidth = 1 * this.borderScaleFactor;\n      if (!this.group) {\n        ctx.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1;\n      }\n      if (this.group && this.group === this.canvas.getActiveGroup()) {\n        ctx.rotate(degreesToRadians(options.angle));\n        this.drawBordersInGroup(ctx, options);\n      }\n      else {\n        ctx.rotate(degreesToRadians(this.angle));\n        this.drawBorders(ctx);\n      }\n      this.drawControls(ctx);\n      ctx.restore();\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _setShadow: function(ctx) {\n      if (!this.shadow) {\n        return;\n      }\n\n      var multX = (this.canvas && this.canvas.viewportTransform[0]) || 1,\n          multY = (this.canvas && this.canvas.viewportTransform[3]) || 1,\n          scaling = this.getObjectScaling();\n      if (this.canvas && this.canvas._isRetinaScaling()) {\n        multX *= fabric.devicePixelRatio;\n        multY *= fabric.devicePixelRatio;\n      }\n      ctx.shadowColor = this.shadow.color;\n      ctx.shadowBlur = this.shadow.blur * (multX + multY) * (scaling.scaleX + scaling.scaleY) / 4;\n      ctx.shadowOffsetX = this.shadow.offsetX * multX * scaling.scaleX;\n      ctx.shadowOffsetY = this.shadow.offsetY * multY * scaling.scaleY;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _removeShadow: function(ctx) {\n      if (!this.shadow) {\n        return;\n      }\n\n      ctx.shadowColor = '';\n      ctx.shadowBlur = ctx.shadowOffsetX = ctx.shadowOffsetY = 0;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderFill: function(ctx) {\n      if (!this.fill) {\n        return;\n      }\n\n      ctx.save();\n      if (this.fill.gradientTransform) {\n        var g = this.fill.gradientTransform;\n        ctx.transform.apply(ctx, g);\n      }\n      if (this.fill.toLive) {\n        ctx.translate(\n          -this.width / 2 + this.fill.offsetX || 0,\n          -this.height / 2 + this.fill.offsetY || 0);\n      }\n      if (this.fillRule === 'evenodd') {\n        ctx.fill('evenodd');\n      }\n      else {\n        ctx.fill();\n      }\n      ctx.restore();\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderStroke: function(ctx) {\n      if (!this.stroke || this.strokeWidth === 0) {\n        return;\n      }\n\n      if (this.shadow && !this.shadow.affectStroke) {\n        this._removeShadow(ctx);\n      }\n\n      ctx.save();\n\n      this._setLineDash(ctx, this.strokeDashArray, this._renderDashedStroke);\n      if (this.stroke.gradientTransform) {\n        var g = this.stroke.gradientTransform;\n        ctx.transform.apply(ctx, g);\n      }\n      if (this.stroke.toLive) {\n        ctx.translate(\n          -this.width / 2 + this.stroke.offsetX || 0,\n          -this.height / 2 + this.stroke.offsetY || 0);\n      }\n      ctx.stroke();\n      ctx.restore();\n    },\n\n    /**\n     * Clones an instance, some objects are async, so using callback method will work for every object.\n     * Using the direct return does not work for images and groups.\n     * @param {Function} callback Callback is invoked with a clone as a first argument\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {fabric.Object} clone of an instance\n     */\n    clone: function(callback, propertiesToInclude) {\n      if (this.constructor.fromObject) {\n        return this.constructor.fromObject(this.toObject(propertiesToInclude), callback);\n      }\n      return new fabric.Object(this.toObject(propertiesToInclude));\n    },\n\n    /**\n     * Creates an instance of fabric.Image out of an object\n     * @param {Function} callback callback, invoked with an instance as a first argument\n     * @param {Object} [options] for clone as image, passed to toDataURL\n     * @param {Boolean} [options.enableRetinaScaling] enable retina scaling for the cloned image\n     * @return {fabric.Object} thisArg\n     */\n    cloneAsImage: function(callback, options) {\n      var dataUrl = this.toDataURL(options);\n      fabric.util.loadImage(dataUrl, function(img) {\n        if (callback) {\n          callback(new fabric.Image(img));\n        }\n      });\n      return this;\n    },\n\n    /**\n     * Converts an object into a data-url-like string\n     * @param {Object} options Options object\n     * @param {String} [options.format=png] The format of the output image. Either \"jpeg\" or \"png\"\n     * @param {Number} [options.quality=1] Quality level (0..1). Only used for jpeg.\n     * @param {Number} [options.multiplier=1] Multiplier to scale by\n     * @param {Number} [options.left] Cropping left offset. Introduced in v1.2.14\n     * @param {Number} [options.top] Cropping top offset. Introduced in v1.2.14\n     * @param {Number} [options.width] Cropping width. Introduced in v1.2.14\n     * @param {Number} [options.height] Cropping height. Introduced in v1.2.14\n     * @param {Boolean} [options.enableRetina] Enable retina scaling for clone image. Introduce in 1.6.4\n     * @return {String} Returns a data: URL containing a representation of the object in the format specified by options.format\n     */\n    toDataURL: function(options) {\n      options || (options = { });\n\n      var el = fabric.util.createCanvasElement(),\n          boundingRect = this.getBoundingRect();\n\n      el.width = boundingRect.width;\n      el.height = boundingRect.height;\n      fabric.util.wrapElement(el, 'div');\n      var canvas = new fabric.StaticCanvas(el, { enableRetinaScaling: options.enableRetinaScaling });\n      // to avoid common confusion https://github.com/kangax/fabric.js/issues/806\n      if (options.format === 'jpg') {\n        options.format = 'jpeg';\n      }\n\n      if (options.format === 'jpeg') {\n        canvas.backgroundColor = '#fff';\n      }\n\n      var origParams = {\n        active: this.get('active'),\n        left: this.getLeft(),\n        top: this.getTop()\n      };\n\n      this.set('active', false);\n      this.setPositionByOrigin(new fabric.Point(canvas.getWidth() / 2, canvas.getHeight() / 2), 'center', 'center');\n\n      var originalCanvas = this.canvas;\n      canvas.add(this);\n      var data = canvas.toDataURL(options);\n\n      this.set(origParams).setCoords();\n      this.canvas = originalCanvas;\n\n      canvas.dispose();\n      canvas = null;\n\n      return data;\n    },\n\n    /**\n     * Returns true if specified type is identical to the type of an instance\n     * @param {String} type Type to check against\n     * @return {Boolean}\n     */\n    isType: function(type) {\n      return this.type === type;\n    },\n\n    /**\n     * Returns complexity of an instance\n     * @return {Number} complexity of this instance\n     */\n    complexity: function() {\n      return 0;\n    },\n\n    /**\n     * Returns a JSON representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} JSON\n     */\n    toJSON: function(propertiesToInclude) {\n      // delegate, not alias\n      return this.toObject(propertiesToInclude);\n    },\n\n    /**\n     * Sets gradient (fill or stroke) of an object\n     * <b>Backwards incompatibility note:</b> This method was named \"setGradientFill\" until v1.1.0\n     * @param {String} property Property name 'stroke' or 'fill'\n     * @param {Object} [options] Options object\n     * @param {String} [options.type] Type of gradient 'radial' or 'linear'\n     * @param {Number} [options.x1=0] x-coordinate of start point\n     * @param {Number} [options.y1=0] y-coordinate of start point\n     * @param {Number} [options.x2=0] x-coordinate of end point\n     * @param {Number} [options.y2=0] y-coordinate of end point\n     * @param {Number} [options.r1=0] Radius of start point (only for radial gradients)\n     * @param {Number} [options.r2=0] Radius of end point (only for radial gradients)\n     * @param {Object} [options.colorStops] Color stops object eg. {0: 'ff0000', 1: '000000'}\n     * @param {Object} [options.gradientTransform] transforMatrix for gradient\n     * @return {fabric.Object} thisArg\n     * @chainable\n     * @see {@link http://jsfiddle.net/fabricjs/58y8b/|jsFiddle demo}\n     * @example <caption>Set linear gradient</caption>\n     * object.setGradient('fill', {\n     *   type: 'linear',\n     *   x1: -object.width / 2,\n     *   y1: 0,\n     *   x2: object.width / 2,\n     *   y2: 0,\n     *   colorStops: {\n     *     0: 'red',\n     *     0.5: '#005555',\n     *     1: 'rgba(0,0,255,0.5)'\n     *   }\n     * });\n     * canvas.renderAll();\n     * @example <caption>Set radial gradient</caption>\n     * object.setGradient('fill', {\n     *   type: 'radial',\n     *   x1: 0,\n     *   y1: 0,\n     *   x2: 0,\n     *   y2: 0,\n     *   r1: object.width / 2,\n     *   r2: 10,\n     *   colorStops: {\n     *     0: 'red',\n     *     0.5: '#005555',\n     *     1: 'rgba(0,0,255,0.5)'\n     *   }\n     * });\n     * canvas.renderAll();\n     */\n    setGradient: function(property, options) {\n      options || (options = { });\n\n      var gradient = { colorStops: [] };\n\n      gradient.type = options.type || (options.r1 || options.r2 ? 'radial' : 'linear');\n      gradient.coords = {\n        x1: options.x1,\n        y1: options.y1,\n        x2: options.x2,\n        y2: options.y2\n      };\n\n      if (options.r1 || options.r2) {\n        gradient.coords.r1 = options.r1;\n        gradient.coords.r2 = options.r2;\n      }\n\n      options.gradientTransform && (gradient.gradientTransform = options.gradientTransform);\n\n      for (var position in options.colorStops) {\n        var color = new fabric.Color(options.colorStops[position]);\n        gradient.colorStops.push({\n          offset: position,\n          color: color.toRgb(),\n          opacity: color.getAlpha()\n        });\n      }\n\n      return this.set(property, fabric.Gradient.forObject(this, gradient));\n    },\n\n    /**\n     * Sets pattern fill of an object\n     * @param {Object} options Options object\n     * @param {(String|HTMLImageElement)} options.source Pattern source\n     * @param {String} [options.repeat=repeat] Repeat property of a pattern (one of repeat, repeat-x, repeat-y or no-repeat)\n     * @param {Number} [options.offsetX=0] Pattern horizontal offset from object's left/top corner\n     * @param {Number} [options.offsetY=0] Pattern vertical offset from object's left/top corner\n     * @return {fabric.Object} thisArg\n     * @chainable\n     * @see {@link http://jsfiddle.net/fabricjs/QT3pa/|jsFiddle demo}\n     * @example <caption>Set pattern</caption>\n     * fabric.util.loadImage('http://fabricjs.com/assets/escheresque_ste.png', function(img) {\n     *   object.setPatternFill({\n     *     source: img,\n     *     repeat: 'repeat'\n     *   });\n     *   canvas.renderAll();\n     * });\n     */\n    setPatternFill: function(options) {\n      return this.set('fill', new fabric.Pattern(options));\n    },\n\n    /**\n     * Sets {@link fabric.Object#shadow|shadow} of an object\n     * @param {Object|String} [options] Options object or string (e.g. \"2px 2px 10px rgba(0,0,0,0.2)\")\n     * @param {String} [options.color=rgb(0,0,0)] Shadow color\n     * @param {Number} [options.blur=0] Shadow blur\n     * @param {Number} [options.offsetX=0] Shadow horizontal offset\n     * @param {Number} [options.offsetY=0] Shadow vertical offset\n     * @return {fabric.Object} thisArg\n     * @chainable\n     * @see {@link http://jsfiddle.net/fabricjs/7gvJG/|jsFiddle demo}\n     * @example <caption>Set shadow with string notation</caption>\n     * object.setShadow('2px 2px 10px rgba(0,0,0,0.2)');\n     * canvas.renderAll();\n     * @example <caption>Set shadow with object notation</caption>\n     * object.setShadow({\n     *   color: 'red',\n     *   blur: 10,\n     *   offsetX: 20,\n     *   offsetY: 20\n     * });\n     * canvas.renderAll();\n     */\n    setShadow: function(options) {\n      return this.set('shadow', options ? new fabric.Shadow(options) : null);\n    },\n\n    /**\n     * Sets \"color\" of an instance (alias of `set('fill', &hellip;)`)\n     * @param {String} color Color value\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    setColor: function(color) {\n      this.set('fill', color);\n      return this;\n    },\n\n    /**\n     * Sets \"angle\" of an instance\n     * @param {Number} angle Angle value (in degrees)\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    setAngle: function(angle) {\n      var shouldCenterOrigin = (this.originX !== 'center' || this.originY !== 'center') && this.centeredRotation;\n\n      if (shouldCenterOrigin) {\n        this._setOriginToCenter();\n      }\n\n      this.set('angle', angle);\n\n      if (shouldCenterOrigin) {\n        this._resetOrigin();\n      }\n\n      return this;\n    },\n\n    /**\n     * Centers object horizontally on canvas to which it was added last.\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    centerH: function () {\n      this.canvas && this.canvas.centerObjectH(this);\n      return this;\n    },\n\n    /**\n     * Centers object horizontally on current viewport of canvas to which it was added last.\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    viewportCenterH: function () {\n      this.canvas && this.canvas.viewportCenterObjectH(this);\n      return this;\n    },\n\n    /**\n     * Centers object vertically on canvas to which it was added last.\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    centerV: function () {\n      this.canvas && this.canvas.centerObjectV(this);\n      return this;\n    },\n\n    /**\n     * Centers object vertically on current viewport of canvas to which it was added last.\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    viewportCenterV: function () {\n      this.canvas && this.canvas.viewportCenterObjectV(this);\n      return this;\n    },\n\n    /**\n     * Centers object vertically and horizontally on canvas to which is was added last\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    center: function () {\n      this.canvas && this.canvas.centerObject(this);\n      return this;\n    },\n\n    /**\n     * Centers object on current viewport of canvas to which it was added last.\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    viewportCenter: function () {\n      this.canvas && this.canvas.viewportCenterObject(this);\n      return this;\n    },\n\n    /**\n     * Removes object from canvas to which it was added last\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    remove: function() {\n      this.canvas && this.canvas.remove(this);\n      return this;\n    },\n\n    /**\n     * Returns coordinates of a pointer relative to an object\n     * @param {Event} e Event to operate upon\n     * @param {Object} [pointer] Pointer to operate upon (instead of event)\n     * @return {Object} Coordinates of a pointer (x, y)\n     */\n    getLocalPointer: function(e, pointer) {\n      pointer = pointer || this.canvas.getPointer(e);\n      var pClicked = new fabric.Point(pointer.x, pointer.y),\n          objectLeftTop = this._getLeftTopCoords();\n      if (this.angle) {\n        pClicked = fabric.util.rotatePoint(\n          pClicked, objectLeftTop, fabric.util.degreesToRadians(-this.angle));\n      }\n      return {\n        x: pClicked.x - objectLeftTop.x,\n        y: pClicked.y - objectLeftTop.y\n      };\n    },\n\n    /**\n     * Sets canvas globalCompositeOperation for specific object\n     * custom composition operation for the particular object can be specifed using globalCompositeOperation property\n     * @param {CanvasRenderingContext2D} ctx Rendering canvas context\n     */\n    _setupCompositeOperation: function (ctx) {\n      if (this.globalCompositeOperation) {\n        ctx.globalCompositeOperation = this.globalCompositeOperation;\n      }\n    }\n  });\n\n  fabric.util.createAccessors(fabric.Object);\n\n  /**\n   * Alias for {@link fabric.Object.prototype.setAngle}\n   * @alias rotate -> setAngle\n   * @memberOf fabric.Object\n   */\n  fabric.Object.prototype.rotate = fabric.Object.prototype.setAngle;\n\n  extend(fabric.Object.prototype, fabric.Observable);\n\n  /**\n   * Defines the number of fraction digits to use when serializing object values.\n   * You can use it to increase/decrease precision of such values like left, top, scaleX, scaleY, etc.\n   * @static\n   * @memberOf fabric.Object\n   * @constant\n   * @type Number\n   */\n  fabric.Object.NUM_FRACTION_DIGITS = 2;\n\n  /**\n   * Unique id used internally when creating SVG elements\n   * @static\n   * @memberOf fabric.Object\n   * @type Number\n   */\n  fabric.Object.__uid = 0;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function() {\n\n  var degreesToRadians = fabric.util.degreesToRadians,\n      originXOffset = {\n        left: -0.5,\n        center: 0,\n        right: 0.5\n      },\n      originYOffset = {\n        top: -0.5,\n        center: 0,\n        bottom: 0.5\n      };\n\n  fabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n\n    /**\n     * Translates the coordinates from origin to center coordinates (based on the object's dimensions)\n     * @param {fabric.Point} point The point which corresponds to the originX and originY params\n     * @param {String} fromOriginX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} fromOriginY Vertical origin: 'top', 'center' or 'bottom'\n     * @param {String} toOriginX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} toOriginY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {fabric.Point}\n     */\n    translateToGivenOrigin: function(point, fromOriginX, fromOriginY, toOriginX, toOriginY) {\n      var x = point.x,\n          y = point.y,\n          offsetX, offsetY, dim;\n\n      if (typeof fromOriginX === 'string') {\n        fromOriginX = originXOffset[fromOriginX];\n      }\n      else {\n        fromOriginX -= 0.5;\n      }\n\n      if (typeof toOriginX === 'string') {\n        toOriginX = originXOffset[toOriginX];\n      }\n      else {\n        toOriginX -= 0.5;\n      }\n\n      offsetX = toOriginX - fromOriginX;\n\n      if (typeof fromOriginY === 'string') {\n        fromOriginY = originYOffset[fromOriginY];\n      }\n      else {\n        fromOriginY -= 0.5;\n      }\n\n      if (typeof toOriginY === 'string') {\n        toOriginY = originYOffset[toOriginY];\n      }\n      else {\n        toOriginY -= 0.5;\n      }\n\n      offsetY = toOriginY - fromOriginY;\n\n      if (offsetX || offsetY) {\n        dim = this._getTransformedDimensions();\n        x = point.x + offsetX * dim.x;\n        y = point.y + offsetY * dim.y;\n      }\n\n      return new fabric.Point(x, y);\n    },\n\n    /**\n     * Translates the coordinates from origin to center coordinates (based on the object's dimensions)\n     * @param {fabric.Point} point The point which corresponds to the originX and originY params\n     * @param {String} originX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} originY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {fabric.Point}\n     */\n    translateToCenterPoint: function(point, originX, originY) {\n      var p = this.translateToGivenOrigin(point, originX, originY, 'center', 'center');\n      if (this.angle) {\n        return fabric.util.rotatePoint(p, point, degreesToRadians(this.angle));\n      }\n      return p;\n    },\n\n    /**\n     * Translates the coordinates from center to origin coordinates (based on the object's dimensions)\n     * @param {fabric.Point} center The point which corresponds to center of the object\n     * @param {String} originX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} originY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {fabric.Point}\n     */\n    translateToOriginPoint: function(center, originX, originY) {\n      var p = this.translateToGivenOrigin(center, 'center', 'center', originX, originY);\n      if (this.angle) {\n        return fabric.util.rotatePoint(p, center, degreesToRadians(this.angle));\n      }\n      return p;\n    },\n\n    /**\n     * Returns the real center coordinates of the object\n     * @return {fabric.Point}\n     */\n    getCenterPoint: function() {\n      var leftTop = new fabric.Point(this.left, this.top);\n      return this.translateToCenterPoint(leftTop, this.originX, this.originY);\n    },\n\n    /**\n     * Returns the coordinates of the object based on center coordinates\n     * @param {fabric.Point} point The point which corresponds to the originX and originY params\n     * @return {fabric.Point}\n     */\n    // getOriginPoint: function(center) {\n    //   return this.translateToOriginPoint(center, this.originX, this.originY);\n    // },\n\n    /**\n     * Returns the coordinates of the object as if it has a different origin\n     * @param {String} originX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} originY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {fabric.Point}\n     */\n    getPointByOrigin: function(originX, originY) {\n      var center = this.getCenterPoint();\n      return this.translateToOriginPoint(center, originX, originY);\n    },\n\n    /**\n     * Returns the point in local coordinates\n     * @param {fabric.Point} point The point relative to the global coordinate system\n     * @param {String} originX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} originY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {fabric.Point}\n     */\n    toLocalPoint: function(point, originX, originY) {\n      var center = this.getCenterPoint(),\n          p, p2;\n\n      if (typeof originX !== 'undefined' && typeof originY !== 'undefined' ) {\n        p = this.translateToGivenOrigin(center, 'center', 'center', originX, originY);\n      }\n      else {\n        p = new fabric.Point(this.left, this.top);\n      }\n\n      p2 = new fabric.Point(point.x, point.y);\n      if (this.angle) {\n        p2 = fabric.util.rotatePoint(p2, center, -degreesToRadians(this.angle));\n      }\n      return p2.subtractEquals(p);\n    },\n\n    /**\n     * Returns the point in global coordinates\n     * @param {fabric.Point} The point relative to the local coordinate system\n     * @return {fabric.Point}\n     */\n    // toGlobalPoint: function(point) {\n    //   return fabric.util.rotatePoint(point, this.getCenterPoint(), degreesToRadians(this.angle)).addEquals(new fabric.Point(this.left, this.top));\n    // },\n\n    /**\n     * Sets the position of the object taking into consideration the object's origin\n     * @param {fabric.Point} pos The new position of the object\n     * @param {String} originX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} originY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {void}\n     */\n    setPositionByOrigin: function(pos, originX, originY) {\n      var center = this.translateToCenterPoint(pos, originX, originY),\n          position = this.translateToOriginPoint(center, this.originX, this.originY);\n\n      this.set('left', position.x);\n      this.set('top', position.y);\n    },\n\n    /**\n     * @param {String} to One of 'left', 'center', 'right'\n     */\n    adjustPosition: function(to) {\n      var angle = degreesToRadians(this.angle),\n          hypotFull = this.getWidth(),\n          xFull = Math.cos(angle) * hypotFull,\n          yFull = Math.sin(angle) * hypotFull,\n          offsetFrom, offsetTo;\n\n      //TODO: this function does not consider mixed situation like top, center.\n      if (typeof this.originX === 'string') {\n        offsetFrom = originXOffset[this.originX];\n      }\n      else {\n        offsetFrom = this.originX - 0.5;\n      }\n      if (typeof to === 'string') {\n        offsetTo = originXOffset[to];\n      }\n      else {\n        offsetTo = to - 0.5;\n      }\n      this.left += xFull * (offsetTo - offsetFrom);\n      this.top += yFull * (offsetTo - offsetFrom);\n      this.setCoords();\n      this.originX = to;\n    },\n\n    /**\n     * Sets the origin/position of the object to it's center point\n     * @private\n     * @return {void}\n     */\n    _setOriginToCenter: function() {\n      this._originalOriginX = this.originX;\n      this._originalOriginY = this.originY;\n\n      var center = this.getCenterPoint();\n\n      this.originX = 'center';\n      this.originY = 'center';\n\n      this.left = center.x;\n      this.top = center.y;\n    },\n\n    /**\n     * Resets the origin/position of the object to it's original origin\n     * @private\n     * @return {void}\n     */\n    _resetOrigin: function() {\n      var originPoint = this.translateToOriginPoint(\n        this.getCenterPoint(),\n        this._originalOriginX,\n        this._originalOriginY);\n\n      this.originX = this._originalOriginX;\n      this.originY = this._originalOriginY;\n\n      this.left = originPoint.x;\n      this.top = originPoint.y;\n\n      this._originalOriginX = null;\n      this._originalOriginY = null;\n    },\n\n    /**\n     * @private\n     */\n    _getLeftTopCoords: function() {\n      return this.translateToOriginPoint(this.getCenterPoint(), 'left', 'top');\n    }\n  });\n\n})();\n\n\n(function() {\n\n  function getCoords(oCoords) {\n    return [\n      new fabric.Point(oCoords.tl.x, oCoords.tl.y),\n      new fabric.Point(oCoords.tr.x, oCoords.tr.y),\n      new fabric.Point(oCoords.br.x, oCoords.br.y),\n      new fabric.Point(oCoords.bl.x, oCoords.bl.y)\n    ];\n  }\n\n  var degreesToRadians = fabric.util.degreesToRadians,\n      multiplyMatrices = fabric.util.multiplyTransformMatrices;\n\n  fabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n\n    /**\n     * Object containing coordinates of object's controls\n     * @type Object\n     * @default\n     */\n    oCoords: null,\n\n    /**\n     * Checks if object intersects with an area formed by 2 points\n     * @param {Object} pointTL top-left point of area\n     * @param {Object} pointBR bottom-right point of area\n     * @return {Boolean} true if object intersects with an area formed by 2 points\n     */\n    intersectsWithRect: function(pointTL, pointBR) {\n      var oCoords = getCoords(this.oCoords),\n          intersection = fabric.Intersection.intersectPolygonRectangle(\n            oCoords,\n            pointTL,\n            pointBR\n          );\n      return intersection.status === 'Intersection';\n    },\n\n    /**\n     * Checks if object intersects with another object\n     * @param {Object} other Object to test\n     * @return {Boolean} true if object intersects with another object\n     */\n    intersectsWithObject: function(other) {\n      var intersection = fabric.Intersection.intersectPolygonPolygon(\n            getCoords(this.oCoords),\n            getCoords(other.oCoords)\n          );\n\n      return intersection.status === 'Intersection'\n        || other.isContainedWithinObject(this)\n        || this.isContainedWithinObject(other);\n    },\n\n    /**\n     * Checks if object is fully contained within area of another object\n     * @param {Object} other Object to test\n     * @return {Boolean} true if object is fully contained within area of another object\n     */\n    isContainedWithinObject: function(other) {\n      var points = getCoords(this.oCoords),\n          i = 0;\n      for (; i < 4; i++) {\n        if (!other.containsPoint(points[i])) {\n          return false;\n        }\n      }\n      return true;\n    },\n\n    /**\n     * Checks if object is fully contained within area formed by 2 points\n     * @param {Object} pointTL top-left point of area\n     * @param {Object} pointBR bottom-right point of area\n     * @return {Boolean} true if object is fully contained within area formed by 2 points\n     */\n    isContainedWithinRect: function(pointTL, pointBR) {\n      var boundingRect = this.getBoundingRect();\n\n      return (\n        boundingRect.left >= pointTL.x &&\n        boundingRect.left + boundingRect.width <= pointBR.x &&\n        boundingRect.top >= pointTL.y &&\n        boundingRect.top + boundingRect.height <= pointBR.y\n      );\n    },\n\n    /**\n     * Checks if point is inside the object\n     * @param {fabric.Point} point Point to check against\n     * @return {Boolean} true if point is inside the object\n     */\n    containsPoint: function(point) {\n      if (!this.oCoords) {\n        this.setCoords();\n      }\n      var lines = this._getImageLines(this.oCoords),\n          xPoints = this._findCrossPoints(point, lines);\n\n      // if xPoints is odd then point is inside the object\n      return (xPoints !== 0 && xPoints % 2 === 1);\n    },\n\n    /**\n     * Method that returns an object with the object edges in it, given the coordinates of the corners\n     * @private\n     * @param {Object} oCoords Coordinates of the object corners\n     */\n    _getImageLines: function(oCoords) {\n      return {\n        topline: {\n          o: oCoords.tl,\n          d: oCoords.tr\n        },\n        rightline: {\n          o: oCoords.tr,\n          d: oCoords.br\n        },\n        bottomline: {\n          o: oCoords.br,\n          d: oCoords.bl\n        },\n        leftline: {\n          o: oCoords.bl,\n          d: oCoords.tl\n        }\n      };\n    },\n\n    /**\n     * Helper method to determine how many cross points are between the 4 object edges\n     * and the horizontal line determined by a point on canvas\n     * @private\n     * @param {fabric.Point} point Point to check\n     * @param {Object} oCoords Coordinates of the object being evaluated\n     */\n     // remove yi, not used but left code here just in case.\n    _findCrossPoints: function(point, oCoords) {\n      var b1, b2, a1, a2, xi, // yi,\n          xcount = 0,\n          iLine;\n\n      for (var lineKey in oCoords) {\n        iLine = oCoords[lineKey];\n        // optimisation 1: line below point. no cross\n        if ((iLine.o.y < point.y) && (iLine.d.y < point.y)) {\n          continue;\n        }\n        // optimisation 2: line above point. no cross\n        if ((iLine.o.y >= point.y) && (iLine.d.y >= point.y)) {\n          continue;\n        }\n        // optimisation 3: vertical line case\n        if ((iLine.o.x === iLine.d.x) && (iLine.o.x >= point.x)) {\n          xi = iLine.o.x;\n          // yi = point.y;\n        }\n        // calculate the intersection point\n        else {\n          b1 = 0;\n          b2 = (iLine.d.y - iLine.o.y) / (iLine.d.x - iLine.o.x);\n          a1 = point.y - b1 * point.x;\n          a2 = iLine.o.y - b2 * iLine.o.x;\n\n          xi = -(a1 - a2) / (b1 - b2);\n          // yi = a1 + b1 * xi;\n        }\n        // dont count xi < point.x cases\n        if (xi >= point.x) {\n          xcount += 1;\n        }\n        // optimisation 4: specific for square images\n        if (xcount === 2) {\n          break;\n        }\n      }\n      return xcount;\n    },\n\n    /**\n     * Returns width of an object's bounding rectangle\n     * @deprecated since 1.0.4\n     * @return {Number} width value\n     */\n    getBoundingRectWidth: function() {\n      return this.getBoundingRect().width;\n    },\n\n    /**\n     * Returns height of an object's bounding rectangle\n     * @deprecated since 1.0.4\n     * @return {Number} height value\n     */\n    getBoundingRectHeight: function() {\n      return this.getBoundingRect().height;\n    },\n\n    /**\n     * Returns coordinates of object's bounding rectangle (left, top, width, height)\n     * the box is intented as aligned to axis of canvas.\n     * @param {Boolean} ignoreVpt bounding box will not be affected by viewportTransform\n     * @return {Object} Object with left, top, width, height properties\n     */\n    getBoundingRect: function(ignoreVpt) {\n      var coords = this.calcCoords(ignoreVpt);\n      return fabric.util.makeBoundingBoxFromPoints([\n        coords.tl,\n        coords.tr,\n        coords.br,\n        coords.bl\n      ]);\n    },\n\n    /**\n     * Returns width of an object bounding box counting transformations\n     * @return {Number} width value\n     */\n    getWidth: function() {\n      return this._getTransformedDimensions().x;\n    },\n\n    /**\n     * Returns height of an object bounding box counting transformations\n     * to be renamed in 2.0\n     * @return {Number} height value\n     */\n    getHeight: function() {\n      return this._getTransformedDimensions().y;\n    },\n\n    /**\n     * Makes sure the scale is valid and modifies it if necessary\n     * @private\n     * @param {Number} value\n     * @return {Number}\n     */\n    _constrainScale: function(value) {\n      if (Math.abs(value) < this.minScaleLimit) {\n        if (value < 0) {\n          return -this.minScaleLimit;\n        }\n        else {\n          return this.minScaleLimit;\n        }\n      }\n      return value;\n    },\n\n    /**\n     * Scales an object (equally by x and y)\n     * @param {Number} value Scale factor\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    scale: function(value) {\n      value = this._constrainScale(value);\n\n      if (value < 0) {\n        this.flipX = !this.flipX;\n        this.flipY = !this.flipY;\n        value *= -1;\n      }\n\n      this.scaleX = value;\n      this.scaleY = value;\n      return this.setCoords();\n    },\n\n    /**\n     * Scales an object to a given width, with respect to bounding box (scaling by x/y equally)\n     * @param {Number} value New width value\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    scaleToWidth: function(value) {\n      // adjust to bounding rect factor so that rotated shapes would fit as well\n      var boundingRectFactor = this.getBoundingRect().width / this.getWidth();\n      return this.scale(value / this.width / boundingRectFactor);\n    },\n\n    /**\n     * Scales an object to a given height, with respect to bounding box (scaling by x/y equally)\n     * @param {Number} value New height value\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    scaleToHeight: function(value) {\n      // adjust to bounding rect factor so that rotated shapes would fit as well\n      var boundingRectFactor = this.getBoundingRect().height / this.getHeight();\n      return this.scale(value / this.height / boundingRectFactor);\n    },\n\n    /**\n     * Calculate and returns the .coords of an object.\n     * @return {Object} Object with tl, tr, br, bl ....\n     * @chainable\n     */\n    calcCoords: function(ignoreVpt) {\n      var theta = degreesToRadians(this.angle),\n          vpt = this.getViewportTransform(),\n          dim = ignoreVpt ? this._getTransformedDimensions() : this._calculateCurrentDimensions(),\n          currentWidth = dim.x, currentHeight = dim.y,\n          sinTh = Math.sin(theta),\n          cosTh = Math.cos(theta),\n          _angle = currentWidth > 0 ? Math.atan(currentHeight / currentWidth) : 0,\n          _hypotenuse = (currentWidth / Math.cos(_angle)) / 2,\n          offsetX = Math.cos(_angle + theta) * _hypotenuse,\n          offsetY = Math.sin(_angle + theta) * _hypotenuse,\n          center = this.getCenterPoint(),\n          // offset added for rotate and scale actions\n          coords = ignoreVpt ? center : fabric.util.transformPoint(center, vpt),\n          tl  = new fabric.Point(coords.x - offsetX, coords.y - offsetY),\n          tr  = new fabric.Point(tl.x + (currentWidth * cosTh), tl.y + (currentWidth * sinTh)),\n          bl  = new fabric.Point(tl.x - (currentHeight * sinTh), tl.y + (currentHeight * cosTh)),\n          br  = new fabric.Point(coords.x + offsetX, coords.y + offsetY);\n      if (!ignoreVpt) {\n        var ml  = new fabric.Point((tl.x + bl.x) / 2, (tl.y + bl.y) / 2),\n            mt  = new fabric.Point((tr.x + tl.x) / 2, (tr.y + tl.y) / 2),\n            mr  = new fabric.Point((br.x + tr.x) / 2, (br.y + tr.y) / 2),\n            mb  = new fabric.Point((br.x + bl.x) / 2, (br.y + bl.y) / 2),\n            mtr = new fabric.Point(mt.x + sinTh * this.rotatingPointOffset, mt.y - cosTh * this.rotatingPointOffset);\n      }\n\n      // debugging\n\n      /* setTimeout(function() {\n         canvas.contextTop.fillStyle = 'green';\n         canvas.contextTop.fillRect(mb.x, mb.y, 3, 3);\n         canvas.contextTop.fillRect(bl.x, bl.y, 3, 3);\n         canvas.contextTop.fillRect(br.x, br.y, 3, 3);\n         canvas.contextTop.fillRect(tl.x, tl.y, 3, 3);\n         canvas.contextTop.fillRect(tr.x, tr.y, 3, 3);\n         canvas.contextTop.fillRect(ml.x, ml.y, 3, 3);\n         canvas.contextTop.fillRect(mr.x, mr.y, 3, 3);\n         canvas.contextTop.fillRect(mt.x, mt.y, 3, 3);\n         canvas.contextTop.fillRect(mtr.x, mtr.y, 3, 3);\n       }, 50); */\n\n      var coords = {\n        // corners\n        tl: tl, tr: tr, br: br, bl: bl,\n      };\n      if (!ignoreVpt) {\n        // middle\n        coords.ml = ml;\n        coords.mt = mt;\n        coords.mr = mr;\n        coords.mb = mb;\n        // rotating point\n        coords.mtr = mtr;\n      }\n      return coords;\n    },\n\n    /**\n     * Sets corner position coordinates based on current angle, width and height\n     * See https://github.com/kangax/fabric.js/wiki/When-to-call-setCoords\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    setCoords: function(ignoreZoom, skipAbsolute) {\n      this.oCoords = this.calcCoords(ignoreZoom);\n      if (!skipAbsolute && !ignoreZoom) {\n        this.absoluteCoords = this.calcCoords(true);\n      }\n\n      // set coordinates of the draggable boxes in the corners used to scale/rotate the image\n      ignoreZoom || this._setCornerCoords && this._setCornerCoords();\n\n      return this;\n    },\n\n    /*\n     * calculate rotation matrix of an object\n     * @return {Array} rotation matrix for the object\n     */\n    _calcRotateMatrix: function() {\n      if (this.angle) {\n        var theta = degreesToRadians(this.angle), cos = Math.cos(theta), sin = Math.sin(theta);\n        return [cos, sin, -sin, cos, 0, 0];\n      }\n      return [1, 0, 0, 1, 0, 0];\n    },\n\n    /*\n     * calculate trasform Matrix that represent current transformation from\n     * object properties.\n     * @return {Array} matrix Transform Matrix for the object\n     */\n    calcTransformMatrix: function() {\n      var center = this.getCenterPoint(),\n          translateMatrix = [1, 0, 0, 1, center.x, center.y],\n          rotateMatrix = this._calcRotateMatrix(),\n          dimensionMatrix = this._calcDimensionsTransformMatrix(this.skewX, this.skewY, true),\n          matrix = this.group ? this.group.calcTransformMatrix() : [1, 0, 0, 1, 0, 0];\n      matrix = multiplyMatrices(matrix, translateMatrix);\n      matrix = multiplyMatrices(matrix, rotateMatrix);\n      matrix = multiplyMatrices(matrix, dimensionMatrix);\n      return matrix;\n    },\n\n    _calcDimensionsTransformMatrix: function(skewX, skewY, flipping) {\n      var skewMatrixX = [1, 0, Math.tan(degreesToRadians(skewX)), 1],\n          skewMatrixY = [1, Math.tan(degreesToRadians(skewY)), 0, 1],\n          scaleX = this.scaleX * (flipping && this.flipX ? -1 : 1),\n          scaleY = this.scaleY * (flipping && this.flipY ? -1 : 1),\n          scaleMatrix = [scaleX, 0, 0, scaleY],\n          m = multiplyMatrices(scaleMatrix, skewMatrixX, true);\n      return multiplyMatrices(m, skewMatrixY, true);\n    }\n  });\n})();\n\n\nfabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n\n  /**\n   * Moves an object to the bottom of the stack of drawn objects\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  sendToBack: function() {\n    if (this.group) {\n      fabric.StaticCanvas.prototype.sendToBack.call(this.group, this);\n    }\n    else {\n      this.canvas.sendToBack(this);\n    }\n    return this;\n  },\n\n  /**\n   * Moves an object to the top of the stack of drawn objects\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  bringToFront: function() {\n    if (this.group) {\n      fabric.StaticCanvas.prototype.bringToFront.call(this.group, this);\n    }\n    else {\n      this.canvas.bringToFront(this);\n    }\n    return this;\n  },\n\n  /**\n   * Moves an object down in stack of drawn objects\n   * @param {Boolean} [intersecting] If `true`, send object behind next lower intersecting object\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  sendBackwards: function(intersecting) {\n    if (this.group) {\n      fabric.StaticCanvas.prototype.sendBackwards.call(this.group, this, intersecting);\n    }\n    else {\n      this.canvas.sendBackwards(this, intersecting);\n    }\n    return this;\n  },\n\n  /**\n   * Moves an object up in stack of drawn objects\n   * @param {Boolean} [intersecting] If `true`, send object in front of next upper intersecting object\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  bringForward: function(intersecting) {\n    if (this.group) {\n      fabric.StaticCanvas.prototype.bringForward.call(this.group, this, intersecting);\n    }\n    else {\n      this.canvas.bringForward(this, intersecting);\n    }\n    return this;\n  },\n\n  /**\n   * Moves an object to specified level in stack of drawn objects\n   * @param {Number} index New position of object\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  moveTo: function(index) {\n    if (this.group) {\n      fabric.StaticCanvas.prototype.moveTo.call(this.group, this, index);\n    }\n    else {\n      this.canvas.moveTo(this, index);\n    }\n    return this;\n  }\n});\n\n\n/* _TO_SVG_START_ */\n(function() {\n\n  function getSvgColorString(prop, value) {\n    if (!value) {\n      return prop + ': none; ';\n    }\n    else if (value.toLive) {\n      return prop + ': url(#SVGID_' + value.id + '); ';\n    }\n    else {\n      var color = new fabric.Color(value),\n          str = prop + ': ' + color.toRgb() + '; ',\n          opacity = color.getAlpha();\n      if (opacity !== 1) {\n        //change the color in rgb + opacity\n        str += prop + '-opacity: ' + opacity.toString() + '; ';\n      }\n      return str;\n    }\n  }\n\n  fabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n    /**\n     * Returns styles-string for svg-export\n     * @param {Boolean} skipShadow a boolean to skip shadow filter output\n     * @return {String}\n     */\n    getSvgStyles: function(skipShadow) {\n\n      var fillRule = this.fillRule,\n          strokeWidth = this.strokeWidth ? this.strokeWidth : '0',\n          strokeDashArray = this.strokeDashArray ? this.strokeDashArray.join(' ') : 'none',\n          strokeLineCap = this.strokeLineCap ? this.strokeLineCap : 'butt',\n          strokeLineJoin = this.strokeLineJoin ? this.strokeLineJoin : 'miter',\n          strokeMiterLimit = this.strokeMiterLimit ? this.strokeMiterLimit : '4',\n          opacity = typeof this.opacity !== 'undefined' ? this.opacity : '1',\n          visibility = this.visible ? '' : ' visibility: hidden;',\n          filter = skipShadow ? '' : this.getSvgFilter(),\n          fill = getSvgColorString('fill', this.fill),\n          stroke = getSvgColorString('stroke', this.stroke);\n\n      return [\n        stroke,\n        'stroke-width: ', strokeWidth, '; ',\n        'stroke-dasharray: ', strokeDashArray, '; ',\n        'stroke-linecap: ', strokeLineCap, '; ',\n        'stroke-linejoin: ', strokeLineJoin, '; ',\n        'stroke-miterlimit: ', strokeMiterLimit, '; ',\n        fill,\n        'fill-rule: ', fillRule, '; ',\n        'opacity: ', opacity, ';',\n        filter,\n        visibility\n      ].join('');\n    },\n\n    /**\n     * Returns filter for svg shadow\n     * @return {String}\n     */\n    getSvgFilter: function() {\n      return this.shadow ? 'filter: url(#SVGID_' + this.shadow.id + ');' : '';\n    },\n\n    /**\n     * Returns id attribute for svg output\n     * @return {String}\n     */\n    getSvgId: function() {\n      return this.id ? 'id=\"' + this.id + '\" ' : '';\n    },\n\n    /**\n     * Returns transform-string for svg-export\n     * @return {String}\n     */\n    getSvgTransform: function() {\n      if (this.group && this.group.type === 'path-group') {\n        return '';\n      }\n      var toFixed = fabric.util.toFixed,\n          angle = this.getAngle(),\n          skewX = (this.getSkewX() % 360),\n          skewY = (this.getSkewY() % 360),\n          center = this.getCenterPoint(),\n\n          NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS,\n\n          translatePart = this.type === 'path-group' ? '' : 'translate(' +\n                            toFixed(center.x, NUM_FRACTION_DIGITS) +\n                            ' ' +\n                            toFixed(center.y, NUM_FRACTION_DIGITS) +\n                          ')',\n\n          anglePart = angle !== 0\n            ? (' rotate(' + toFixed(angle, NUM_FRACTION_DIGITS) + ')')\n            : '',\n\n          scalePart = (this.scaleX === 1 && this.scaleY === 1)\n            ? '' :\n            (' scale(' +\n              toFixed(this.scaleX, NUM_FRACTION_DIGITS) +\n              ' ' +\n              toFixed(this.scaleY, NUM_FRACTION_DIGITS) +\n            ')'),\n\n          skewXPart = skewX !== 0 ? ' skewX(' + toFixed(skewX, NUM_FRACTION_DIGITS) + ')' : '',\n\n          skewYPart = skewY !== 0 ? ' skewY(' + toFixed(skewY, NUM_FRACTION_DIGITS) + ')' : '',\n\n          addTranslateX = this.type === 'path-group' ? this.width : 0,\n\n          flipXPart = this.flipX ? ' matrix(-1 0 0 1 ' + addTranslateX + ' 0) ' : '',\n\n          addTranslateY = this.type === 'path-group' ? this.height : 0,\n\n          flipYPart = this.flipY ? ' matrix(1 0 0 -1 0 ' + addTranslateY + ')' : '';\n\n      return [\n        translatePart, anglePart, scalePart, flipXPart, flipYPart, skewXPart, skewYPart\n      ].join('');\n    },\n\n    /**\n     * Returns transform-string for svg-export from the transform matrix of single elements\n     * @return {String}\n     */\n    getSvgTransformMatrix: function() {\n      return this.transformMatrix ? ' matrix(' + this.transformMatrix.join(' ') + ') ' : '';\n    },\n\n    /**\n     * @private\n     */\n    _createBaseSVGMarkup: function() {\n      var markup = [];\n\n      if (this.fill && this.fill.toLive) {\n        markup.push(this.fill.toSVG(this, false));\n      }\n      if (this.stroke && this.stroke.toLive) {\n        markup.push(this.stroke.toSVG(this, false));\n      }\n      if (this.shadow) {\n        markup.push(this.shadow.toSVG(this));\n      }\n      return markup;\n    }\n  });\n})();\n/* _TO_SVG_END_ */\n\n\n(function() {\n\n  var extend = fabric.util.object.extend,\n      originalSet = 'stateProperties';\n\n  /*\n    Depends on `stateProperties`\n  */\n  function saveProps(origin, destination, props) {\n    var tmpObj = { }, deep = true;\n    props.forEach(function(prop) {\n      tmpObj[prop] = origin[prop];\n    });\n    extend(origin[destination], tmpObj, deep);\n  }\n\n  function _isEqual(origValue, currentValue, firstPass) {\n    if (!fabric.isLikelyNode && origValue instanceof Element) {\n      // avoid checking deep html elements\n      return origValue === currentValue;\n    }\n    else if (origValue instanceof Array) {\n      if (origValue.length !== currentValue.length) {\n        return false\n      }\n      for (var i = 0, len = origValue.length; i < len; i++) {\n        if (origValue[i] !== currentValue[i]) {\n          return false;\n        }\n      }\n      return true\n    }\n    else if (origValue && typeof origValue === 'object') {\n      if (!firstPass && Object.keys(origValue).length !== Object.keys(currentValue).length) {\n        return false;\n      }\n      for (var key in origValue) {\n        if (!_isEqual(origValue[key], currentValue[key])) {\n          return false;\n        }\n      }\n      return true;\n    }\n    else {\n      return origValue === currentValue;\n    }\n  }\n\n\n  fabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n\n    /**\n     * Returns true if object state (one of its state properties) was changed\n     * @param {String} [propertySet] optional name for the set of property we want to save\n     * @return {Boolean} true if instance' state has changed since `{@link fabric.Object#saveState}` was called\n     */\n    hasStateChanged: function(propertySet) {\n      propertySet = propertySet || originalSet;\n      propertySet = '_' + propertySet;\n      return !_isEqual(this[propertySet], this, true);\n    },\n\n    /**\n     * Saves state of an object\n     * @param {Object} [options] Object with additional `stateProperties` array to include when saving state\n     * @return {fabric.Object} thisArg\n     */\n    saveState: function(options) {\n      var propertySet = options && options.propertySet || originalSet,\n          destination = '_' + propertySet;\n      if (!this[destination]) {\n        return this.setupState(options);\n      }\n      saveProps(this, destination, this[propertySet]);\n      if (options && options.stateProperties) {\n        saveProps(this, destination, options.stateProperties);\n      }\n      return this;\n    },\n\n    /**\n     * Setups state of an object\n     * @param {Object} [options] Object with additional `stateProperties` array to include when saving state\n     * @return {fabric.Object} thisArg\n     */\n    setupState: function(options) {\n      options = options || { };\n      var propertySet = options.propertySet || originalSet;\n      options.propertySet = propertySet;\n      this['_' + propertySet] = { };\n      this.saveState(options);\n      return this;\n    }\n  });\n})();\n\n\n(function() {\n\n  var degreesToRadians = fabric.util.degreesToRadians,\n      /* eslint-disable camelcase */\n      isVML = function() { return typeof G_vmlCanvasManager !== 'undefined'; };\n      /* eslint-enable camelcase */\n  fabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n\n    /**\n     * The object interactivity controls.\n     * @private\n     */\n    _controlsVisibility: null,\n\n    /**\n     * Determines which corner has been clicked\n     * @private\n     * @param {Object} pointer The pointer indicating the mouse position\n     * @return {String|Boolean} corner code (tl, tr, bl, br, etc.), or false if nothing is found\n     */\n    _findTargetCorner: function(pointer) {\n      if (!this.hasControls || !this.active) {\n        return false;\n      }\n\n      var ex = pointer.x,\n          ey = pointer.y,\n          xPoints,\n          lines;\n      this.__corner = 0;\n      for (var i in this.oCoords) {\n\n        if (!this.isControlVisible(i)) {\n          continue;\n        }\n\n        if (i === 'mtr' && !this.hasRotatingPoint) {\n          continue;\n        }\n\n        if (this.get('lockUniScaling') &&\n           (i === 'mt' || i === 'mr' || i === 'mb' || i === 'ml')) {\n          continue;\n        }\n\n        lines = this._getImageLines(this.oCoords[i].corner);\n\n        // debugging\n\n        // canvas.contextTop.fillRect(lines.bottomline.d.x, lines.bottomline.d.y, 2, 2);\n        // canvas.contextTop.fillRect(lines.bottomline.o.x, lines.bottomline.o.y, 2, 2);\n\n        // canvas.contextTop.fillRect(lines.leftline.d.x, lines.leftline.d.y, 2, 2);\n        // canvas.contextTop.fillRect(lines.leftline.o.x, lines.leftline.o.y, 2, 2);\n\n        // canvas.contextTop.fillRect(lines.topline.d.x, lines.topline.d.y, 2, 2);\n        // canvas.contextTop.fillRect(lines.topline.o.x, lines.topline.o.y, 2, 2);\n\n        // canvas.contextTop.fillRect(lines.rightline.d.x, lines.rightline.d.y, 2, 2);\n        // canvas.contextTop.fillRect(lines.rightline.o.x, lines.rightline.o.y, 2, 2);\n\n        xPoints = this._findCrossPoints({ x: ex, y: ey }, lines);\n        if (xPoints !== 0 && xPoints % 2 === 1) {\n          this.__corner = i;\n          return i;\n        }\n      }\n      return false;\n    },\n\n    /**\n     * Sets the coordinates of the draggable boxes in the corners of\n     * the image used to scale/rotate it.\n     * @private\n     */\n    _setCornerCoords: function() {\n      var coords = this.oCoords,\n          newTheta = degreesToRadians(45 - this.angle),\n          /* Math.sqrt(2 * Math.pow(this.cornerSize, 2)) / 2, */\n          /* 0.707106 stands for sqrt(2)/2 */\n          cornerHypotenuse = this.cornerSize * 0.707106,\n          cosHalfOffset = cornerHypotenuse * Math.cos(newTheta),\n          sinHalfOffset = cornerHypotenuse * Math.sin(newTheta),\n          x, y;\n\n      for (var point in coords) {\n        x = coords[point].x;\n        y = coords[point].y;\n        coords[point].corner = {\n          tl: {\n            x: x - sinHalfOffset,\n            y: y - cosHalfOffset\n          },\n          tr: {\n            x: x + cosHalfOffset,\n            y: y - sinHalfOffset\n          },\n          bl: {\n            x: x - cosHalfOffset,\n            y: y + sinHalfOffset\n          },\n          br: {\n            x: x + sinHalfOffset,\n            y: y + cosHalfOffset\n          }\n        };\n      }\n    },\n\n    /*\n     * Calculate object dimensions from its properties\n     * @private\n     */\n    _getNonTransformedDimensions: function() {\n      var strokeWidth = this.strokeWidth,\n          w = this.width + strokeWidth,\n          h = this.height + strokeWidth;\n      return { x: w, y: h };\n    },\n\n    /*\n     * @private\n     */\n    _getTransformedDimensions: function(skewX, skewY) {\n      if (typeof skewX === 'undefined') {\n        skewX = this.skewX;\n      }\n      if (typeof skewY === 'undefined') {\n        skewY = this.skewY;\n      }\n      var dimensions = this._getNonTransformedDimensions(),\n          dimX = dimensions.x / 2, dimY = dimensions.y / 2,\n          points = [\n            {\n              x: -dimX,\n              y: -dimY\n            },\n            {\n              x: dimX,\n              y: -dimY\n            },\n            {\n              x: -dimX,\n              y: dimY\n            },\n            {\n              x: dimX,\n              y: dimY\n            }],\n          i, transformMatrix = this._calcDimensionsTransformMatrix(skewX, skewY, false),\n          bbox;\n      for (i = 0; i < points.length; i++) {\n        points[i] = fabric.util.transformPoint(points[i], transformMatrix);\n      }\n      bbox = fabric.util.makeBoundingBoxFromPoints(points);\n      return { x: bbox.width, y: bbox.height };\n    },\n\n    /*\n     * private\n     */\n    _calculateCurrentDimensions: function()  {\n      var vpt = this.getViewportTransform(),\n          dim = this._getTransformedDimensions(),\n          p = fabric.util.transformPoint(dim, vpt, true);\n\n      return p.scalarAdd(2 * this.padding);\n    },\n\n    /**\n     * Draws a colored layer behind the object, inside its selection borders.\n     * Requires public options: padding, selectionBackgroundColor\n     * this function is called when the context is transformed\n     * @param {CanvasRenderingContext2D} ctx Context to draw on\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    drawSelectionBackground: function(ctx) {\n      if (!this.selectionBackgroundColor || this.group || !this.active) {\n        return this;\n      }\n      ctx.save();\n      var center = this.getCenterPoint(), wh = this._calculateCurrentDimensions(),\n          vpt = this.canvas.viewportTransform;\n      ctx.translate(center.x, center.y);\n      ctx.scale(1 / vpt[0], 1 / vpt[3]);\n      ctx.rotate(degreesToRadians(this.angle));\n      ctx.fillStyle = this.selectionBackgroundColor;\n      ctx.fillRect(-wh.x / 2, -wh.y / 2, wh.x, wh.y);\n      ctx.restore();\n      return this;\n    },\n\n    /**\n     * Draws borders of an object's bounding box.\n     * Requires public properties: width, height\n     * Requires public options: padding, borderColor\n     * @param {CanvasRenderingContext2D} ctx Context to draw on\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    drawBorders: function(ctx) {\n      if (!this.hasBorders) {\n        return this;\n      }\n\n      var wh = this._calculateCurrentDimensions(),\n          strokeWidth = 1 / this.borderScaleFactor,\n          width = wh.x + strokeWidth,\n          height = wh.y + strokeWidth;\n\n      ctx.save();\n      ctx.strokeStyle = this.borderColor;\n      this._setLineDash(ctx, this.borderDashArray, null);\n\n      ctx.strokeRect(\n        -width / 2,\n        -height / 2,\n        width,\n        height\n      );\n\n      if (this.hasRotatingPoint && this.isControlVisible('mtr') && !this.get('lockRotation') && this.hasControls) {\n\n        var rotateHeight = -height / 2;\n\n        ctx.beginPath();\n        ctx.moveTo(0, rotateHeight);\n        ctx.lineTo(0, rotateHeight - this.rotatingPointOffset);\n        ctx.closePath();\n        ctx.stroke();\n      }\n\n      ctx.restore();\n      return this;\n    },\n\n    /**\n     * Draws borders of an object's bounding box when it is inside a group.\n     * Requires public properties: width, height\n     * Requires public options: padding, borderColor\n     * @param {CanvasRenderingContext2D} ctx Context to draw on\n     * @param {object} options object representing current object parameters\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    drawBordersInGroup: function(ctx, options) {\n      if (!this.hasBorders) {\n        return this;\n      }\n\n      var p = this._getNonTransformedDimensions(),\n          matrix = fabric.util.customTransformMatrix(options.scaleX, options.scaleY, options.skewX),\n          wh = fabric.util.transformPoint(p, matrix),\n          strokeWidth = 1 / this.borderScaleFactor,\n          width = wh.x + strokeWidth,\n          height = wh.y + strokeWidth;\n\n      ctx.save();\n      this._setLineDash(ctx, this.borderDashArray, null);\n      ctx.strokeStyle = this.borderColor;\n\n      ctx.strokeRect(\n        -width / 2,\n        -height / 2,\n        width,\n        height\n      );\n\n      ctx.restore();\n      return this;\n    },\n\n    /**\n     * Draws corners of an object's bounding box.\n     * Requires public properties: width, height\n     * Requires public options: cornerSize, padding\n     * @param {CanvasRenderingContext2D} ctx Context to draw on\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    drawControls: function(ctx) {\n      if (!this.hasControls) {\n        return this;\n      }\n\n      var wh = this._calculateCurrentDimensions(),\n          width = wh.x,\n          height = wh.y,\n          scaleOffset = this.cornerSize,\n          left = -(width + scaleOffset) / 2,\n          top = -(height + scaleOffset) / 2,\n          methodName = this.transparentCorners ? 'stroke' : 'fill';\n\n      ctx.save();\n      ctx.strokeStyle = ctx.fillStyle = this.cornerColor;\n      if (!this.transparentCorners) {\n        ctx.strokeStyle = this.cornerStrokeColor;\n      }\n      this._setLineDash(ctx, this.cornerDashArray, null);\n\n      // top-left\n      this._drawControl('tl', ctx, methodName,\n        left,\n        top);\n\n      // top-right\n      this._drawControl('tr', ctx, methodName,\n        left + width,\n        top);\n\n      // bottom-left\n      this._drawControl('bl', ctx, methodName,\n        left,\n        top + height);\n\n      // bottom-right\n      this._drawControl('br', ctx, methodName,\n        left + width,\n        top + height);\n\n      if (!this.get('lockUniScaling')) {\n\n        // middle-top\n        this._drawControl('mt', ctx, methodName,\n          left + width / 2,\n          top);\n\n        // middle-bottom\n        this._drawControl('mb', ctx, methodName,\n          left + width / 2,\n          top + height);\n\n        // middle-right\n        this._drawControl('mr', ctx, methodName,\n          left + width,\n          top + height / 2);\n\n        // middle-left\n        this._drawControl('ml', ctx, methodName,\n          left,\n          top + height / 2);\n      }\n\n      // middle-top-rotate\n      if (this.hasRotatingPoint) {\n        this._drawControl('mtr', ctx, methodName,\n          left + width / 2,\n          top - this.rotatingPointOffset);\n      }\n\n      ctx.restore();\n\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _drawControl: function(control, ctx, methodName, left, top) {\n      if (!this.isControlVisible(control)) {\n        return;\n      }\n      var size = this.cornerSize, stroke = !this.transparentCorners && this.cornerStrokeColor;\n      switch (this.cornerStyle) {\n        case 'circle':\n          ctx.beginPath();\n          ctx.arc(left + size / 2, top + size / 2, size / 2, 0, 2 * Math.PI, false);\n          ctx[methodName]();\n          if (stroke) {\n            ctx.stroke();\n          }\n          break;\n        default:\n          isVML() || this.transparentCorners || ctx.clearRect(left, top, size, size);\n          ctx[methodName + 'Rect'](left, top, size, size);\n          if (stroke) {\n            ctx.strokeRect(left, top, size, size);\n          }\n      }\n    },\n\n    /**\n     * Returns true if the specified control is visible, false otherwise.\n     * @param {String} controlName The name of the control. Possible values are 'tl', 'tr', 'br', 'bl', 'ml', 'mt', 'mr', 'mb', 'mtr'.\n     * @returns {Boolean} true if the specified control is visible, false otherwise\n     */\n    isControlVisible: function(controlName) {\n      return this._getControlsVisibility()[controlName];\n    },\n\n    /**\n     * Sets the visibility of the specified control.\n     * @param {String} controlName The name of the control. Possible values are 'tl', 'tr', 'br', 'bl', 'ml', 'mt', 'mr', 'mb', 'mtr'.\n     * @param {Boolean} visible true to set the specified control visible, false otherwise\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    setControlVisible: function(controlName, visible) {\n      this._getControlsVisibility()[controlName] = visible;\n      return this;\n    },\n\n    /**\n     * Sets the visibility state of object controls.\n     * @param {Object} [options] Options object\n     * @param {Boolean} [options.bl] true to enable the bottom-left control, false to disable it\n     * @param {Boolean} [options.br] true to enable the bottom-right control, false to disable it\n     * @param {Boolean} [options.mb] true to enable the middle-bottom control, false to disable it\n     * @param {Boolean} [options.ml] true to enable the middle-left control, false to disable it\n     * @param {Boolean} [options.mr] true to enable the middle-right control, false to disable it\n     * @param {Boolean} [options.mt] true to enable the middle-top control, false to disable it\n     * @param {Boolean} [options.tl] true to enable the top-left control, false to disable it\n     * @param {Boolean} [options.tr] true to enable the top-right control, false to disable it\n     * @param {Boolean} [options.mtr] true to enable the middle-top-rotate control, false to disable it\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    setControlsVisibility: function(options) {\n      options || (options = { });\n\n      for (var p in options) {\n        this.setControlVisible(p, options[p]);\n      }\n      return this;\n    },\n\n    /**\n     * Returns the instance of the control visibility set for this object.\n     * @private\n     * @returns {Object}\n     */\n    _getControlsVisibility: function() {\n      if (!this._controlsVisibility) {\n        this._controlsVisibility = {\n          tl: true,\n          tr: true,\n          br: true,\n          bl: true,\n          ml: true,\n          mt: true,\n          mr: true,\n          mb: true,\n          mtr: true\n        };\n      }\n      return this._controlsVisibility;\n    }\n  });\n})();\n\n\nfabric.util.object.extend(fabric.StaticCanvas.prototype, /** @lends fabric.StaticCanvas.prototype */ {\n\n  /**\n   * Animation duration (in ms) for fx* methods\n   * @type Number\n   * @default\n   */\n  FX_DURATION: 500,\n\n  /**\n   * Centers object horizontally with animation.\n   * @param {fabric.Object} object Object to center\n   * @param {Object} [callbacks] Callbacks object with optional \"onComplete\" and/or \"onChange\" properties\n   * @param {Function} [callbacks.onComplete] Invoked on completion\n   * @param {Function} [callbacks.onChange] Invoked on every step of animation\n   * @return {fabric.Canvas} thisArg\n   * @chainable\n   */\n  fxCenterObjectH: function (object, callbacks) {\n    callbacks = callbacks || { };\n\n    var empty = function() { },\n        onComplete = callbacks.onComplete || empty,\n        onChange = callbacks.onChange || empty,\n        _this = this;\n\n    fabric.util.animate({\n      startValue: object.get('left'),\n      endValue: this.getCenter().left,\n      duration: this.FX_DURATION,\n      onChange: function(value) {\n        object.set('left', value);\n        _this.renderAll();\n        onChange();\n      },\n      onComplete: function() {\n        object.setCoords();\n        onComplete();\n      }\n    });\n\n    return this;\n  },\n\n  /**\n   * Centers object vertically with animation.\n   * @param {fabric.Object} object Object to center\n   * @param {Object} [callbacks] Callbacks object with optional \"onComplete\" and/or \"onChange\" properties\n   * @param {Function} [callbacks.onComplete] Invoked on completion\n   * @param {Function} [callbacks.onChange] Invoked on every step of animation\n   * @return {fabric.Canvas} thisArg\n   * @chainable\n   */\n  fxCenterObjectV: function (object, callbacks) {\n    callbacks = callbacks || { };\n\n    var empty = function() { },\n        onComplete = callbacks.onComplete || empty,\n        onChange = callbacks.onChange || empty,\n        _this = this;\n\n    fabric.util.animate({\n      startValue: object.get('top'),\n      endValue: this.getCenter().top,\n      duration: this.FX_DURATION,\n      onChange: function(value) {\n        object.set('top', value);\n        _this.renderAll();\n        onChange();\n      },\n      onComplete: function() {\n        object.setCoords();\n        onComplete();\n      }\n    });\n\n    return this;\n  },\n\n  /**\n   * Same as `fabric.Canvas#remove` but animated\n   * @param {fabric.Object} object Object to remove\n   * @param {Object} [callbacks] Callbacks object with optional \"onComplete\" and/or \"onChange\" properties\n   * @param {Function} [callbacks.onComplete] Invoked on completion\n   * @param {Function} [callbacks.onChange] Invoked on every step of animation\n   * @return {fabric.Canvas} thisArg\n   * @chainable\n   */\n  fxRemove: function (object, callbacks) {\n    callbacks = callbacks || { };\n\n    var empty = function() { },\n        onComplete = callbacks.onComplete || empty,\n        onChange = callbacks.onChange || empty,\n        _this = this;\n\n    fabric.util.animate({\n      startValue: object.get('opacity'),\n      endValue: 0,\n      duration: this.FX_DURATION,\n      onStart: function() {\n        object.set('active', false);\n      },\n      onChange: function(value) {\n        object.set('opacity', value);\n        _this.renderAll();\n        onChange();\n      },\n      onComplete: function () {\n        _this.remove(object);\n        onComplete();\n      }\n    });\n\n    return this;\n  }\n});\n\nfabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n  /**\n   * Animates object's properties\n   * @param {String|Object} property Property to animate (if string) or properties to animate (if object)\n   * @param {Number|Object} value Value to animate property to (if string was given first) or options object\n   * @return {fabric.Object} thisArg\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-2#animation}\n   * @chainable\n   *\n   * As object — multiple properties\n   *\n   * object.animate({ left: ..., top: ... });\n   * object.animate({ left: ..., top: ... }, { duration: ... });\n   *\n   * As string — one property\n   *\n   * object.animate('left', ...);\n   * object.animate('left', { duration: ... });\n   *\n   */\n  animate: function() {\n    if (arguments[0] && typeof arguments[0] === 'object') {\n      var propsToAnimate = [], prop, skipCallbacks;\n      for (prop in arguments[0]) {\n        propsToAnimate.push(prop);\n      }\n      for (var i = 0, len = propsToAnimate.length; i < len; i++) {\n        prop = propsToAnimate[i];\n        skipCallbacks = i !== len - 1;\n        this._animate(prop, arguments[0][prop], arguments[1], skipCallbacks);\n      }\n    }\n    else {\n      this._animate.apply(this, arguments);\n    }\n    return this;\n  },\n\n  /**\n   * @private\n   * @param {String} property Property to animate\n   * @param {String} to Value to animate to\n   * @param {Object} [options] Options object\n   * @param {Boolean} [skipCallbacks] When true, callbacks like onchange and oncomplete are not invoked\n   */\n  _animate: function(property, to, options, skipCallbacks) {\n    var _this = this, propPair;\n\n    to = to.toString();\n\n    if (!options) {\n      options = { };\n    }\n    else {\n      options = fabric.util.object.clone(options);\n    }\n\n    if (~property.indexOf('.')) {\n      propPair = property.split('.');\n    }\n\n    var currentValue = propPair\n      ? this.get(propPair[0])[propPair[1]]\n      : this.get(property);\n\n    if (!('from' in options)) {\n      options.from = currentValue;\n    }\n\n    if (~to.indexOf('=')) {\n      to = currentValue + parseFloat(to.replace('=', ''));\n    }\n    else {\n      to = parseFloat(to);\n    }\n\n    fabric.util.animate({\n      startValue: options.from,\n      endValue: to,\n      byValue: options.by,\n      easing: options.easing,\n      duration: options.duration,\n      abort: options.abort && function() {\n        return options.abort.call(_this);\n      },\n      onChange: function(value) {\n        if (propPair) {\n          _this[propPair[0]][propPair[1]] = value;\n        }\n        else {\n          _this.set(property, value);\n        }\n        if (skipCallbacks) {\n          return;\n        }\n        options.onChange && options.onChange();\n      },\n      onComplete: function() {\n        if (skipCallbacks) {\n          return;\n        }\n\n        _this.setCoords();\n        options.onComplete && options.onComplete();\n      }\n    });\n  }\n});\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      coordProps = { x1: 1, x2: 1, y1: 1, y2: 1 },\n      supportsLineDash = fabric.StaticCanvas.supports('setLineDash');\n\n  if (fabric.Line) {\n    fabric.warn('fabric.Line is already defined');\n    return;\n  }\n\n  var cacheProperties = fabric.Object.prototype.cacheProperties.concat();\n  cacheProperties.push(\n    'x1',\n    'x2',\n    'y1',\n    'y2'\n  );\n\n  /**\n   * Line class\n   * @class fabric.Line\n   * @extends fabric.Object\n   * @see {@link fabric.Line#initialize} for constructor definition\n   */\n  fabric.Line = fabric.util.createClass(fabric.Object, /** @lends fabric.Line.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'line',\n\n    /**\n     * x value or first line edge\n     * @type Number\n     * @default\n     */\n    x1: 0,\n\n    /**\n     * y value or first line edge\n     * @type Number\n     * @default\n     */\n    y1: 0,\n\n    /**\n     * x value or second line edge\n     * @type Number\n     * @default\n     */\n    x2: 0,\n\n    /**\n     * y value or second line edge\n     * @type Number\n     * @default\n     */\n    y2: 0,\n\n    cacheProperties: cacheProperties,\n\n    /**\n     * Constructor\n     * @param {Array} [points] Array of points\n     * @param {Object} [options] Options object\n     * @return {fabric.Line} thisArg\n     */\n    initialize: function(points, options) {\n      if (!points) {\n        points = [0, 0, 0, 0];\n      }\n\n      this.callSuper('initialize', options);\n\n      this.set('x1', points[0]);\n      this.set('y1', points[1]);\n      this.set('x2', points[2]);\n      this.set('y2', points[3]);\n\n      this._setWidthHeight(options);\n    },\n\n    /**\n     * @private\n     * @param {Object} [options] Options\n     */\n    _setWidthHeight: function(options) {\n      options || (options = { });\n\n      this.width = Math.abs(this.x2 - this.x1);\n      this.height = Math.abs(this.y2 - this.y1);\n\n      this.left = 'left' in options\n        ? options.left\n        : this._getLeftToOriginX();\n\n      this.top = 'top' in options\n        ? options.top\n        : this._getTopToOriginY();\n    },\n\n    /**\n     * @private\n     * @param {String} key\n     * @param {*} value\n     */\n    _set: function(key, value) {\n      this.callSuper('_set', key, value);\n      if (typeof coordProps[key] !== 'undefined') {\n        this._setWidthHeight();\n      }\n      return this;\n    },\n\n    /**\n     * @private\n     * @return {Number} leftToOriginX Distance from left edge of canvas to originX of Line.\n     */\n    _getLeftToOriginX: makeEdgeToOriginGetter(\n      { // property names\n        origin: 'originX',\n        axis1: 'x1',\n        axis2: 'x2',\n        dimension: 'width'\n      },\n      { // possible values of origin\n        nearest: 'left',\n        center: 'center',\n        farthest: 'right'\n      }\n    ),\n\n    /**\n     * @private\n     * @return {Number} topToOriginY Distance from top edge of canvas to originY of Line.\n     */\n    _getTopToOriginY: makeEdgeToOriginGetter(\n      { // property names\n        origin: 'originY',\n        axis1: 'y1',\n        axis2: 'y2',\n        dimension: 'height'\n      },\n      { // possible values of origin\n        nearest: 'top',\n        center: 'center',\n        farthest: 'bottom'\n      }\n    ),\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Boolean} noTransform\n     */\n    _render: function(ctx, noTransform) {\n      ctx.beginPath();\n\n      if (noTransform) {\n        //  Line coords are distances from left-top of canvas to origin of line.\n        //  To render line in a path-group, we need to translate them to\n        //  distances from center of path-group to center of line.\n        var cp = this.getCenterPoint();\n        ctx.translate(\n          cp.x - this.strokeWidth / 2,\n          cp.y - this.strokeWidth / 2\n        );\n      }\n\n      if (!this.strokeDashArray || this.strokeDashArray && supportsLineDash) {\n        // move from center (of virtual box) to its left/top corner\n        // we can't assume x1, y1 is top left and x2, y2 is bottom right\n        var p = this.calcLinePoints();\n        ctx.moveTo(p.x1, p.y1);\n        ctx.lineTo(p.x2, p.y2);\n      }\n\n      ctx.lineWidth = this.strokeWidth;\n\n      // TODO: test this\n      // make sure setting \"fill\" changes color of a line\n      // (by copying fillStyle to strokeStyle, since line is stroked, not filled)\n      var origStrokeStyle = ctx.strokeStyle;\n      ctx.strokeStyle = this.stroke || ctx.fillStyle;\n      this.stroke && this._renderStroke(ctx);\n      ctx.strokeStyle = origStrokeStyle;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderDashedStroke: function(ctx) {\n      var p = this.calcLinePoints();\n\n      ctx.beginPath();\n      fabric.util.drawDashedLine(ctx, p.x1, p.y1, p.x2, p.y2, this.strokeDashArray);\n      ctx.closePath();\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @methd toObject\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return extend(this.callSuper('toObject', propertiesToInclude), this.calcLinePoints());\n    },\n\n    /*\n     * Calculate object dimensions from its properties\n     * @private\n     */\n    _getNonTransformedDimensions: function() {\n      var dim = this.callSuper('_getNonTransformedDimensions');\n      if (this.strokeLineCap === 'butt') {\n        if (dim.x === 0) {\n          dim.y -= this.strokeWidth;\n        }\n        if (dim.y === 0) {\n          dim.x -= this.strokeWidth;\n        }\n      }\n      return dim;\n    },\n\n    /**\n     * Recalculates line points given width and height\n     * @private\n     */\n    calcLinePoints: function() {\n      var xMult = this.x1 <= this.x2 ? -1 : 1,\n          yMult = this.y1 <= this.y2 ? -1 : 1,\n          x1 = (xMult * this.width * 0.5),\n          y1 = (yMult * this.height * 0.5),\n          x2 = (xMult * this.width * -0.5),\n          y2 = (yMult * this.height * -0.5);\n\n      return {\n        x1: x1,\n        x2: x2,\n        y1: y1,\n        y2: y2\n      };\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns SVG representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toSVG: function(reviver) {\n      var markup = this._createBaseSVGMarkup(),\n          p = { x1: this.x1, x2: this.x2, y1: this.y1, y2: this.y2 };\n\n      if (!(this.group && this.group.type === 'path-group')) {\n        p = this.calcLinePoints();\n      }\n      markup.push(\n        '<line ', this.getSvgId(),\n          'x1=\"', p.x1,\n          '\" y1=\"', p.y1,\n          '\" x2=\"', p.x2,\n          '\" y2=\"', p.y2,\n          '\" style=\"', this.getSvgStyles(),\n          '\" transform=\"', this.getSvgTransform(),\n          this.getSvgTransformMatrix(),\n        '\"/>\\n'\n      );\n\n      return reviver ? reviver(markup.join('')) : markup.join('');\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Returns complexity of an instance\n     * @return {Number} complexity\n     */\n    complexity: function() {\n      return 1;\n    }\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Line.fromElement})\n   * @static\n   * @memberOf fabric.Line\n   * @see http://www.w3.org/TR/SVG/shapes.html#LineElement\n   */\n  fabric.Line.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat('x1 y1 x2 y2'.split(' '));\n\n  /**\n   * Returns fabric.Line instance from an SVG element\n   * @static\n   * @memberOf fabric.Line\n   * @param {SVGElement} element Element to parse\n   * @param {Object} [options] Options object\n   * @return {fabric.Line} instance of fabric.Line\n   */\n  fabric.Line.fromElement = function(element, options) {\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Line.ATTRIBUTE_NAMES),\n        points = [\n          parsedAttributes.x1 || 0,\n          parsedAttributes.y1 || 0,\n          parsedAttributes.x2 || 0,\n          parsedAttributes.y2 || 0\n        ];\n    return new fabric.Line(points, extend(parsedAttributes, options));\n  };\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns fabric.Line instance from an object representation\n   * @static\n   * @memberOf fabric.Line\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] invoked with new instance as first argument\n   * @return {fabric.Line} instance of fabric.Line\n   */\n  fabric.Line.fromObject = function(object, callback) {\n    var points = [object.x1, object.y1, object.x2, object.y2],\n        line = new fabric.Line(points, object);\n    callback && callback(line);\n    return line;\n  };\n\n  /**\n   * Produces a function that calculates distance from canvas edge to Line origin.\n   */\n  function makeEdgeToOriginGetter(propertyNames, originValues) {\n    var origin = propertyNames.origin,\n        axis1 = propertyNames.axis1,\n        axis2 = propertyNames.axis2,\n        dimension = propertyNames.dimension,\n        nearest = originValues.nearest,\n        center = originValues.center,\n        farthest = originValues.farthest;\n\n    return function() {\n      switch (this.get(origin)) {\n        case nearest:\n          return Math.min(this.get(axis1), this.get(axis2));\n        case center:\n          return Math.min(this.get(axis1), this.get(axis2)) + (0.5 * this.get(dimension));\n        case farthest:\n          return Math.max(this.get(axis1), this.get(axis2));\n      }\n    };\n\n  }\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      pi = Math.PI,\n      extend = fabric.util.object.extend;\n\n  if (fabric.Circle) {\n    fabric.warn('fabric.Circle is already defined.');\n    return;\n  }\n\n  var cacheProperties = fabric.Object.prototype.cacheProperties.concat();\n  cacheProperties.push(\n    'radius'\n  );\n\n  /**\n   * Circle class\n   * @class fabric.Circle\n   * @extends fabric.Object\n   * @see {@link fabric.Circle#initialize} for constructor definition\n   */\n  fabric.Circle = fabric.util.createClass(fabric.Object, /** @lends fabric.Circle.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'circle',\n\n    /**\n     * Radius of this circle\n     * @type Number\n     * @default\n     */\n    radius: 0,\n\n    /**\n     * Start angle of the circle, moving clockwise\n     * @type Number\n     * @default 0\n     */\n    startAngle: 0,\n\n    /**\n     * End angle of the circle\n     * @type Number\n     * @default 2Pi\n     */\n    endAngle: pi * 2,\n\n    cacheProperties: cacheProperties,\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     * @return {fabric.Circle} thisArg\n     */\n    initialize: function(options) {\n      this.callSuper('initialize', options);\n      this.set('radius', options && options.radius || 0);\n    },\n\n    /**\n     * @private\n     * @param {String} key\n     * @param {*} value\n     * @return {fabric.Circle} thisArg\n     */\n    _set: function(key, value) {\n      this.callSuper('_set', key, value);\n\n      if (key === 'radius') {\n        this.setRadius(value);\n      }\n\n      return this;\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return this.callSuper('toObject', ['radius', 'startAngle', 'endAngle'].concat(propertiesToInclude));\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toSVG: function(reviver) {\n      var markup = this._createBaseSVGMarkup(), x = 0, y = 0,\n          angle = (this.endAngle - this.startAngle) % ( 2 * pi);\n\n      if (angle === 0) {\n        if (this.group && this.group.type === 'path-group') {\n          x = this.left + this.radius;\n          y = this.top + this.radius;\n        }\n        markup.push(\n          '<circle ', this.getSvgId(),\n            'cx=\"' + x + '\" cy=\"' + y + '\" ',\n            'r=\"', this.radius,\n            '\" style=\"', this.getSvgStyles(),\n            '\" transform=\"', this.getSvgTransform(),\n            ' ', this.getSvgTransformMatrix(),\n          '\"/>\\n'\n        );\n      }\n      else {\n        var startX = Math.cos(this.startAngle) * this.radius,\n            startY = Math.sin(this.startAngle) * this.radius,\n            endX = Math.cos(this.endAngle) * this.radius,\n            endY = Math.sin(this.endAngle) * this.radius,\n            largeFlag = angle > pi ? '1' : '0';\n\n        markup.push(\n          '<path d=\"M ' + startX + ' ' + startY,\n          ' A ' + this.radius + ' ' + this.radius,\n          ' 0 ', +largeFlag + ' 1', ' ' + endX + ' ' + endY,\n          '\" style=\"', this.getSvgStyles(),\n          '\" transform=\"', this.getSvgTransform(),\n          ' ', this.getSvgTransformMatrix(),\n          '\"/>\\n'\n        );\n      }\n\n      return reviver ? reviver(markup.join('')) : markup.join('');\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx context to render on\n     * @param {Boolean} [noTransform] When true, context is not transformed\n     */\n    _render: function(ctx, noTransform) {\n      ctx.beginPath();\n      ctx.arc(noTransform ? this.left + this.radius : 0,\n              noTransform ? this.top + this.radius : 0,\n              this.radius,\n              this.startAngle,\n              this.endAngle, false);\n      this._renderFill(ctx);\n      this._renderStroke(ctx);\n    },\n\n    /**\n     * Returns horizontal radius of an object (according to how an object is scaled)\n     * @return {Number}\n     */\n    getRadiusX: function() {\n      return this.get('radius') * this.get('scaleX');\n    },\n\n    /**\n     * Returns vertical radius of an object (according to how an object is scaled)\n     * @return {Number}\n     */\n    getRadiusY: function() {\n      return this.get('radius') * this.get('scaleY');\n    },\n\n    /**\n     * Sets radius of an object (and updates width accordingly)\n     * @return {fabric.Circle} thisArg\n     */\n    setRadius: function(value) {\n      this.radius = value;\n      return this.set('width', value * 2).set('height', value * 2);\n    },\n\n    /**\n     * Returns complexity of an instance\n     * @return {Number} complexity of this instance\n     */\n    complexity: function() {\n      return 1;\n    }\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Circle.fromElement})\n   * @static\n   * @memberOf fabric.Circle\n   * @see: http://www.w3.org/TR/SVG/shapes.html#CircleElement\n   */\n  fabric.Circle.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat('cx cy r'.split(' '));\n\n  /**\n   * Returns {@link fabric.Circle} instance from an SVG element\n   * @static\n   * @memberOf fabric.Circle\n   * @param {SVGElement} element Element to parse\n   * @param {Object} [options] Options object\n   * @throws {Error} If value of `r` attribute is missing or invalid\n   * @return {fabric.Circle} Instance of fabric.Circle\n   */\n  fabric.Circle.fromElement = function(element, options) {\n    options || (options = { });\n\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Circle.ATTRIBUTE_NAMES);\n\n    if (!isValidRadius(parsedAttributes)) {\n      throw new Error('value of `r` attribute is required and can not be negative');\n    }\n\n    parsedAttributes.left = parsedAttributes.left || 0;\n    parsedAttributes.top = parsedAttributes.top || 0;\n\n    var obj = new fabric.Circle(extend(parsedAttributes, options));\n\n    obj.left -= obj.radius;\n    obj.top -= obj.radius;\n    return obj;\n  };\n\n  /**\n   * @private\n   */\n  function isValidRadius(attributes) {\n    return (('radius' in attributes) && (attributes.radius >= 0));\n  }\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns {@link fabric.Circle} instance from an object representation\n   * @static\n   * @memberOf fabric.Circle\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] invoked with new instance as first argument\n   * @return {Object} Instance of fabric.Circle\n   */\n  fabric.Circle.fromObject = function(object, callback) {\n    var circle = new fabric.Circle(object);\n    callback && callback(circle);\n    return circle;\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { });\n\n  if (fabric.Triangle) {\n    fabric.warn('fabric.Triangle is already defined');\n    return;\n  }\n\n  /**\n   * Triangle class\n   * @class fabric.Triangle\n   * @extends fabric.Object\n   * @return {fabric.Triangle} thisArg\n   * @see {@link fabric.Triangle#initialize} for constructor definition\n   */\n  fabric.Triangle = fabric.util.createClass(fabric.Object, /** @lends fabric.Triangle.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'triangle',\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     * @return {Object} thisArg\n     */\n    initialize: function(options) {\n      this.callSuper('initialize', options);\n      this.set('width', options && options.width || 100)\n          .set('height', options && options.height || 100);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      var widthBy2 = this.width / 2,\n          heightBy2 = this.height / 2;\n\n      ctx.beginPath();\n      ctx.moveTo(-widthBy2, heightBy2);\n      ctx.lineTo(0, -heightBy2);\n      ctx.lineTo(widthBy2, heightBy2);\n      ctx.closePath();\n\n      this._renderFill(ctx);\n      this._renderStroke(ctx);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderDashedStroke: function(ctx) {\n      var widthBy2 = this.width / 2,\n          heightBy2 = this.height / 2;\n\n      ctx.beginPath();\n      fabric.util.drawDashedLine(ctx, -widthBy2, heightBy2, 0, -heightBy2, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, 0, -heightBy2, widthBy2, heightBy2, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, widthBy2, heightBy2, -widthBy2, heightBy2, this.strokeDashArray);\n      ctx.closePath();\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns SVG representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toSVG: function(reviver) {\n      var markup = this._createBaseSVGMarkup(),\n          widthBy2 = this.width / 2,\n          heightBy2 = this.height / 2,\n          points = [\n            -widthBy2 + ' ' + heightBy2,\n            '0 ' + -heightBy2,\n            widthBy2 + ' ' + heightBy2\n          ]\n          .join(',');\n\n      markup.push(\n        '<polygon ', this.getSvgId(),\n          'points=\"', points,\n          '\" style=\"', this.getSvgStyles(),\n          '\" transform=\"', this.getSvgTransform(),\n        '\"/>'\n      );\n\n      return reviver ? reviver(markup.join('')) : markup.join('');\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Returns complexity of an instance\n     * @return {Number} complexity of this instance\n     */\n    complexity: function() {\n      return 1;\n    }\n  });\n\n  /**\n   * Returns fabric.Triangle instance from an object representation\n   * @static\n   * @memberOf fabric.Triangle\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] Callback to invoke when an fabric.Triangle instance is created\n   * @return {Object} instance of Canvas.Triangle\n   */\n  fabric.Triangle.fromObject = function(object, callback) {\n    var triangle = new fabric.Triangle(object);\n    callback && callback(triangle);\n    return triangle;\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      piBy2   = Math.PI * 2,\n      extend = fabric.util.object.extend;\n\n  if (fabric.Ellipse) {\n    fabric.warn('fabric.Ellipse is already defined.');\n    return;\n  }\n\n  var cacheProperties = fabric.Object.prototype.cacheProperties.concat();\n  cacheProperties.push(\n    'rx',\n    'ry'\n  );\n\n  /**\n   * Ellipse class\n   * @class fabric.Ellipse\n   * @extends fabric.Object\n   * @return {fabric.Ellipse} thisArg\n   * @see {@link fabric.Ellipse#initialize} for constructor definition\n   */\n  fabric.Ellipse = fabric.util.createClass(fabric.Object, /** @lends fabric.Ellipse.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'ellipse',\n\n    /**\n     * Horizontal radius\n     * @type Number\n     * @default\n     */\n    rx:   0,\n\n    /**\n     * Vertical radius\n     * @type Number\n     * @default\n     */\n    ry:   0,\n\n    cacheProperties: cacheProperties,\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     * @return {fabric.Ellipse} thisArg\n     */\n    initialize: function(options) {\n      this.callSuper('initialize', options);\n      this.set('rx', options && options.rx || 0);\n      this.set('ry', options && options.ry || 0);\n    },\n\n    /**\n     * @private\n     * @param {String} key\n     * @param {*} value\n     * @return {fabric.Ellipse} thisArg\n     */\n    _set: function(key, value) {\n      this.callSuper('_set', key, value);\n      switch (key) {\n\n        case 'rx':\n          this.rx = value;\n          this.set('width', value * 2);\n          break;\n\n        case 'ry':\n          this.ry = value;\n          this.set('height', value * 2);\n          break;\n\n      }\n      return this;\n    },\n\n    /**\n     * Returns horizontal radius of an object (according to how an object is scaled)\n     * @return {Number}\n     */\n    getRx: function() {\n      return this.get('rx') * this.get('scaleX');\n    },\n\n    /**\n     * Returns Vertical radius of an object (according to how an object is scaled)\n     * @return {Number}\n     */\n    getRy: function() {\n      return this.get('ry') * this.get('scaleY');\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return this.callSuper('toObject', ['rx', 'ry'].concat(propertiesToInclude));\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toSVG: function(reviver) {\n      var markup = this._createBaseSVGMarkup(), x = 0, y = 0;\n      if (this.group && this.group.type === 'path-group') {\n        x = this.left + this.rx;\n        y = this.top + this.ry;\n      }\n      markup.push(\n        '<ellipse ', this.getSvgId(),\n          'cx=\"', x, '\" cy=\"', y, '\" ',\n          'rx=\"', this.rx,\n          '\" ry=\"', this.ry,\n          '\" style=\"', this.getSvgStyles(),\n          '\" transform=\"', this.getSvgTransform(),\n          this.getSvgTransformMatrix(),\n        '\"/>\\n'\n      );\n\n      return reviver ? reviver(markup.join('')) : markup.join('');\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx context to render on\n     * @param {Boolean} [noTransform] When true, context is not transformed\n     */\n    _render: function(ctx, noTransform) {\n      ctx.beginPath();\n      ctx.save();\n      ctx.transform(1, 0, 0, this.ry / this.rx, 0, 0);\n      ctx.arc(\n        noTransform ? this.left + this.rx : 0,\n        noTransform ? (this.top + this.ry) * this.rx / this.ry : 0,\n        this.rx,\n        0,\n        piBy2,\n        false);\n      ctx.restore();\n      this._renderFill(ctx);\n      this._renderStroke(ctx);\n    },\n\n    /**\n     * Returns complexity of an instance\n     * @return {Number} complexity\n     */\n    complexity: function() {\n      return 1;\n    }\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Ellipse.fromElement})\n   * @static\n   * @memberOf fabric.Ellipse\n   * @see http://www.w3.org/TR/SVG/shapes.html#EllipseElement\n   */\n  fabric.Ellipse.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat('cx cy rx ry'.split(' '));\n\n  /**\n   * Returns {@link fabric.Ellipse} instance from an SVG element\n   * @static\n   * @memberOf fabric.Ellipse\n   * @param {SVGElement} element Element to parse\n   * @param {Object} [options] Options object\n   * @return {fabric.Ellipse}\n   */\n  fabric.Ellipse.fromElement = function(element, options) {\n    options || (options = { });\n\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Ellipse.ATTRIBUTE_NAMES);\n\n    parsedAttributes.left = parsedAttributes.left || 0;\n    parsedAttributes.top = parsedAttributes.top || 0;\n\n    var ellipse = new fabric.Ellipse(extend(parsedAttributes, options));\n\n    ellipse.top -= ellipse.ry;\n    ellipse.left -= ellipse.rx;\n    return ellipse;\n  };\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns {@link fabric.Ellipse} instance from an object representation\n   * @static\n   * @memberOf fabric.Ellipse\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] invoked with new instance as first argument\n   * @return {fabric.Ellipse}\n   */\n  fabric.Ellipse.fromObject = function(object, callback) {\n    var ellipse = new fabric.Ellipse(object);\n    callback && callback(ellipse);\n    return ellipse;\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend;\n\n  if (fabric.Rect) {\n    fabric.warn('fabric.Rect is already defined');\n    return;\n  }\n\n  var stateProperties = fabric.Object.prototype.stateProperties.concat();\n  stateProperties.push('rx', 'ry');\n\n  /**\n   * Rectangle class\n   * @class fabric.Rect\n   * @extends fabric.Object\n   * @return {fabric.Rect} thisArg\n   * @see {@link fabric.Rect#initialize} for constructor definition\n   */\n  fabric.Rect = fabric.util.createClass(fabric.Object, /** @lends fabric.Rect.prototype */ {\n\n    /**\n     * List of properties to consider when checking if state of an object is changed ({@link fabric.Object#hasStateChanged})\n     * as well as for history (undo/redo) purposes\n     * @type Array\n     */\n    stateProperties: stateProperties,\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'rect',\n\n    /**\n     * Horizontal border radius\n     * @type Number\n     * @default\n     */\n    rx:   0,\n\n    /**\n     * Vertical border radius\n     * @type Number\n     * @default\n     */\n    ry:   0,\n\n    /**\n     * Used to specify dash pattern for stroke on this object\n     * @type Array\n     */\n    strokeDashArray: null,\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     * @return {Object} thisArg\n     */\n    initialize: function(options) {\n      this.callSuper('initialize', options);\n      this._initRxRy();\n\n    },\n\n    /**\n     * Initializes rx/ry attributes\n     * @private\n     */\n    _initRxRy: function() {\n      if (this.rx && !this.ry) {\n        this.ry = this.rx;\n      }\n      else if (this.ry && !this.rx) {\n        this.rx = this.ry;\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Boolean} noTransform\n     */\n    _render: function(ctx, noTransform) {\n\n      // optimize 1x1 case (used in spray brush)\n      if (this.width === 1 && this.height === 1) {\n        ctx.fillRect(-0.5, -0.5, 1, 1);\n        return;\n      }\n\n      var rx = this.rx ? Math.min(this.rx, this.width / 2) : 0,\n          ry = this.ry ? Math.min(this.ry, this.height / 2) : 0,\n          w = this.width,\n          h = this.height,\n          x = noTransform ? this.left : -this.width / 2,\n          y = noTransform ? this.top : -this.height / 2,\n          isRounded = rx !== 0 || ry !== 0,\n          /* \"magic number\" for bezier approximations of arcs (http://itc.ktu.lt/itc354/Riskus354.pdf) */\n          k = 1 - 0.5522847498;\n      ctx.beginPath();\n\n      ctx.moveTo(x + rx, y);\n\n      ctx.lineTo(x + w - rx, y);\n      isRounded && ctx.bezierCurveTo(x + w - k * rx, y, x + w, y + k * ry, x + w, y + ry);\n\n      ctx.lineTo(x + w, y + h - ry);\n      isRounded && ctx.bezierCurveTo(x + w, y + h - k * ry, x + w - k * rx, y + h, x + w - rx, y + h);\n\n      ctx.lineTo(x + rx, y + h);\n      isRounded && ctx.bezierCurveTo(x + k * rx, y + h, x, y + h - k * ry, x, y + h - ry);\n\n      ctx.lineTo(x, y + ry);\n      isRounded && ctx.bezierCurveTo(x, y + k * ry, x + k * rx, y, x + rx, y);\n\n      ctx.closePath();\n\n      this._renderFill(ctx);\n      this._renderStroke(ctx);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderDashedStroke: function(ctx) {\n      var x = -this.width / 2,\n          y = -this.height / 2,\n          w = this.width,\n          h = this.height;\n\n      ctx.beginPath();\n      fabric.util.drawDashedLine(ctx, x, y, x + w, y, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, x + w, y, x + w, y + h, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, x + w, y + h, x, y + h, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, x, y + h, x, y, this.strokeDashArray);\n      ctx.closePath();\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return this.callSuper('toObject', ['rx', 'ry'].concat(propertiesToInclude));\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toSVG: function(reviver) {\n      var markup = this._createBaseSVGMarkup(), x = this.left, y = this.top;\n      if (!(this.group && this.group.type === 'path-group')) {\n        x = -this.width / 2;\n        y = -this.height / 2;\n      }\n      markup.push(\n        '<rect ', this.getSvgId(),\n          'x=\"', x, '\" y=\"', y,\n          '\" rx=\"', this.get('rx'), '\" ry=\"', this.get('ry'),\n          '\" width=\"', this.width, '\" height=\"', this.height,\n          '\" style=\"', this.getSvgStyles(),\n          '\" transform=\"', this.getSvgTransform(),\n          this.getSvgTransformMatrix(),\n        '\"/>\\n');\n\n      return reviver ? reviver(markup.join('')) : markup.join('');\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Returns complexity of an instance\n     * @return {Number} complexity\n     */\n    complexity: function() {\n      return 1;\n    }\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by `fabric.Rect.fromElement`)\n   * @static\n   * @memberOf fabric.Rect\n   * @see: http://www.w3.org/TR/SVG/shapes.html#RectElement\n   */\n  fabric.Rect.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat('x y rx ry width height'.split(' '));\n\n  /**\n   * Returns {@link fabric.Rect} instance from an SVG element\n   * @static\n   * @memberOf fabric.Rect\n   * @param {SVGElement} element Element to parse\n   * @param {Object} [options] Options object\n   * @return {fabric.Rect} Instance of fabric.Rect\n   */\n  fabric.Rect.fromElement = function(element, options) {\n    if (!element) {\n      return null;\n    }\n    options = options || { };\n\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Rect.ATTRIBUTE_NAMES);\n\n    parsedAttributes.left = parsedAttributes.left || 0;\n    parsedAttributes.top  = parsedAttributes.top  || 0;\n    var rect = new fabric.Rect(extend((options ? fabric.util.object.clone(options) : { }), parsedAttributes));\n    rect.visible = rect.visible && rect.width > 0 && rect.height > 0;\n    return rect;\n  };\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns {@link fabric.Rect} instance from an object representation\n   * @static\n   * @memberOf fabric.Rect\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] Callback to invoke when an fabric.Rect instance is created\n   * @return {Object} instance of fabric.Rect\n   */\n  fabric.Rect.fromObject = function(object, callback) {\n    var rect = new fabric.Rect(object);\n    callback && callback(rect);\n    return rect;\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { });\n\n  if (fabric.Polyline) {\n    fabric.warn('fabric.Polyline is already defined');\n    return;\n  }\n\n  var cacheProperties = fabric.Object.prototype.cacheProperties.concat();\n  cacheProperties.push('points');\n\n  /**\n   * Polyline class\n   * @class fabric.Polyline\n   * @extends fabric.Object\n   * @see {@link fabric.Polyline#initialize} for constructor definition\n   */\n  fabric.Polyline = fabric.util.createClass(fabric.Object, /** @lends fabric.Polyline.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'polyline',\n\n    /**\n     * Points array\n     * @type Array\n     * @default\n     */\n    points: null,\n\n    /**\n     * Minimum X from points values, necessary to offset points\n     * @type Number\n     * @default\n     */\n    minX: 0,\n\n    /**\n     * Minimum Y from points values, necessary to offset points\n     * @type Number\n     * @default\n     */\n    minY: 0,\n\n    cacheProperties: cacheProperties,\n\n    /**\n     * Constructor\n     * @param {Array} points Array of points (where each point is an object with x and y)\n     * @param {Object} [options] Options object\n     * @return {fabric.Polyline} thisArg\n     * @example\n     * var poly = new fabric.Polyline([\n     *     { x: 10, y: 10 },\n     *     { x: 50, y: 30 },\n     *     { x: 40, y: 70 },\n     *     { x: 60, y: 50 },\n     *     { x: 100, y: 150 },\n     *     { x: 40, y: 100 }\n     *   ], {\n     *   stroke: 'red',\n     *   left: 100,\n     *   top: 100\n     * });\n     */\n    initialize: function(points, options) {\n      return fabric.Polygon.prototype.initialize.call(this, points, options);\n    },\n\n    /**\n     * @private\n     */\n    _calcDimensions: function() {\n      return fabric.Polygon.prototype._calcDimensions.call(this);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return fabric.Polygon.prototype.toObject.call(this, propertiesToInclude);\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns SVG representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toSVG: function(reviver) {\n      return fabric.Polygon.prototype.toSVG.call(this, reviver);\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Boolean} noTransform\n     */\n    _render: function(ctx, noTransform) {\n      if (!fabric.Polygon.prototype.commonRender.call(this, ctx, noTransform)) {\n        return;\n      }\n      this._renderFill(ctx);\n      this._renderStroke(ctx);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderDashedStroke: function(ctx) {\n      var p1, p2;\n\n      ctx.beginPath();\n      for (var i = 0, len = this.points.length; i < len; i++) {\n        p1 = this.points[i];\n        p2 = this.points[i + 1] || p1;\n        fabric.util.drawDashedLine(ctx, p1.x, p1.y, p2.x, p2.y, this.strokeDashArray);\n      }\n    },\n\n    /**\n     * Returns complexity of an instance\n     * @return {Number} complexity of this instance\n     */\n    complexity: function() {\n      return this.get('points').length;\n    }\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Polyline.fromElement})\n   * @static\n   * @memberOf fabric.Polyline\n   * @see: http://www.w3.org/TR/SVG/shapes.html#PolylineElement\n   */\n  fabric.Polyline.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat();\n\n  /**\n   * Returns fabric.Polyline instance from an SVG element\n   * @static\n   * @memberOf fabric.Polyline\n   * @param {SVGElement} element Element to parse\n   * @param {Object} [options] Options object\n   * @return {fabric.Polyline} Instance of fabric.Polyline\n   */\n  fabric.Polyline.fromElement = function(element, options) {\n    if (!element) {\n      return null;\n    }\n    options || (options = { });\n\n    var points = fabric.parsePointsAttribute(element.getAttribute('points')),\n        parsedAttributes = fabric.parseAttributes(element, fabric.Polyline.ATTRIBUTE_NAMES);\n\n    return new fabric.Polyline(points, fabric.util.object.extend(parsedAttributes, options));\n  };\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns fabric.Polyline instance from an object representation\n   * @static\n   * @memberOf fabric.Polyline\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] Callback to invoke when an fabric.Path instance is created\n   * @return {fabric.Polyline} Instance of fabric.Polyline\n   */\n  fabric.Polyline.fromObject = function(object, callback) {\n    var polyline = new fabric.Polyline(object.points, object);\n    callback && callback(polyline);\n    return polyline;\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      min = fabric.util.array.min,\n      max = fabric.util.array.max,\n      toFixed = fabric.util.toFixed;\n\n  if (fabric.Polygon) {\n    fabric.warn('fabric.Polygon is already defined');\n    return;\n  }\n\n  var cacheProperties = fabric.Object.prototype.cacheProperties.concat();\n  cacheProperties.push('points');\n\n  /**\n   * Polygon class\n   * @class fabric.Polygon\n   * @extends fabric.Object\n   * @see {@link fabric.Polygon#initialize} for constructor definition\n   */\n  fabric.Polygon = fabric.util.createClass(fabric.Object, /** @lends fabric.Polygon.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'polygon',\n\n    /**\n     * Points array\n     * @type Array\n     * @default\n     */\n    points: null,\n\n    /**\n     * Minimum X from points values, necessary to offset points\n     * @type Number\n     * @default\n     */\n    minX: 0,\n\n    /**\n     * Minimum Y from points values, necessary to offset points\n     * @type Number\n     * @default\n     */\n    minY: 0,\n\n    cacheProperties: cacheProperties,\n\n    /**\n     * Constructor\n     * @param {Array} points Array of points\n     * @param {Object} [options] Options object\n     * @return {fabric.Polygon} thisArg\n     */\n    initialize: function(points, options) {\n      options = options || {};\n      this.points = points || [];\n      this.callSuper('initialize', options);\n      this._calcDimensions();\n      if (!('top' in options)) {\n        this.top = this.minY;\n      }\n      if (!('left' in options)) {\n        this.left = this.minX;\n      }\n      this.pathOffset = {\n        x: this.minX + this.width / 2,\n        y: this.minY + this.height / 2\n      };\n    },\n\n    /**\n     * @private\n     */\n    _calcDimensions: function() {\n\n      var points = this.points,\n          minX = min(points, 'x'),\n          minY = min(points, 'y'),\n          maxX = max(points, 'x'),\n          maxY = max(points, 'y');\n\n      this.width = (maxX - minX) || 0;\n      this.height = (maxY - minY) || 0;\n      this.minX = minX || 0;\n      this.minY = minY || 0;\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return extend(this.callSuper('toObject', propertiesToInclude), {\n        points: this.points.concat()\n      });\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toSVG: function(reviver) {\n      var points = [], addTransform,\n          markup = this._createBaseSVGMarkup();\n\n      for (var i = 0, len = this.points.length; i < len; i++) {\n        points.push(toFixed(this.points[i].x, 2), ',', toFixed(this.points[i].y, 2), ' ');\n      }\n      if (!(this.group && this.group.type === 'path-group')) {\n        addTransform = ' translate(' + (-this.pathOffset.x) + ', ' + (-this.pathOffset.y) + ') ';\n      }\n      markup.push(\n        '<', this.type, ' ', this.getSvgId(),\n          'points=\"', points.join(''),\n          '\" style=\"', this.getSvgStyles(),\n          '\" transform=\"', this.getSvgTransform(), addTransform,\n          ' ', this.getSvgTransformMatrix(),\n        '\"/>\\n'\n      );\n\n      return reviver ? reviver(markup.join('')) : markup.join('');\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Boolean} noTransform\n     */\n    _render: function(ctx, noTransform) {\n      if (!this.commonRender(ctx, noTransform)) {\n        return;\n      }\n      this._renderFill(ctx);\n      if (this.stroke || this.strokeDashArray) {\n        ctx.closePath();\n        this._renderStroke(ctx);\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Boolean} noTransform\n     */\n    commonRender: function(ctx, noTransform) {\n      var point, len = this.points.length,\n          x = noTransform ? 0 : this.pathOffset.x,\n          y = noTransform ? 0 : this.pathOffset.y;\n\n      if (!len || isNaN(this.points[len - 1].y)) {\n        // do not draw if no points or odd points\n        // NaN comes from parseFloat of a empty string in parser\n        return false;\n      }\n      ctx.beginPath();\n      ctx.moveTo(this.points[0].x - x, this.points[0].y - y);\n      for (var i = 0; i < len; i++) {\n        point = this.points[i];\n        ctx.lineTo(point.x - x, point.y - y);\n      }\n      return true;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderDashedStroke: function(ctx) {\n      fabric.Polyline.prototype._renderDashedStroke.call(this, ctx);\n      ctx.closePath();\n    },\n\n    /**\n     * Returns complexity of an instance\n     * @return {Number} complexity of this instance\n     */\n    complexity: function() {\n      return this.points.length;\n    }\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by `fabric.Polygon.fromElement`)\n   * @static\n   * @memberOf fabric.Polygon\n   * @see: http://www.w3.org/TR/SVG/shapes.html#PolygonElement\n   */\n  fabric.Polygon.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat();\n\n  /**\n   * Returns {@link fabric.Polygon} instance from an SVG element\n   * @static\n   * @memberOf fabric.Polygon\n   * @param {SVGElement} element Element to parse\n   * @param {Object} [options] Options object\n   * @return {fabric.Polygon} Instance of fabric.Polygon\n   */\n  fabric.Polygon.fromElement = function(element, options) {\n    if (!element) {\n      return null;\n    }\n\n    options || (options = { });\n\n    var points = fabric.parsePointsAttribute(element.getAttribute('points')),\n        parsedAttributes = fabric.parseAttributes(element, fabric.Polygon.ATTRIBUTE_NAMES);\n\n    return new fabric.Polygon(points, extend(parsedAttributes, options));\n  };\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns fabric.Polygon instance from an object representation\n   * @static\n   * @memberOf fabric.Polygon\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] Callback to invoke when an fabric.Path instance is created\n   * @return {fabric.Polygon} Instance of fabric.Polygon\n   */\n  fabric.Polygon.fromObject = function(object, callback) {\n    var polygon = new fabric.Polygon(object.points, object);\n    callback && callback(polygon);\n    return polygon;\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      min = fabric.util.array.min,\n      max = fabric.util.array.max,\n      extend = fabric.util.object.extend,\n      _toString = Object.prototype.toString,\n      drawArc = fabric.util.drawArc,\n      commandLengths = {\n        m: 2,\n        l: 2,\n        h: 1,\n        v: 1,\n        c: 6,\n        s: 4,\n        q: 4,\n        t: 2,\n        a: 7\n      },\n      repeatedCommands = {\n        m: 'l',\n        M: 'L'\n      };\n\n  if (fabric.Path) {\n    fabric.warn('fabric.Path is already defined');\n    return;\n  }\n\n  var cacheProperties = fabric.Object.prototype.cacheProperties.concat();\n  cacheProperties.push('path');\n\n  /**\n   * Path class\n   * @class fabric.Path\n   * @extends fabric.Object\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-1#path_and_pathgroup}\n   * @see {@link fabric.Path#initialize} for constructor definition\n   */\n  fabric.Path = fabric.util.createClass(fabric.Object, /** @lends fabric.Path.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'path',\n\n    /**\n     * Array of path points\n     * @type Array\n     * @default\n     */\n    path: null,\n\n    /**\n     * Minimum X from points values, necessary to offset points\n     * @type Number\n     * @default\n     */\n    minX: 0,\n\n    /**\n     * Minimum Y from points values, necessary to offset points\n     * @type Number\n     * @default\n     */\n    minY: 0,\n\n    cacheProperties: cacheProperties,\n\n    /**\n     * Constructor\n     * @param {Array|String} path Path data (sequence of coordinates and corresponding \"command\" tokens)\n     * @param {Object} [options] Options object\n     * @return {fabric.Path} thisArg\n     */\n    initialize: function(path, options) {\n      options = options || { };\n\n      if (options) {\n        this.setOptions(options);\n      }\n\n      if (!path) {\n        path = [];\n      }\n\n      var fromArray = _toString.call(path) === '[object Array]';\n\n      this.path = fromArray\n        ? path\n        // one of commands (m,M,l,L,q,Q,c,C,etc.) followed by non-command characters (i.e. command values)\n        : path.match && path.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);\n\n      if (!this.path) {\n        return;\n      }\n\n      if (!fromArray) {\n        this.path = this._parsePath();\n      }\n\n      this._setPositionDimensions(options);\n\n      if (options.sourcePath) {\n        this.setSourcePath(options.sourcePath);\n      }\n      if (this.objectCaching) {\n        this._createCacheCanvas();\n        this.setupState({ propertySet: 'cacheProperties' });\n      }\n    },\n\n    /**\n     * @private\n     * @param {Object} options Options object\n     */\n    _setPositionDimensions: function(options) {\n      var calcDim = this._parseDimensions();\n\n      this.minX = calcDim.left;\n      this.minY = calcDim.top;\n      this.width = calcDim.width;\n      this.height = calcDim.height;\n\n      if (typeof options.left === 'undefined') {\n        this.left = calcDim.left + (this.originX === 'center'\n          ? this.width / 2\n          : this.originX === 'right'\n            ? this.width\n            : 0);\n      }\n\n      if (typeof options.top === 'undefined') {\n        this.top = calcDim.top + (this.originY === 'center'\n          ? this.height / 2\n          : this.originY === 'bottom'\n            ? this.height\n            : 0);\n      }\n\n      this.pathOffset = this.pathOffset || {\n        x: this.minX + this.width / 2,\n        y: this.minY + this.height / 2\n      };\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx context to render path on\n     */\n    _renderPathCommands: function(ctx) {\n      var current, // current instruction\n          previous = null,\n          subpathStartX = 0,\n          subpathStartY = 0,\n          x = 0, // current x\n          y = 0, // current y\n          controlX = 0, // current control point x\n          controlY = 0, // current control point y\n          tempX,\n          tempY,\n          l = -this.pathOffset.x,\n          t = -this.pathOffset.y;\n\n      if (this.group && this.group.type === 'path-group') {\n        l = 0;\n        t = 0;\n      }\n\n      ctx.beginPath();\n\n      for (var i = 0, len = this.path.length; i < len; ++i) {\n\n        current = this.path[i];\n\n        switch (current[0]) { // first letter\n\n          case 'l': // lineto, relative\n            x += current[1];\n            y += current[2];\n            ctx.lineTo(x + l, y + t);\n            break;\n\n          case 'L': // lineto, absolute\n            x = current[1];\n            y = current[2];\n            ctx.lineTo(x + l, y + t);\n            break;\n\n          case 'h': // horizontal lineto, relative\n            x += current[1];\n            ctx.lineTo(x + l, y + t);\n            break;\n\n          case 'H': // horizontal lineto, absolute\n            x = current[1];\n            ctx.lineTo(x + l, y + t);\n            break;\n\n          case 'v': // vertical lineto, relative\n            y += current[1];\n            ctx.lineTo(x + l, y + t);\n            break;\n\n          case 'V': // verical lineto, absolute\n            y = current[1];\n            ctx.lineTo(x + l, y + t);\n            break;\n\n          case 'm': // moveTo, relative\n            x += current[1];\n            y += current[2];\n            subpathStartX = x;\n            subpathStartY = y;\n            ctx.moveTo(x + l, y + t);\n            break;\n\n          case 'M': // moveTo, absolute\n            x = current[1];\n            y = current[2];\n            subpathStartX = x;\n            subpathStartY = y;\n            ctx.moveTo(x + l, y + t);\n            break;\n\n          case 'c': // bezierCurveTo, relative\n            tempX = x + current[5];\n            tempY = y + current[6];\n            controlX = x + current[3];\n            controlY = y + current[4];\n            ctx.bezierCurveTo(\n              x + current[1] + l, // x1\n              y + current[2] + t, // y1\n              controlX + l, // x2\n              controlY + t, // y2\n              tempX + l,\n              tempY + t\n            );\n            x = tempX;\n            y = tempY;\n            break;\n\n          case 'C': // bezierCurveTo, absolute\n            x = current[5];\n            y = current[6];\n            controlX = current[3];\n            controlY = current[4];\n            ctx.bezierCurveTo(\n              current[1] + l,\n              current[2] + t,\n              controlX + l,\n              controlY + t,\n              x + l,\n              y + t\n            );\n            break;\n\n          case 's': // shorthand cubic bezierCurveTo, relative\n\n            // transform to absolute x,y\n            tempX = x + current[3];\n            tempY = y + current[4];\n\n            if (previous[0].match(/[CcSs]/) === null) {\n              // If there is no previous command or if the previous command was not a C, c, S, or s,\n              // the control point is coincident with the current point\n              controlX = x;\n              controlY = y;\n            }\n            else {\n              // calculate reflection of previous control points\n              controlX = 2 * x - controlX;\n              controlY = 2 * y - controlY;\n            }\n\n            ctx.bezierCurveTo(\n              controlX + l,\n              controlY + t,\n              x + current[1] + l,\n              y + current[2] + t,\n              tempX + l,\n              tempY + t\n            );\n            // set control point to 2nd one of this command\n            // \"... the first control point is assumed to be\n            // the reflection of the second control point on\n            // the previous command relative to the current point.\"\n            controlX = x + current[1];\n            controlY = y + current[2];\n\n            x = tempX;\n            y = tempY;\n            break;\n\n          case 'S': // shorthand cubic bezierCurveTo, absolute\n            tempX = current[3];\n            tempY = current[4];\n            if (previous[0].match(/[CcSs]/) === null) {\n              // If there is no previous command or if the previous command was not a C, c, S, or s,\n              // the control point is coincident with the current point\n              controlX = x;\n              controlY = y;\n            }\n            else {\n              // calculate reflection of previous control points\n              controlX = 2 * x - controlX;\n              controlY = 2 * y - controlY;\n            }\n            ctx.bezierCurveTo(\n              controlX + l,\n              controlY + t,\n              current[1] + l,\n              current[2] + t,\n              tempX + l,\n              tempY + t\n            );\n            x = tempX;\n            y = tempY;\n\n            // set control point to 2nd one of this command\n            // \"... the first control point is assumed to be\n            // the reflection of the second control point on\n            // the previous command relative to the current point.\"\n            controlX = current[1];\n            controlY = current[2];\n\n            break;\n\n          case 'q': // quadraticCurveTo, relative\n            // transform to absolute x,y\n            tempX = x + current[3];\n            tempY = y + current[4];\n\n            controlX = x + current[1];\n            controlY = y + current[2];\n\n            ctx.quadraticCurveTo(\n              controlX + l,\n              controlY + t,\n              tempX + l,\n              tempY + t\n            );\n            x = tempX;\n            y = tempY;\n            break;\n\n          case 'Q': // quadraticCurveTo, absolute\n            tempX = current[3];\n            tempY = current[4];\n\n            ctx.quadraticCurveTo(\n              current[1] + l,\n              current[2] + t,\n              tempX + l,\n              tempY + t\n            );\n            x = tempX;\n            y = tempY;\n            controlX = current[1];\n            controlY = current[2];\n            break;\n\n          case 't': // shorthand quadraticCurveTo, relative\n\n            // transform to absolute x,y\n            tempX = x + current[1];\n            tempY = y + current[2];\n\n            if (previous[0].match(/[QqTt]/) === null) {\n              // If there is no previous command or if the previous command was not a Q, q, T or t,\n              // assume the control point is coincident with the current point\n              controlX = x;\n              controlY = y;\n            }\n            else {\n              // calculate reflection of previous control point\n              controlX = 2 * x - controlX;\n              controlY = 2 * y - controlY;\n            }\n\n            ctx.quadraticCurveTo(\n              controlX + l,\n              controlY + t,\n              tempX + l,\n              tempY + t\n            );\n            x = tempX;\n            y = tempY;\n\n            break;\n\n          case 'T':\n            tempX = current[1];\n            tempY = current[2];\n\n            if (previous[0].match(/[QqTt]/) === null) {\n              // If there is no previous command or if the previous command was not a Q, q, T or t,\n              // assume the control point is coincident with the current point\n              controlX = x;\n              controlY = y;\n            }\n            else {\n              // calculate reflection of previous control point\n              controlX = 2 * x - controlX;\n              controlY = 2 * y - controlY;\n            }\n            ctx.quadraticCurveTo(\n              controlX + l,\n              controlY + t,\n              tempX + l,\n              tempY + t\n            );\n            x = tempX;\n            y = tempY;\n            break;\n\n          case 'a':\n            // TODO: optimize this\n            drawArc(ctx, x + l, y + t, [\n              current[1],\n              current[2],\n              current[3],\n              current[4],\n              current[5],\n              current[6] + x + l,\n              current[7] + y + t\n            ]);\n            x += current[6];\n            y += current[7];\n            break;\n\n          case 'A':\n            // TODO: optimize this\n            drawArc(ctx, x + l, y + t, [\n              current[1],\n              current[2],\n              current[3],\n              current[4],\n              current[5],\n              current[6] + l,\n              current[7] + t\n            ]);\n            x = current[6];\n            y = current[7];\n            break;\n\n          case 'z':\n          case 'Z':\n            x = subpathStartX;\n            y = subpathStartY;\n            ctx.closePath();\n            break;\n        }\n        previous = current;\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx context to render path on\n     */\n    _render: function(ctx) {\n      this._renderPathCommands(ctx);\n      this._renderFill(ctx);\n      this._renderStroke(ctx);\n    },\n\n    /**\n     * Returns string representation of an instance\n     * @return {String} string representation of an instance\n     */\n    toString: function() {\n      return '#<fabric.Path (' + this.complexity() +\n        '): { \"top\": ' + this.top + ', \"left\": ' + this.left + ' }>';\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      var o = extend(this.callSuper('toObject', ['sourcePath', 'pathOffset'].concat(propertiesToInclude)), {\n        path: this.path.map(function(item) { return item.slice() })\n      });\n      return o;\n    },\n\n    /**\n     * Returns dataless object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toDatalessObject: function(propertiesToInclude) {\n      var o = this.toObject(propertiesToInclude);\n      if (this.sourcePath) {\n        o.path = this.sourcePath;\n      }\n      delete o.sourcePath;\n      return o;\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toSVG: function(reviver) {\n      var chunks = [],\n          markup = this._createBaseSVGMarkup(), addTransform = '';\n\n      for (var i = 0, len = this.path.length; i < len; i++) {\n        chunks.push(this.path[i].join(' '));\n      }\n      var path = chunks.join(' ');\n      if (!(this.group && this.group.type === 'path-group')) {\n        addTransform = ' translate(' + (-this.pathOffset.x) + ', ' + (-this.pathOffset.y) + ') ';\n      }\n      markup.push(\n        '<path ', this.getSvgId(),\n          'd=\"', path,\n          '\" style=\"', this.getSvgStyles(),\n          '\" transform=\"', this.getSvgTransform(), addTransform,\n          this.getSvgTransformMatrix(), '\" stroke-linecap=\"round\" ',\n        '/>\\n'\n      );\n\n      return reviver ? reviver(markup.join('')) : markup.join('');\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Returns number representation of an instance complexity\n     * @return {Number} complexity of this instance\n     */\n    complexity: function() {\n      return this.path.length;\n    },\n\n    /**\n     * @private\n     */\n    _parsePath: function() {\n      var result = [],\n          coords = [],\n          currentPath,\n          parsed,\n          re = /([-+]?((\\d+\\.\\d+)|((\\d+)|(\\.\\d+)))(?:e[-+]?\\d+)?)/ig,\n          match,\n          coordsStr;\n\n      for (var i = 0, coordsParsed, len = this.path.length; i < len; i++) {\n        currentPath = this.path[i];\n\n        coordsStr = currentPath.slice(1).trim();\n        coords.length = 0;\n\n        while ((match = re.exec(coordsStr))) {\n          coords.push(match[0]);\n        }\n\n        coordsParsed = [currentPath.charAt(0)];\n\n        for (var j = 0, jlen = coords.length; j < jlen; j++) {\n          parsed = parseFloat(coords[j]);\n          if (!isNaN(parsed)) {\n            coordsParsed.push(parsed);\n          }\n        }\n\n        var command = coordsParsed[0],\n            commandLength = commandLengths[command.toLowerCase()],\n            repeatedCommand = repeatedCommands[command] || command;\n\n        if (coordsParsed.length - 1 > commandLength) {\n          for (var k = 1, klen = coordsParsed.length; k < klen; k += commandLength) {\n            result.push([command].concat(coordsParsed.slice(k, k + commandLength)));\n            command = repeatedCommand;\n          }\n        }\n        else {\n          result.push(coordsParsed);\n        }\n      }\n\n      return result;\n    },\n\n    /**\n     * @private\n     */\n    _parseDimensions: function() {\n\n      var aX = [],\n          aY = [],\n          current, // current instruction\n          previous = null,\n          subpathStartX = 0,\n          subpathStartY = 0,\n          x = 0, // current x\n          y = 0, // current y\n          controlX = 0, // current control point x\n          controlY = 0, // current control point y\n          tempX,\n          tempY,\n          bounds;\n\n      for (var i = 0, len = this.path.length; i < len; ++i) {\n\n        current = this.path[i];\n\n        switch (current[0]) { // first letter\n\n          case 'l': // lineto, relative\n            x += current[1];\n            y += current[2];\n            bounds = [];\n            break;\n\n          case 'L': // lineto, absolute\n            x = current[1];\n            y = current[2];\n            bounds = [];\n            break;\n\n          case 'h': // horizontal lineto, relative\n            x += current[1];\n            bounds = [];\n            break;\n\n          case 'H': // horizontal lineto, absolute\n            x = current[1];\n            bounds = [];\n            break;\n\n          case 'v': // vertical lineto, relative\n            y += current[1];\n            bounds = [];\n            break;\n\n          case 'V': // verical lineto, absolute\n            y = current[1];\n            bounds = [];\n            break;\n\n          case 'm': // moveTo, relative\n            x += current[1];\n            y += current[2];\n            subpathStartX = x;\n            subpathStartY = y;\n            bounds = [];\n            break;\n\n          case 'M': // moveTo, absolute\n            x = current[1];\n            y = current[2];\n            subpathStartX = x;\n            subpathStartY = y;\n            bounds = [];\n            break;\n\n          case 'c': // bezierCurveTo, relative\n            tempX = x + current[5];\n            tempY = y + current[6];\n            controlX = x + current[3];\n            controlY = y + current[4];\n            bounds = fabric.util.getBoundsOfCurve(x, y,\n              x + current[1], // x1\n              y + current[2], // y1\n              controlX, // x2\n              controlY, // y2\n              tempX,\n              tempY\n            );\n            x = tempX;\n            y = tempY;\n            break;\n\n          case 'C': // bezierCurveTo, absolute\n            x = current[5];\n            y = current[6];\n            controlX = current[3];\n            controlY = current[4];\n            bounds = fabric.util.getBoundsOfCurve(x, y,\n              current[1],\n              current[2],\n              controlX,\n              controlY,\n              x,\n              y\n            );\n            break;\n\n          case 's': // shorthand cubic bezierCurveTo, relative\n\n            // transform to absolute x,y\n            tempX = x + current[3];\n            tempY = y + current[4];\n\n            if (previous[0].match(/[CcSs]/) === null) {\n              // If there is no previous command or if the previous command was not a C, c, S, or s,\n              // the control point is coincident with the current point\n              controlX = x;\n              controlY = y;\n            }\n            else {\n              // calculate reflection of previous control points\n              controlX = 2 * x - controlX;\n              controlY = 2 * y - controlY;\n            }\n\n            bounds = fabric.util.getBoundsOfCurve(x, y,\n              controlX,\n              controlY,\n              x + current[1],\n              y + current[2],\n              tempX,\n              tempY\n            );\n            // set control point to 2nd one of this command\n            // \"... the first control point is assumed to be\n            // the reflection of the second control point on\n            // the previous command relative to the current point.\"\n            controlX = x + current[1];\n            controlY = y + current[2];\n            x = tempX;\n            y = tempY;\n            break;\n\n          case 'S': // shorthand cubic bezierCurveTo, absolute\n            tempX = current[3];\n            tempY = current[4];\n            if (previous[0].match(/[CcSs]/) === null) {\n              // If there is no previous command or if the previous command was not a C, c, S, or s,\n              // the control point is coincident with the current point\n              controlX = x;\n              controlY = y;\n            }\n            else {\n              // calculate reflection of previous control points\n              controlX = 2 * x - controlX;\n              controlY = 2 * y - controlY;\n            }\n            bounds = fabric.util.getBoundsOfCurve(x, y,\n              controlX,\n              controlY,\n              current[1],\n              current[2],\n              tempX,\n              tempY\n            );\n            x = tempX;\n            y = tempY;\n            // set control point to 2nd one of this command\n            // \"... the first control point is assumed to be\n            // the reflection of the second control point on\n            // the previous command relative to the current point.\"\n            controlX = current[1];\n            controlY = current[2];\n            break;\n\n          case 'q': // quadraticCurveTo, relative\n            // transform to absolute x,y\n            tempX = x + current[3];\n            tempY = y + current[4];\n            controlX = x + current[1];\n            controlY = y + current[2];\n            bounds = fabric.util.getBoundsOfCurve(x, y,\n              controlX,\n              controlY,\n              controlX,\n              controlY,\n              tempX,\n              tempY\n            );\n            x = tempX;\n            y = tempY;\n            break;\n\n          case 'Q': // quadraticCurveTo, absolute\n            controlX = current[1];\n            controlY = current[2];\n            bounds = fabric.util.getBoundsOfCurve(x, y,\n              controlX,\n              controlY,\n              controlX,\n              controlY,\n              current[3],\n              current[4]\n            );\n            x = current[3];\n            y = current[4];\n            break;\n\n          case 't': // shorthand quadraticCurveTo, relative\n            // transform to absolute x,y\n            tempX = x + current[1];\n            tempY = y + current[2];\n            if (previous[0].match(/[QqTt]/) === null) {\n              // If there is no previous command or if the previous command was not a Q, q, T or t,\n              // assume the control point is coincident with the current point\n              controlX = x;\n              controlY = y;\n            }\n            else {\n              // calculate reflection of previous control point\n              controlX = 2 * x - controlX;\n              controlY = 2 * y - controlY;\n            }\n\n            bounds = fabric.util.getBoundsOfCurve(x, y,\n              controlX,\n              controlY,\n              controlX,\n              controlY,\n              tempX,\n              tempY\n            );\n            x = tempX;\n            y = tempY;\n\n            break;\n\n          case 'T':\n            tempX = current[1];\n            tempY = current[2];\n\n            if (previous[0].match(/[QqTt]/) === null) {\n              // If there is no previous command or if the previous command was not a Q, q, T or t,\n              // assume the control point is coincident with the current point\n              controlX = x;\n              controlY = y;\n            }\n            else {\n              // calculate reflection of previous control point\n              controlX = 2 * x - controlX;\n              controlY = 2 * y - controlY;\n            }\n            bounds = fabric.util.getBoundsOfCurve(x, y,\n              controlX,\n              controlY,\n              controlX,\n              controlY,\n              tempX,\n              tempY\n            );\n            x = tempX;\n            y = tempY;\n            break;\n\n          case 'a':\n            // TODO: optimize this\n            bounds = fabric.util.getBoundsOfArc(x, y,\n              current[1],\n              current[2],\n              current[3],\n              current[4],\n              current[5],\n              current[6] + x,\n              current[7] + y\n            );\n            x += current[6];\n            y += current[7];\n            break;\n\n          case 'A':\n            // TODO: optimize this\n            bounds = fabric.util.getBoundsOfArc(x, y,\n              current[1],\n              current[2],\n              current[3],\n              current[4],\n              current[5],\n              current[6],\n              current[7]\n            );\n            x = current[6];\n            y = current[7];\n            break;\n\n          case 'z':\n          case 'Z':\n            x = subpathStartX;\n            y = subpathStartY;\n            break;\n        }\n        previous = current;\n        bounds.forEach(function (point) {\n          aX.push(point.x);\n          aY.push(point.y);\n        });\n        aX.push(x);\n        aY.push(y);\n      }\n\n      var minX = min(aX) || 0,\n          minY = min(aY) || 0,\n          maxX = max(aX) || 0,\n          maxY = max(aY) || 0,\n          deltaX = maxX - minX,\n          deltaY = maxY - minY,\n\n          o = {\n            left: minX,\n            top: minY,\n            width: deltaX,\n            height: deltaY\n          };\n\n      return o;\n    }\n  });\n\n  /**\n   * Creates an instance of fabric.Path from an object\n   * @static\n   * @memberOf fabric.Path\n   * @param {Object} object\n   * @param {Function} [callback] Callback to invoke when an fabric.Path instance is created\n   */\n  fabric.Path.fromObject = function(object, callback) {\n    // remove this pattern rom 2.0, accept just object.\n    var path;\n    if (typeof object.path === 'string') {\n      fabric.loadSVGFromURL(object.path, function (elements) {\n        var pathUrl = object.path;\n        path = elements[0];\n        delete object.path;\n\n        fabric.util.object.extend(path, object);\n        path.setSourcePath(pathUrl);\n\n        callback && callback(path);\n      });\n    }\n    else {\n      path = new fabric.Path(object.path, object);\n      callback && callback(path);\n      return path;\n    }\n  };\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by `fabric.Path.fromElement`)\n   * @static\n   * @memberOf fabric.Path\n   * @see http://www.w3.org/TR/SVG/paths.html#PathElement\n   */\n  fabric.Path.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat(['d']);\n\n  /**\n   * Creates an instance of fabric.Path from an SVG <path> element\n   * @static\n   * @memberOf fabric.Path\n   * @param {SVGElement} element to parse\n   * @param {Function} callback Callback to invoke when an fabric.Path instance is created\n   * @param {Object} [options] Options object\n   */\n  fabric.Path.fromElement = function(element, callback, options) {\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Path.ATTRIBUTE_NAMES);\n    callback && callback(new fabric.Path(parsedAttributes.d, extend(parsedAttributes, options)));\n  };\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Indicates that instances of this type are async\n   * @static\n   * @memberOf fabric.Path\n   * @type Boolean\n   * @default\n   */\n  fabric.Path.async = true;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend;\n\n  if (fabric.PathGroup) {\n    fabric.warn('fabric.PathGroup is already defined');\n    return;\n  }\n\n  /**\n   * Path group class\n   * @class fabric.PathGroup\n   * @extends fabric.Path\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-1#path_and_pathgroup}\n   * @see {@link fabric.PathGroup#initialize} for constructor definition\n   */\n  fabric.PathGroup = fabric.util.createClass(fabric.Object, /** @lends fabric.PathGroup.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'path-group',\n\n    /**\n     * Fill value\n     * @type String\n     * @default\n     */\n    fill: '',\n\n    /**\n     * Constructor\n     * @param {Array} paths\n     * @param {Object} [options] Options object\n     * @return {fabric.PathGroup} thisArg\n     */\n    initialize: function(paths, options) {\n\n      options = options || { };\n      this.paths = paths || [];\n\n      for (var i = this.paths.length; i--;) {\n        this.paths[i].group = this;\n      }\n\n      if (options.toBeParsed) {\n        this.parseDimensionsFromPaths(options);\n        delete options.toBeParsed;\n      }\n      this.setOptions(options);\n      this.setCoords();\n      if (options.sourcePath) {\n        this.setSourcePath(options.sourcePath);\n      }\n      if (this.objectCaching) {\n        this._createCacheCanvas();\n        this.setupState({ propertySet: 'cacheProperties' });\n      }\n    },\n\n    /**\n     * Calculate width and height based on paths contained\n     */\n    parseDimensionsFromPaths: function(options) {\n      var points, p, xC = [], yC = [], path, height, width,\n          m;\n      for (var j = this.paths.length; j--;) {\n        path = this.paths[j];\n        height = path.height + path.strokeWidth;\n        width = path.width + path.strokeWidth;\n        points = [\n          { x: path.left, y: path.top },\n          { x: path.left + width, y: path.top },\n          { x: path.left, y: path.top + height },\n          { x: path.left + width, y: path.top + height }\n        ];\n        m = this.paths[j].transformMatrix;\n        for (var i = 0; i < points.length; i++) {\n          p = points[i];\n          if (m) {\n            p = fabric.util.transformPoint(p, m, false);\n          }\n          xC.push(p.x);\n          yC.push(p.y);\n        }\n      }\n      options.width = Math.max.apply(null, xC);\n      options.height = Math.max.apply(null, yC);\n    },\n\n    /**\n     * Execute the drawing operation for an object on a specified context\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Boolean} [noTransform] When true, context is not transformed\n     */\n    drawObject: function(ctx) {\n      ctx.save();\n      ctx.translate(-this.width / 2, -this.height / 2);\n      for (var i = 0, l = this.paths.length; i < l; ++i) {\n        this.paths[i].render(ctx, true);\n      }\n      ctx.restore();\n    },\n\n    /**\n     * Check if cache is dirty\n     */\n    isCacheDirty: function() {\n      if (this.callSuper('isCacheDirty')) {\n        return true\n      }\n      if (!this.statefullCache) {\n        return false;\n      }\n      for (var i = 0, len = this.paths.length; i < len; i++) {\n        if (this.paths[i].isCacheDirty(true)) {\n          var dim = this._getNonTransformedDimensions();\n          this._cacheContext.clearRect(-dim.x / 2, -dim.y / 2, dim.x, dim.y);\n          return true\n        }\n      }\n      return false;\n    },\n\n    /**\n     * Sets certain property to a certain value\n     * @param {String} prop\n     * @param {*} value\n     * @return {fabric.PathGroup} thisArg\n     */\n    _set: function(prop, value) {\n\n      if (prop === 'fill' && value && this.isSameColor()) {\n        var i = this.paths.length;\n        while (i--) {\n          this.paths[i]._set(prop, value);\n        }\n      }\n\n      return this.callSuper('_set', prop, value);\n    },\n\n    /**\n     * Returns object representation of this path group\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      var pathsToObject = this.paths.map(function(path) {\n        var originalDefaults = path.includeDefaultValues;\n        path.includeDefaultValues = path.group.includeDefaultValues;\n        var obj = path.toObject(propertiesToInclude);\n        path.includeDefaultValues = originalDefaults;\n        return obj;\n      });\n      var o = extend(this.callSuper('toObject', ['sourcePath'].concat(propertiesToInclude)), {\n        paths: pathsToObject\n      });\n      return o;\n    },\n\n    /**\n     * Returns dataless object representation of this path group\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} dataless object representation of an instance\n     */\n    toDatalessObject: function(propertiesToInclude) {\n      var o = this.toObject(propertiesToInclude);\n      if (this.sourcePath) {\n        o.paths = this.sourcePath;\n      }\n      return o;\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toSVG: function(reviver) {\n      var objects = this.getObjects(),\n          p = this.getPointByOrigin('left', 'top'),\n          translatePart = 'translate(' + p.x + ' ' + p.y + ')',\n          markup = this._createBaseSVGMarkup();\n      markup.push(\n        '<g ', this.getSvgId(),\n        'style=\"', this.getSvgStyles(), '\" ',\n        'transform=\"', this.getSvgTransformMatrix(), translatePart, this.getSvgTransform(), '\" ',\n        '>\\n'\n      );\n\n      for (var i = 0, len = objects.length; i < len; i++) {\n        markup.push('\\t', objects[i].toSVG(reviver));\n      }\n      markup.push('</g>\\n');\n\n      return reviver ? reviver(markup.join('')) : markup.join('');\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Returns a string representation of this path group\n     * @return {String} string representation of an object\n     */\n    toString: function() {\n      return '#<fabric.PathGroup (' + this.complexity() +\n        '): { top: ' + this.top + ', left: ' + this.left + ' }>';\n    },\n\n    /**\n     * Returns true if all paths in this group are of same color\n     * @return {Boolean} true if all paths are of the same color (`fill`)\n     */\n    isSameColor: function() {\n      var firstPathFill = this.getObjects()[0].get('fill') || '';\n      if (typeof firstPathFill !== 'string') {\n        return false;\n      }\n      firstPathFill = firstPathFill.toLowerCase();\n      return this.getObjects().every(function(path) {\n        var pathFill = path.get('fill') || '';\n        return typeof pathFill === 'string' && (pathFill).toLowerCase() === firstPathFill;\n      });\n    },\n\n    /**\n     * Returns number representation of object's complexity\n     * @return {Number} complexity\n     */\n    complexity: function() {\n      return this.paths.reduce(function(total, path) {\n        return total + ((path && path.complexity) ? path.complexity() : 0);\n      }, 0);\n    },\n\n    /**\n     * Returns all paths in this path group\n     * @return {Array} array of path objects included in this path group\n     */\n    getObjects: function() {\n      return this.paths;\n    }\n  });\n\n  /**\n   * Creates fabric.PathGroup instance from an object representation\n   * @static\n   * @memberOf fabric.PathGroup\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] Callback to invoke when an fabric.PathGroup instance is created\n   */\n  fabric.PathGroup.fromObject = function(object, callback) {\n    // remove this pattern from 2.0 accepts only object\n    if (typeof object.paths === 'string') {\n      fabric.loadSVGFromURL(object.paths, function (elements) {\n\n        var pathUrl = object.paths;\n        delete object.paths;\n\n        var pathGroup = fabric.util.groupSVGElements(elements, object, pathUrl);\n\n        callback(pathGroup);\n      });\n    }\n    else {\n      fabric.util.enlivenObjects(object.paths, function(enlivenedObjects) {\n        delete object.paths;\n        callback(new fabric.PathGroup(enlivenedObjects, object));\n      });\n    }\n  };\n\n  /**\n   * Indicates that instances of this type are async\n   * @static\n   * @memberOf fabric.PathGroup\n   * @type Boolean\n   * @default\n   */\n  fabric.PathGroup.async = true;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      min = fabric.util.array.min,\n      max = fabric.util.array.max;\n\n  if (fabric.Group) {\n    return;\n  }\n\n  // lock-related properties, for use in fabric.Group#get\n  // to enable locking behavior on group\n  // when one of its objects has lock-related properties set\n  var _lockProperties = {\n    lockMovementX:  true,\n    lockMovementY:  true,\n    lockRotation:   true,\n    lockScalingX:   true,\n    lockScalingY:   true,\n    lockUniScaling: true\n  };\n\n  /**\n   * Group class\n   * @class fabric.Group\n   * @extends fabric.Object\n   * @mixes fabric.Collection\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-3#groups}\n   * @see {@link fabric.Group#initialize} for constructor definition\n   */\n  fabric.Group = fabric.util.createClass(fabric.Object, fabric.Collection, /** @lends fabric.Group.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'group',\n\n    /**\n     * Width of stroke\n     * @type Number\n     * @default\n     */\n    strokeWidth: 0,\n\n    /**\n     * Indicates if click events should also check for subtargets\n     * @type Boolean\n     * @default\n     */\n    subTargetCheck: false,\n\n    /**\n     * Constructor\n     * @param {Object} objects Group objects\n     * @param {Object} [options] Options object\n     * @param {Boolean} [isAlreadyGrouped] if true, objects have been grouped already.\n     * @return {Object} thisArg\n     */\n    initialize: function(objects, options, isAlreadyGrouped) {\n      options = options || { };\n\n      this._objects = [];\n      // if objects enclosed in a group have been grouped already,\n      // we cannot change properties of objects.\n      // Thus we need to set options to group without objects,\n      // because delegatedProperties propagate to objects.\n      isAlreadyGrouped && this.callSuper('initialize', options);\n\n      this._objects = objects || [];\n      for (var i = this._objects.length; i--; ) {\n        this._objects[i].group = this;\n      }\n\n      this.originalState = { };\n\n      if (options.originX) {\n        this.originX = options.originX;\n      }\n      if (options.originY) {\n        this.originY = options.originY;\n      }\n\n      if (isAlreadyGrouped) {\n        // do not change coordinate of objects enclosed in a group,\n        // because objects coordinate system have been group coodinate system already.\n        this._updateObjectsCoords(true);\n      }\n      else {\n        this._calcBounds();\n        this._updateObjectsCoords();\n        this.callSuper('initialize', options);\n      }\n\n      this.setCoords();\n      this.saveCoords();\n    },\n\n    /**\n     * @private\n     * @param {Boolean} [skipCoordsChange] if true, coordinates of objects enclosed in a group do not change\n     */\n    _updateObjectsCoords: function(skipCoordsChange) {\n      var center = this.getCenterPoint();\n      for (var i = this._objects.length; i--; ){\n        this._updateObjectCoords(this._objects[i], center, skipCoordsChange);\n      }\n    },\n\n    /**\n     * @private\n     * @param {Object} object\n     * @param {fabric.Point} center, current center of group.\n     * @param {Boolean} [skipCoordsChange] if true, coordinates of object dose not change\n     */\n    _updateObjectCoords: function(object, center, skipCoordsChange) {\n      // do not display corners of objects enclosed in a group\n      object.__origHasControls = object.hasControls;\n      object.hasControls = false;\n\n      if (skipCoordsChange) {\n        return;\n      }\n\n      var objectLeft = object.getLeft(),\n          objectTop = object.getTop(),\n          ignoreZoom = true;\n\n      object.set({\n        originalLeft: objectLeft,\n        originalTop: objectTop,\n        left: objectLeft - center.x,\n        top: objectTop - center.y\n      });\n      object.setCoords(ignoreZoom);\n    },\n\n    /**\n     * Returns string represenation of a group\n     * @return {String}\n     */\n    toString: function() {\n      return '#<fabric.Group: (' + this.complexity() + ')>';\n    },\n\n    /**\n     * Adds an object to a group; Then recalculates group's dimension, position.\n     * @param {Object} object\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    addWithUpdate: function(object) {\n      this._restoreObjectsState();\n      fabric.util.resetObjectTransform(this);\n      if (object) {\n        this._objects.push(object);\n        object.group = this;\n        object._set('canvas', this.canvas);\n      }\n      // since _restoreObjectsState set objects inactive\n      this.forEachObject(this._setObjectActive, this);\n      this._calcBounds();\n      this._updateObjectsCoords();\n      this.dirty = true;\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _setObjectActive: function(object) {\n      object.set('active', true);\n      object.group = this;\n    },\n\n    /**\n     * Removes an object from a group; Then recalculates group's dimension, position.\n     * @param {Object} object\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    removeWithUpdate: function(object) {\n      this._restoreObjectsState();\n      fabric.util.resetObjectTransform(this);\n      // since _restoreObjectsState set objects inactive\n      this.forEachObject(this._setObjectActive, this);\n\n      this.remove(object);\n      this._calcBounds();\n      this._updateObjectsCoords();\n      this.dirty = true;\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _onObjectAdded: function(object) {\n      this.dirty = true;\n      object.group = this;\n      object._set('canvas', this.canvas);\n    },\n\n    /**\n     * @private\n     */\n    _onObjectRemoved: function(object) {\n      this.dirty = true;\n      delete object.group;\n      object.set('active', false);\n    },\n\n    /**\n     * Properties that are delegated to group objects when reading/writing\n     * @param {Object} delegatedProperties\n     */\n    delegatedProperties: {\n      fill:             true,\n      stroke:           true,\n      strokeWidth:      true,\n      fontFamily:       true,\n      fontWeight:       true,\n      fontSize:         true,\n      fontStyle:        true,\n      lineHeight:       true,\n      textDecoration:   true,\n      textAlign:        true,\n      backgroundColor:  true\n    },\n\n    /**\n     * @private\n     */\n    _set: function(key, value) {\n      var i = this._objects.length;\n\n      if (this.delegatedProperties[key] || key === 'canvas') {\n        while (i--) {\n          this._objects[i].set(key, value);\n        }\n      }\n      else {\n        while (i--) {\n          this._objects[i].setOnGroup(key, value);\n        }\n      }\n\n      this.callSuper('_set', key, value);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      var objsToObject = this.getObjects().map(function(obj) {\n        var originalDefaults = obj.includeDefaultValues;\n        obj.includeDefaultValues = obj.group.includeDefaultValues;\n        var _obj = obj.toObject(propertiesToInclude);\n        obj.includeDefaultValues = originalDefaults;\n        return _obj;\n      });\n      return extend(this.callSuper('toObject', propertiesToInclude), {\n        objects: objsToObject\n      });\n    },\n\n    /**\n     * Renders instance on a given context\n     * @param {CanvasRenderingContext2D} ctx context to render instance on\n     */\n    render: function(ctx) {\n      this._transformDone = true;\n      this.callSuper('render', ctx);\n      this._transformDone = false;\n    },\n\n    /**\n     * Execute the drawing operation for an object on a specified context\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Boolean} [noTransform] When true, context is not transformed\n     */\n    drawObject: function(ctx) {\n      for (var i = 0, len = this._objects.length; i < len; i++) {\n        this._renderObject(this._objects[i], ctx);\n      }\n    },\n\n    /**\n     * Check if cache is dirty\n     */\n    isCacheDirty: function() {\n      if (this.callSuper('isCacheDirty')) {\n        return true\n      }\n      if (!this.statefullCache) {\n        return false;\n      }\n      for (var i = 0, len = this._objects.length; i < len; i++) {\n        if (this._objects[i].isCacheDirty(true)) {\n          var dim = this._getNonTransformedDimensions();\n          this._cacheContext.clearRect(-dim.x / 2, -dim.y / 2, dim.x, dim.y);\n          return true\n        }\n      }\n      return false;\n    },\n\n    /**\n     * Renders controls and borders for the object\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Boolean} [noTransform] When true, context is not transformed\n     */\n    _renderControls: function(ctx, noTransform) {\n      ctx.save();\n      ctx.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1;\n      this.callSuper('_renderControls', ctx, noTransform);\n      for (var i = 0, len = this._objects.length; i < len; i++) {\n        this._objects[i]._renderControls(ctx);\n      }\n      ctx.restore();\n    },\n\n    /**\n     * @private\n     */\n    _renderObject: function(object, ctx) {\n      // do not render if object is not visible\n      if (!object.visible) {\n        return;\n      }\n\n      var originalHasRotatingPoint = object.hasRotatingPoint;\n      object.hasRotatingPoint = false;\n      object.render(ctx);\n      object.hasRotatingPoint = originalHasRotatingPoint;\n    },\n\n    /**\n     * Retores original state of each of group objects (original state is that which was before group was created).\n     * @private\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    _restoreObjectsState: function() {\n      this._objects.forEach(this._restoreObjectState, this);\n      return this;\n    },\n\n    /**\n     * Realises the transform from this group onto the supplied object\n     * i.e. it tells you what would happen if the supplied object was in\n     * the group, and then the group was destroyed. It mutates the supplied\n     * object.\n     * @param {fabric.Object} object\n     * @return {fabric.Object} transformedObject\n     */\n    realizeTransform: function(object) {\n      var matrix = object.calcTransformMatrix(),\n          options = fabric.util.qrDecompose(matrix),\n          center = new fabric.Point(options.translateX, options.translateY);\n      object.flipX = false;\n      object.flipY = false;\n      object.set('scaleX', options.scaleX);\n      object.set('scaleY', options.scaleY);\n      object.skewX = options.skewX;\n      object.skewY = options.skewY;\n      object.angle = options.angle;\n      object.setPositionByOrigin(center, 'center', 'center');\n      return object;\n    },\n\n    /**\n     * Restores original state of a specified object in group\n     * @private\n     * @param {fabric.Object} object\n     * @return {fabric.Group} thisArg\n     */\n    _restoreObjectState: function(object) {\n      this.realizeTransform(object);\n      object.setCoords();\n      object.hasControls = object.__origHasControls;\n      delete object.__origHasControls;\n      object.set('active', false);\n      delete object.group;\n\n      return this;\n    },\n\n    /**\n     * Destroys a group (restoring state of its objects)\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    destroy: function() {\n      return this._restoreObjectsState();\n    },\n\n    /**\n     * Saves coordinates of this instance (to be used together with `hasMoved`)\n     * @saveCoords\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    saveCoords: function() {\n      this._originalLeft = this.get('left');\n      this._originalTop = this.get('top');\n      return this;\n    },\n\n    /**\n     * Checks whether this group was moved (since `saveCoords` was called last)\n     * @return {Boolean} true if an object was moved (since fabric.Group#saveCoords was called)\n     */\n    hasMoved: function() {\n      return this._originalLeft !== this.get('left') ||\n             this._originalTop !== this.get('top');\n    },\n\n    /**\n     * Sets coordinates of all group objects\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    setObjectsCoords: function() {\n      var ignoreZoom = true;\n      this.forEachObject(function(object) {\n        object.setCoords(ignoreZoom);\n      });\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _calcBounds: function(onlyWidthHeight) {\n      var aX = [],\n          aY = [],\n          o, prop,\n          props = ['tr', 'br', 'bl', 'tl'],\n          i = 0, iLen = this._objects.length,\n          j, jLen = props.length,\n          ignoreZoom = true;\n\n      for ( ; i < iLen; ++i) {\n        o = this._objects[i];\n        o.setCoords(ignoreZoom);\n        for (j = 0; j < jLen; j++) {\n          prop = props[j];\n          aX.push(o.oCoords[prop].x);\n          aY.push(o.oCoords[prop].y);\n        }\n      }\n\n      this.set(this._getBounds(aX, aY, onlyWidthHeight));\n    },\n\n    /**\n     * @private\n     */\n    _getBounds: function(aX, aY, onlyWidthHeight) {\n      var minXY = new fabric.Point(min(aX), min(aY)),\n          maxXY = new fabric.Point(max(aX), max(aY)),\n          obj = {\n            width: (maxXY.x - minXY.x) || 0,\n            height: (maxXY.y - minXY.y) || 0\n          };\n\n      if (!onlyWidthHeight) {\n        obj.left = minXY.x || 0;\n        obj.top = minXY.y || 0;\n        if (this.originX === 'center') {\n          obj.left += obj.width / 2;\n        }\n        if (this.originX === 'right') {\n          obj.left += obj.width;\n        }\n        if (this.originY === 'center') {\n          obj.top += obj.height / 2;\n        }\n        if (this.originY === 'bottom') {\n          obj.top += obj.height;\n        }\n      }\n      return obj;\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toSVG: function(reviver) {\n      var markup = this._createBaseSVGMarkup();\n      markup.push(\n        '<g ', this.getSvgId(), 'transform=\"',\n        /* avoiding styles intentionally */\n        this.getSvgTransform(),\n        this.getSvgTransformMatrix(),\n        '\" style=\"',\n        this.getSvgFilter(),\n        '\">\\n'\n      );\n\n      for (var i = 0, len = this._objects.length; i < len; i++) {\n        markup.push('\\t', this._objects[i].toSVG(reviver));\n      }\n\n      markup.push('</g>\\n');\n\n      return reviver ? reviver(markup.join('')) : markup.join('');\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Returns requested property\n     * @param {String} prop Property to get\n     * @return {*}\n     */\n    get: function(prop) {\n      if (prop in _lockProperties) {\n        if (this[prop]) {\n          return this[prop];\n        }\n        else {\n          for (var i = 0, len = this._objects.length; i < len; i++) {\n            if (this._objects[i][prop]) {\n              return true;\n            }\n          }\n          return false;\n        }\n      }\n      else {\n        if (prop in this.delegatedProperties) {\n          return this._objects[0] && this._objects[0].get(prop);\n        }\n        return this[prop];\n      }\n    }\n  });\n\n  /**\n   * Returns {@link fabric.Group} instance from an object representation\n   * @static\n   * @memberOf fabric.Group\n   * @param {Object} object Object to create a group from\n   * @param {Function} [callback] Callback to invoke when an group instance is created\n   */\n  fabric.Group.fromObject = function(object, callback) {\n    fabric.util.enlivenObjects(object.objects, function(enlivenedObjects) {\n      delete object.objects;\n      callback && callback(new fabric.Group(enlivenedObjects, object, true));\n    });\n  };\n\n  /**\n   * Indicates that instances of this type are async\n   * @static\n   * @memberOf fabric.Group\n   * @type Boolean\n   * @default\n   */\n  fabric.Group.async = true;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var extend = fabric.util.object.extend;\n\n  if (!global.fabric) {\n    global.fabric = { };\n  }\n\n  if (global.fabric.Image) {\n    fabric.warn('fabric.Image is already defined.');\n    return;\n  }\n\n  var stateProperties = fabric.Object.prototype.stateProperties.concat();\n  stateProperties.push(\n    'alignX',\n    'alignY',\n    'meetOrSlice'\n  );\n\n  /**\n   * Image class\n   * @class fabric.Image\n   * @extends fabric.Object\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-1#images}\n   * @see {@link fabric.Image#initialize} for constructor definition\n   */\n  fabric.Image = fabric.util.createClass(fabric.Object, /** @lends fabric.Image.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'image',\n\n    /**\n     * crossOrigin value (one of \"\", \"anonymous\", \"use-credentials\")\n     * @see https://developer.mozilla.org/en-US/docs/HTML/CORS_settings_attributes\n     * @type String\n     * @default\n     */\n    crossOrigin: '',\n\n    /**\n     * AlignX value, part of preserveAspectRatio (one of \"none\", \"mid\", \"min\", \"max\")\n     * @see http://www.w3.org/TR/SVG/coords.html#PreserveAspectRatioAttribute\n     * This parameter defines how the picture is aligned to its viewport when image element width differs from image width.\n     * @type String\n     * @default\n     */\n    alignX: 'none',\n\n    /**\n     * AlignY value, part of preserveAspectRatio (one of \"none\", \"mid\", \"min\", \"max\")\n     * @see http://www.w3.org/TR/SVG/coords.html#PreserveAspectRatioAttribute\n     * This parameter defines how the picture is aligned to its viewport when image element height differs from image height.\n     * @type String\n     * @default\n     */\n    alignY: 'none',\n\n    /**\n     * meetOrSlice value, part of preserveAspectRatio  (one of \"meet\", \"slice\").\n     * if meet the image is always fully visibile, if slice the viewport is always filled with image.\n     * @see http://www.w3.org/TR/SVG/coords.html#PreserveAspectRatioAttribute\n     * @type String\n     * @default\n     */\n    meetOrSlice: 'meet',\n\n    /**\n     * Width of a stroke.\n     * For image quality a stroke multiple of 2 gives better results.\n     * @type Number\n     * @default\n     */\n    strokeWidth: 0,\n\n    /**\n     * private\n     * contains last value of scaleX to detect\n     * if the Image got resized after the last Render\n     * @type Number\n     */\n    _lastScaleX: 1,\n\n    /**\n     * private\n     * contains last value of scaleY to detect\n     * if the Image got resized after the last Render\n     * @type Number\n     */\n    _lastScaleY: 1,\n\n    /**\n     * minimum scale factor under which any resizeFilter is triggered to resize the image\n     * 0 will disable the automatic resize. 1 will trigger automatically always.\n     * number bigger than 1 can be used in case we want to scale with some filter above\n     * the natural image dimensions\n     * @type Number\n     */\n    minimumScaleTrigger: 0.5,\n\n    /**\n     * List of properties to consider when checking if\n     * state of an object is changed ({@link fabric.Object#hasStateChanged})\n     * as well as for history (undo/redo) purposes\n     * @type Array\n     */\n    stateProperties: stateProperties,\n\n    /**\n     * When `true`, object is cached on an additional canvas.\n     * default to false for images\n     * since 1.7.0\n     * @type Boolean\n     * @default\n     */\n    objectCaching: false,\n\n    /**\n     * Constructor\n     * @param {HTMLImageElement | String} element Image element\n     * @param {Object} [options] Options object\n     * @param {function} [callback] callback function to call after eventual filters applied.\n     * @return {fabric.Image} thisArg\n     */\n    initialize: function(element, options, callback) {\n      options || (options = { });\n      this.filters = [];\n      this.resizeFilters = [];\n      this.callSuper('initialize', options);\n      this._initElement(element, options, callback);\n    },\n\n    /**\n     * Returns image element which this instance if based on\n     * @return {HTMLImageElement} Image element\n     */\n    getElement: function() {\n      return this._element;\n    },\n\n    /**\n     * Sets image element for this instance to a specified one.\n     * If filters defined they are applied to new image.\n     * You might need to call `canvas.renderAll` and `object.setCoords` after replacing, to render new image and update controls area.\n     * @param {HTMLImageElement} element\n     * @param {Function} [callback] Callback is invoked when all filters have been applied and new image is generated\n     * @param {Object} [options] Options object\n     * @return {fabric.Image} thisArg\n     * @chainable\n     */\n    setElement: function(element, callback, options) {\n\n      var _callback, _this;\n\n      this._element = element;\n      this._originalElement = element;\n      this._initConfig(options);\n\n      if (this.resizeFilters.length === 0) {\n        _callback = callback;\n      }\n      else {\n        _this = this;\n        _callback = function() {\n          _this.applyFilters(callback, _this.resizeFilters, _this._filteredEl || _this._originalElement, true);\n        };\n      }\n\n      if (this.filters.length !== 0) {\n        this.applyFilters(_callback);\n      }\n      else if (_callback) {\n        _callback(this);\n      }\n\n      return this;\n    },\n\n    /**\n     * Sets crossOrigin value (on an instance and corresponding image element)\n     * @return {fabric.Image} thisArg\n     * @chainable\n     */\n    setCrossOrigin: function(value) {\n      this.crossOrigin = value;\n      this._element.crossOrigin = value;\n\n      return this;\n    },\n\n    /**\n     * Returns original size of an image\n     * @return {Object} Object with \"width\" and \"height\" properties\n     */\n    getOriginalSize: function() {\n      var element = this.getElement();\n      return {\n        width: element.width,\n        height: element.height\n      };\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _stroke: function(ctx) {\n      if (!this.stroke || this.strokeWidth === 0) {\n        return;\n      }\n      var w = this.width / 2, h = this.height / 2;\n      ctx.beginPath();\n      ctx.moveTo(-w, -h);\n      ctx.lineTo(w, -h);\n      ctx.lineTo(w, h);\n      ctx.lineTo(-w, h);\n      ctx.lineTo(-w, -h);\n      ctx.closePath();\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderDashedStroke: function(ctx) {\n      var x = -this.width / 2,\n          y = -this.height / 2,\n          w = this.width,\n          h = this.height;\n\n      ctx.save();\n      this._setStrokeStyles(ctx);\n\n      ctx.beginPath();\n      fabric.util.drawDashedLine(ctx, x, y, x + w, y, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, x + w, y, x + w, y + h, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, x + w, y + h, x, y + h, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, x, y + h, x, y, this.strokeDashArray);\n      ctx.closePath();\n      ctx.restore();\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      var filters = [], resizeFilters = [],\n          scaleX = 1, scaleY = 1;\n\n      this.filters.forEach(function(filterObj) {\n        if (filterObj) {\n          if (filterObj.type === 'Resize') {\n            scaleX *= filterObj.scaleX;\n            scaleY *= filterObj.scaleY;\n          }\n          filters.push(filterObj.toObject());\n        }\n      });\n\n      this.resizeFilters.forEach(function(filterObj) {\n        filterObj && resizeFilters.push(filterObj.toObject());\n      });\n      var object = extend(\n        this.callSuper(\n          'toObject',\n          ['crossOrigin', 'alignX', 'alignY', 'meetOrSlice'].concat(propertiesToInclude)\n        ), {\n          src: this.getSrc(),\n          filters: filters,\n          resizeFilters: resizeFilters,\n        });\n\n      object.width /= scaleX;\n      object.height /= scaleY;\n\n      return object;\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns SVG representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toSVG: function(reviver) {\n      var markup = this._createBaseSVGMarkup(), x = -this.width / 2, y = -this.height / 2,\n          preserveAspectRatio = 'none', filtered = true;\n      if (this.group && this.group.type === 'path-group') {\n        x = this.left;\n        y = this.top;\n      }\n      if (this.alignX !== 'none' && this.alignY !== 'none') {\n        preserveAspectRatio = 'x' + this.alignX + 'Y' + this.alignY + ' ' + this.meetOrSlice;\n      }\n      markup.push(\n        '<g transform=\"', this.getSvgTransform(), this.getSvgTransformMatrix(), '\">\\n',\n          '<image ', this.getSvgId(), 'xlink:href=\"', this.getSvgSrc(filtered),\n            '\" x=\"', x, '\" y=\"', y,\n            '\" style=\"', this.getSvgStyles(),\n            // we're essentially moving origin of transformation from top/left corner to the center of the shape\n            // by wrapping it in container <g> element with actual transformation, then offsetting object to the top/left\n            // so that object's center aligns with container's left/top\n            '\" width=\"', this.width,\n            '\" height=\"', this.height,\n            '\" preserveAspectRatio=\"', preserveAspectRatio, '\"',\n          '></image>\\n'\n      );\n\n      if (this.stroke || this.strokeDashArray) {\n        var origFill = this.fill;\n        this.fill = null;\n        markup.push(\n          '<rect ',\n            'x=\"', x, '\" y=\"', y,\n            '\" width=\"', this.width, '\" height=\"', this.height,\n            '\" style=\"', this.getSvgStyles(),\n          '\"/>\\n'\n        );\n        this.fill = origFill;\n      }\n\n      markup.push('</g>\\n');\n\n      return reviver ? reviver(markup.join('')) : markup.join('');\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Returns source of an image\n     * @param {Boolean} filtered indicates if the src is needed for svg\n     * @return {String} Source of an image\n     */\n    getSrc: function(filtered) {\n      var element = filtered ? this._element : this._originalElement;\n      if (element) {\n        return fabric.isLikelyNode ? element._src : element.src;\n      }\n      else {\n        return this.src || '';\n      }\n    },\n\n    /**\n     * Sets source of an image\n     * @param {String} src Source string (URL)\n     * @param {Function} [callback] Callback is invoked when image has been loaded (and all filters have been applied)\n     * @param {Object} [options] Options object\n     * @return {fabric.Image} thisArg\n     * @chainable\n     */\n    setSrc: function(src, callback, options) {\n      fabric.util.loadImage(src, function(img) {\n        return this.setElement(img, callback, options);\n      }, this, options && options.crossOrigin);\n    },\n\n    /**\n     * Returns string representation of an instance\n     * @return {String} String representation of an instance\n     */\n    toString: function() {\n      return '#<fabric.Image: { src: \"' + this.getSrc() + '\" }>';\n    },\n\n    /**\n     * Applies filters assigned to this image (from \"filters\" array)\n     * @method applyFilters\n     * @param {Function} callback Callback is invoked when all filters have been applied and new image is generated\n     * @param {Array} filters to be applied\n     * @param {fabric.Image} imgElement image to filter ( default to this._element )\n     * @param {Boolean} forResizing\n     * @return {CanvasElement} canvasEl to be drawn immediately\n     * @chainable\n     */\n    applyFilters: function(callback, filters, imgElement, forResizing) {\n\n      filters = filters || this.filters;\n      imgElement = imgElement || this._originalElement;\n\n      if (!imgElement) {\n        return;\n      }\n\n      var replacement = fabric.util.createImage(),\n          retinaScaling = this.canvas ? this.canvas.getRetinaScaling() : fabric.devicePixelRatio,\n          minimumScale = this.minimumScaleTrigger / retinaScaling,\n          _this = this, scaleX, scaleY;\n\n      if (filters.length === 0) {\n        this._element = imgElement;\n        callback && callback(this);\n        return imgElement;\n      }\n\n      var canvasEl = fabric.util.createCanvasElement();\n      canvasEl.width = imgElement.width;\n      canvasEl.height = imgElement.height;\n      canvasEl.getContext('2d').drawImage(imgElement, 0, 0, imgElement.width, imgElement.height);\n\n      filters.forEach(function(filter) {\n        if (!filter) {\n          return;\n        }\n        if (forResizing) {\n          scaleX = _this.scaleX < minimumScale ? _this.scaleX : 1;\n          scaleY = _this.scaleY < minimumScale ? _this.scaleY : 1;\n          if (scaleX * retinaScaling < 1) {\n            scaleX *= retinaScaling;\n          }\n          if (scaleY * retinaScaling < 1) {\n            scaleY *= retinaScaling;\n          }\n        }\n        else {\n          scaleX = filter.scaleX;\n          scaleY = filter.scaleY;\n        }\n        filter.applyTo(canvasEl, scaleX, scaleY);\n        if (!forResizing && filter.type === 'Resize') {\n          _this.width *= filter.scaleX;\n          _this.height *= filter.scaleY;\n        }\n      });\n\n      /** @ignore */\n      replacement.width = canvasEl.width;\n      replacement.height = canvasEl.height;\n      if (fabric.isLikelyNode) {\n        replacement.src = canvasEl.toBuffer(undefined, fabric.Image.pngCompression);\n        // onload doesn't fire in some node versions, so we invoke callback manually\n        _this._element = replacement;\n        !forResizing && (_this._filteredEl = replacement);\n        callback && callback(_this);\n      }\n      else {\n        replacement.onload = function() {\n          _this._element = replacement;\n          !forResizing && (_this._filteredEl = replacement);\n          callback && callback(_this);\n          replacement.onload = canvasEl = null;\n        };\n        replacement.src = canvasEl.toDataURL('image/png');\n      }\n      return canvasEl;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Boolean} noTransform\n     */\n    _render: function(ctx, noTransform) {\n      var x, y, imageMargins = this._findMargins(), elementToDraw;\n\n      x = (noTransform ? this.left : -this.width / 2);\n      y = (noTransform ? this.top : -this.height / 2);\n\n      if (this.meetOrSlice === 'slice') {\n        ctx.beginPath();\n        ctx.rect(x, y, this.width, this.height);\n        ctx.clip();\n      }\n\n      if (this.isMoving === false && this.resizeFilters.length && this._needsResize()) {\n        this._lastScaleX = this.scaleX;\n        this._lastScaleY = this.scaleY;\n        elementToDraw = this.applyFilters(null, this.resizeFilters, this._filteredEl || this._originalElement, true);\n      }\n      else {\n        elementToDraw = this._element;\n      }\n      elementToDraw && ctx.drawImage(elementToDraw,\n                                     x + imageMargins.marginX,\n                                     y + imageMargins.marginY,\n                                     imageMargins.width,\n                                     imageMargins.height\n                                    );\n\n      this._stroke(ctx);\n      this._renderStroke(ctx);\n    },\n\n    /**\n     * @private, needed to check if image needs resize\n     */\n    _needsResize: function() {\n      return (this.scaleX !== this._lastScaleX || this.scaleY !== this._lastScaleY);\n    },\n\n    /**\n     * @private\n     */\n    _findMargins: function() {\n      var width = this.width, height = this.height, scales,\n          scale, marginX = 0, marginY = 0;\n\n      if (this.alignX !== 'none' || this.alignY !== 'none') {\n        scales = [this.width / this._element.width, this.height / this._element.height];\n        scale = this.meetOrSlice === 'meet'\n                ? Math.min.apply(null, scales) : Math.max.apply(null, scales);\n        width = this._element.width * scale;\n        height = this._element.height * scale;\n        if (this.alignX === 'Mid') {\n          marginX = (this.width - width) / 2;\n        }\n        if (this.alignX === 'Max') {\n          marginX = this.width - width;\n        }\n        if (this.alignY === 'Mid') {\n          marginY = (this.height - height) / 2;\n        }\n        if (this.alignY === 'Max') {\n          marginY = this.height - height;\n        }\n      }\n      return {\n        width:  width,\n        height: height,\n        marginX: marginX,\n        marginY: marginY\n      };\n    },\n\n    /**\n     * @private\n     */\n    _resetWidthHeight: function() {\n      var element = this.getElement();\n\n      this.set('width', element.width);\n      this.set('height', element.height);\n    },\n\n    /**\n     * The Image class's initialization method. This method is automatically\n     * called by the constructor.\n     * @private\n     * @param {HTMLImageElement|String} element The element representing the image\n     * @param {Object} [options] Options object\n     */\n    _initElement: function(element, options, callback) {\n      this.setElement(fabric.util.getById(element), callback, options);\n      fabric.util.addClass(this.getElement(), fabric.Image.CSS_CANVAS);\n    },\n\n    /**\n     * @private\n     * @param {Object} [options] Options object\n     */\n    _initConfig: function(options) {\n      options || (options = { });\n      this.setOptions(options);\n      this._setWidthHeight(options);\n      if (this._element && this.crossOrigin) {\n        this._element.crossOrigin = this.crossOrigin;\n      }\n    },\n\n    /**\n     * @private\n     * @param {Array} filters to be initialized\n     * @param {Function} callback Callback to invoke when all fabric.Image.filters instances are created\n     */\n    _initFilters: function(filters, callback) {\n      if (filters && filters.length) {\n        fabric.util.enlivenObjects(filters, function(enlivenedObjects) {\n          callback && callback(enlivenedObjects);\n        }, 'fabric.Image.filters');\n      }\n      else {\n        callback && callback();\n      }\n    },\n\n    /**\n     * @private\n     * @param {Object} [options] Object with width/height properties\n     */\n    _setWidthHeight: function(options) {\n      this.width = 'width' in options\n        ? options.width\n        : (this.getElement()\n            ? this.getElement().width || 0\n            : 0);\n\n      this.height = 'height' in options\n        ? options.height\n        : (this.getElement()\n            ? this.getElement().height || 0\n            : 0);\n    },\n\n    /**\n     * Returns complexity of an instance\n     * @return {Number} complexity of this instance\n     */\n    complexity: function() {\n      return 1;\n    }\n  });\n\n  /**\n   * Default CSS class name for canvas\n   * @static\n   * @type String\n   * @default\n   */\n  fabric.Image.CSS_CANVAS = 'canvas-img';\n\n  /**\n   * Alias for getSrc\n   * @static\n   */\n  fabric.Image.prototype.getSvgSrc = fabric.Image.prototype.getSrc;\n\n  /**\n   * Creates an instance of fabric.Image from its object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {Function} callback Callback to invoke when an image instance is created\n   */\n  fabric.Image.fromObject = function(object, callback) {\n    fabric.util.loadImage(object.src, function(img) {\n      fabric.Image.prototype._initFilters.call(object, object.filters, function(filters) {\n        object.filters = filters || [];\n        fabric.Image.prototype._initFilters.call(object, object.resizeFilters, function(resizeFilters) {\n          object.resizeFilters = resizeFilters || [];\n          return new fabric.Image(img, object, callback);\n        });\n      });\n    }, null, object.crossOrigin);\n  };\n\n  /**\n   * Creates an instance of fabric.Image from an URL string\n   * @static\n   * @param {String} url URL to create an image from\n   * @param {Function} [callback] Callback to invoke when image is created (newly created image is passed as a first argument)\n   * @param {Object} [imgOptions] Options object\n   */\n  fabric.Image.fromURL = function(url, callback, imgOptions) {\n    fabric.util.loadImage(url, function(img) {\n      callback && callback(new fabric.Image(img, imgOptions));\n    }, null, imgOptions && imgOptions.crossOrigin);\n  };\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Image.fromElement})\n   * @static\n   * @see {@link http://www.w3.org/TR/SVG/struct.html#ImageElement}\n   */\n  fabric.Image.ATTRIBUTE_NAMES =\n    fabric.SHARED_ATTRIBUTES.concat('x y width height preserveAspectRatio xlink:href'.split(' '));\n\n  /**\n   * Returns {@link fabric.Image} instance from an SVG element\n   * @static\n   * @param {SVGElement} element Element to parse\n   * @param {Function} callback Callback to execute when fabric.Image object is created\n   * @param {Object} [options] Options object\n   * @return {fabric.Image} Instance of fabric.Image\n   */\n  fabric.Image.fromElement = function(element, callback, options) {\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Image.ATTRIBUTE_NAMES),\n        preserveAR;\n\n    if (parsedAttributes.preserveAspectRatio) {\n      preserveAR = fabric.util.parsePreserveAspectRatioAttribute(parsedAttributes.preserveAspectRatio);\n      extend(parsedAttributes, preserveAR);\n    }\n\n    fabric.Image.fromURL(parsedAttributes['xlink:href'], callback,\n      extend((options ? fabric.util.object.clone(options) : { }), parsedAttributes));\n  };\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Indicates that instances of this type are async\n   * @static\n   * @type Boolean\n   * @default\n   */\n  fabric.Image.async = true;\n\n  /**\n   * Indicates compression level used when generating PNG under Node (in applyFilters). Any of 0-9\n   * @static\n   * @type Number\n   * @default\n   */\n  fabric.Image.pngCompression = 1;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\nfabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n\n  /**\n   * @private\n   * @return {Number} angle value\n   */\n  _getAngleValueForStraighten: function() {\n    var angle = this.getAngle() % 360;\n    if (angle > 0) {\n      return Math.round((angle - 1) / 90) * 90;\n    }\n    return Math.round(angle / 90) * 90;\n  },\n\n  /**\n   * Straightens an object (rotating it from current angle to one of 0, 90, 180, 270, etc. depending on which is closer)\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  straighten: function() {\n    this.setAngle(this._getAngleValueForStraighten());\n    return this;\n  },\n\n  /**\n   * Same as {@link fabric.Object.prototype.straighten} but with animation\n   * @param {Object} callbacks Object with callback functions\n   * @param {Function} [callbacks.onComplete] Invoked on completion\n   * @param {Function} [callbacks.onChange] Invoked on every step of animation\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  fxStraighten: function(callbacks) {\n    callbacks = callbacks || { };\n\n    var empty = function() { },\n        onComplete = callbacks.onComplete || empty,\n        onChange = callbacks.onChange || empty,\n        _this = this;\n\n    fabric.util.animate({\n      startValue: this.get('angle'),\n      endValue: this._getAngleValueForStraighten(),\n      duration: this.FX_DURATION,\n      onChange: function(value) {\n        _this.setAngle(value);\n        onChange();\n      },\n      onComplete: function() {\n        _this.setCoords();\n        onComplete();\n      },\n      onStart: function() {\n        _this.set('active', false);\n      }\n    });\n\n    return this;\n  }\n});\n\nfabric.util.object.extend(fabric.StaticCanvas.prototype, /** @lends fabric.StaticCanvas.prototype */ {\n\n  /**\n   * Straightens object, then rerenders canvas\n   * @param {fabric.Object} object Object to straighten\n   * @return {fabric.Canvas} thisArg\n   * @chainable\n   */\n  straightenObject: function (object) {\n    object.straighten();\n    this.renderAll();\n    return this;\n  },\n\n  /**\n   * Same as {@link fabric.Canvas.prototype.straightenObject}, but animated\n   * @param {fabric.Object} object Object to straighten\n   * @return {fabric.Canvas} thisArg\n   * @chainable\n   */\n  fxStraightenObject: function (object) {\n    object.fxStraighten({\n      onChange: this.renderAll.bind(this)\n    });\n    return this;\n  }\n});\n\n\n/**\n * @namespace fabric.Image.filters\n * @memberOf fabric.Image\n * @tutorial {@link http://fabricjs.com/fabric-intro-part-2#image_filters}\n * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n */\nfabric.Image.filters = fabric.Image.filters || { };\n\n/**\n * Root filter class from which all filter classes inherit from\n * @class fabric.Image.filters.BaseFilter\n * @memberOf fabric.Image.filters\n */\nfabric.Image.filters.BaseFilter = fabric.util.createClass(/** @lends fabric.Image.filters.BaseFilter.prototype */ {\n\n  /**\n   * Filter type\n   * @param {String} type\n   * @default\n   */\n  type: 'BaseFilter',\n\n  /**\n   * Constructor\n   * @param {Object} [options] Options object\n   */\n  initialize: function(options) {\n    if (options) {\n      this.setOptions(options);\n    }\n  },\n\n  /**\n   * Sets filter's properties from options\n   * @param {Object} [options] Options object\n   */\n  setOptions: function(options) {\n    for (var prop in options) {\n      this[prop] = options[prop];\n    }\n  },\n\n  /**\n   * Returns object representation of an instance\n   * @return {Object} Object representation of an instance\n   */\n  toObject: function() {\n    return { type: this.type };\n  },\n\n  /**\n   * Returns a JSON representation of an instance\n   * @return {Object} JSON\n   */\n  toJSON: function() {\n    // delegate, not alias\n    return this.toObject();\n  }\n});\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Brightness filter class\n   * @class fabric.Image.filters.Brightness\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Brightness#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Brightness({\n   *   brightness: 200\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   */\n  filters.Brightness = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Brightness.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Brightness',\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.Brightness.prototype\n     * @param {Object} [options] Options object\n     * @param {Number} [options.brightness=0] Value to brighten the image up (-255..255)\n     */\n    initialize: function(options) {\n      options = options || { };\n      this.brightness = options.brightness || 0;\n    },\n\n    /**\n     * Applies filter to canvas element\n     * @param {Object} canvasEl Canvas element to apply filter to\n     */\n    applyTo: function(canvasEl) {\n      var context = canvasEl.getContext('2d'),\n          imageData = context.getImageData(0, 0, canvasEl.width, canvasEl.height),\n          data = imageData.data,\n          brightness = this.brightness;\n\n      for (var i = 0, len = data.length; i < len; i += 4) {\n        data[i] += brightness;\n        data[i + 1] += brightness;\n        data[i + 2] += brightness;\n      }\n\n      context.putImageData(imageData, 0, 0);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return extend(this.callSuper('toObject'), {\n        brightness: this.brightness\n      });\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @return {fabric.Image.filters.Brightness} Instance of fabric.Image.filters.Brightness\n   */\n  fabric.Image.filters.Brightness.fromObject = function(object) {\n    return new fabric.Image.filters.Brightness(object);\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Adapted from <a href=\"http://www.html5rocks.com/en/tutorials/canvas/imagefilters/\">html5rocks article</a>\n   * @class fabric.Image.filters.Convolute\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Convolute#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example <caption>Sharpen filter</caption>\n   * var filter = new fabric.Image.filters.Convolute({\n   *   matrix: [ 0, -1,  0,\n   *            -1,  5, -1,\n   *             0, -1,  0 ]\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   * @example <caption>Blur filter</caption>\n   * var filter = new fabric.Image.filters.Convolute({\n   *   matrix: [ 1/9, 1/9, 1/9,\n   *             1/9, 1/9, 1/9,\n   *             1/9, 1/9, 1/9 ]\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   * @example <caption>Emboss filter</caption>\n   * var filter = new fabric.Image.filters.Convolute({\n   *   matrix: [ 1,   1,  1,\n   *             1, 0.7, -1,\n   *            -1,  -1, -1 ]\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   * @example <caption>Emboss filter with opaqueness</caption>\n   * var filter = new fabric.Image.filters.Convolute({\n   *   opaque: true,\n   *   matrix: [ 1,   1,  1,\n   *             1, 0.7, -1,\n   *            -1,  -1, -1 ]\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   */\n  filters.Convolute = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Convolute.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Convolute',\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.Convolute.prototype\n     * @param {Object} [options] Options object\n     * @param {Boolean} [options.opaque=false] Opaque value (true/false)\n     * @param {Array} [options.matrix] Filter matrix\n     */\n    initialize: function(options) {\n      options = options || { };\n\n      this.opaque = options.opaque;\n      this.matrix = options.matrix || [\n        0, 0, 0,\n        0, 1, 0,\n        0, 0, 0\n      ];\n    },\n\n    /**\n     * Applies filter to canvas element\n     * @param {Object} canvasEl Canvas element to apply filter to\n     */\n    applyTo: function(canvasEl) {\n\n      var weights = this.matrix,\n          context = canvasEl.getContext('2d'),\n          pixels = context.getImageData(0, 0, canvasEl.width, canvasEl.height),\n\n          side = Math.round(Math.sqrt(weights.length)),\n          halfSide = Math.floor(side / 2),\n          src = pixels.data,\n          sw = pixels.width,\n          sh = pixels.height,\n          output = context.createImageData(sw, sh),\n          dst = output.data,\n          // go through the destination image pixels\n          alphaFac = this.opaque ? 1 : 0,\n          r, g, b, a, dstOff,\n          scx, scy, srcOff, wt;\n\n      for (var y = 0; y < sh; y++) {\n        for (var x = 0; x < sw; x++) {\n          dstOff = (y * sw + x) * 4;\n          // calculate the weighed sum of the source image pixels that\n          // fall under the convolution matrix\n          r = 0; g = 0; b = 0; a = 0;\n\n          for (var cy = 0; cy < side; cy++) {\n            for (var cx = 0; cx < side; cx++) {\n              scy = y + cy - halfSide;\n              scx = x + cx - halfSide;\n\n              // eslint-disable-next-line max-depth\n              if (scy < 0 || scy > sh || scx < 0 || scx > sw) {\n                continue;\n              }\n\n              srcOff = (scy * sw + scx) * 4;\n              wt = weights[cy * side + cx];\n\n              r += src[srcOff] * wt;\n              g += src[srcOff + 1] * wt;\n              b += src[srcOff + 2] * wt;\n              a += src[srcOff + 3] * wt;\n            }\n          }\n          dst[dstOff] = r;\n          dst[dstOff + 1] = g;\n          dst[dstOff + 2] = b;\n          dst[dstOff + 3] = a + alphaFac * (255 - a);\n        }\n      }\n\n      context.putImageData(output, 0, 0);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return extend(this.callSuper('toObject'), {\n        opaque: this.opaque,\n        matrix: this.matrix\n      });\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @return {fabric.Image.filters.Convolute} Instance of fabric.Image.filters.Convolute\n   */\n  fabric.Image.filters.Convolute.fromObject = function(object) {\n    return new fabric.Image.filters.Convolute(object);\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * GradientTransparency filter class\n   * @class fabric.Image.filters.GradientTransparency\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.GradientTransparency#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.GradientTransparency({\n   *   threshold: 200\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   */\n   // eslint-disable-next-line max-len\n  filters.GradientTransparency = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.GradientTransparency.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'GradientTransparency',\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.GradientTransparency.prototype\n     * @param {Object} [options] Options object\n     * @param {Number} [options.threshold=100] Threshold value\n     */\n    initialize: function(options) {\n      options = options || { };\n      this.threshold = options.threshold || 100;\n    },\n\n    /**\n     * Applies filter to canvas element\n     * @param {Object} canvasEl Canvas element to apply filter to\n     */\n    applyTo: function(canvasEl) {\n      var context = canvasEl.getContext('2d'),\n          imageData = context.getImageData(0, 0, canvasEl.width, canvasEl.height),\n          data = imageData.data,\n          threshold = this.threshold,\n          total = data.length;\n\n      for (var i = 0, len = data.length; i < len; i += 4) {\n        data[i + 3] = threshold + 255 * (total - i) / total;\n      }\n\n      context.putImageData(imageData, 0, 0);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return extend(this.callSuper('toObject'), {\n        threshold: this.threshold\n      });\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @return {fabric.Image.filters.GradientTransparency} Instance of fabric.Image.filters.GradientTransparency\n   */\n  fabric.Image.filters.GradientTransparency.fromObject = function(object) {\n    return new fabric.Image.filters.GradientTransparency(object);\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Grayscale image filter class\n   * @class fabric.Image.filters.Grayscale\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Grayscale();\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   */\n  filters.Grayscale = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Grayscale.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Grayscale',\n\n    /**\n     * Applies filter to canvas element\n     * @memberOf fabric.Image.filters.Grayscale.prototype\n     * @param {Object} canvasEl Canvas element to apply filter to\n     */\n    applyTo: function(canvasEl) {\n      var context = canvasEl.getContext('2d'),\n          imageData = context.getImageData(0, 0, canvasEl.width, canvasEl.height),\n          data = imageData.data,\n          len = imageData.width * imageData.height * 4,\n          index = 0,\n          average;\n\n      while (index < len) {\n        average = (data[index] + data[index + 1] + data[index + 2]) / 3;\n        data[index]     = average;\n        data[index + 1] = average;\n        data[index + 2] = average;\n        index += 4;\n      }\n\n      context.putImageData(imageData, 0, 0);\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @return {fabric.Image.filters.Grayscale} Instance of fabric.Image.filters.Grayscale\n   */\n  fabric.Image.filters.Grayscale.fromObject = function() {\n    return new fabric.Image.filters.Grayscale();\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Invert filter class\n   * @class fabric.Image.filters.Invert\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Invert();\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   */\n  filters.Invert = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Invert.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Invert',\n\n    /**\n     * Applies filter to canvas element\n     * @memberOf fabric.Image.filters.Invert.prototype\n     * @param {Object} canvasEl Canvas element to apply filter to\n     */\n    applyTo: function(canvasEl) {\n      var context = canvasEl.getContext('2d'),\n          imageData = context.getImageData(0, 0, canvasEl.width, canvasEl.height),\n          data = imageData.data,\n          iLen = data.length, i;\n\n      for (i = 0; i < iLen; i += 4) {\n        data[i] = 255 - data[i];\n        data[i + 1] = 255 - data[i + 1];\n        data[i + 2] = 255 - data[i + 2];\n      }\n\n      context.putImageData(imageData, 0, 0);\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @return {fabric.Image.filters.Invert} Instance of fabric.Image.filters.Invert\n   */\n  fabric.Image.filters.Invert.fromObject = function() {\n    return new fabric.Image.filters.Invert();\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Mask filter class\n   * See http://resources.aleph-1.com/mask/\n   * @class fabric.Image.filters.Mask\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Mask#initialize} for constructor definition\n   */\n  filters.Mask = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Mask.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Mask',\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.Mask.prototype\n     * @param {Object} [options] Options object\n     * @param {fabric.Image} [options.mask] Mask image object\n     * @param {Number} [options.channel=0] Rgb channel (0, 1, 2 or 3)\n     */\n    initialize: function(options) {\n      options = options || { };\n\n      this.mask = options.mask;\n      this.channel = [0, 1, 2, 3].indexOf(options.channel) > -1 ? options.channel : 0;\n    },\n\n    /**\n     * Applies filter to canvas element\n     * @param {Object} canvasEl Canvas element to apply filter to\n     */\n    applyTo: function(canvasEl) {\n      if (!this.mask) {\n        return;\n      }\n\n      var context = canvasEl.getContext('2d'),\n          imageData = context.getImageData(0, 0, canvasEl.width, canvasEl.height),\n          data = imageData.data,\n          maskEl = this.mask.getElement(),\n          maskCanvasEl = fabric.util.createCanvasElement(),\n          channel = this.channel,\n          i,\n          iLen = imageData.width * imageData.height * 4;\n\n      maskCanvasEl.width = canvasEl.width;\n      maskCanvasEl.height = canvasEl.height;\n\n      maskCanvasEl.getContext('2d').drawImage(maskEl, 0, 0, canvasEl.width, canvasEl.height);\n\n      var maskImageData = maskCanvasEl.getContext('2d').getImageData(0, 0, canvasEl.width, canvasEl.height),\n          maskData = maskImageData.data;\n\n      for (i = 0; i < iLen; i += 4) {\n        data[i + 3] = maskData[i + channel];\n      }\n\n      context.putImageData(imageData, 0, 0);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return extend(this.callSuper('toObject'), {\n        mask: this.mask.toObject(),\n        channel: this.channel\n      });\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] Callback to invoke when a mask filter instance is created\n   */\n  fabric.Image.filters.Mask.fromObject = function(object, callback) {\n    fabric.util.loadImage(object.mask.src, function(img) {\n      object.mask = new fabric.Image(img, object.mask);\n      callback && callback(new fabric.Image.filters.Mask(object));\n    });\n  };\n\n  /**\n   * Indicates that instances of this type are async\n   * @static\n   * @type Boolean\n   * @default\n   */\n  fabric.Image.filters.Mask.async = true;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Noise filter class\n   * @class fabric.Image.filters.Noise\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Noise#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Noise({\n   *   noise: 700\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   */\n  filters.Noise = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Noise.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Noise',\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.Noise.prototype\n     * @param {Object} [options] Options object\n     * @param {Number} [options.noise=0] Noise value\n     */\n    initialize: function(options) {\n      options = options || { };\n      this.noise = options.noise || 0;\n    },\n\n    /**\n     * Applies filter to canvas element\n     * @param {Object} canvasEl Canvas element to apply filter to\n     */\n    applyTo: function(canvasEl) {\n      var context = canvasEl.getContext('2d'),\n          imageData = context.getImageData(0, 0, canvasEl.width, canvasEl.height),\n          data = imageData.data,\n          noise = this.noise, rand;\n\n      for (var i = 0, len = data.length; i < len; i += 4) {\n\n        rand = (0.5 - Math.random()) * noise;\n\n        data[i] += rand;\n        data[i + 1] += rand;\n        data[i + 2] += rand;\n      }\n\n      context.putImageData(imageData, 0, 0);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return extend(this.callSuper('toObject'), {\n        noise: this.noise\n      });\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @return {fabric.Image.filters.Noise} Instance of fabric.Image.filters.Noise\n   */\n  fabric.Image.filters.Noise.fromObject = function(object) {\n    return new fabric.Image.filters.Noise(object);\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Pixelate filter class\n   * @class fabric.Image.filters.Pixelate\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Pixelate#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Pixelate({\n   *   blocksize: 8\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   */\n  filters.Pixelate = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Pixelate.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Pixelate',\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.Pixelate.prototype\n     * @param {Object} [options] Options object\n     * @param {Number} [options.blocksize=4] Blocksize for pixelate\n     */\n    initialize: function(options) {\n      options = options || { };\n      this.blocksize = options.blocksize || 4;\n    },\n\n    /**\n     * Applies filter to canvas element\n     * @param {Object} canvasEl Canvas element to apply filter to\n     */\n    applyTo: function(canvasEl) {\n      var context = canvasEl.getContext('2d'),\n          imageData = context.getImageData(0, 0, canvasEl.width, canvasEl.height),\n          data = imageData.data,\n          iLen = imageData.height,\n          jLen = imageData.width,\n          index, i, j, r, g, b, a;\n\n      for (i = 0; i < iLen; i += this.blocksize) {\n        for (j = 0; j < jLen; j += this.blocksize) {\n\n          index = (i * 4) * jLen + (j * 4);\n\n          r = data[index];\n          g = data[index + 1];\n          b = data[index + 2];\n          a = data[index + 3];\n\n          /*\n           blocksize: 4\n\n           [1,x,x,x,1]\n           [x,x,x,x,1]\n           [x,x,x,x,1]\n           [x,x,x,x,1]\n           [1,1,1,1,1]\n           */\n\n          for (var _i = i, _ilen = i + this.blocksize; _i < _ilen; _i++) {\n            for (var _j = j, _jlen = j + this.blocksize; _j < _jlen; _j++) {\n              index = (_i * 4) * jLen + (_j * 4);\n              data[index] = r;\n              data[index + 1] = g;\n              data[index + 2] = b;\n              data[index + 3] = a;\n            }\n          }\n        }\n      }\n\n      context.putImageData(imageData, 0, 0);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return extend(this.callSuper('toObject'), {\n        blocksize: this.blocksize\n      });\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @return {fabric.Image.filters.Pixelate} Instance of fabric.Image.filters.Pixelate\n   */\n  fabric.Image.filters.Pixelate.fromObject = function(object) {\n    return new fabric.Image.filters.Pixelate(object);\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Remove white filter class\n   * @class fabric.Image.filters.RemoveWhite\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.RemoveWhite#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.RemoveWhite({\n   *   threshold: 40,\n   *   distance: 140\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   */\n  filters.RemoveWhite = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.RemoveWhite.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'RemoveWhite',\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.RemoveWhite.prototype\n     * @param {Object} [options] Options object\n     * @param {Number} [options.threshold=30] Threshold value\n     * @param {Number} [options.distance=20] Distance value\n     */\n    initialize: function(options) {\n      options = options || { };\n      this.threshold = options.threshold || 30;\n      this.distance = options.distance || 20;\n    },\n\n    /**\n     * Applies filter to canvas element\n     * @param {Object} canvasEl Canvas element to apply filter to\n     */\n    applyTo: function(canvasEl) {\n      var context = canvasEl.getContext('2d'),\n          imageData = context.getImageData(0, 0, canvasEl.width, canvasEl.height),\n          data = imageData.data,\n          threshold = this.threshold,\n          distance = this.distance,\n          limit = 255 - threshold,\n          abs = Math.abs,\n          r, g, b;\n\n      for (var i = 0, len = data.length; i < len; i += 4) {\n        r = data[i];\n        g = data[i + 1];\n        b = data[i + 2];\n\n        if (r > limit &&\n            g > limit &&\n            b > limit &&\n            abs(r - g) < distance &&\n            abs(r - b) < distance &&\n            abs(g - b) < distance\n        ) {\n          data[i + 3] = 0;\n        }\n      }\n\n      context.putImageData(imageData, 0, 0);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return extend(this.callSuper('toObject'), {\n        threshold: this.threshold,\n        distance: this.distance\n      });\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @return {fabric.Image.filters.RemoveWhite} Instance of fabric.Image.filters.RemoveWhite\n   */\n  fabric.Image.filters.RemoveWhite.fromObject = function(object) {\n    return new fabric.Image.filters.RemoveWhite(object);\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Sepia filter class\n   * @class fabric.Image.filters.Sepia\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Sepia();\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   */\n  filters.Sepia = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Sepia.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Sepia',\n\n    /**\n     * Applies filter to canvas element\n     * @memberOf fabric.Image.filters.Sepia.prototype\n     * @param {Object} canvasEl Canvas element to apply filter to\n     */\n    applyTo: function(canvasEl) {\n      var context = canvasEl.getContext('2d'),\n          imageData = context.getImageData(0, 0, canvasEl.width, canvasEl.height),\n          data = imageData.data,\n          iLen = data.length, i, avg;\n\n      for (i = 0; i < iLen; i += 4) {\n        avg = 0.3  * data[i] + 0.59 * data[i + 1] + 0.11 * data[i + 2];\n        data[i] = avg + 100;\n        data[i + 1] = avg + 50;\n        data[i + 2] = avg + 255;\n      }\n\n      context.putImageData(imageData, 0, 0);\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @return {fabric.Image.filters.Sepia} Instance of fabric.Image.filters.Sepia\n   */\n  fabric.Image.filters.Sepia.fromObject = function() {\n    return new fabric.Image.filters.Sepia();\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Sepia2 filter class\n   * @class fabric.Image.filters.Sepia2\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Sepia2();\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   */\n  filters.Sepia2 = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Sepia2.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Sepia2',\n\n    /**\n     * Applies filter to canvas element\n     * @memberOf fabric.Image.filters.Sepia.prototype\n     * @param {Object} canvasEl Canvas element to apply filter to\n     */\n    applyTo: function(canvasEl) {\n      var context = canvasEl.getContext('2d'),\n          imageData = context.getImageData(0, 0, canvasEl.width, canvasEl.height),\n          data = imageData.data,\n          iLen = data.length, i, r, g, b;\n\n      for (i = 0; i < iLen; i += 4) {\n        r = data[i];\n        g = data[i + 1];\n        b = data[i + 2];\n\n        data[i] = (r * 0.393 + g * 0.769 + b * 0.189 ) / 1.351;\n        data[i + 1] = (r * 0.349 + g * 0.686 + b * 0.168 ) / 1.203;\n        data[i + 2] = (r * 0.272 + g * 0.534 + b * 0.131 ) / 2.140;\n      }\n\n      context.putImageData(imageData, 0, 0);\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @return {fabric.Image.filters.Sepia2} Instance of fabric.Image.filters.Sepia2\n   */\n  fabric.Image.filters.Sepia2.fromObject = function() {\n    return new fabric.Image.filters.Sepia2();\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Tint filter class\n   * Adapted from <a href=\"https://github.com/mezzoblue/PaintbrushJS\">https://github.com/mezzoblue/PaintbrushJS</a>\n   * @class fabric.Image.filters.Tint\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Tint#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example <caption>Tint filter with hex color and opacity</caption>\n   * var filter = new fabric.Image.filters.Tint({\n   *   color: '#3513B0',\n   *   opacity: 0.5\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   * @example <caption>Tint filter with rgba color</caption>\n   * var filter = new fabric.Image.filters.Tint({\n   *   color: 'rgba(53, 21, 176, 0.5)'\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   */\n  filters.Tint = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Tint.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Tint',\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.Tint.prototype\n     * @param {Object} [options] Options object\n     * @param {String} [options.color=#000000] Color to tint the image with\n     * @param {Number} [options.opacity] Opacity value that controls the tint effect's transparency (0..1)\n     */\n    initialize: function(options) {\n      options = options || { };\n\n      this.color = options.color || '#000000';\n      this.opacity = typeof options.opacity !== 'undefined'\n                      ? options.opacity\n                      : new fabric.Color(this.color).getAlpha();\n    },\n\n    /**\n     * Applies filter to canvas element\n     * @param {Object} canvasEl Canvas element to apply filter to\n     */\n    applyTo: function(canvasEl) {\n      var context = canvasEl.getContext('2d'),\n          imageData = context.getImageData(0, 0, canvasEl.width, canvasEl.height),\n          data = imageData.data,\n          iLen = data.length, i,\n          tintR, tintG, tintB,\n          r, g, b, alpha1,\n          source;\n\n      source = new fabric.Color(this.color).getSource();\n\n      tintR = source[0] * this.opacity;\n      tintG = source[1] * this.opacity;\n      tintB = source[2] * this.opacity;\n\n      alpha1 = 1 - this.opacity;\n\n      for (i = 0; i < iLen; i += 4) {\n        r = data[i];\n        g = data[i + 1];\n        b = data[i + 2];\n\n        // alpha compositing\n        data[i] = tintR + r * alpha1;\n        data[i + 1] = tintG + g * alpha1;\n        data[i + 2] = tintB + b * alpha1;\n      }\n\n      context.putImageData(imageData, 0, 0);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return extend(this.callSuper('toObject'), {\n        color: this.color,\n        opacity: this.opacity\n      });\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @return {fabric.Image.filters.Tint} Instance of fabric.Image.filters.Tint\n   */\n  fabric.Image.filters.Tint.fromObject = function(object) {\n    return new fabric.Image.filters.Tint(object);\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Multiply filter class\n   * Adapted from <a href=\"http://www.laurenscorijn.com/articles/colormath-basics\">http://www.laurenscorijn.com/articles/colormath-basics</a>\n   * @class fabric.Image.filters.Multiply\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @example <caption>Multiply filter with hex color</caption>\n   * var filter = new fabric.Image.filters.Multiply({\n   *   color: '#F0F'\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   * @example <caption>Multiply filter with rgb color</caption>\n   * var filter = new fabric.Image.filters.Multiply({\n   *   color: 'rgb(53, 21, 176)'\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   */\n  filters.Multiply = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Multiply.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Multiply',\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.Multiply.prototype\n     * @param {Object} [options] Options object\n     * @param {String} [options.color=#000000] Color to multiply the image pixels with\n     */\n    initialize: function(options) {\n      options = options || { };\n\n      this.color = options.color || '#000000';\n    },\n\n    /**\n     * Applies filter to canvas element\n     * @param {Object} canvasEl Canvas element to apply filter to\n     */\n    applyTo: function(canvasEl) {\n      var context = canvasEl.getContext('2d'),\n          imageData = context.getImageData(0, 0, canvasEl.width, canvasEl.height),\n          data = imageData.data,\n          iLen = data.length, i,\n          source;\n\n      source = new fabric.Color(this.color).getSource();\n\n      for (i = 0; i < iLen; i += 4) {\n        data[i] *= source[0] / 255;\n        data[i + 1] *= source[1] / 255;\n        data[i + 2] *= source[2] / 255;\n      }\n\n      context.putImageData(imageData, 0, 0);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return extend(this.callSuper('toObject'), {\n        color: this.color\n      });\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @return {fabric.Image.filters.Multiply} Instance of fabric.Image.filters.Multiply\n   */\n  fabric.Image.filters.Multiply.fromObject = function(object) {\n    return new fabric.Image.filters.Multiply(object);\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n  'use strict';\n\n  var fabric = global.fabric,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Color Blend filter class\n   * @class fabric.Image.filter.Blend\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @example\n   * var filter = new fabric.Image.filters.Blend({\n   *  color: '#000',\n   *  mode: 'multiply'\n   * });\n   *\n   * var filter = new fabric.Image.filters.Blend({\n   *  image: fabricImageObject,\n   *  mode: 'multiply',\n   *  alpha: 0.5\n   * });\n\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   */\n\n  filters.Blend = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Blend.prototype */ {\n    type: 'Blend',\n\n    initialize: function(options) {\n      options = options || {};\n      this.color = options.color || '#000';\n      this.image = options.image || false;\n      this.mode = options.mode || 'multiply';\n      this.alpha = options.alpha || 1;\n    },\n\n    applyTo: function(canvasEl) {\n      var context = canvasEl.getContext('2d'),\n          imageData = context.getImageData(0, 0, canvasEl.width, canvasEl.height),\n          data = imageData.data,\n          tr, tg, tb,\n          r, g, b,\n          _r, _g, _b,\n          source,\n          isImage = false;\n\n      if (this.image) {\n        // Blend images\n        isImage = true;\n\n        var _el = fabric.util.createCanvasElement();\n        _el.width = this.image.width;\n        _el.height = this.image.height;\n\n        var tmpCanvas = new fabric.StaticCanvas(_el);\n        tmpCanvas.add(this.image);\n        var context2 =  tmpCanvas.getContext('2d');\n        source = context2.getImageData(0, 0, tmpCanvas.width, tmpCanvas.height).data;\n      }\n      else {\n        // Blend color\n        source = new fabric.Color(this.color).getSource();\n\n        tr = source[0] * this.alpha;\n        tg = source[1] * this.alpha;\n        tb = source[2] * this.alpha;\n      }\n\n      for (var i = 0, len = data.length; i < len; i += 4) {\n\n        r = data[i];\n        g = data[i + 1];\n        b = data[i + 2];\n\n        if (isImage) {\n          tr = source[i] * this.alpha;\n          tg = source[i + 1] * this.alpha;\n          tb = source[i + 2] * this.alpha;\n        }\n\n        switch (this.mode) {\n          case 'multiply':\n            data[i] = r * tr / 255;\n            data[i + 1] = g * tg / 255;\n            data[i + 2] = b * tb / 255;\n            break;\n          case 'screen':\n            data[i] = 1 - (1 - r) * (1 - tr);\n            data[i + 1] = 1 - (1 - g) * (1 - tg);\n            data[i + 2] = 1 - (1 - b) * (1 - tb);\n            break;\n          case 'add':\n            data[i] = Math.min(255, r + tr);\n            data[i + 1] = Math.min(255, g + tg);\n            data[i + 2] = Math.min(255, b + tb);\n            break;\n          case 'diff':\n          case 'difference':\n            data[i] = Math.abs(r - tr);\n            data[i + 1] = Math.abs(g - tg);\n            data[i + 2] = Math.abs(b - tb);\n            break;\n          case 'subtract':\n            _r = r - tr;\n            _g = g - tg;\n            _b = b - tb;\n\n            data[i] = (_r < 0) ? 0 : _r;\n            data[i + 1] = (_g < 0) ? 0 : _g;\n            data[i + 2] = (_b < 0) ? 0 : _b;\n            break;\n          case 'darken':\n            data[i] = Math.min(r, tr);\n            data[i + 1] = Math.min(g, tg);\n            data[i + 2] = Math.min(b, tb);\n            break;\n          case 'lighten':\n            data[i] = Math.max(r, tr);\n            data[i + 1] = Math.max(g, tg);\n            data[i + 2] = Math.max(b, tb);\n            break;\n        }\n      }\n\n      context.putImageData(imageData, 0, 0);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return {\n        color: this.color,\n        image: this.image,\n        mode: this.mode,\n        alpha: this.alpha\n      };\n    }\n  });\n\n  fabric.Image.filters.Blend.fromObject = function(object) {\n    return new fabric.Image.filters.Blend(object);\n  };\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }), pow = Math.pow, floor = Math.floor,\n      sqrt = Math.sqrt, abs = Math.abs, max = Math.max, round = Math.round, sin = Math.sin,\n      ceil = Math.ceil,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Resize image filter class\n   * @class fabric.Image.filters.Resize\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Resize();\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   */\n  filters.Resize = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Resize.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Resize',\n\n    /**\n     * Resize type\n     * @param {String} resizeType\n     * @default\n     */\n    resizeType: 'hermite',\n\n    /**\n     * Scale factor for resizing, x axis\n     * @param {Number} scaleX\n     * @default\n     */\n    scaleX: 0,\n\n    /**\n     * Scale factor for resizing, y axis\n     * @param {Number} scaleY\n     * @default\n     */\n    scaleY: 0,\n\n    /**\n     * LanczosLobes parameter for lanczos filter\n     * @param {Number} lanczosLobes\n     * @default\n     */\n    lanczosLobes: 3,\n\n    /**\n     * Applies filter to canvas element\n     * @memberOf fabric.Image.filters.Resize.prototype\n     * @param {Object} canvasEl Canvas element to apply filter to\n     * @param {Number} scaleX\n     * @param {Number} scaleY\n     */\n    applyTo: function(canvasEl, scaleX, scaleY) {\n      if (scaleX === 1 && scaleY === 1) {\n        return;\n      }\n\n      this.rcpScaleX = 1 / scaleX;\n      this.rcpScaleY = 1 / scaleY;\n\n      var oW = canvasEl.width, oH = canvasEl.height,\n          dW = round(oW * scaleX), dH = round(oH * scaleY),\n          imageData;\n\n      if (this.resizeType === 'sliceHack') {\n        imageData = this.sliceByTwo(canvasEl, oW, oH, dW, dH);\n      }\n      if (this.resizeType === 'hermite') {\n        imageData = this.hermiteFastResize(canvasEl, oW, oH, dW, dH);\n      }\n      if (this.resizeType === 'bilinear') {\n        imageData = this.bilinearFiltering(canvasEl, oW, oH, dW, dH);\n      }\n      if (this.resizeType === 'lanczos') {\n        imageData = this.lanczosResize(canvasEl, oW, oH, dW, dH);\n      }\n      canvasEl.width = dW;\n      canvasEl.height = dH;\n      canvasEl.getContext('2d').putImageData(imageData, 0, 0);\n    },\n\n    /**\n     * Filter sliceByTwo\n     * @param {Object} canvasEl Canvas element to apply filter to\n     * @param {Number} oW Original Width\n     * @param {Number} oH Original Height\n     * @param {Number} dW Destination Width\n     * @param {Number} dH Destination Height\n     * @returns {ImageData}\n     */\n    sliceByTwo: function(canvasEl, oW, oH, dW, dH) {\n      var context = canvasEl.getContext('2d'), imageData,\n          multW = 0.5, multH = 0.5, signW = 1, signH = 1,\n          doneW = false, doneH = false, stepW = oW, stepH = oH,\n          tmpCanvas = fabric.util.createCanvasElement(),\n          tmpCtx = tmpCanvas.getContext('2d');\n      dW = floor(dW);\n      dH = floor(dH);\n      tmpCanvas.width = max(dW, oW);\n      tmpCanvas.height = max(dH, oH);\n\n      if (dW > oW) {\n        multW = 2;\n        signW = -1;\n      }\n      if (dH > oH) {\n        multH = 2;\n        signH = -1;\n      }\n      imageData = context.getImageData(0, 0, oW, oH);\n      canvasEl.width = max(dW, oW);\n      canvasEl.height = max(dH, oH);\n      context.putImageData(imageData, 0, 0);\n\n      while (!doneW || !doneH) {\n        oW = stepW;\n        oH = stepH;\n        if (dW * signW < floor(stepW * multW * signW)) {\n          stepW = floor(stepW * multW);\n        }\n        else {\n          stepW = dW;\n          doneW = true;\n        }\n        if (dH * signH < floor(stepH * multH * signH)) {\n          stepH = floor(stepH * multH);\n        }\n        else {\n          stepH = dH;\n          doneH = true;\n        }\n        imageData = context.getImageData(0, 0, oW, oH);\n        tmpCtx.putImageData(imageData, 0, 0);\n        context.clearRect(0, 0, stepW, stepH);\n        context.drawImage(tmpCanvas, 0, 0, oW, oH, 0, 0, stepW, stepH);\n      }\n      return context.getImageData(0, 0, dW, dH);\n    },\n\n    /**\n     * Filter lanczosResize\n     * @param {Object} canvasEl Canvas element to apply filter to\n     * @param {Number} oW Original Width\n     * @param {Number} oH Original Height\n     * @param {Number} dW Destination Width\n     * @param {Number} dH Destination Height\n     * @returns {ImageData}\n     */\n    lanczosResize: function(canvasEl, oW, oH, dW, dH) {\n\n      function lanczosCreate(lobes) {\n        return function(x) {\n          if (x > lobes) {\n            return 0;\n          }\n          x *= Math.PI;\n          if (abs(x) < 1e-16) {\n            return 1;\n          }\n          var xx = x / lobes;\n          return sin(x) * sin(xx) / x / xx;\n        };\n      }\n\n      function process(u) {\n        var v, i, weight, idx, a, red, green,\n            blue, alpha, fX, fY;\n        center.x = (u + 0.5) * ratioX;\n        icenter.x = floor(center.x);\n        for (v = 0; v < dH; v++) {\n          center.y = (v + 0.5) * ratioY;\n          icenter.y = floor(center.y);\n          a = 0; red = 0; green = 0; blue = 0; alpha = 0;\n          for (i = icenter.x - range2X; i <= icenter.x + range2X; i++) {\n            if (i < 0 || i >= oW) {\n              continue;\n            }\n            fX = floor(1000 * abs(i - center.x));\n            if (!cacheLanc[fX]) {\n              cacheLanc[fX] = { };\n            }\n            for (var j = icenter.y - range2Y; j <= icenter.y + range2Y; j++) {\n              if (j < 0 || j >= oH) {\n                continue;\n              }\n              fY = floor(1000 * abs(j - center.y));\n              if (!cacheLanc[fX][fY]) {\n                cacheLanc[fX][fY] = lanczos(sqrt(pow(fX * rcpRatioX, 2) + pow(fY * rcpRatioY, 2)) / 1000);\n              }\n              weight = cacheLanc[fX][fY];\n              if (weight > 0) {\n                idx = (j * oW + i) * 4;\n                a += weight;\n                red += weight * srcData[idx];\n                green += weight * srcData[idx + 1];\n                blue += weight * srcData[idx + 2];\n                alpha += weight * srcData[idx + 3];\n              }\n            }\n          }\n          idx = (v * dW + u) * 4;\n          destData[idx] = red / a;\n          destData[idx + 1] = green / a;\n          destData[idx + 2] = blue / a;\n          destData[idx + 3] = alpha / a;\n        }\n\n        if (++u < dW) {\n          return process(u);\n        }\n        else {\n          return destImg;\n        }\n      }\n\n      var context = canvasEl.getContext('2d'),\n          srcImg = context.getImageData(0, 0, oW, oH),\n          destImg = context.getImageData(0, 0, dW, dH),\n          srcData = srcImg.data, destData = destImg.data,\n          lanczos = lanczosCreate(this.lanczosLobes),\n          ratioX = this.rcpScaleX, ratioY = this.rcpScaleY,\n          rcpRatioX = 2 / this.rcpScaleX, rcpRatioY = 2 / this.rcpScaleY,\n          range2X = ceil(ratioX * this.lanczosLobes / 2),\n          range2Y = ceil(ratioY * this.lanczosLobes / 2),\n          cacheLanc = { }, center = { }, icenter = { };\n\n      return process(0);\n    },\n\n    /**\n     * bilinearFiltering\n     * @param {Object} canvasEl Canvas element to apply filter to\n     * @param {Number} oW Original Width\n     * @param {Number} oH Original Height\n     * @param {Number} dW Destination Width\n     * @param {Number} dH Destination Height\n     * @returns {ImageData}\n     */\n    bilinearFiltering: function(canvasEl, oW, oH, dW, dH) {\n      var a, b, c, d, x, y, i, j, xDiff, yDiff, chnl,\n          color, offset = 0, origPix, ratioX = this.rcpScaleX,\n          ratioY = this.rcpScaleY, context = canvasEl.getContext('2d'),\n          w4 = 4 * (oW - 1), img = context.getImageData(0, 0, oW, oH),\n          pixels = img.data, destImage = context.getImageData(0, 0, dW, dH),\n          destPixels = destImage.data;\n      for (i = 0; i < dH; i++) {\n        for (j = 0; j < dW; j++) {\n          x = floor(ratioX * j);\n          y = floor(ratioY * i);\n          xDiff = ratioX * j - x;\n          yDiff = ratioY * i - y;\n          origPix = 4 * (y * oW + x);\n\n          for (chnl = 0; chnl < 4; chnl++) {\n            a = pixels[origPix + chnl];\n            b = pixels[origPix + 4 + chnl];\n            c = pixels[origPix + w4 + chnl];\n            d = pixels[origPix + w4 + 4 + chnl];\n            color = a * (1 - xDiff) * (1 - yDiff) + b * xDiff * (1 - yDiff) +\n                    c * yDiff * (1 - xDiff) + d * xDiff * yDiff;\n            destPixels[offset++] = color;\n          }\n        }\n      }\n      return destImage;\n    },\n\n    /**\n     * hermiteFastResize\n     * @param {Object} canvasEl Canvas element to apply filter to\n     * @param {Number} oW Original Width\n     * @param {Number} oH Original Height\n     * @param {Number} dW Destination Width\n     * @param {Number} dH Destination Height\n     * @returns {ImageData}\n     */\n    hermiteFastResize: function(canvasEl, oW, oH, dW, dH) {\n      var ratioW = this.rcpScaleX, ratioH = this.rcpScaleY,\n          ratioWHalf = ceil(ratioW / 2),\n          ratioHHalf = ceil(ratioH / 2),\n          context = canvasEl.getContext('2d'),\n          img = context.getImageData(0, 0, oW, oH), data = img.data,\n          img2 = context.getImageData(0, 0, dW, dH), data2 = img2.data;\n      for (var j = 0; j < dH; j++) {\n        for (var i = 0; i < dW; i++) {\n          var x2 = (i + j * dW) * 4, weight = 0, weights = 0, weightsAlpha = 0,\n              gxR = 0, gxG = 0, gxB = 0, gxA = 0, centerY = (j + 0.5) * ratioH;\n          for (var yy = floor(j * ratioH); yy < (j + 1) * ratioH; yy++) {\n            var dy = abs(centerY - (yy + 0.5)) / ratioHHalf,\n                centerX = (i + 0.5) * ratioW, w0 = dy * dy;\n            for (var xx = floor(i * ratioW); xx < (i + 1) * ratioW; xx++) {\n              var dx = abs(centerX - (xx + 0.5)) / ratioWHalf,\n                  w = sqrt(w0 + dx * dx);\n              /* eslint-disable max-depth */\n              if (w > 1 && w < -1) {\n                continue;\n              }\n              //hermite filter\n              weight = 2 * w * w * w - 3 * w * w + 1;\n              if (weight > 0) {\n                dx = 4 * (xx + yy * oW);\n                //alpha\n                gxA += weight * data[dx + 3];\n                weightsAlpha += weight;\n                //colors\n                if (data[dx + 3] < 255) {\n                  weight = weight * data[dx + 3] / 250;\n                }\n                gxR += weight * data[dx];\n                gxG += weight * data[dx + 1];\n                gxB += weight * data[dx + 2];\n                weights += weight;\n              }\n              /* eslint-enable max-depth */\n            }\n          }\n          data2[x2] = gxR / weights;\n          data2[x2 + 1] = gxG / weights;\n          data2[x2 + 2] = gxB / weights;\n          data2[x2 + 3] = gxA / weightsAlpha;\n        }\n      }\n      return img2;\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return {\n        type: this.type,\n        scaleX: this.scaleX,\n        scaleY: this.scaleY,\n        resizeType: this.resizeType,\n        lanczosLobes: this.lanczosLobes\n      };\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @return {fabric.Image.filters.Resize} Instance of fabric.Image.filters.Resize\n   */\n  fabric.Image.filters.Resize.fromObject = function(object) {\n    return new fabric.Image.filters.Resize(object);\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Color Matrix filter class\n   * @class fabric.Image.filters.ColorMatrix\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.ColorMatrix#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @see {@Link http://www.webwasp.co.uk/tutorials/219/Color_Matrix_Filter.php}\n   * @see {@Link http://phoboslab.org/log/2013/11/fast-image-filters-with-webgl}\n   * @example <caption>Kodachrome filter</caption>\n   * var filter = new fabric.Image.filters.ColorMatrix({\n   *  matrix: [\n       1.1285582396593525, -0.3967382283601348, -0.03992559172921793, 0, 63.72958762196502,\n       -0.16404339962244616, 1.0835251566291304, -0.05498805115633132, 0, 24.732407896706203,\n       -0.16786010706155763, -0.5603416277695248, 1.6014850761964943, 0, 35.62982807460946,\n       0, 0, 0, 1, 0\n      ]\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   */\n  filters.ColorMatrix = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.ColorMatrix.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'ColorMatrix',\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.ColorMatrix.prototype\n     * @param {Object} [options] Options object\n     * @param {Array} [options.matrix] Color Matrix to modify the image data with\n     */\n    initialize: function( options ) {\n      options || ( options = {} );\n      this.matrix = options.matrix || [\n        1, 0, 0, 0, 0,\n        0, 1, 0, 0, 0,\n        0, 0, 1, 0, 0,\n        0, 0, 0, 1, 0\n      ];\n    },\n\n    /**\n     * Applies filter to canvas element\n     * @param {Object} canvasEl Canvas element to apply filter to\n     */\n    applyTo: function( canvasEl ) {\n      var context = canvasEl.getContext( '2d' ),\n          imageData = context.getImageData( 0, 0, canvasEl.width, canvasEl.height ),\n          data = imageData.data,\n          iLen = data.length,\n          i,\n          r,\n          g,\n          b,\n          a,\n          m = this.matrix;\n\n      for ( i = 0; i < iLen; i += 4 ) {\n        r = data[ i ];\n        g = data[ i + 1 ];\n        b = data[ i + 2 ];\n        a = data[ i + 3 ];\n\n        data[ i ] = r * m[ 0 ] + g * m[ 1 ] + b * m[ 2 ] + a * m[ 3 ] + m[ 4 ];\n        data[ i + 1 ] = r * m[ 5 ] + g * m[ 6 ] + b * m[ 7 ] + a * m[ 8 ] + m[ 9 ];\n        data[ i + 2 ] = r * m[ 10 ] + g * m[ 11 ] + b * m[ 12 ] + a * m[ 13 ] + m[ 14 ];\n        data[ i + 3 ] = r * m[ 15 ] + g * m[ 16 ] + b * m[ 17 ] + a * m[ 18 ] + m[ 19 ];\n      }\n\n      context.putImageData( imageData, 0, 0 );\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return extend(this.callSuper('toObject'), {\n        type: this.type,\n        matrix: this.matrix\n      });\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @return {fabric.Image.filters.ColorMatrix} Instance of fabric.Image.filters.ColorMatrix\n   */\n  fabric.Image.filters.ColorMatrix.fromObject = function( object ) {\n    return new fabric.Image.filters.ColorMatrix( object );\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Contrast filter class\n   * @class fabric.Image.filters.Contrast\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Contrast#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Contrast({\n   *   contrast: 40\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   */\n  filters.Contrast = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Contrast.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Contrast',\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.Contrast.prototype\n     * @param {Object} [options] Options object\n     * @param {Number} [options.contrast=0] Value to contrast the image up (-255...255)\n     */\n    initialize: function(options) {\n      options = options || { };\n      this.contrast = options.contrast || 0;\n    },\n\n    /**\n     * Applies filter to canvas element\n     * @param {Object} canvasEl Canvas element to apply filter to\n     */\n    applyTo: function(canvasEl) {\n      var context = canvasEl.getContext('2d'),\n          imageData = context.getImageData(0, 0, canvasEl.width, canvasEl.height),\n          data = imageData.data,\n          contrastF = 259 * (this.contrast + 255) / (255 * (259 - this.contrast));\n\n      for (var i = 0, len = data.length; i < len; i += 4) {\n        data[i] = contrastF * (data[i] - 128) + 128;\n        data[i + 1] = contrastF * (data[i + 1] - 128) + 128;\n        data[i + 2] = contrastF * (data[i + 2] - 128) + 128;\n      }\n\n      context.putImageData(imageData, 0, 0);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return extend(this.callSuper('toObject'), {\n        contrast: this.contrast\n      });\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @return {fabric.Image.filters.Contrast} Instance of fabric.Image.filters.Contrast\n   */\n  fabric.Image.filters.Contrast.fromObject = function(object) {\n    return new fabric.Image.filters.Contrast(object);\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Saturate filter class\n   * @class fabric.Image.filters.Saturate\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Saturate#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Saturate({\n   *   saturate: 100\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   */\n  filters.Saturate = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Saturate.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Saturate',\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.Saturate.prototype\n     * @param {Object} [options] Options object\n     * @param {Number} [options.saturate=0] Value to saturate the image (-100...100)\n     */\n    initialize: function(options) {\n      options = options || { };\n      this.saturate = options.saturate || 0;\n    },\n\n    /**\n     * Applies filter to canvas element\n     * @param {Object} canvasEl Canvas element to apply filter to\n     */\n    applyTo: function(canvasEl) {\n      var context = canvasEl.getContext('2d'),\n          imageData = context.getImageData(0, 0, canvasEl.width, canvasEl.height),\n          data = imageData.data,\n          max, adjust = -this.saturate * 0.01;\n\n      for (var i = 0, len = data.length; i < len; i += 4) {\n        max = Math.max(data[i], data[i + 1], data[i + 2]);\n        data[i] += max !== data[i] ? (max - data[i]) * adjust : 0;\n        data[i + 1] += max !== data[i + 1] ? (max - data[i + 1]) * adjust : 0;\n        data[i + 2] += max !== data[i + 2] ? (max - data[i + 2]) * adjust : 0;\n      }\n\n      context.putImageData(imageData, 0, 0);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return extend(this.callSuper('toObject'), {\n        saturate: this.saturate\n      });\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @return {fabric.Image.filters.Saturate} Instance of fabric.Image.filters.Saturate\n   */\n  fabric.Image.filters.Saturate.fromObject = function(object) {\n    return new fabric.Image.filters.Saturate(object);\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      clone = fabric.util.object.clone,\n      toFixed = fabric.util.toFixed,\n      NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS,\n      MIN_TEXT_WIDTH = 2;\n\n  if (fabric.Text) {\n    fabric.warn('fabric.Text is already defined');\n    return;\n  }\n\n  var stateProperties = fabric.Object.prototype.stateProperties.concat();\n  stateProperties.push(\n    'fontFamily',\n    'fontWeight',\n    'fontSize',\n    'text',\n    'textDecoration',\n    'textAlign',\n    'fontStyle',\n    'lineHeight',\n    'textBackgroundColor',\n    'charSpacing'\n  );\n\n  var cacheProperties = fabric.Object.prototype.cacheProperties.concat();\n  cacheProperties.push(\n    'fontFamily',\n    'fontWeight',\n    'fontSize',\n    'text',\n    'textDecoration',\n    'textAlign',\n    'fontStyle',\n    'lineHeight',\n    'textBackgroundColor',\n    'charSpacing',\n    'styles'\n  );\n  /**\n   * Text class\n   * @class fabric.Text\n   * @extends fabric.Object\n   * @return {fabric.Text} thisArg\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-2#text}\n   * @see {@link fabric.Text#initialize} for constructor definition\n   */\n  fabric.Text = fabric.util.createClass(fabric.Object, /** @lends fabric.Text.prototype */ {\n\n    /**\n     * Properties which when set cause object to change dimensions\n     * @type Object\n     * @private\n     */\n    _dimensionAffectingProps: [\n      'fontSize',\n      'fontWeight',\n      'fontFamily',\n      'fontStyle',\n      'lineHeight',\n      'text',\n      'charSpacing',\n      'textAlign'\n    ],\n\n    /**\n     * @private\n     */\n    _reNewline: /\\r?\\n/,\n\n    /**\n     * Use this regular expression to filter for whitespace that is not a new line.\n     * Mostly used when text is 'justify' aligned.\n     * @private\n     */\n    _reSpacesAndTabs: /[ \\t\\r]+/g,\n\n    /**\n     * Retrieves object's fontSize\n     * @method getFontSize\n     * @memberOf fabric.Text.prototype\n     * @return {String} Font size (in pixels)\n     */\n\n    /**\n     * Sets object's fontSize\n     * Does not update the object .width and .height,\n     * call ._initDimensions() to update the values.\n     * @method setFontSize\n     * @memberOf fabric.Text.prototype\n     * @param {Number} fontSize Font size (in pixels)\n     * @return {fabric.Text}\n     * @chainable\n     */\n\n    /**\n     * Retrieves object's fontWeight\n     * @method getFontWeight\n     * @memberOf fabric.Text.prototype\n     * @return {(String|Number)} Font weight\n     */\n\n    /**\n     * Sets object's fontWeight\n     * Does not update the object .width and .height,\n     * call ._initDimensions() to update the values.\n     * @method setFontWeight\n     * @memberOf fabric.Text.prototype\n     * @param {(Number|String)} fontWeight Font weight\n     * @return {fabric.Text}\n     * @chainable\n     */\n\n    /**\n     * Retrieves object's fontFamily\n     * @method getFontFamily\n     * @memberOf fabric.Text.prototype\n     * @return {String} Font family\n     */\n\n    /**\n     * Sets object's fontFamily\n     * Does not update the object .width and .height,\n     * call ._initDimensions() to update the values.\n     * @method setFontFamily\n     * @memberOf fabric.Text.prototype\n     * @param {String} fontFamily Font family\n     * @return {fabric.Text}\n     * @chainable\n     */\n\n    /**\n     * Retrieves object's text\n     * @method getText\n     * @memberOf fabric.Text.prototype\n     * @return {String} text\n     */\n\n    /**\n     * Sets object's text\n     * Does not update the object .width and .height,\n     * call ._initDimensions() to update the values.\n     * @method setText\n     * @memberOf fabric.Text.prototype\n     * @param {String} text Text\n     * @return {fabric.Text}\n     * @chainable\n     */\n\n    /**\n     * Retrieves object's textDecoration\n     * @method getTextDecoration\n     * @memberOf fabric.Text.prototype\n     * @return {String} Text decoration\n     */\n\n    /**\n     * Sets object's textDecoration\n     * @method setTextDecoration\n     * @memberOf fabric.Text.prototype\n     * @param {String} textDecoration Text decoration\n     * @return {fabric.Text}\n     * @chainable\n     */\n\n    /**\n     * Retrieves object's fontStyle\n     * @method getFontStyle\n     * @memberOf fabric.Text.prototype\n     * @return {String} Font style\n     */\n\n    /**\n     * Sets object's fontStyle\n     * Does not update the object .width and .height,\n     * call ._initDimensions() to update the values.\n     * @method setFontStyle\n     * @memberOf fabric.Text.prototype\n     * @param {String} fontStyle Font style\n     * @return {fabric.Text}\n     * @chainable\n     */\n\n    /**\n     * Retrieves object's lineHeight\n     * @method getLineHeight\n     * @memberOf fabric.Text.prototype\n     * @return {Number} Line height\n     */\n\n    /**\n     * Sets object's lineHeight\n     * @method setLineHeight\n     * @memberOf fabric.Text.prototype\n     * @param {Number} lineHeight Line height\n     * @return {fabric.Text}\n     * @chainable\n     */\n\n    /**\n     * Retrieves object's textAlign\n     * @method getTextAlign\n     * @memberOf fabric.Text.prototype\n     * @return {String} Text alignment\n     */\n\n    /**\n     * Sets object's textAlign\n     * @method setTextAlign\n     * @memberOf fabric.Text.prototype\n     * @param {String} textAlign Text alignment\n     * @return {fabric.Text}\n     * @chainable\n     */\n\n    /**\n     * Retrieves object's textBackgroundColor\n     * @method getTextBackgroundColor\n     * @memberOf fabric.Text.prototype\n     * @return {String} Text background color\n     */\n\n    /**\n     * Sets object's textBackgroundColor\n     * @method setTextBackgroundColor\n     * @memberOf fabric.Text.prototype\n     * @param {String} textBackgroundColor Text background color\n     * @return {fabric.Text}\n     * @chainable\n     */\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type:                 'text',\n\n    /**\n     * Font size (in pixels)\n     * @type Number\n     * @default\n     */\n    fontSize:             40,\n\n    /**\n     * Font weight (e.g. bold, normal, 400, 600, 800)\n     * @type {(Number|String)}\n     * @default\n     */\n    fontWeight:           'normal',\n\n    /**\n     * Font family\n     * @type String\n     * @default\n     */\n    fontFamily:           'Times New Roman',\n\n    /**\n     * Text decoration Possible values: \"\", \"underline\", \"overline\" or \"line-through\".\n     * @type String\n     * @default\n     */\n    textDecoration:       '',\n\n    /**\n     * Text alignment. Possible values: \"left\", \"center\", \"right\" or \"justify\".\n     * @type String\n     * @default\n     */\n    textAlign:            'left',\n\n    /**\n     * Font style . Possible values: \"\", \"normal\", \"italic\" or \"oblique\".\n     * @type String\n     * @default\n     */\n    fontStyle:            '',\n\n    /**\n     * Line height\n     * @type Number\n     * @default\n     */\n    lineHeight:           1.16,\n\n    /**\n     * Background color of text lines\n     * @type String\n     * @default\n     */\n    textBackgroundColor:  '',\n\n    /**\n     * List of properties to consider when checking if\n     * state of an object is changed ({@link fabric.Object#hasStateChanged})\n     * as well as for history (undo/redo) purposes\n     * @type Array\n     */\n    stateProperties:      stateProperties,\n\n    /**\n     * List of properties to consider when checking if cache needs refresh\n     * @type Array\n     */\n    cacheProperties:      cacheProperties,\n\n    /**\n     * When defined, an object is rendered via stroke and this property specifies its color.\n     * <b>Backwards incompatibility note:</b> This property was named \"strokeStyle\" until v1.1.6\n     * @type String\n     * @default\n     */\n    stroke:               null,\n\n    /**\n     * Shadow object representing shadow of this shape.\n     * <b>Backwards incompatibility note:</b> This property was named \"textShadow\" (String) until v1.2.11\n     * @type fabric.Shadow\n     * @default\n     */\n    shadow:               null,\n\n    /**\n     * @private\n     */\n    _fontSizeFraction: 0.25,\n\n    /**\n     * Text Line proportion to font Size (in pixels)\n     * @type Number\n     * @default\n     */\n    _fontSizeMult:             1.13,\n\n    /**\n     * additional space between characters\n     * expressed in thousands of em unit\n     * @type Number\n     * @default\n     */\n    charSpacing:             0,\n\n    /**\n     * Constructor\n     * @param {String} text Text string\n     * @param {Object} [options] Options object\n     * @return {fabric.Text} thisArg\n     */\n    initialize: function(text, options) {\n      options = options || { };\n      this.text = text;\n      this.__skipDimension = true;\n      this.callSuper('initialize', options);\n      this.__skipDimension = false;\n      this._initDimensions();\n      this.setupState({ propertySet: '_dimensionAffectingProps' });\n    },\n\n    /**\n     * Initialize text dimensions. Render all text on given context\n     * or on a offscreen canvas to get the text width with measureText.\n     * Updates this.width and this.height with the proper values.\n     * Does not return dimensions.\n     * @param {CanvasRenderingContext2D} [ctx] Context to render on\n     * @private\n     */\n    _initDimensions: function(ctx) {\n      if (this.__skipDimension) {\n        return;\n      }\n      if (!ctx) {\n        ctx = fabric.util.createCanvasElement().getContext('2d');\n        this._setTextStyles(ctx);\n      }\n      this._textLines = this._splitTextIntoLines();\n      this._clearCache();\n      this.width = this._getTextWidth(ctx) || this.cursorWidth || MIN_TEXT_WIDTH;\n      this.height = this._getTextHeight(ctx);\n    },\n\n    /**\n     * Returns string representation of an instance\n     * @return {String} String representation of text object\n     */\n    toString: function() {\n      return '#<fabric.Text (' + this.complexity() +\n        '): { \"text\": \"' + this.text + '\", \"fontFamily\": \"' + this.fontFamily + '\" }>';\n    },\n\n    /**\n     * Return the dimension and the zoom level needed to create a cache canvas\n     * big enough to host the object to be cached.\n     * @private\n     * @return {Object}.width width of canvas\n     * @return {Object}.height height of canvas\n     * @return {Object}.zoomX zoomX zoom value to unscale the canvas before drawing cache\n     * @return {Object}.zoomY zoomY zoom value to unscale the canvas before drawing cache\n     */\n    _getCacheCanvasDimensions: function() {\n      var dim = this.callSuper('_getCacheCanvasDimensions');\n      dim.width += 2 * this.fontSize;\n      dim.height += 2 * this.fontSize;\n      return dim;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      this._setTextStyles(ctx);\n      if (this.group && this.group.type === 'path-group') {\n        ctx.translate(this.left, this.top);\n      }\n      this._renderTextLinesBackground(ctx);\n      this._renderText(ctx);\n      this._renderTextDecoration(ctx);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderText: function(ctx) {\n      this._renderTextFill(ctx);\n      this._renderTextStroke(ctx);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _setTextStyles: function(ctx) {\n      ctx.textBaseline = 'alphabetic';\n      ctx.font = this._getFontDeclaration();\n    },\n\n    /**\n     * @private\n     * @return {Number} Height of fabric.Text object\n     */\n    _getTextHeight: function() {\n      return this._getHeightOfSingleLine() + (this._textLines.length - 1) * this._getHeightOfLine();\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @return {Number} Maximum width of fabric.Text object\n     */\n    _getTextWidth: function(ctx) {\n      var maxWidth = this._getLineWidth(ctx, 0);\n\n      for (var i = 1, len = this._textLines.length; i < len; i++) {\n        var currentLineWidth = this._getLineWidth(ctx, i);\n        if (currentLineWidth > maxWidth) {\n          maxWidth = currentLineWidth;\n        }\n      }\n      return maxWidth;\n    },\n\n    /**\n     * @private\n     * @param {String} method Method name (\"fillText\" or \"strokeText\")\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {String} chars Chars to render\n     * @param {Number} left Left position of text\n     * @param {Number} top Top position of text\n     */\n    _renderChars: function(method, ctx, chars, left, top) {\n      // remove Text word from method var\n      var shortM = method.slice(0, -4), char, width;\n      if (this[shortM].toLive) {\n        var offsetX = -this.width / 2 + this[shortM].offsetX || 0,\n            offsetY = -this.height / 2 + this[shortM].offsetY || 0;\n        ctx.save();\n        ctx.translate(offsetX, offsetY);\n        left -= offsetX;\n        top -= offsetY;\n      }\n      if (this.charSpacing !== 0) {\n        var additionalSpace = this._getWidthOfCharSpacing();\n        chars = chars.split('');\n        for (var i = 0, len = chars.length; i < len; i++) {\n          char = chars[i];\n          width = ctx.measureText(char).width + additionalSpace;\n          ctx[method](char, left, top);\n          left += width > 0 ? width : 0;\n        }\n      }\n      else {\n        ctx[method](chars, left, top);\n      }\n      this[shortM].toLive && ctx.restore();\n    },\n\n    /**\n     * @private\n     * @param {String} method Method name (\"fillText\" or \"strokeText\")\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {String} line Text to render\n     * @param {Number} left Left position of text\n     * @param {Number} top Top position of text\n     * @param {Number} lineIndex Index of a line in a text\n     */\n    _renderTextLine: function(method, ctx, line, left, top, lineIndex) {\n      // lift the line by quarter of fontSize\n      top -= this.fontSize * this._fontSizeFraction;\n\n      // short-circuit\n      var lineWidth = this._getLineWidth(ctx, lineIndex);\n      if (this.textAlign !== 'justify' || this.width < lineWidth) {\n        this._renderChars(method, ctx, line, left, top, lineIndex);\n        return;\n      }\n\n      // stretch the line\n      var words = line.split(/\\s+/),\n          charOffset = 0,\n          wordsWidth = this._getWidthOfWords(ctx, words.join(' '), lineIndex, 0),\n          widthDiff = this.width - wordsWidth,\n          numSpaces = words.length - 1,\n          spaceWidth = numSpaces > 0 ? widthDiff / numSpaces : 0,\n          leftOffset = 0, word;\n\n      for (var i = 0, len = words.length; i < len; i++) {\n        while (line[charOffset] === ' ' && charOffset < line.length) {\n          charOffset++;\n        }\n        word = words[i];\n        this._renderChars(method, ctx, word, left + leftOffset, top, lineIndex, charOffset);\n        leftOffset += this._getWidthOfWords(ctx, word, lineIndex, charOffset) + spaceWidth;\n        charOffset += word.length;\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {String} word\n     */\n    _getWidthOfWords: function (ctx, word) {\n      var width = ctx.measureText(word).width, charCount, additionalSpace;\n      if (this.charSpacing !== 0) {\n        charCount = word.split('').length;\n        additionalSpace = charCount * this._getWidthOfCharSpacing();\n        width += additionalSpace;\n      }\n      return width > 0 ? width : 0;\n    },\n\n    /**\n     * @private\n     * @return {Number} Left offset\n     */\n    _getLeftOffset: function() {\n      return -this.width / 2;\n    },\n\n    /**\n     * @private\n     * @return {Number} Top offset\n     */\n    _getTopOffset: function() {\n      return -this.height / 2;\n    },\n\n    /**\n     * Returns true because text has no style\n     */\n    isEmptyStyles: function() {\n      return true;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {String} method Method name (\"fillText\" or \"strokeText\")\n     */\n    _renderTextCommon: function(ctx, method) {\n\n      var lineHeights = 0, left = this._getLeftOffset(), top = this._getTopOffset();\n\n      for (var i = 0, len = this._textLines.length; i < len; i++) {\n        var heightOfLine = this._getHeightOfLine(ctx, i),\n            maxHeight = heightOfLine / this.lineHeight,\n            lineWidth = this._getLineWidth(ctx, i),\n            leftOffset = this._getLineLeftOffset(lineWidth);\n        this._renderTextLine(\n          method,\n          ctx,\n          this._textLines[i],\n          left + leftOffset,\n          top + lineHeights + maxHeight,\n          i\n        );\n        lineHeights += heightOfLine;\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderTextFill: function(ctx) {\n      if (!this.fill && this.isEmptyStyles()) {\n        return;\n      }\n\n      this._renderTextCommon(ctx, 'fillText');\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderTextStroke: function(ctx) {\n      if ((!this.stroke || this.strokeWidth === 0) && this.isEmptyStyles()) {\n        return;\n      }\n\n      if (this.shadow && !this.shadow.affectStroke) {\n        this._removeShadow(ctx);\n      }\n\n      ctx.save();\n      this._setLineDash(ctx, this.strokeDashArray);\n      ctx.beginPath();\n      this._renderTextCommon(ctx, 'strokeText');\n      ctx.closePath();\n      ctx.restore();\n    },\n\n    /**\n     * @private\n     * @return {Number} height of line\n     */\n    _getHeightOfLine: function() {\n      return this._getHeightOfSingleLine() * this.lineHeight;\n    },\n\n    /**\n     * @private\n     * @return {Number} height of line without lineHeight\n     */\n    _getHeightOfSingleLine: function() {\n      return this.fontSize * this._fontSizeMult;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderTextLinesBackground: function(ctx) {\n      if (!this.textBackgroundColor) {\n        return;\n      }\n      var lineTopOffset = 0, heightOfLine,\n          lineWidth, lineLeftOffset, originalFill = ctx.fillStyle;\n\n      ctx.fillStyle = this.textBackgroundColor;\n      for (var i = 0, len = this._textLines.length; i < len; i++) {\n        heightOfLine = this._getHeightOfLine(ctx, i);\n        lineWidth = this._getLineWidth(ctx, i);\n        if (lineWidth > 0) {\n          lineLeftOffset = this._getLineLeftOffset(lineWidth);\n          ctx.fillRect(\n            this._getLeftOffset() + lineLeftOffset,\n            this._getTopOffset() + lineTopOffset,\n            lineWidth,\n            heightOfLine / this.lineHeight\n          );\n        }\n        lineTopOffset += heightOfLine;\n      }\n      ctx.fillStyle = originalFill;\n      // if there is text background color no\n      // other shadows should be casted\n      this._removeShadow(ctx);\n    },\n\n    /**\n     * @private\n     * @param {Number} lineWidth Width of text line\n     * @return {Number} Line left offset\n     */\n    _getLineLeftOffset: function(lineWidth) {\n      if (this.textAlign === 'center') {\n        return (this.width - lineWidth) / 2;\n      }\n      if (this.textAlign === 'right') {\n        return this.width - lineWidth;\n      }\n      return 0;\n    },\n\n    /**\n     * @private\n     */\n    _clearCache: function() {\n      this.__lineWidths = [];\n      this.__lineHeights = [];\n    },\n\n    /**\n     * @private\n     */\n    _shouldClearDimensionCache: function() {\n      var shouldClear = false;\n      if (this._forceClearCache) {\n        this._forceClearCache = false;\n        this.dirty = true;\n        return true;\n      }\n      shouldClear = this.hasStateChanged('_dimensionAffectingProps');\n      if (shouldClear) {\n        this.saveState({ propertySet: '_dimensionAffectingProps' });\n        this.dirty = true;\n      }\n      return shouldClear;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Number} lineIndex line number\n     * @return {Number} Line width\n     */\n    _getLineWidth: function(ctx, lineIndex) {\n      if (this.__lineWidths[lineIndex]) {\n        return this.__lineWidths[lineIndex] === -1 ? this.width : this.__lineWidths[lineIndex];\n      }\n\n      var width, wordCount, line = this._textLines[lineIndex];\n\n      if (line === '') {\n        width = 0;\n      }\n      else {\n        width = this._measureLine(ctx, lineIndex);\n      }\n      this.__lineWidths[lineIndex] = width;\n\n      if (width && this.textAlign === 'justify') {\n        wordCount = line.split(/\\s+/);\n        if (wordCount.length > 1) {\n          this.__lineWidths[lineIndex] = -1;\n        }\n      }\n      return width;\n    },\n\n    _getWidthOfCharSpacing: function() {\n      if (this.charSpacing !== 0) {\n        return this.fontSize * this.charSpacing / 1000;\n      }\n      return 0;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Number} lineIndex line number\n     * @return {Number} Line width\n     */\n    _measureLine: function(ctx, lineIndex) {\n      var line = this._textLines[lineIndex],\n          width = ctx.measureText(line).width,\n          additionalSpace = 0, charCount, finalWidth;\n      if (this.charSpacing !== 0) {\n        charCount = line.split('').length;\n        additionalSpace = (charCount - 1) * this._getWidthOfCharSpacing();\n      }\n      finalWidth = width + additionalSpace;\n      return finalWidth > 0 ? finalWidth : 0;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderTextDecoration: function(ctx) {\n      if (!this.textDecoration) {\n        return;\n      }\n      var halfOfVerticalBox = this.height / 2,\n          _this = this, offsets = [];\n\n      /** @ignore */\n      function renderLinesAtOffset(offsets) {\n        var i, lineHeight = 0, len, j, oLen, lineWidth,\n            lineLeftOffset, heightOfLine;\n\n        for (i = 0, len = _this._textLines.length; i < len; i++) {\n\n          lineWidth = _this._getLineWidth(ctx, i);\n          lineLeftOffset = _this._getLineLeftOffset(lineWidth);\n          heightOfLine = _this._getHeightOfLine(ctx, i);\n\n          for (j = 0, oLen = offsets.length; j < oLen; j++) {\n            ctx.fillRect(\n              _this._getLeftOffset() + lineLeftOffset,\n              lineHeight + (_this._fontSizeMult - 1 + offsets[j] ) * _this.fontSize - halfOfVerticalBox,\n              lineWidth,\n              _this.fontSize / 15);\n          }\n          lineHeight += heightOfLine;\n        }\n      }\n\n      if (this.textDecoration.indexOf('underline') > -1) {\n        offsets.push(0.85); // 1 - 3/16\n      }\n      if (this.textDecoration.indexOf('line-through') > -1) {\n        offsets.push(0.43);\n      }\n      if (this.textDecoration.indexOf('overline') > -1) {\n        offsets.push(-0.12);\n      }\n      if (offsets.length > 0) {\n        renderLinesAtOffset(offsets);\n      }\n    },\n\n    /**\n     * return font declaration string for canvas context\n     * @returns {String} font declaration formatted for canvas context.\n     */\n    _getFontDeclaration: function() {\n      return [\n        // node-canvas needs \"weight style\", while browsers need \"style weight\"\n        (fabric.isLikelyNode ? this.fontWeight : this.fontStyle),\n        (fabric.isLikelyNode ? this.fontStyle : this.fontWeight),\n        this.fontSize + 'px',\n        (fabric.isLikelyNode ? ('\"' + this.fontFamily + '\"') : this.fontFamily)\n      ].join(' ');\n    },\n\n    /**\n     * Renders text instance on a specified context\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Boolean} noTransform\n     */\n    render: function(ctx, noTransform) {\n      // do not render if object is not visible\n      if (!this.visible) {\n        return;\n      }\n      if (this._shouldClearDimensionCache()) {\n        this._setTextStyles(ctx);\n        this._initDimensions(ctx);\n      }\n      this.callSuper('render', ctx, noTransform);\n    },\n\n    /**\n     * Returns the text as an array of lines.\n     * @returns {Array} Lines in the text\n     */\n    _splitTextIntoLines: function() {\n      return this.text.split(this._reNewline);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      var additionalProperties = [\n        'text',\n        'fontSize',\n        'fontWeight',\n        'fontFamily',\n        'fontStyle',\n        'lineHeight',\n        'textDecoration',\n        'textAlign',\n        'textBackgroundColor',\n        'charSpacing'\n      ].concat(propertiesToInclude);\n      return this.callSuper('toObject', additionalProperties);\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns SVG representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toSVG: function(reviver) {\n      if (!this.ctx) {\n        this.ctx = fabric.util.createCanvasElement().getContext('2d');\n      }\n      var markup = this._createBaseSVGMarkup(),\n          offsets = this._getSVGLeftTopOffsets(this.ctx),\n          textAndBg = this._getSVGTextAndBg(offsets.textTop, offsets.textLeft);\n      this._wrapSVGTextAndBg(markup, textAndBg);\n\n      return reviver ? reviver(markup.join('')) : markup.join('');\n    },\n\n    /**\n     * @private\n     */\n    _getSVGLeftTopOffsets: function(ctx) {\n      var lineTop = this._getHeightOfLine(ctx, 0),\n          textLeft = -this.width / 2,\n          textTop = 0;\n\n      return {\n        textLeft: textLeft + (this.group && this.group.type === 'path-group' ? this.left : 0),\n        textTop: textTop + (this.group && this.group.type === 'path-group' ? -this.top : 0),\n        lineTop: lineTop\n      };\n    },\n\n    /**\n     * @private\n     */\n    _wrapSVGTextAndBg: function(markup, textAndBg) {\n      var noShadow = true, filter = this.getSvgFilter(),\n          style = filter === '' ? '' : ' style=\"' + filter + '\"';\n\n      markup.push(\n        '\\t<g ', this.getSvgId(), 'transform=\"', this.getSvgTransform(), this.getSvgTransformMatrix(), '\"',\n          style, '>\\n',\n          textAndBg.textBgRects.join(''),\n          '\\t\\t<text ',\n            (this.fontFamily ? 'font-family=\"' + this.fontFamily.replace(/\"/g, '\\'') + '\" ' : ''),\n            (this.fontSize ? 'font-size=\"' + this.fontSize + '\" ' : ''),\n            (this.fontStyle ? 'font-style=\"' + this.fontStyle + '\" ' : ''),\n            (this.fontWeight ? 'font-weight=\"' + this.fontWeight + '\" ' : ''),\n            (this.textDecoration ? 'text-decoration=\"' + this.textDecoration + '\" ' : ''),\n            'style=\"', this.getSvgStyles(noShadow), '\" >\\n',\n            textAndBg.textSpans.join(''),\n          '\\t\\t</text>\\n',\n        '\\t</g>\\n'\n      );\n    },\n\n    /**\n     * @private\n     * @param {Number} textTopOffset Text top offset\n     * @param {Number} textLeftOffset Text left offset\n     * @return {Object}\n     */\n    _getSVGTextAndBg: function(textTopOffset, textLeftOffset) {\n      var textSpans = [],\n          textBgRects = [],\n          height = 0;\n      // bounding-box background\n      this._setSVGBg(textBgRects);\n\n      // text and text-background\n      for (var i = 0, len = this._textLines.length; i < len; i++) {\n        if (this.textBackgroundColor) {\n          this._setSVGTextLineBg(textBgRects, i, textLeftOffset, textTopOffset, height);\n        }\n        this._setSVGTextLineText(i, textSpans, height, textLeftOffset, textTopOffset, textBgRects);\n        height += this._getHeightOfLine(this.ctx, i);\n      }\n\n      return {\n        textSpans: textSpans,\n        textBgRects: textBgRects\n      };\n    },\n\n    _setSVGTextLineText: function(i, textSpans, height, textLeftOffset, textTopOffset) {\n      var yPos = this.fontSize * (this._fontSizeMult - this._fontSizeFraction)\n        - textTopOffset + height - this.height / 2;\n      if (this.textAlign === 'justify') {\n        // i call from here to do not intefere with IText\n        this._setSVGTextLineJustifed(i, textSpans, yPos, textLeftOffset);\n        return;\n      }\n      textSpans.push(\n        '\\t\\t\\t<tspan x=\"',\n          toFixed(textLeftOffset + this._getLineLeftOffset(this._getLineWidth(this.ctx, i)), NUM_FRACTION_DIGITS), '\" ',\n          'y=\"',\n          toFixed(yPos, NUM_FRACTION_DIGITS),\n          '\" ',\n          // doing this on <tspan> elements since setting opacity\n          // on containing <text> one doesn't work in Illustrator\n          this._getFillAttributes(this.fill), '>',\n          fabric.util.string.escapeXml(this._textLines[i]),\n        '</tspan>\\n'\n      );\n    },\n\n    _setSVGTextLineJustifed: function(i, textSpans, yPos, textLeftOffset) {\n      var ctx = fabric.util.createCanvasElement().getContext('2d');\n\n      this._setTextStyles(ctx);\n\n      var line = this._textLines[i],\n          words = line.split(/\\s+/),\n          wordsWidth = this._getWidthOfWords(ctx, words.join('')),\n          widthDiff = this.width - wordsWidth,\n          numSpaces = words.length - 1,\n          spaceWidth = numSpaces > 0 ? widthDiff / numSpaces : 0,\n          word, attributes = this._getFillAttributes(this.fill),\n          len;\n\n      textLeftOffset += this._getLineLeftOffset(this._getLineWidth(ctx, i));\n\n      for (i = 0, len = words.length; i < len; i++) {\n        word = words[i];\n        textSpans.push(\n          '\\t\\t\\t<tspan x=\"',\n            toFixed(textLeftOffset, NUM_FRACTION_DIGITS), '\" ',\n            'y=\"',\n            toFixed(yPos, NUM_FRACTION_DIGITS),\n            '\" ',\n            // doing this on <tspan> elements since setting opacity\n            // on containing <text> one doesn't work in Illustrator\n            attributes, '>',\n            fabric.util.string.escapeXml(word),\n          '</tspan>\\n'\n        );\n        textLeftOffset += this._getWidthOfWords(ctx, word) + spaceWidth;\n      }\n    },\n\n    _setSVGTextLineBg: function(textBgRects, i, textLeftOffset, textTopOffset, height) {\n      textBgRects.push(\n        '\\t\\t<rect ',\n          this._getFillAttributes(this.textBackgroundColor),\n          ' x=\"',\n          toFixed(textLeftOffset + this._getLineLeftOffset(this._getLineWidth(this.ctx, i)), NUM_FRACTION_DIGITS),\n          '\" y=\"',\n          toFixed(height - this.height / 2, NUM_FRACTION_DIGITS),\n          '\" width=\"',\n          toFixed(this._getLineWidth(this.ctx, i), NUM_FRACTION_DIGITS),\n          '\" height=\"',\n          toFixed(this._getHeightOfLine(this.ctx, i) / this.lineHeight, NUM_FRACTION_DIGITS),\n        '\"></rect>\\n');\n    },\n\n    _setSVGBg: function(textBgRects) {\n      if (this.backgroundColor) {\n        textBgRects.push(\n          '\\t\\t<rect ',\n            this._getFillAttributes(this.backgroundColor),\n            ' x=\"',\n            toFixed(-this.width / 2, NUM_FRACTION_DIGITS),\n            '\" y=\"',\n            toFixed(-this.height / 2, NUM_FRACTION_DIGITS),\n            '\" width=\"',\n            toFixed(this.width, NUM_FRACTION_DIGITS),\n            '\" height=\"',\n            toFixed(this.height, NUM_FRACTION_DIGITS),\n          '\"></rect>\\n');\n      }\n    },\n\n    /**\n     * Adobe Illustrator (at least CS5) is unable to render rgba()-based fill values\n     * we work around it by \"moving\" alpha channel into opacity attribute and setting fill's alpha to 1\n     *\n     * @private\n     * @param {*} value\n     * @return {String}\n     */\n    _getFillAttributes: function(value) {\n      var fillColor = (value && typeof value === 'string') ? new fabric.Color(value) : '';\n      if (!fillColor || !fillColor.getSource() || fillColor.getAlpha() === 1) {\n        return 'fill=\"' + value + '\"';\n      }\n      return 'opacity=\"' + fillColor.getAlpha() + '\" fill=\"' + fillColor.setAlpha(1).toRgb() + '\"';\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Sets specified property to a specified value\n     * @param {String} key\n     * @param {*} value\n     * @return {fabric.Text} thisArg\n     * @chainable\n     */\n    _set: function(key, value) {\n      this.callSuper('_set', key, value);\n\n      if (this._dimensionAffectingProps.indexOf(key) > -1) {\n        this._initDimensions();\n        this.setCoords();\n      }\n    },\n\n    /**\n     * Returns complexity of an instance\n     * @return {Number} complexity\n     */\n    complexity: function() {\n      return 1;\n    }\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Text.fromElement})\n   * @static\n   * @memberOf fabric.Text\n   * @see: http://www.w3.org/TR/SVG/text.html#TextElement\n   */\n  fabric.Text.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat(\n    'x y dx dy font-family font-style font-weight font-size text-decoration text-anchor'.split(' '));\n\n  /**\n   * Default SVG font size\n   * @static\n   * @memberOf fabric.Text\n   */\n  fabric.Text.DEFAULT_SVG_FONT_SIZE = 16;\n\n  /**\n   * Returns fabric.Text instance from an SVG element (<b>not yet implemented</b>)\n   * @static\n   * @memberOf fabric.Text\n   * @param {SVGElement} element Element to parse\n   * @param {Object} [options] Options object\n   * @return {fabric.Text} Instance of fabric.Text\n   */\n  fabric.Text.fromElement = function(element, options) {\n    if (!element) {\n      return null;\n    }\n\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Text.ATTRIBUTE_NAMES);\n    options = fabric.util.object.extend((options ? fabric.util.object.clone(options) : { }), parsedAttributes);\n\n    options.top = options.top || 0;\n    options.left = options.left || 0;\n    if ('dx' in parsedAttributes) {\n      options.left += parsedAttributes.dx;\n    }\n    if ('dy' in parsedAttributes) {\n      options.top += parsedAttributes.dy;\n    }\n    if (!('fontSize' in options)) {\n      options.fontSize = fabric.Text.DEFAULT_SVG_FONT_SIZE;\n    }\n\n    if (!options.originX) {\n      options.originX = 'left';\n    }\n\n    var textContent = '';\n\n    // The XML is not properly parsed in IE9 so a workaround to get\n    // textContent is through firstChild.data. Another workaround would be\n    // to convert XML loaded from a file to be converted using DOMParser (same way loadSVGFromString() does)\n    if (!('textContent' in element)) {\n      if ('firstChild' in element && element.firstChild !== null) {\n        if ('data' in element.firstChild && element.firstChild.data !== null) {\n          textContent = element.firstChild.data;\n        }\n      }\n    }\n    else {\n      textContent = element.textContent;\n    }\n\n    textContent = textContent.replace(/^\\s+|\\s+$|\\n+/g, '').replace(/\\s+/g, ' ');\n\n    var text = new fabric.Text(textContent, options),\n        textHeightScaleFactor = text.getHeight() / text.height,\n        lineHeightDiff = (text.height + text.strokeWidth) * text.lineHeight - text.height,\n        scaledDiff = lineHeightDiff * textHeightScaleFactor,\n        textHeight = text.getHeight() + scaledDiff,\n        offX = 0;\n    /*\n      Adjust positioning:\n        x/y attributes in SVG correspond to the bottom-left corner of text bounding box\n        top/left properties in Fabric correspond to center point of text bounding box\n    */\n    if (text.originX === 'left') {\n      offX = text.getWidth() / 2;\n    }\n    if (text.originX === 'right') {\n      offX = -text.getWidth() / 2;\n    }\n    text.set({\n      left: text.getLeft() + offX,\n      top: text.getTop() - textHeight / 2 + text.fontSize * (0.18 + text._fontSizeFraction) / text.lineHeight /* 0.3 is the old lineHeight */\n    });\n\n    return text;\n  };\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns fabric.Text instance from an object representation\n   * @static\n   * @memberOf fabric.Text\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] Callback to invoke when an fabric.Text instance is created\n   * @return {fabric.Text} Instance of fabric.Text\n   */\n  fabric.Text.fromObject = function(object, callback) {\n    var text = new fabric.Text(object.text, clone(object));\n    callback && callback(text);\n    return text;\n  };\n\n  fabric.util.createAccessors(fabric.Text);\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function() {\n\n  var clone = fabric.util.object.clone;\n\n  /**\n   * IText class (introduced in <b>v1.4</b>) Events are also fired with \"text:\"\n   * prefix when observing canvas.\n   * @class fabric.IText\n   * @extends fabric.Text\n   * @mixes fabric.Observable\n   *\n   * @fires changed\n   * @fires selection:changed\n   * @fires editing:entered\n   * @fires editing:exited\n   *\n   * @return {fabric.IText} thisArg\n   * @see {@link fabric.IText#initialize} for constructor definition\n   *\n   * <p>Supported key combinations:</p>\n   * <pre>\n   *   Move cursor:                    left, right, up, down\n   *   Select character:               shift + left, shift + right\n   *   Select text vertically:         shift + up, shift + down\n   *   Move cursor by word:            alt + left, alt + right\n   *   Select words:                   shift + alt + left, shift + alt + right\n   *   Move cursor to line start/end:  cmd + left, cmd + right or home, end\n   *   Select till start/end of line:  cmd + shift + left, cmd + shift + right or shift + home, shift + end\n   *   Jump to start/end of text:      cmd + up, cmd + down\n   *   Select till start/end of text:  cmd + shift + up, cmd + shift + down or shift + pgUp, shift + pgDown\n   *   Delete character:               backspace\n   *   Delete word:                    alt + backspace\n   *   Delete line:                    cmd + backspace\n   *   Forward delete:                 delete\n   *   Copy text:                      ctrl/cmd + c\n   *   Paste text:                     ctrl/cmd + v\n   *   Cut text:                       ctrl/cmd + x\n   *   Select entire text:             ctrl/cmd + a\n   *   Quit editing                    tab or esc\n   * </pre>\n   *\n   * <p>Supported mouse/touch combination</p>\n   * <pre>\n   *   Position cursor:                click/touch\n   *   Create selection:               click/touch & drag\n   *   Create selection:               click & shift + click\n   *   Select word:                    double click\n   *   Select line:                    triple click\n   * </pre>\n   */\n  fabric.IText = fabric.util.createClass(fabric.Text, fabric.Observable, /** @lends fabric.IText.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'i-text',\n\n    /**\n     * Index where text selection starts (or where cursor is when there is no selection)\n     * @type Number\n     * @default\n     */\n    selectionStart: 0,\n\n    /**\n     * Index where text selection ends\n     * @type Number\n     * @default\n     */\n    selectionEnd: 0,\n\n    /**\n     * Color of text selection\n     * @type String\n     * @default\n     */\n    selectionColor: 'rgba(17,119,255,0.3)',\n\n    /**\n     * Indicates whether text is in editing mode\n     * @type Boolean\n     * @default\n     */\n    isEditing: false,\n\n    /**\n     * Indicates whether a text can be edited\n     * @type Boolean\n     * @default\n     */\n    editable: true,\n\n    /**\n     * Border color of text object while it's in editing mode\n     * @type String\n     * @default\n     */\n    editingBorderColor: 'rgba(102,153,255,0.25)',\n\n    /**\n     * Width of cursor (in px)\n     * @type Number\n     * @default\n     */\n    cursorWidth: 2,\n\n    /**\n     * Color of default cursor (when not overwritten by character style)\n     * @type String\n     * @default\n     */\n    cursorColor: '#333',\n\n    /**\n     * Delay between cursor blink (in ms)\n     * @type Number\n     * @default\n     */\n    cursorDelay: 1000,\n\n    /**\n     * Duration of cursor fadein (in ms)\n     * @type Number\n     * @default\n     */\n    cursorDuration: 600,\n\n    /**\n     * Object containing character styles\n     * (where top-level properties corresponds to line number and 2nd-level properties -- to char number in a line)\n     * @type Object\n     * @default\n     */\n    styles: null,\n\n    /**\n     * Indicates whether internal text char widths can be cached\n     * @type Boolean\n     * @default\n     */\n    caching: true,\n\n    /**\n     * @private\n     */\n    _reSpace: /\\s|\\n/,\n\n    /**\n     * @private\n     */\n    _currentCursorOpacity: 0,\n\n    /**\n     * @private\n     */\n    _selectionDirection: null,\n\n    /**\n     * @private\n     */\n    _abortCursorAnimation: false,\n\n    /**\n     * @private\n     */\n    __widthOfSpace: [],\n\n    /**\n     * Constructor\n     * @param {String} text Text string\n     * @param {Object} [options] Options object\n     * @return {fabric.IText} thisArg\n     */\n    initialize: function(text, options) {\n      this.styles = options ? (options.styles || { }) : { };\n      this.callSuper('initialize', text, options);\n      this.initBehavior();\n    },\n\n    /**\n     * @private\n     */\n    _clearCache: function() {\n      this.callSuper('_clearCache');\n      this.__widthOfSpace = [];\n    },\n\n    /**\n     * Returns true if object has no styling\n     */\n    isEmptyStyles: function() {\n      if (!this.styles) {\n        return true;\n      }\n      var obj = this.styles;\n\n      for (var p1 in obj) {\n        for (var p2 in obj[p1]) {\n          // eslint-disable-next-line no-unused-vars\n          for (var p3 in obj[p1][p2]) {\n            return false;\n          }\n        }\n      }\n      return true;\n    },\n\n    /**\n     * Sets selection start (left boundary of a selection)\n     * @param {Number} index Index to set selection start to\n     */\n    setSelectionStart: function(index) {\n      index = Math.max(index, 0);\n      this._updateAndFire('selectionStart', index);\n    },\n\n    /**\n     * Sets selection end (right boundary of a selection)\n     * @param {Number} index Index to set selection end to\n     */\n    setSelectionEnd: function(index) {\n      index = Math.min(index, this.text.length);\n      this._updateAndFire('selectionEnd', index);\n    },\n\n    /**\n     * @private\n     * @param {String} property 'selectionStart' or 'selectionEnd'\n     * @param {Number} index new position of property\n     */\n    _updateAndFire: function(property, index) {\n      if (this[property] !== index) {\n        this._fireSelectionChanged();\n        this[property] = index;\n      }\n      this._updateTextarea();\n    },\n\n    /**\n     * Fires the even of selection changed\n     * @private\n     */\n    _fireSelectionChanged: function() {\n      this.fire('selection:changed');\n      this.canvas && this.canvas.fire('text:selection:changed', { target: this });\n    },\n\n    /**\n     * Gets style of a current selection/cursor (at the start position)\n     * @param {Number} [startIndex] Start index to get styles at\n     * @param {Number} [endIndex] End index to get styles at\n     * @return {Object} styles Style object at a specified (or current) index\n     */\n    getSelectionStyles: function(startIndex, endIndex) {\n\n      if (arguments.length === 2) {\n        var styles = [];\n        for (var i = startIndex; i < endIndex; i++) {\n          styles.push(this.getSelectionStyles(i));\n        }\n        return styles;\n      }\n\n      var loc = this.get2DCursorLocation(startIndex),\n          style = this._getStyleDeclaration(loc.lineIndex, loc.charIndex);\n\n      return style || {};\n    },\n\n    /**\n     * Sets style of a current selection\n     * @param {Object} [styles] Styles object\n     * @return {fabric.IText} thisArg\n     * @chainable\n     */\n    setSelectionStyles: function(styles) {\n      if (this.selectionStart === this.selectionEnd) {\n        this._extendStyles(this.selectionStart, styles);\n      }\n      else {\n        for (var i = this.selectionStart; i < this.selectionEnd; i++) {\n          this._extendStyles(i, styles);\n        }\n      }\n      /* not included in _extendStyles to avoid clearing cache more than once */\n      this._forceClearCache = true;\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _extendStyles: function(index, styles) {\n      var loc = this.get2DCursorLocation(index);\n\n      if (!this._getLineStyle(loc.lineIndex)) {\n        this._setLineStyle(loc.lineIndex, {});\n      }\n\n      if (!this._getStyleDeclaration(loc.lineIndex, loc.charIndex)) {\n        this._setStyleDeclaration(loc.lineIndex, loc.charIndex, {});\n      }\n\n      fabric.util.object.extend(this._getStyleDeclaration(loc.lineIndex, loc.charIndex), styles);\n    },\n\n    /**\n     * Initialize text dimensions. Render all text on given context\n     * or on a offscreen canvas to get the text width with measureText.\n     * Updates this.width and this.height with the proper values.\n     * Does not return dimensions.\n     * @param {CanvasRenderingContext2D} [ctx] Context to render on\n     * @private\n     */\n    _initDimensions: function(ctx) {\n      if (!ctx) {\n        this.clearContextTop();\n      }\n      this.callSuper('_initDimensions', ctx);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Boolean} noTransform\n     */\n    render: function(ctx, noTransform) {\n      this.clearContextTop();\n      this.callSuper('render', ctx, noTransform);\n      // clear the cursorOffsetCache, so we ensure to calculate once per renderCursor\n      // the correct position but not at every cursor animation.\n      this.cursorOffsetCache = { };\n      this.renderCursorOrSelection();\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      this.callSuper('_render', ctx);\n      this.ctx = ctx;\n    },\n\n    /**\n     * Prepare and clean the contextTop\n     */\n    clearContextTop: function() {\n      if (!this.active || !this.isEditing) {\n        return;\n      }\n      if (this.canvas && this.canvas.contextTop) {\n        var ctx = this.canvas.contextTop;\n        ctx.save();\n        ctx.transform.apply(ctx, this.canvas.viewportTransform);\n        this.transform(ctx);\n        this.transformMatrix && ctx.transform.apply(ctx, this.transformMatrix);\n        this._clearTextArea(ctx);\n        ctx.restore();\n      }\n    },\n\n    /**\n     * Renders cursor or selection (depending on what exists)\n     */\n    renderCursorOrSelection: function() {\n      if (!this.active || !this.isEditing) {\n        return;\n      }\n      var chars = this.text.split(''),\n          boundaries, ctx;\n      if (this.canvas && this.canvas.contextTop) {\n        ctx = this.canvas.contextTop;\n        ctx.save();\n        ctx.transform.apply(ctx, this.canvas.viewportTransform);\n        this.transform(ctx);\n        this.transformMatrix && ctx.transform.apply(ctx, this.transformMatrix);\n        this._clearTextArea(ctx);\n      }\n      else {\n        ctx = this.ctx;\n        ctx.save();\n      }\n      if (this.selectionStart === this.selectionEnd) {\n        boundaries = this._getCursorBoundaries(chars, 'cursor');\n        this.renderCursor(boundaries, ctx);\n      }\n      else {\n        boundaries = this._getCursorBoundaries(chars, 'selection');\n        this.renderSelection(chars, boundaries, ctx);\n      }\n      ctx.restore();\n    },\n\n    _clearTextArea: function(ctx) {\n      // we add 4 pixel, to be sure to do not leave any pixel out\n      var width = this.width + 4, height = this.height + 4;\n      ctx.clearRect(-width / 2, -height / 2, width, height);\n    },\n    /**\n     * Returns 2d representation (lineIndex and charIndex) of cursor (or selection start)\n     * @param {Number} [selectionStart] Optional index. When not given, current selectionStart is used.\n     */\n    get2DCursorLocation: function(selectionStart) {\n      if (typeof selectionStart === 'undefined') {\n        selectionStart = this.selectionStart;\n      }\n      var len = this._textLines.length;\n      for (var i = 0; i < len; i++) {\n        if (selectionStart <= this._textLines[i].length) {\n          return {\n            lineIndex: i,\n            charIndex: selectionStart\n          };\n        }\n        selectionStart -= this._textLines[i].length + 1;\n      }\n      return {\n        lineIndex: i - 1,\n        charIndex: this._textLines[i - 1].length < selectionStart ? this._textLines[i - 1].length : selectionStart\n      };\n    },\n\n    /**\n     * Returns complete style of char at the current cursor\n     * @param {Number} lineIndex Line index\n     * @param {Number} charIndex Char index\n     * @return {Object} Character style\n     */\n    getCurrentCharStyle: function(lineIndex, charIndex) {\n      var style = this._getStyleDeclaration(lineIndex, charIndex === 0 ? 0 : charIndex - 1);\n\n      return {\n        fontSize: style && style.fontSize || this.fontSize,\n        fill: style && style.fill || this.fill,\n        textBackgroundColor: style && style.textBackgroundColor || this.textBackgroundColor,\n        textDecoration: style && style.textDecoration || this.textDecoration,\n        fontFamily: style && style.fontFamily || this.fontFamily,\n        fontWeight: style && style.fontWeight || this.fontWeight,\n        fontStyle: style && style.fontStyle || this.fontStyle,\n        stroke: style && style.stroke || this.stroke,\n        strokeWidth: style && style.strokeWidth || this.strokeWidth\n      };\n    },\n\n    /**\n     * Returns fontSize of char at the current cursor\n     * @param {Number} lineIndex Line index\n     * @param {Number} charIndex Char index\n     * @return {Number} Character font size\n     */\n    getCurrentCharFontSize: function(lineIndex, charIndex) {\n      var style = this._getStyleDeclaration(lineIndex, charIndex === 0 ? 0 : charIndex - 1);\n      return style && style.fontSize ? style.fontSize : this.fontSize;\n    },\n\n    /**\n     * Returns color (fill) of char at the current cursor\n     * @param {Number} lineIndex Line index\n     * @param {Number} charIndex Char index\n     * @return {String} Character color (fill)\n     */\n    getCurrentCharColor: function(lineIndex, charIndex) {\n      var style = this._getStyleDeclaration(lineIndex, charIndex === 0 ? 0 : charIndex - 1);\n      return style && style.fill ? style.fill : this.cursorColor;\n    },\n\n    /**\n     * Returns cursor boundaries (left, top, leftOffset, topOffset)\n     * @private\n     * @param {Array} chars Array of characters\n     * @param {String} typeOfBoundaries\n     */\n    _getCursorBoundaries: function(chars, typeOfBoundaries) {\n\n      // left/top are left/top of entire text box\n      // leftOffset/topOffset are offset from that left/top point of a text box\n\n      var left = Math.round(this._getLeftOffset()),\n          top = this._getTopOffset(),\n\n          offsets = this._getCursorBoundariesOffsets(\n                      chars, typeOfBoundaries);\n\n      return {\n        left: left,\n        top: top,\n        leftOffset: offsets.left + offsets.lineLeft,\n        topOffset: offsets.top\n      };\n    },\n\n    /**\n     * @private\n     */\n    _getCursorBoundariesOffsets: function(chars, typeOfBoundaries) {\n      if (this.cursorOffsetCache && 'top' in this.cursorOffsetCache) {\n        return this.cursorOffsetCache;\n      }\n      var lineLeftOffset = 0,\n          lineIndex = 0,\n          charIndex = 0,\n          topOffset = 0,\n          leftOffset = 0,\n          boundaries;\n\n      for (var i = 0; i < this.selectionStart; i++) {\n        if (chars[i] === '\\n') {\n          leftOffset = 0;\n          topOffset += this._getHeightOfLine(this.ctx, lineIndex);\n\n          lineIndex++;\n          charIndex = 0;\n        }\n        else {\n          leftOffset += this._getWidthOfChar(this.ctx, chars[i], lineIndex, charIndex);\n          charIndex++;\n        }\n\n        lineLeftOffset = this._getLineLeftOffset(this._getLineWidth(this.ctx, lineIndex));\n      }\n      if (typeOfBoundaries === 'cursor') {\n        topOffset += (1 - this._fontSizeFraction) * this._getHeightOfLine(this.ctx, lineIndex) / this.lineHeight\n          - this.getCurrentCharFontSize(lineIndex, charIndex) * (1 - this._fontSizeFraction);\n      }\n      if (this.charSpacing !== 0 && charIndex === this._textLines[lineIndex].length) {\n        leftOffset -= this._getWidthOfCharSpacing();\n      }\n      boundaries = {\n        top: topOffset,\n        left: leftOffset > 0 ? leftOffset : 0,\n        lineLeft: lineLeftOffset\n      };\n      this.cursorOffsetCache = boundaries;\n      return this.cursorOffsetCache;\n    },\n\n    /**\n     * Renders cursor\n     * @param {Object} boundaries\n     * @param {CanvasRenderingContext2D} ctx transformed context to draw on\n     */\n    renderCursor: function(boundaries, ctx) {\n\n      var cursorLocation = this.get2DCursorLocation(),\n          lineIndex = cursorLocation.lineIndex,\n          charIndex = cursorLocation.charIndex,\n          charHeight = this.getCurrentCharFontSize(lineIndex, charIndex),\n          leftOffset = (lineIndex === 0 && charIndex === 0)\n                    ? this._getLineLeftOffset(this._getLineWidth(ctx, lineIndex))\n                    : boundaries.leftOffset,\n          multiplier = this.scaleX * this.canvas.getZoom(),\n          cursorWidth = this.cursorWidth / multiplier;\n\n      ctx.fillStyle = this.getCurrentCharColor(lineIndex, charIndex);\n      ctx.globalAlpha = this.__isMousedown ? 1 : this._currentCursorOpacity;\n\n      ctx.fillRect(\n        boundaries.left + leftOffset - cursorWidth / 2,\n        boundaries.top + boundaries.topOffset,\n        cursorWidth,\n        charHeight);\n    },\n\n    /**\n     * Renders text selection\n     * @param {Array} chars Array of characters\n     * @param {Object} boundaries Object with left/top/leftOffset/topOffset\n     * @param {CanvasRenderingContext2D} ctx transformed context to draw on\n     */\n    renderSelection: function(chars, boundaries, ctx) {\n\n      ctx.fillStyle = this.selectionColor;\n\n      var start = this.get2DCursorLocation(this.selectionStart),\n          end = this.get2DCursorLocation(this.selectionEnd),\n          startLine = start.lineIndex,\n          endLine = end.lineIndex;\n      for (var i = startLine; i <= endLine; i++) {\n        var lineOffset = this._getLineLeftOffset(this._getLineWidth(ctx, i)) || 0,\n            lineHeight = this._getHeightOfLine(this.ctx, i),\n            realLineHeight = 0, boxWidth = 0, line = this._textLines[i];\n\n        if (i === startLine) {\n          for (var j = 0, len = line.length; j < len; j++) {\n            if (j >= start.charIndex && (i !== endLine || j < end.charIndex)) {\n              boxWidth += this._getWidthOfChar(ctx, line[j], i, j);\n            }\n            if (j < start.charIndex) {\n              lineOffset += this._getWidthOfChar(ctx, line[j], i, j);\n            }\n          }\n          if (j === line.length) {\n            boxWidth -= this._getWidthOfCharSpacing();\n          }\n        }\n        else if (i > startLine && i < endLine) {\n          boxWidth += this._getLineWidth(ctx, i) || 5;\n        }\n        else if (i === endLine) {\n          for (var j2 = 0, j2len = end.charIndex; j2 < j2len; j2++) {\n            boxWidth += this._getWidthOfChar(ctx, line[j2], i, j2);\n          }\n          if (end.charIndex === line.length) {\n            boxWidth -= this._getWidthOfCharSpacing();\n          }\n        }\n        realLineHeight = lineHeight;\n        if (this.lineHeight < 1 || (i === endLine && this.lineHeight > 1)) {\n          lineHeight /= this.lineHeight;\n        }\n        ctx.fillRect(\n          boundaries.left + lineOffset,\n          boundaries.top + boundaries.topOffset,\n          boxWidth > 0 ? boxWidth : 0,\n          lineHeight);\n\n        boundaries.topOffset += realLineHeight;\n      }\n    },\n\n    /**\n     * @private\n     * @param {String} method\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {String} line Content of the line\n     * @param {Number} left\n     * @param {Number} top\n     * @param {Number} lineIndex\n     * @param {Number} charOffset\n     */\n    _renderChars: function(method, ctx, line, left, top, lineIndex, charOffset) {\n\n      if (this.isEmptyStyles()) {\n        return this._renderCharsFast(method, ctx, line, left, top);\n      }\n\n      charOffset = charOffset || 0;\n\n      // set proper line offset\n      var lineHeight = this._getHeightOfLine(ctx, lineIndex),\n          prevStyle,\n          thisStyle,\n          charsToRender = '';\n\n      ctx.save();\n      top -= lineHeight / this.lineHeight * this._fontSizeFraction;\n      for (var i = charOffset, len = line.length + charOffset; i <= len; i++) {\n        prevStyle = prevStyle || this.getCurrentCharStyle(lineIndex, i);\n        thisStyle = this.getCurrentCharStyle(lineIndex, i + 1);\n\n        if (this._hasStyleChanged(prevStyle, thisStyle) || i === len) {\n          this._renderChar(method, ctx, lineIndex, i - 1, charsToRender, left, top, lineHeight);\n          charsToRender = '';\n          prevStyle = thisStyle;\n        }\n        charsToRender += line[i - charOffset];\n      }\n      ctx.restore();\n    },\n\n    /**\n     * @private\n     * @param {String} method\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {String} line Content of the line\n     * @param {Number} left Left coordinate\n     * @param {Number} top Top coordinate\n     */\n    _renderCharsFast: function(method, ctx, line, left, top) {\n\n      if (method === 'fillText' && this.fill) {\n        this.callSuper('_renderChars', method, ctx, line, left, top);\n      }\n      if (method === 'strokeText' && ((this.stroke && this.strokeWidth > 0) || this.skipFillStrokeCheck)) {\n        this.callSuper('_renderChars', method, ctx, line, left, top);\n      }\n    },\n\n    /**\n     * @private\n     * @param {String} method\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Number} lineIndex\n     * @param {Number} i\n     * @param {String} _char\n     * @param {Number} left Left coordinate\n     * @param {Number} top Top coordinate\n     * @param {Number} lineHeight Height of the line\n     */\n    _renderChar: function(method, ctx, lineIndex, i, _char, left, top, lineHeight) {\n      var charWidth, charHeight, shouldFill, shouldStroke,\n          decl = this._getStyleDeclaration(lineIndex, i),\n          offset, textDecoration, chars, additionalSpace, _charWidth;\n\n      if (decl) {\n        charHeight = this._getHeightOfChar(ctx, _char, lineIndex, i);\n        shouldStroke = decl.stroke;\n        shouldFill = decl.fill;\n        textDecoration = decl.textDecoration;\n      }\n      else {\n        charHeight = this.fontSize;\n      }\n\n      shouldStroke = (shouldStroke || this.stroke) && method === 'strokeText';\n      shouldFill = (shouldFill || this.fill) && method === 'fillText';\n\n      decl && ctx.save();\n\n      charWidth = this._applyCharStylesGetWidth(ctx, _char, lineIndex, i, decl || null);\n      textDecoration = textDecoration || this.textDecoration;\n\n      if (decl && decl.textBackgroundColor) {\n        this._removeShadow(ctx);\n      }\n      if (this.charSpacing !== 0) {\n        additionalSpace = this._getWidthOfCharSpacing();\n        chars = _char.split('');\n        charWidth = 0;\n        for (var j = 0, len = chars.length, char; j < len; j++) {\n          char = chars[j];\n          shouldFill && ctx.fillText(char, left + charWidth, top);\n          shouldStroke && ctx.strokeText(char, left + charWidth, top);\n          _charWidth = ctx.measureText(char).width + additionalSpace;\n          charWidth += _charWidth > 0 ? _charWidth : 0;\n        }\n      }\n      else {\n        shouldFill && ctx.fillText(_char, left, top);\n        shouldStroke && ctx.strokeText(_char, left, top);\n      }\n\n      if (textDecoration || textDecoration !== '') {\n        offset = this._fontSizeFraction * lineHeight / this.lineHeight;\n        this._renderCharDecoration(ctx, textDecoration, left, top, offset, charWidth, charHeight);\n      }\n\n      decl && ctx.restore();\n      ctx.translate(charWidth, 0);\n    },\n\n    /**\n     * @private\n     * @param {Object} prevStyle\n     * @param {Object} thisStyle\n     */\n    _hasStyleChanged: function(prevStyle, thisStyle) {\n      return (prevStyle.fill !== thisStyle.fill ||\n              prevStyle.fontSize !== thisStyle.fontSize ||\n              prevStyle.textBackgroundColor !== thisStyle.textBackgroundColor ||\n              prevStyle.textDecoration !== thisStyle.textDecoration ||\n              prevStyle.fontFamily !== thisStyle.fontFamily ||\n              prevStyle.fontWeight !== thisStyle.fontWeight ||\n              prevStyle.fontStyle !== thisStyle.fontStyle ||\n              prevStyle.stroke !== thisStyle.stroke ||\n              prevStyle.strokeWidth !== thisStyle.strokeWidth\n      );\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderCharDecoration: function(ctx, textDecoration, left, top, offset, charWidth, charHeight) {\n\n      if (!textDecoration) {\n        return;\n      }\n\n      var decorationWeight = charHeight / 15,\n          positions = {\n            underline: top + charHeight / 10,\n            'line-through': top - charHeight * (this._fontSizeFraction + this._fontSizeMult - 1) + decorationWeight,\n            overline: top - (this._fontSizeMult - this._fontSizeFraction) * charHeight\n          },\n          decorations = ['underline', 'line-through', 'overline'], i, decoration;\n\n      for (i = 0; i < decorations.length; i++) {\n        decoration = decorations[i];\n        if (textDecoration.indexOf(decoration) > -1) {\n          ctx.fillRect(left, positions[decoration], charWidth , decorationWeight);\n        }\n      }\n    },\n\n    /**\n     * @private\n     * @param {String} method\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {String} line\n     * @param {Number} left\n     * @param {Number} top\n     * @param {Number} lineIndex\n     */\n    _renderTextLine: function(method, ctx, line, left, top, lineIndex) {\n      // to \"cancel\" this.fontSize subtraction in fabric.Text#_renderTextLine\n      // the adding 0.03 is just to align text with itext by overlap test\n      if (!this.isEmptyStyles()) {\n        top += this.fontSize * (this._fontSizeFraction + 0.03);\n      }\n      this.callSuper('_renderTextLine', method, ctx, line, left, top, lineIndex);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderTextDecoration: function(ctx) {\n      if (this.isEmptyStyles()) {\n        return this.callSuper('_renderTextDecoration', ctx);\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderTextLinesBackground: function(ctx) {\n      this.callSuper('_renderTextLinesBackground', ctx);\n\n      var lineTopOffset = 0, heightOfLine,\n          lineWidth, lineLeftOffset,\n          leftOffset = this._getLeftOffset(),\n          topOffset = this._getTopOffset(),\n          line, _char, style;\n      ctx.save();\n      for (var i = 0, len = this._textLines.length; i < len; i++) {\n        heightOfLine = this._getHeightOfLine(ctx, i);\n        line = this._textLines[i];\n\n        if (line === '' || !this.styles || !this._getLineStyle(i)) {\n          lineTopOffset += heightOfLine;\n          continue;\n        }\n\n        lineWidth = this._getLineWidth(ctx, i);\n        lineLeftOffset = this._getLineLeftOffset(lineWidth);\n\n        for (var j = 0, jlen = line.length; j < jlen; j++) {\n          style = this._getStyleDeclaration(i, j);\n          if (!style || !style.textBackgroundColor) {\n            continue;\n          }\n          _char = line[j];\n\n          ctx.fillStyle = style.textBackgroundColor;\n\n          ctx.fillRect(\n            leftOffset + lineLeftOffset + this._getWidthOfCharsAt(ctx, i, j),\n            topOffset + lineTopOffset,\n            this._getWidthOfChar(ctx, _char, i, j),\n            heightOfLine / this.lineHeight\n          );\n        }\n        lineTopOffset += heightOfLine;\n      }\n      ctx.restore();\n    },\n\n    /**\n     * @private\n     */\n    _getCacheProp: function(_char, styleDeclaration) {\n      return _char +\n             styleDeclaration.fontSize +\n             styleDeclaration.fontWeight +\n             styleDeclaration.fontStyle;\n    },\n\n    /**\n     * @private\n     * @param {String} fontFamily name\n     * @return {Object} reference to cache\n     */\n    _getFontCache: function(fontFamily) {\n      if (!fabric.charWidthsCache[fontFamily]) {\n        fabric.charWidthsCache[fontFamily] = { };\n      }\n      return fabric.charWidthsCache[fontFamily];\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {String} _char\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @param {Object} [decl]\n     */\n    _applyCharStylesGetWidth: function(ctx, _char, lineIndex, charIndex, decl) {\n      var charDecl = decl || this._getStyleDeclaration(lineIndex, charIndex),\n          styleDeclaration = clone(charDecl),\n          width, cacheProp, charWidthsCache;\n\n      this._applyFontStyles(styleDeclaration);\n      charWidthsCache = this._getFontCache(styleDeclaration.fontFamily);\n      cacheProp = this._getCacheProp(_char, styleDeclaration);\n\n      // short-circuit if no styles for this char\n      // global style from object is always applyed and handled by save and restore\n      if (!charDecl && charWidthsCache[cacheProp] && this.caching) {\n        return charWidthsCache[cacheProp];\n      }\n\n      if (typeof styleDeclaration.shadow === 'string') {\n        styleDeclaration.shadow = new fabric.Shadow(styleDeclaration.shadow);\n      }\n\n      var fill = styleDeclaration.fill || this.fill;\n      ctx.fillStyle = fill.toLive\n        ? fill.toLive(ctx, this)\n        : fill;\n\n      if (styleDeclaration.stroke) {\n        ctx.strokeStyle = (styleDeclaration.stroke && styleDeclaration.stroke.toLive)\n          ? styleDeclaration.stroke.toLive(ctx, this)\n          : styleDeclaration.stroke;\n      }\n\n      ctx.lineWidth = styleDeclaration.strokeWidth || this.strokeWidth;\n      ctx.font = this._getFontDeclaration.call(styleDeclaration);\n\n      //if we want this._setShadow.call to work with styleDeclarion\n      //we have to add those references\n      if (styleDeclaration.shadow) {\n        styleDeclaration.scaleX = this.scaleX;\n        styleDeclaration.scaleY = this.scaleY;\n        styleDeclaration.canvas = this.canvas;\n        styleDeclaration.getObjectScaling = this.getObjectScaling;\n        this._setShadow.call(styleDeclaration, ctx);\n      }\n\n      if (!this.caching || !charWidthsCache[cacheProp]) {\n        width = ctx.measureText(_char).width;\n        this.caching && (charWidthsCache[cacheProp] = width);\n        return width;\n      }\n\n      return charWidthsCache[cacheProp];\n    },\n\n    /**\n     * @private\n     * @param {Object} styleDeclaration\n     */\n    _applyFontStyles: function(styleDeclaration) {\n      if (!styleDeclaration.fontFamily) {\n        styleDeclaration.fontFamily = this.fontFamily;\n      }\n      if (!styleDeclaration.fontSize) {\n        styleDeclaration.fontSize = this.fontSize;\n      }\n      if (!styleDeclaration.fontWeight) {\n        styleDeclaration.fontWeight = this.fontWeight;\n      }\n      if (!styleDeclaration.fontStyle) {\n        styleDeclaration.fontStyle = this.fontStyle;\n      }\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @param {Boolean} [returnCloneOrEmpty=false]\n     * @private\n     */\n    _getStyleDeclaration: function(lineIndex, charIndex, returnCloneOrEmpty) {\n      if (returnCloneOrEmpty) {\n        return (this.styles[lineIndex] && this.styles[lineIndex][charIndex])\n          ? clone(this.styles[lineIndex][charIndex])\n          : { };\n      }\n\n      return this.styles[lineIndex] && this.styles[lineIndex][charIndex] ? this.styles[lineIndex][charIndex] : null;\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @param {Object} style\n     * @private\n     */\n    _setStyleDeclaration: function(lineIndex, charIndex, style) {\n      this.styles[lineIndex][charIndex] = style;\n    },\n\n    /**\n     *\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @private\n     */\n    _deleteStyleDeclaration: function(lineIndex, charIndex) {\n      delete this.styles[lineIndex][charIndex];\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @private\n     */\n    _getLineStyle: function(lineIndex) {\n      return this.styles[lineIndex];\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @param {Object} style\n     * @private\n     */\n    _setLineStyle: function(lineIndex, style) {\n      this.styles[lineIndex] = style;\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @private\n     */\n    _deleteLineStyle: function(lineIndex) {\n      delete this.styles[lineIndex];\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _getWidthOfChar: function(ctx, _char, lineIndex, charIndex) {\n      if (!this._isMeasuring && this.textAlign === 'justify' && this._reSpacesAndTabs.test(_char)) {\n        return this._getWidthOfSpace(ctx, lineIndex);\n      }\n      ctx.save();\n      var width = this._applyCharStylesGetWidth(ctx, _char, lineIndex, charIndex);\n      if (this.charSpacing !== 0) {\n        width += this._getWidthOfCharSpacing();\n      }\n      ctx.restore();\n      return width > 0 ? width : 0\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     */\n    _getHeightOfChar: function(ctx, lineIndex, charIndex) {\n      var style = this._getStyleDeclaration(lineIndex, charIndex);\n      return style && style.fontSize ? style.fontSize : this.fontSize;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     */\n    _getWidthOfCharsAt: function(ctx, lineIndex, charIndex) {\n      var width = 0, i, _char;\n      for (i = 0; i < charIndex; i++) {\n        _char = this._textLines[lineIndex][i];\n        width += this._getWidthOfChar(ctx, _char, lineIndex, i);\n      }\n      return width;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Number} lineIndex line number\n     * @return {Number} Line width\n     */\n    _measureLine: function(ctx, lineIndex) {\n      this._isMeasuring = true;\n      var width = this._getWidthOfCharsAt(ctx, lineIndex, this._textLines[lineIndex].length);\n      if (this.charSpacing !== 0) {\n        width -= this._getWidthOfCharSpacing();\n      }\n      this._isMeasuring = false;\n      return width > 0 ? width : 0;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Number} lineIndex\n     */\n    _getWidthOfSpace: function (ctx, lineIndex) {\n      if (this.__widthOfSpace[lineIndex]) {\n        return this.__widthOfSpace[lineIndex];\n      }\n      var line = this._textLines[lineIndex],\n          wordsWidth = this._getWidthOfWords(ctx, line, lineIndex, 0),\n          widthDiff = this.width - wordsWidth,\n          numSpaces = line.length - line.replace(this._reSpacesAndTabs, '').length,\n          width = Math.max(widthDiff / numSpaces, ctx.measureText(' ').width);\n      this.__widthOfSpace[lineIndex] = width;\n      return width;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {String} line\n     * @param {Number} lineIndex\n     * @param {Number} charOffset\n     */\n    _getWidthOfWords: function (ctx, line, lineIndex, charOffset) {\n      var width = 0;\n\n      for (var charIndex = 0; charIndex < line.length; charIndex++) {\n        var _char = line[charIndex];\n\n        if (!_char.match(/\\s/)) {\n          width += this._getWidthOfChar(ctx, _char, lineIndex, charIndex + charOffset);\n        }\n      }\n\n      return width;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _getHeightOfLine: function(ctx, lineIndex) {\n      if (this.__lineHeights[lineIndex]) {\n        return this.__lineHeights[lineIndex];\n      }\n\n      var line = this._textLines[lineIndex],\n          maxHeight = this._getHeightOfChar(ctx, lineIndex, 0);\n\n      for (var i = 1, len = line.length; i < len; i++) {\n        var currentCharHeight = this._getHeightOfChar(ctx, lineIndex, i);\n        if (currentCharHeight > maxHeight) {\n          maxHeight = currentCharHeight;\n        }\n      }\n      this.__lineHeights[lineIndex] = maxHeight * this.lineHeight * this._fontSizeMult;\n      return this.__lineHeights[lineIndex];\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _getTextHeight: function(ctx) {\n      var lineHeight, height = 0;\n      for (var i = 0, len = this._textLines.length; i < len; i++) {\n        lineHeight = this._getHeightOfLine(ctx, i);\n        height += (i === len - 1 ? lineHeight / this.lineHeight : lineHeight);\n      }\n      return height;\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @method toObject\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return fabric.util.object.extend(this.callSuper('toObject', propertiesToInclude), {\n        styles: clone(this.styles, true)\n      });\n    }\n  });\n\n  /**\n   * Returns fabric.IText instance from an object representation\n   * @static\n   * @memberOf fabric.IText\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] invoked with new instance as argument\n   * @return {fabric.IText} instance of fabric.IText\n   */\n  fabric.IText.fromObject = function(object, callback) {\n    var iText = new fabric.IText(object.text, clone(object));\n    callback && callback(iText);\n    return iText;\n  };\n})();\n\n\n(function() {\n\n  var clone = fabric.util.object.clone;\n\n  fabric.util.object.extend(fabric.IText.prototype, /** @lends fabric.IText.prototype */ {\n\n    /**\n     * Initializes all the interactive behavior of IText\n     */\n    initBehavior: function() {\n      this.initAddedHandler();\n      this.initRemovedHandler();\n      this.initCursorSelectionHandlers();\n      this.initDoubleClickSimulation();\n      this.mouseMoveHandler = this.mouseMoveHandler.bind(this);\n    },\n\n    /**\n     * Initializes \"selected\" event handler\n     */\n    initSelectedHandler: function() {\n      this.on('selected', function() {\n\n        var _this = this;\n        setTimeout(function() {\n          _this.selected = true;\n        }, 100);\n      });\n    },\n\n    /**\n     * Initializes \"added\" event handler\n     */\n    initAddedHandler: function() {\n      var _this = this;\n      this.on('added', function() {\n        var canvas = _this.canvas;\n        if (canvas) {\n          if (!canvas._hasITextHandlers) {\n            canvas._hasITextHandlers = true;\n            _this._initCanvasHandlers(canvas);\n          }\n          canvas._iTextInstances = canvas._iTextInstances || [];\n          canvas._iTextInstances.push(_this);\n        }\n      });\n    },\n\n    initRemovedHandler: function() {\n      var _this = this;\n      this.on('removed', function() {\n        var canvas = _this.canvas;\n        if (canvas) {\n          canvas._iTextInstances = canvas._iTextInstances || [];\n          fabric.util.removeFromArray(canvas._iTextInstances, _this);\n          if (canvas._iTextInstances.length === 0) {\n            canvas._hasITextHandlers = false;\n            _this._removeCanvasHandlers(canvas);\n          }\n        }\n      });\n    },\n\n    /**\n     * register canvas event to manage exiting on other instances\n     * @private\n     */\n    _initCanvasHandlers: function(canvas) {\n      canvas._canvasITextSelectionClearedHanlder = (function() {\n        fabric.IText.prototype.exitEditingOnOthers(canvas);\n      }).bind(this);\n      canvas._mouseUpITextHandler = (function() {\n        if (canvas._iTextInstances) {\n          canvas._iTextInstances.forEach(function(obj) {\n            obj.__isMousedown = false;\n          });\n        }\n      }).bind(this);\n      canvas.on('selection:cleared', canvas._canvasITextSelectionClearedHanlder);\n      canvas.on('object:selected', canvas._canvasITextSelectionClearedHanlder);\n      canvas.on('mouse:up', canvas._mouseUpITextHandler);\n    },\n\n    /**\n     * remove canvas event to manage exiting on other instances\n     * @private\n     */\n    _removeCanvasHandlers: function(canvas) {\n      canvas.off('selection:cleared', canvas._canvasITextSelectionClearedHanlder);\n      canvas.off('object:selected', canvas._canvasITextSelectionClearedHanlder);\n      canvas.off('mouse:up', canvas._mouseUpITextHandler);\n    },\n\n    /**\n     * @private\n     */\n    _tick: function() {\n      this._currentTickState = this._animateCursor(this, 1, this.cursorDuration, '_onTickComplete');\n    },\n\n    /**\n     * @private\n     */\n    _animateCursor: function(obj, targetOpacity, duration, completeMethod) {\n\n      var tickState;\n\n      tickState = {\n        isAborted: false,\n        abort: function() {\n          this.isAborted = true;\n        },\n      };\n\n      obj.animate('_currentCursorOpacity', targetOpacity, {\n        duration: duration,\n        onComplete: function() {\n          if (!tickState.isAborted) {\n            obj[completeMethod]();\n          }\n        },\n        onChange: function() {\n          // we do not want to animate a selection, only cursor\n          if (obj.canvas && obj.selectionStart === obj.selectionEnd) {\n            obj.renderCursorOrSelection();\n          }\n        },\n        abort: function() {\n          return tickState.isAborted;\n        }\n      });\n      return tickState;\n    },\n\n    /**\n     * @private\n     */\n    _onTickComplete: function() {\n\n      var _this = this;\n\n      if (this._cursorTimeout1) {\n        clearTimeout(this._cursorTimeout1);\n      }\n      this._cursorTimeout1 = setTimeout(function() {\n        _this._currentTickCompleteState = _this._animateCursor(_this, 0, this.cursorDuration / 2, '_tick');\n      }, 100);\n    },\n\n    /**\n     * Initializes delayed cursor\n     */\n    initDelayedCursor: function(restart) {\n      var _this = this,\n          delay = restart ? 0 : this.cursorDelay;\n\n      this.abortCursorAnimation();\n      this._currentCursorOpacity = 1;\n      this._cursorTimeout2 = setTimeout(function() {\n        _this._tick();\n      }, delay);\n    },\n\n    /**\n     * Aborts cursor animation and clears all timeouts\n     */\n    abortCursorAnimation: function() {\n      var shouldClear = this._currentTickState || this._currentTickCompleteState;\n      this._currentTickState && this._currentTickState.abort();\n      this._currentTickCompleteState && this._currentTickCompleteState.abort();\n\n      clearTimeout(this._cursorTimeout1);\n      clearTimeout(this._cursorTimeout2);\n\n      this._currentCursorOpacity = 0;\n      // to clear just itext area we need to transform the context\n      // it may not be worth it\n      if (shouldClear) {\n        this.canvas && this.canvas.clearContext(this.canvas.contextTop || this.ctx);\n      }\n\n    },\n\n    /**\n     * Selects entire text\n     */\n    selectAll: function() {\n      this.selectionStart = 0;\n      this.selectionEnd = this.text.length;\n      this._fireSelectionChanged();\n      this._updateTextarea();\n    },\n\n    /**\n     * Returns selected text\n     * @return {String}\n     */\n    getSelectedText: function() {\n      return this.text.slice(this.selectionStart, this.selectionEnd);\n    },\n\n    /**\n     * Find new selection index representing start of current word according to current selection index\n     * @param {Number} startFrom Surrent selection index\n     * @return {Number} New selection index\n     */\n    findWordBoundaryLeft: function(startFrom) {\n      var offset = 0, index = startFrom - 1;\n\n      // remove space before cursor first\n      if (this._reSpace.test(this.text.charAt(index))) {\n        while (this._reSpace.test(this.text.charAt(index))) {\n          offset++;\n          index--;\n        }\n      }\n      while (/\\S/.test(this.text.charAt(index)) && index > -1) {\n        offset++;\n        index--;\n      }\n\n      return startFrom - offset;\n    },\n\n    /**\n     * Find new selection index representing end of current word according to current selection index\n     * @param {Number} startFrom Current selection index\n     * @return {Number} New selection index\n     */\n    findWordBoundaryRight: function(startFrom) {\n      var offset = 0, index = startFrom;\n\n      // remove space after cursor first\n      if (this._reSpace.test(this.text.charAt(index))) {\n        while (this._reSpace.test(this.text.charAt(index))) {\n          offset++;\n          index++;\n        }\n      }\n      while (/\\S/.test(this.text.charAt(index)) && index < this.text.length) {\n        offset++;\n        index++;\n      }\n\n      return startFrom + offset;\n    },\n\n    /**\n     * Find new selection index representing start of current line according to current selection index\n     * @param {Number} startFrom Current selection index\n     * @return {Number} New selection index\n     */\n    findLineBoundaryLeft: function(startFrom) {\n      var offset = 0, index = startFrom - 1;\n\n      while (!/\\n/.test(this.text.charAt(index)) && index > -1) {\n        offset++;\n        index--;\n      }\n\n      return startFrom - offset;\n    },\n\n    /**\n     * Find new selection index representing end of current line according to current selection index\n     * @param {Number} startFrom Current selection index\n     * @return {Number} New selection index\n     */\n    findLineBoundaryRight: function(startFrom) {\n      var offset = 0, index = startFrom;\n\n      while (!/\\n/.test(this.text.charAt(index)) && index < this.text.length) {\n        offset++;\n        index++;\n      }\n\n      return startFrom + offset;\n    },\n\n    /**\n     * Returns number of newlines in selected text\n     * @return {Number} Number of newlines in selected text\n     */\n    getNumNewLinesInSelectedText: function() {\n      var selectedText = this.getSelectedText(),\n          numNewLines  = 0;\n\n      for (var i = 0, len = selectedText.length; i < len; i++) {\n        if (selectedText[i] === '\\n') {\n          numNewLines++;\n        }\n      }\n      return numNewLines;\n    },\n\n    /**\n     * Finds index corresponding to beginning or end of a word\n     * @param {Number} selectionStart Index of a character\n     * @param {Number} direction 1 or -1\n     * @return {Number} Index of the beginning or end of a word\n     */\n    searchWordBoundary: function(selectionStart, direction) {\n      var index     = this._reSpace.test(this.text.charAt(selectionStart)) ? selectionStart - 1 : selectionStart,\n          _char     = this.text.charAt(index),\n          reNonWord = /[ \\n\\.,;!\\?\\-]/;\n\n      while (!reNonWord.test(_char) && index > 0 && index < this.text.length) {\n        index += direction;\n        _char = this.text.charAt(index);\n      }\n      if (reNonWord.test(_char) && _char !== '\\n') {\n        index += direction === 1 ? 0 : 1;\n      }\n      return index;\n    },\n\n    /**\n     * Selects a word based on the index\n     * @param {Number} selectionStart Index of a character\n     */\n    selectWord: function(selectionStart) {\n      selectionStart = selectionStart || this.selectionStart;\n      var newSelectionStart = this.searchWordBoundary(selectionStart, -1), /* search backwards */\n          newSelectionEnd = this.searchWordBoundary(selectionStart, 1); /* search forward */\n\n      this.selectionStart = newSelectionStart;\n      this.selectionEnd = newSelectionEnd;\n      this._fireSelectionChanged();\n      this._updateTextarea();\n      this.renderCursorOrSelection();\n    },\n\n    /**\n     * Selects a line based on the index\n     * @param {Number} selectionStart Index of a character\n     */\n    selectLine: function(selectionStart) {\n      selectionStart = selectionStart || this.selectionStart;\n      var newSelectionStart = this.findLineBoundaryLeft(selectionStart),\n          newSelectionEnd = this.findLineBoundaryRight(selectionStart);\n\n      this.selectionStart = newSelectionStart;\n      this.selectionEnd = newSelectionEnd;\n      this._fireSelectionChanged();\n      this._updateTextarea();\n    },\n\n    /**\n     * Enters editing state\n     * @return {fabric.IText} thisArg\n     * @chainable\n     */\n    enterEditing: function(e) {\n      if (this.isEditing || !this.editable) {\n        return;\n      }\n\n      if (this.canvas) {\n        this.exitEditingOnOthers(this.canvas);\n      }\n\n      this.isEditing = true;\n\n      this.initHiddenTextarea(e);\n      this.hiddenTextarea.focus();\n      this._updateTextarea();\n      this._saveEditingProps();\n      this._setEditingProps();\n      this._textBeforeEdit = this.text;\n\n      this._tick();\n      this.fire('editing:entered');\n\n      if (!this.canvas) {\n        return this;\n      }\n      this.canvas.fire('text:editing:entered', { target: this });\n      this.initMouseMoveHandler();\n      this.canvas.renderAll();\n      return this;\n    },\n\n    exitEditingOnOthers: function(canvas) {\n      if (canvas._iTextInstances) {\n        canvas._iTextInstances.forEach(function(obj) {\n          obj.selected = false;\n          if (obj.isEditing) {\n            obj.exitEditing();\n          }\n        });\n      }\n    },\n\n    /**\n     * Initializes \"mousemove\" event handler\n     */\n    initMouseMoveHandler: function() {\n      this.canvas.on('mouse:move', this.mouseMoveHandler);\n    },\n\n    /**\n     * @private\n     */\n    mouseMoveHandler: function(options) {\n      if (!this.__isMousedown || !this.isEditing) {\n        return;\n      }\n\n      var newSelectionStart = this.getSelectionStartFromPointer(options.e),\n          currentStart = this.selectionStart,\n          currentEnd = this.selectionEnd;\n      if (newSelectionStart === this.__selectionStartOnMouseDown) {\n        return;\n      }\n      if (newSelectionStart > this.__selectionStartOnMouseDown) {\n        this.selectionStart = this.__selectionStartOnMouseDown;\n        this.selectionEnd = newSelectionStart;\n      }\n      else {\n        this.selectionStart = newSelectionStart;\n        this.selectionEnd = this.__selectionStartOnMouseDown;\n      }\n      if (this.selectionStart !== currentStart || this.selectionEnd !== currentEnd) {\n        this._fireSelectionChanged();\n        this._updateTextarea();\n        this.renderCursorOrSelection();\n      }\n    },\n\n    /**\n     * @private\n     */\n    _setEditingProps: function() {\n      this.hoverCursor = 'text';\n\n      if (this.canvas) {\n        this.canvas.defaultCursor = this.canvas.moveCursor = 'text';\n      }\n\n      this.borderColor = this.editingBorderColor;\n\n      this.hasControls = this.selectable = false;\n      this.lockMovementX = this.lockMovementY = true;\n    },\n\n    /**\n     * @private\n     */\n    _updateTextarea: function() {\n      if (!this.hiddenTextarea || this.inCompositionMode) {\n        return;\n      }\n      this.cursorOffsetCache = { };\n      this.hiddenTextarea.value = this.text;\n      this.hiddenTextarea.selectionStart = this.selectionStart;\n      this.hiddenTextarea.selectionEnd = this.selectionEnd;\n      if (this.selectionStart === this.selectionEnd) {\n        var style = this._calcTextareaPosition();\n        this.hiddenTextarea.style.left = style.left;\n        this.hiddenTextarea.style.top = style.top;\n        this.hiddenTextarea.style.fontSize = style.fontSize;\n      }\n    },\n\n    /**\n     * @private\n     * @return {Object} style contains style for hiddenTextarea\n     */\n    _calcTextareaPosition: function() {\n      if (!this.canvas) {\n        return { x: 1, y: 1 };\n      }\n      var chars = this.text.split(''),\n          boundaries = this._getCursorBoundaries(chars, 'cursor'),\n          cursorLocation = this.get2DCursorLocation(),\n          lineIndex = cursorLocation.lineIndex,\n          charIndex = cursorLocation.charIndex,\n          charHeight = this.getCurrentCharFontSize(lineIndex, charIndex),\n          leftOffset = (lineIndex === 0 && charIndex === 0)\n                    ? this._getLineLeftOffset(this._getLineWidth(this.ctx, lineIndex))\n                    : boundaries.leftOffset,\n          m = this.calcTransformMatrix(),\n          p = {\n            x: boundaries.left + leftOffset,\n            y: boundaries.top + boundaries.topOffset + charHeight\n          },\n          upperCanvas = this.canvas.upperCanvasEl,\n          maxWidth = upperCanvas.width - charHeight,\n          maxHeight = upperCanvas.height - charHeight;\n\n      p = fabric.util.transformPoint(p, m);\n      p = fabric.util.transformPoint(p, this.canvas.viewportTransform);\n\n      if (p.x < 0) {\n        p.x = 0;\n      }\n      if (p.x > maxWidth) {\n        p.x = maxWidth;\n      }\n      if (p.y < 0) {\n        p.y = 0;\n      }\n      if (p.y > maxHeight) {\n        p.y = maxHeight;\n      }\n\n      // add canvas offset on document\n      p.x += this.canvas._offset.left;\n      p.y += this.canvas._offset.top;\n\n      return { left: p.x + 'px', top: p.y + 'px', fontSize: charHeight };\n    },\n\n    /**\n     * @private\n     */\n    _saveEditingProps: function() {\n      this._savedProps = {\n        hasControls: this.hasControls,\n        borderColor: this.borderColor,\n        lockMovementX: this.lockMovementX,\n        lockMovementY: this.lockMovementY,\n        hoverCursor: this.hoverCursor,\n        defaultCursor: this.canvas && this.canvas.defaultCursor,\n        moveCursor: this.canvas && this.canvas.moveCursor\n      };\n    },\n\n    /**\n     * @private\n     */\n    _restoreEditingProps: function() {\n      if (!this._savedProps) {\n        return;\n      }\n\n      this.hoverCursor = this._savedProps.overCursor;\n      this.hasControls = this._savedProps.hasControls;\n      this.borderColor = this._savedProps.borderColor;\n      this.lockMovementX = this._savedProps.lockMovementX;\n      this.lockMovementY = this._savedProps.lockMovementY;\n\n      if (this.canvas) {\n        this.canvas.defaultCursor = this._savedProps.defaultCursor;\n        this.canvas.moveCursor = this._savedProps.moveCursor;\n      }\n    },\n\n    /**\n     * Exits from editing state\n     * @return {fabric.IText} thisArg\n     * @chainable\n     */\n    exitEditing: function() {\n      var isTextChanged = (this._textBeforeEdit !== this.text);\n      this.selected = false;\n      this.isEditing = false;\n      this.selectable = true;\n\n      this.selectionEnd = this.selectionStart;\n      this.hiddenTextarea.blur && this.hiddenTextarea.blur();\n      this.hiddenTextarea && this.canvas && this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea);\n      this.hiddenTextarea = null;\n\n      this.abortCursorAnimation();\n      this._restoreEditingProps();\n      this._currentCursorOpacity = 0;\n\n      this.fire('editing:exited');\n      isTextChanged && this.fire('modified');\n      if (this.canvas) {\n        this.canvas.off('mouse:move', this.mouseMoveHandler);\n        this.canvas.fire('text:editing:exited', { target: this });\n        isTextChanged && this.canvas.fire('object:modified', { target: this });\n      }\n\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _removeExtraneousStyles: function() {\n      for (var prop in this.styles) {\n        if (!this._textLines[prop]) {\n          delete this.styles[prop];\n        }\n      }\n    },\n\n    /**\n     * @private\n     */\n    _removeCharsFromTo: function(start, end) {\n      while (end !== start) {\n        this._removeSingleCharAndStyle(start + 1);\n        end--;\n      }\n      this.selectionStart = start;\n      this.selectionEnd = start;\n    },\n\n    _removeSingleCharAndStyle: function(index) {\n      var isBeginningOfLine = this.text[index - 1] === '\\n',\n          indexStyle        = isBeginningOfLine ? index : index - 1;\n      this.removeStyleObject(isBeginningOfLine, indexStyle);\n      this.text = this.text.slice(0, index - 1) +\n        this.text.slice(index);\n\n      this._textLines = this._splitTextIntoLines();\n    },\n\n    /**\n     * Inserts characters where cursor is (replacing selection if one exists)\n     * @param {String} _chars Characters to insert\n     * @param {Boolean} useCopiedStyle use fabric.copiedTextStyle\n     */\n    insertChars: function(_chars, useCopiedStyle) {\n      var style;\n\n      if (this.selectionEnd - this.selectionStart > 1) {\n        this._removeCharsFromTo(this.selectionStart, this.selectionEnd);\n      }\n      //short circuit for block paste\n      if (!useCopiedStyle && this.isEmptyStyles()) {\n        this.insertChar(_chars, false);\n        return;\n      }\n      for (var i = 0, len = _chars.length; i < len; i++) {\n        if (useCopiedStyle) {\n          style = fabric.util.object.clone(fabric.copiedTextStyle[i], true);\n        }\n        this.insertChar(_chars[i], i < len - 1, style);\n      }\n    },\n\n    /**\n     * Inserts a character where cursor is\n     * @param {String} _char Characters to insert\n     * @param {Boolean} skipUpdate trigger rendering and updates at the end of text insert\n     * @param {Object} styleObject Style to be inserted for the new char\n     */\n    insertChar: function(_char, skipUpdate, styleObject) {\n      var isEndOfLine = this.text[this.selectionStart] === '\\n';\n      this.text = this.text.slice(0, this.selectionStart) +\n        _char + this.text.slice(this.selectionEnd);\n      this._textLines = this._splitTextIntoLines();\n      this.insertStyleObjects(_char, isEndOfLine, styleObject);\n      this.selectionStart += _char.length;\n      this.selectionEnd = this.selectionStart;\n      if (skipUpdate) {\n        return;\n      }\n      this._updateTextarea();\n      this.setCoords();\n      this._fireSelectionChanged();\n      this.fire('changed');\n      this.canvas && this.canvas.fire('text:changed', { target: this });\n      this.canvas && this.canvas.renderAll();\n    },\n\n    /**\n     * Inserts new style object\n     * @param {Number} lineIndex Index of a line\n     * @param {Number} charIndex Index of a char\n     * @param {Boolean} isEndOfLine True if it's end of line\n     */\n    insertNewlineStyleObject: function(lineIndex, charIndex, isEndOfLine) {\n\n      this.shiftLineStyles(lineIndex, +1);\n\n      if (!this.styles[lineIndex + 1]) {\n        this.styles[lineIndex + 1] = {};\n      }\n\n      var currentCharStyle = {},\n          newLineStyles    = {};\n\n      if (this.styles[lineIndex] && this.styles[lineIndex][charIndex - 1]) {\n        currentCharStyle = this.styles[lineIndex][charIndex - 1];\n      }\n\n      // if there's nothing after cursor,\n      // we clone current char style onto the next (otherwise empty) line\n      if (isEndOfLine) {\n        newLineStyles[0] = clone(currentCharStyle);\n        this.styles[lineIndex + 1] = newLineStyles;\n      }\n      // otherwise we clone styles of all chars\n      // after cursor onto the next line, from the beginning\n      else {\n        for (var index in this.styles[lineIndex]) {\n          if (parseInt(index, 10) >= charIndex) {\n            newLineStyles[parseInt(index, 10) - charIndex] = this.styles[lineIndex][index];\n            // remove lines from the previous line since they're on a new line now\n            delete this.styles[lineIndex][index];\n          }\n        }\n        this.styles[lineIndex + 1] = newLineStyles;\n      }\n      this._forceClearCache = true;\n    },\n\n    /**\n     * Inserts style object for a given line/char index\n     * @param {Number} lineIndex Index of a line\n     * @param {Number} charIndex Index of a char\n     * @param {Object} [style] Style object to insert, if given\n     */\n    insertCharStyleObject: function(lineIndex, charIndex, style) {\n\n      var currentLineStyles       = this.styles[lineIndex],\n          currentLineStylesCloned = clone(currentLineStyles);\n\n      if (charIndex === 0 && !style) {\n        charIndex = 1;\n      }\n\n      // shift all char styles by 1 forward\n      // 0,1,2,3 -> (charIndex=2) -> 0,1,3,4 -> (insert 2) -> 0,1,2,3,4\n      for (var index in currentLineStylesCloned) {\n        var numericIndex = parseInt(index, 10);\n\n        if (numericIndex >= charIndex) {\n          currentLineStyles[numericIndex + 1] = currentLineStylesCloned[numericIndex];\n\n          // only delete the style if there was nothing moved there\n          if (!currentLineStylesCloned[numericIndex - 1]) {\n            delete currentLineStyles[numericIndex];\n          }\n        }\n      }\n\n      this.styles[lineIndex][charIndex] =\n        style || clone(currentLineStyles[charIndex - 1]);\n      this._forceClearCache = true;\n    },\n\n    /**\n     * Inserts style object(s)\n     * @param {String} _chars Characters at the location where style is inserted\n     * @param {Boolean} isEndOfLine True if it's end of line\n     * @param {Object} [styleObject] Style to insert\n     */\n    insertStyleObjects: function(_chars, isEndOfLine, styleObject) {\n      // removed shortcircuit over isEmptyStyles\n\n      var cursorLocation = this.get2DCursorLocation(),\n          lineIndex      = cursorLocation.lineIndex,\n          charIndex      = cursorLocation.charIndex;\n\n      if (!this._getLineStyle(lineIndex)) {\n        this._setLineStyle(lineIndex, {});\n      }\n\n      if (_chars === '\\n') {\n        this.insertNewlineStyleObject(lineIndex, charIndex, isEndOfLine);\n      }\n      else {\n        this.insertCharStyleObject(lineIndex, charIndex, styleObject);\n      }\n    },\n\n    /**\n     * Shifts line styles up or down\n     * @param {Number} lineIndex Index of a line\n     * @param {Number} offset Can be -1 or +1\n     */\n    shiftLineStyles: function(lineIndex, offset) {\n      // shift all line styles by 1 upward\n      var clonedStyles = clone(this.styles);\n      for (var line in this.styles) {\n        var numericLine = parseInt(line, 10);\n        if (numericLine > lineIndex) {\n          this.styles[numericLine + offset] = clonedStyles[numericLine];\n          if (!clonedStyles[numericLine - offset]) {\n            delete this.styles[numericLine];\n          }\n        }\n      }\n      //TODO: evaluate if delete old style lines with offset -1\n    },\n\n    /**\n     * Removes style object\n     * @param {Boolean} isBeginningOfLine True if cursor is at the beginning of line\n     * @param {Number} [index] Optional index. When not given, current selectionStart is used.\n     */\n    removeStyleObject: function(isBeginningOfLine, index) {\n\n      var cursorLocation = this.get2DCursorLocation(index),\n          lineIndex      = cursorLocation.lineIndex,\n          charIndex      = cursorLocation.charIndex;\n\n      this._removeStyleObject(isBeginningOfLine, cursorLocation, lineIndex, charIndex);\n    },\n\n    _getTextOnPreviousLine: function(lIndex) {\n      return this._textLines[lIndex - 1];\n    },\n\n    _removeStyleObject: function(isBeginningOfLine, cursorLocation, lineIndex, charIndex) {\n\n      if (isBeginningOfLine) {\n        var textOnPreviousLine     = this._getTextOnPreviousLine(cursorLocation.lineIndex),\n            newCharIndexOnPrevLine = textOnPreviousLine ? textOnPreviousLine.length : 0;\n\n        if (!this.styles[lineIndex - 1]) {\n          this.styles[lineIndex - 1] = {};\n        }\n        for (charIndex in this.styles[lineIndex]) {\n          this.styles[lineIndex - 1][parseInt(charIndex, 10) + newCharIndexOnPrevLine]\n            = this.styles[lineIndex][charIndex];\n        }\n        this.shiftLineStyles(cursorLocation.lineIndex, -1);\n      }\n      else {\n        var currentLineStyles = this.styles[lineIndex];\n\n        if (currentLineStyles) {\n          delete currentLineStyles[charIndex];\n        }\n        var currentLineStylesCloned = clone(currentLineStyles);\n        // shift all styles by 1 backwards\n        for (var i in currentLineStylesCloned) {\n          var numericIndex = parseInt(i, 10);\n          if (numericIndex >= charIndex && numericIndex !== 0) {\n            currentLineStyles[numericIndex - 1] = currentLineStylesCloned[numericIndex];\n            delete currentLineStyles[numericIndex];\n          }\n        }\n      }\n    },\n\n    /**\n     * Inserts new line\n     */\n    insertNewline: function() {\n      this.insertChars('\\n');\n    },\n\n    /**\n     * Set the selectionStart and selectionEnd according to the ne postion of cursor\n     * mimic the key - mouse navigation when shift is pressed.\n     */\n    setSelectionStartEndWithShift: function(start, end, newSelection) {\n      if (newSelection <= start) {\n        if (end === start) {\n          this._selectionDirection = 'left';\n        }\n        else if (this._selectionDirection === 'right') {\n          this._selectionDirection = 'left';\n          this.selectionEnd = start;\n        }\n        this.selectionStart = newSelection;\n      }\n      else if (newSelection > start && newSelection < end) {\n        if (this._selectionDirection === 'right') {\n          this.selectionEnd = newSelection;\n        }\n        else {\n          this.selectionStart = newSelection;\n        }\n      }\n      else {\n        // newSelection is > selection start and end\n        if (end === start) {\n          this._selectionDirection = 'right';\n        }\n        else if (this._selectionDirection === 'left') {\n          this._selectionDirection = 'right';\n          this.selectionStart = end;\n        }\n        this.selectionEnd = newSelection;\n      }\n    },\n\n    setSelectionInBoundaries: function() {\n      var length = this.text.length;\n      if (this.selectionStart > length) {\n        this.selectionStart = length;\n      }\n      else if (this.selectionStart < 0) {\n        this.selectionStart = 0;\n      }\n      if (this.selectionEnd > length) {\n        this.selectionEnd = length;\n      }\n      else if (this.selectionEnd < 0) {\n        this.selectionEnd = 0;\n      }\n    }\n  });\n})();\n\n\nfabric.util.object.extend(fabric.IText.prototype, /** @lends fabric.IText.prototype */ {\n  /**\n   * Initializes \"dbclick\" event handler\n   */\n  initDoubleClickSimulation: function() {\n\n    // for double click\n    this.__lastClickTime = +new Date();\n\n    // for triple click\n    this.__lastLastClickTime = +new Date();\n\n    this.__lastPointer = { };\n\n    this.on('mousedown', this.onMouseDown.bind(this));\n  },\n\n  onMouseDown: function(options) {\n\n    this.__newClickTime = +new Date();\n    var newPointer = this.canvas.getPointer(options.e);\n\n    if (this.isTripleClick(newPointer)) {\n      this.fire('tripleclick', options);\n      this._stopEvent(options.e);\n    }\n    else if (this.isDoubleClick(newPointer)) {\n      this.fire('dblclick', options);\n      this._stopEvent(options.e);\n    }\n\n    this.__lastLastClickTime = this.__lastClickTime;\n    this.__lastClickTime = this.__newClickTime;\n    this.__lastPointer = newPointer;\n    this.__lastIsEditing = this.isEditing;\n    this.__lastSelected = this.selected;\n  },\n\n  isDoubleClick: function(newPointer) {\n    return this.__newClickTime - this.__lastClickTime < 500 &&\n        this.__lastPointer.x === newPointer.x &&\n        this.__lastPointer.y === newPointer.y && this.__lastIsEditing;\n  },\n\n  isTripleClick: function(newPointer) {\n    return this.__newClickTime - this.__lastClickTime < 500 &&\n        this.__lastClickTime - this.__lastLastClickTime < 500 &&\n        this.__lastPointer.x === newPointer.x &&\n        this.__lastPointer.y === newPointer.y;\n  },\n\n  /**\n   * @private\n   */\n  _stopEvent: function(e) {\n    e.preventDefault && e.preventDefault();\n    e.stopPropagation && e.stopPropagation();\n  },\n\n  /**\n   * Initializes event handlers related to cursor or selection\n   */\n  initCursorSelectionHandlers: function() {\n    this.initSelectedHandler();\n    this.initMousedownHandler();\n    this.initMouseupHandler();\n    this.initClicks();\n  },\n\n  /**\n   * Initializes double and triple click event handlers\n   */\n  initClicks: function() {\n    this.on('dblclick', function(options) {\n      this.selectWord(this.getSelectionStartFromPointer(options.e));\n    });\n    this.on('tripleclick', function(options) {\n      this.selectLine(this.getSelectionStartFromPointer(options.e));\n    });\n  },\n\n  /**\n   * Initializes \"mousedown\" event handler\n   */\n  initMousedownHandler: function() {\n    this.on('mousedown', function(options) {\n      if (!this.editable) {\n        return;\n      }\n      var pointer = this.canvas.getPointer(options.e);\n\n      this.__mousedownX = pointer.x;\n      this.__mousedownY = pointer.y;\n      this.__isMousedown = true;\n\n      if (this.selected) {\n        this.setCursorByClick(options.e);\n      }\n\n      if (this.isEditing) {\n        this.__selectionStartOnMouseDown = this.selectionStart;\n        if (this.selectionStart === this.selectionEnd) {\n          this.abortCursorAnimation();\n        }\n        this.renderCursorOrSelection();\n      }\n    });\n  },\n\n  /**\n   * @private\n   */\n  _isObjectMoved: function(e) {\n    var pointer = this.canvas.getPointer(e);\n\n    return this.__mousedownX !== pointer.x ||\n           this.__mousedownY !== pointer.y;\n  },\n\n  /**\n   * Initializes \"mouseup\" event handler\n   */\n  initMouseupHandler: function() {\n    this.on('mouseup', function(options) {\n      this.__isMousedown = false;\n      if (!this.editable || this._isObjectMoved(options.e)) {\n        return;\n      }\n\n      if (this.__lastSelected && !this.__corner) {\n        this.enterEditing(options.e);\n        if (this.selectionStart === this.selectionEnd) {\n          this.initDelayedCursor(true);\n        }\n        else {\n          this.renderCursorOrSelection();\n        }\n      }\n      this.selected = true;\n    });\n  },\n\n  /**\n   * Changes cursor location in a text depending on passed pointer (x/y) object\n   * @param {Event} e Event object\n   */\n  setCursorByClick: function(e) {\n    var newSelection = this.getSelectionStartFromPointer(e),\n        start = this.selectionStart, end = this.selectionEnd;\n    if (e.shiftKey) {\n      this.setSelectionStartEndWithShift(start, end, newSelection);\n    }\n    else {\n      this.selectionStart = newSelection;\n      this.selectionEnd = newSelection;\n    }\n    this._fireSelectionChanged();\n    this._updateTextarea();\n  },\n\n  /**\n   * Returns index of a character corresponding to where an object was clicked\n   * @param {Event} e Event object\n   * @return {Number} Index of a character\n   */\n  getSelectionStartFromPointer: function(e) {\n    var mouseOffset = this.getLocalPointer(e),\n        prevWidth = 0,\n        width = 0,\n        height = 0,\n        charIndex = 0,\n        newSelectionStart,\n        line;\n\n    for (var i = 0, len = this._textLines.length; i < len; i++) {\n      line = this._textLines[i];\n      height += this._getHeightOfLine(this.ctx, i) * this.scaleY;\n\n      var widthOfLine = this._getLineWidth(this.ctx, i),\n          lineLeftOffset = this._getLineLeftOffset(widthOfLine);\n\n      width = lineLeftOffset * this.scaleX;\n\n      for (var j = 0, jlen = line.length; j < jlen; j++) {\n\n        prevWidth = width;\n\n        width += this._getWidthOfChar(this.ctx, line[j], i, this.flipX ? jlen - j : j) *\n                 this.scaleX;\n\n        if (height <= mouseOffset.y || width <= mouseOffset.x) {\n          charIndex++;\n          continue;\n        }\n\n        return this._getNewSelectionStartFromOffset(\n          mouseOffset, prevWidth, width, charIndex + i, jlen);\n      }\n\n      if (mouseOffset.y < height) {\n        //this happens just on end of lines.\n        return this._getNewSelectionStartFromOffset(\n          mouseOffset, prevWidth, width, charIndex + i - 1, jlen);\n      }\n    }\n\n    // clicked somewhere after all chars, so set at the end\n    if (typeof newSelectionStart === 'undefined') {\n      return this.text.length;\n    }\n  },\n\n  /**\n   * @private\n   */\n  _getNewSelectionStartFromOffset: function(mouseOffset, prevWidth, width, index, jlen) {\n\n    var distanceBtwLastCharAndCursor = mouseOffset.x - prevWidth,\n        distanceBtwNextCharAndCursor = width - mouseOffset.x,\n        offset = distanceBtwNextCharAndCursor > distanceBtwLastCharAndCursor ? 0 : 1,\n        newSelectionStart = index + offset;\n\n    // if object is horizontally flipped, mirror cursor location from the end\n    if (this.flipX) {\n      newSelectionStart = jlen - newSelectionStart;\n    }\n\n    if (newSelectionStart > this.text.length) {\n      newSelectionStart = this.text.length;\n    }\n\n    return newSelectionStart;\n  }\n});\n\n\nfabric.util.object.extend(fabric.IText.prototype, /** @lends fabric.IText.prototype */ {\n\n  /**\n   * Initializes hidden textarea (needed to bring up keyboard in iOS)\n   */\n  initHiddenTextarea: function() {\n    this.hiddenTextarea = fabric.document.createElement('textarea');\n    this.hiddenTextarea.setAttribute('autocapitalize', 'off');\n    var style = this._calcTextareaPosition();\n    this.hiddenTextarea.style.cssText = 'position: absolute; top: ' + style.top + '; left: ' + style.left + ';'\n                                        + ' opacity: 0; width: 0px; height: 0px; z-index: -999;';\n    fabric.document.body.appendChild(this.hiddenTextarea);\n\n    fabric.util.addListener(this.hiddenTextarea, 'keydown', this.onKeyDown.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'keyup', this.onKeyUp.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'input', this.onInput.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'copy', this.copy.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'cut', this.cut.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'paste', this.paste.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'compositionstart', this.onCompositionStart.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'compositionupdate', this.onCompositionUpdate.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'compositionend', this.onCompositionEnd.bind(this));\n\n    if (!this._clickHandlerInitialized && this.canvas) {\n      fabric.util.addListener(this.canvas.upperCanvasEl, 'click', this.onClick.bind(this));\n      this._clickHandlerInitialized = true;\n    }\n  },\n\n  /**\n   * @private\n   */\n  _keysMap: {\n    8:  'removeChars',\n    9:  'exitEditing',\n    27: 'exitEditing',\n    13: 'insertNewline',\n    33: 'moveCursorUp',\n    34: 'moveCursorDown',\n    35: 'moveCursorRight',\n    36: 'moveCursorLeft',\n    37: 'moveCursorLeft',\n    38: 'moveCursorUp',\n    39: 'moveCursorRight',\n    40: 'moveCursorDown',\n    46: 'forwardDelete'\n  },\n\n  /**\n   * @private\n   */\n  _ctrlKeysMapUp: {\n    67: 'copy',\n    88: 'cut'\n  },\n\n  /**\n   * @private\n   */\n  _ctrlKeysMapDown: {\n    65: 'selectAll'\n  },\n\n  onClick: function() {\n    // No need to trigger click event here, focus is enough to have the keyboard appear on Android\n    this.hiddenTextarea && this.hiddenTextarea.focus();\n  },\n\n  /**\n   * Handles keyup event\n   * @param {Event} e Event object\n   */\n  onKeyDown: function(e) {\n    if (!this.isEditing) {\n      return;\n    }\n    if (e.keyCode in this._keysMap) {\n      this[this._keysMap[e.keyCode]](e);\n    }\n    else if ((e.keyCode in this._ctrlKeysMapDown) && (e.ctrlKey || e.metaKey)) {\n      this[this._ctrlKeysMapDown[e.keyCode]](e);\n    }\n    else {\n      return;\n    }\n    e.stopImmediatePropagation();\n    e.preventDefault();\n    if (e.keyCode >= 33 && e.keyCode <= 40) {\n      // if i press an arrow key just update selection\n      this.clearContextTop();\n      this.renderCursorOrSelection();\n    }\n    else {\n      this.canvas && this.canvas.renderAll();\n    }\n  },\n\n  /**\n   * Handles keyup event\n   * We handle KeyUp because ie11 and edge have difficulties copy/pasting\n   * if a copy/cut event fired, keyup is dismissed\n   * @param {Event} e Event object\n   */\n  onKeyUp: function(e) {\n    if (!this.isEditing || this._copyDone) {\n      this._copyDone = false;\n      return;\n    }\n    if ((e.keyCode in this._ctrlKeysMapUp) && (e.ctrlKey || e.metaKey)) {\n      this[this._ctrlKeysMapUp[e.keyCode]](e);\n    }\n    else {\n      return;\n    }\n    e.stopImmediatePropagation();\n    e.preventDefault();\n    this.canvas && this.canvas.renderAll();\n  },\n\n  /**\n   * Handles onInput event\n   * @param {Event} e Event object\n   */\n  onInput: function(e) {\n    if (!this.isEditing || this.inCompositionMode) {\n      return;\n    }\n    var offset = this.selectionStart || 0,\n        offsetEnd = this.selectionEnd || 0,\n        textLength = this.text.length,\n        newTextLength = this.hiddenTextarea.value.length,\n        diff, charsToInsert, start;\n    if (newTextLength > textLength) {\n      //we added some character\n      start = this._selectionDirection === 'left' ? offsetEnd : offset;\n      diff = newTextLength - textLength;\n      charsToInsert = this.hiddenTextarea.value.slice(start, start + diff);\n    }\n    else {\n      //we selected a portion of text and then input something else.\n      //Internet explorer does not trigger this else\n      diff = newTextLength - textLength + offsetEnd - offset;\n      charsToInsert = this.hiddenTextarea.value.slice(offset, offset + diff);\n    }\n    this.insertChars(charsToInsert);\n    e.stopPropagation();\n  },\n\n  /**\n   * Composition start\n   */\n  onCompositionStart: function() {\n    this.inCompositionMode = true;\n    this.prevCompositionLength = 0;\n    this.compositionStart = this.selectionStart;\n  },\n\n  /**\n   * Composition end\n   */\n  onCompositionEnd: function() {\n    this.inCompositionMode = false;\n  },\n\n  /**\n   * Composition update\n   */\n  onCompositionUpdate: function(e) {\n    var data = e.data;\n    this.selectionStart = this.compositionStart;\n    this.selectionEnd = this.selectionEnd === this.selectionStart ?\n      this.compositionStart + this.prevCompositionLength : this.selectionEnd;\n    this.insertChars(data, false);\n    this.prevCompositionLength = data.length;\n  },\n\n  /**\n   * Forward delete\n   */\n  forwardDelete: function(e) {\n    if (this.selectionStart === this.selectionEnd) {\n      if (this.selectionStart === this.text.length) {\n        return;\n      }\n      this.moveCursorRight(e);\n    }\n    this.removeChars(e);\n  },\n\n  /**\n   * Copies selected text\n   * @param {Event} e Event object\n   */\n  copy: function(e) {\n    if (this.selectionStart === this.selectionEnd) {\n      //do not cut-copy if no selection\n      return;\n    }\n    var selectedText = this.getSelectedText(),\n        clipboardData = this._getClipboardData(e);\n\n    // Check for backward compatibility with old browsers\n    if (clipboardData) {\n      clipboardData.setData('text', selectedText);\n    }\n\n    fabric.copiedText = selectedText;\n    fabric.copiedTextStyle = this.getSelectionStyles(this.selectionStart, this.selectionEnd);\n    e.stopImmediatePropagation();\n    e.preventDefault();\n    this._copyDone = true;\n  },\n\n  /**\n   * Pastes text\n   * @param {Event} e Event object\n   */\n  paste: function(e) {\n    var copiedText = null,\n        clipboardData = this._getClipboardData(e),\n        useCopiedStyle = true;\n\n    // Check for backward compatibility with old browsers\n    if (clipboardData) {\n      copiedText = clipboardData.getData('text').replace(/\\r/g, '');\n      if (!fabric.copiedTextStyle || fabric.copiedText !== copiedText) {\n        useCopiedStyle = false;\n      }\n    }\n    else {\n      copiedText = fabric.copiedText;\n    }\n\n    if (copiedText) {\n      this.insertChars(copiedText, useCopiedStyle);\n    }\n    e.stopImmediatePropagation();\n    e.preventDefault();\n  },\n\n  /**\n   * Cuts text\n   * @param {Event} e Event object\n   */\n  cut: function(e) {\n    if (this.selectionStart === this.selectionEnd) {\n      return;\n    }\n\n    this.copy(e);\n    this.removeChars(e);\n  },\n\n  /**\n   * @private\n   * @param {Event} e Event object\n   * @return {Object} Clipboard data object\n   */\n  _getClipboardData: function(e) {\n    return (e && e.clipboardData) || fabric.window.clipboardData;\n  },\n\n  /**\n   * Finds the width in pixels before the cursor on the same line\n   * @private\n   * @param {Number} lineIndex\n   * @param {Number} charIndex\n   * @return {Number} widthBeforeCursor width before cursor\n   */\n  _getWidthBeforeCursor: function(lineIndex, charIndex) {\n    var textBeforeCursor = this._textLines[lineIndex].slice(0, charIndex),\n        widthOfLine = this._getLineWidth(this.ctx, lineIndex),\n        widthBeforeCursor = this._getLineLeftOffset(widthOfLine), _char;\n\n    for (var i = 0, len = textBeforeCursor.length; i < len; i++) {\n      _char = textBeforeCursor[i];\n      widthBeforeCursor += this._getWidthOfChar(this.ctx, _char, lineIndex, i);\n    }\n    return widthBeforeCursor;\n  },\n\n  /**\n   * Gets start offset of a selection\n   * @param {Event} e Event object\n   * @param {Boolean} isRight\n   * @return {Number}\n   */\n  getDownCursorOffset: function(e, isRight) {\n    var selectionProp = this._getSelectionForOffset(e, isRight),\n        cursorLocation = this.get2DCursorLocation(selectionProp),\n        lineIndex = cursorLocation.lineIndex;\n    // if on last line, down cursor goes to end of line\n    if (lineIndex === this._textLines.length - 1 || e.metaKey || e.keyCode === 34) {\n      // move to the end of a text\n      return this.text.length - selectionProp;\n    }\n    var charIndex = cursorLocation.charIndex,\n        widthBeforeCursor = this._getWidthBeforeCursor(lineIndex, charIndex),\n        indexOnOtherLine = this._getIndexOnLine(lineIndex + 1, widthBeforeCursor),\n        textAfterCursor = this._textLines[lineIndex].slice(charIndex);\n\n    return textAfterCursor.length + indexOnOtherLine + 2;\n  },\n\n  /**\n   * private\n   * Helps finding if the offset should be counted from Start or End\n   * @param {Event} e Event object\n   * @param {Boolean} isRight\n   * @return {Number}\n   */\n  _getSelectionForOffset: function(e, isRight) {\n    if (e.shiftKey && this.selectionStart !== this.selectionEnd && isRight) {\n      return this.selectionEnd;\n    }\n    else {\n      return this.selectionStart;\n    }\n  },\n\n  /**\n   * @param {Event} e Event object\n   * @param {Boolean} isRight\n   * @return {Number}\n   */\n  getUpCursorOffset: function(e, isRight) {\n    var selectionProp = this._getSelectionForOffset(e, isRight),\n        cursorLocation = this.get2DCursorLocation(selectionProp),\n        lineIndex = cursorLocation.lineIndex;\n    if (lineIndex === 0 || e.metaKey || e.keyCode === 33) {\n      // if on first line, up cursor goes to start of line\n      return -selectionProp;\n    }\n    var charIndex = cursorLocation.charIndex,\n        widthBeforeCursor = this._getWidthBeforeCursor(lineIndex, charIndex),\n        indexOnOtherLine = this._getIndexOnLine(lineIndex - 1, widthBeforeCursor),\n        textBeforeCursor = this._textLines[lineIndex].slice(0, charIndex);\n    // return a negative offset\n    return -this._textLines[lineIndex - 1].length + indexOnOtherLine - textBeforeCursor.length;\n  },\n\n  /**\n   * find for a given width it founds the matching character.\n   * @private\n   */\n  _getIndexOnLine: function(lineIndex, width) {\n\n    var widthOfLine = this._getLineWidth(this.ctx, lineIndex),\n        textOnLine = this._textLines[lineIndex],\n        lineLeftOffset = this._getLineLeftOffset(widthOfLine),\n        widthOfCharsOnLine = lineLeftOffset,\n        indexOnLine = 0,\n        foundMatch;\n\n    for (var j = 0, jlen = textOnLine.length; j < jlen; j++) {\n\n      var _char = textOnLine[j],\n          widthOfChar = this._getWidthOfChar(this.ctx, _char, lineIndex, j);\n\n      widthOfCharsOnLine += widthOfChar;\n\n      if (widthOfCharsOnLine > width) {\n\n        foundMatch = true;\n\n        var leftEdge = widthOfCharsOnLine - widthOfChar,\n            rightEdge = widthOfCharsOnLine,\n            offsetFromLeftEdge = Math.abs(leftEdge - width),\n            offsetFromRightEdge = Math.abs(rightEdge - width);\n\n        indexOnLine = offsetFromRightEdge < offsetFromLeftEdge ? j : (j - 1);\n\n        break;\n      }\n    }\n\n    // reached end\n    if (!foundMatch) {\n      indexOnLine = textOnLine.length - 1;\n    }\n\n    return indexOnLine;\n  },\n\n\n  /**\n   * Moves cursor down\n   * @param {Event} e Event object\n   */\n  moveCursorDown: function(e) {\n    if (this.selectionStart >= this.text.length && this.selectionEnd >= this.text.length) {\n      return;\n    }\n    this._moveCursorUpOrDown('Down', e);\n  },\n\n  /**\n   * Moves cursor up\n   * @param {Event} e Event object\n   */\n  moveCursorUp: function(e) {\n    if (this.selectionStart === 0 && this.selectionEnd === 0) {\n      return;\n    }\n    this._moveCursorUpOrDown('Up', e);\n  },\n\n  /**\n   * Moves cursor up or down, fires the events\n   * @param {String} direction 'Up' or 'Down'\n   * @param {Event} e Event object\n   */\n  _moveCursorUpOrDown: function(direction, e) {\n    // getUpCursorOffset\n    // getDownCursorOffset\n    var action = 'get' + direction + 'CursorOffset',\n        offset = this[action](e, this._selectionDirection === 'right');\n    if (e.shiftKey) {\n      this.moveCursorWithShift(offset);\n    }\n    else {\n      this.moveCursorWithoutShift(offset);\n    }\n    if (offset !== 0) {\n      this.setSelectionInBoundaries();\n      this.abortCursorAnimation();\n      this._currentCursorOpacity = 1;\n      this.initDelayedCursor();\n      this._fireSelectionChanged();\n      this._updateTextarea();\n    }\n  },\n\n  /**\n   * Moves cursor with shift\n   * @param {Number} offset\n   */\n  moveCursorWithShift: function(offset) {\n    var newSelection = this._selectionDirection === 'left'\n    ? this.selectionStart + offset\n    : this.selectionEnd + offset;\n    this.setSelectionStartEndWithShift(this.selectionStart, this.selectionEnd, newSelection);\n    return offset !== 0;\n  },\n\n  /**\n   * Moves cursor up without shift\n   * @param {Number} offset\n   */\n  moveCursorWithoutShift: function(offset) {\n    if (offset < 0) {\n      this.selectionStart += offset;\n      this.selectionEnd = this.selectionStart;\n    }\n    else {\n      this.selectionEnd += offset;\n      this.selectionStart = this.selectionEnd;\n    }\n    return offset !== 0;\n  },\n\n  /**\n   * Moves cursor left\n   * @param {Event} e Event object\n   */\n  moveCursorLeft: function(e) {\n    if (this.selectionStart === 0 && this.selectionEnd === 0) {\n      return;\n    }\n    this._moveCursorLeftOrRight('Left', e);\n  },\n\n  /**\n   * @private\n   * @return {Boolean} true if a change happened\n   */\n  _move: function(e, prop, direction) {\n    var newValue;\n    if (e.altKey) {\n      newValue = this['findWordBoundary' + direction](this[prop]);\n    }\n    else if (e.metaKey || e.keyCode === 35 ||  e.keyCode === 36 ) {\n      newValue = this['findLineBoundary' + direction](this[prop]);\n    }\n    else {\n      this[prop] += direction === 'Left' ? -1 : 1;\n      return true;\n    }\n    if (typeof newValue !== undefined && this[prop] !== newValue) {\n      this[prop] = newValue;\n      return true;\n    }\n  },\n\n  /**\n   * @private\n   */\n  _moveLeft: function(e, prop) {\n    return this._move(e, prop, 'Left');\n  },\n\n  /**\n   * @private\n   */\n  _moveRight: function(e, prop) {\n    return this._move(e, prop, 'Right');\n  },\n\n  /**\n   * Moves cursor left without keeping selection\n   * @param {Event} e\n   */\n  moveCursorLeftWithoutShift: function(e) {\n    var change = true;\n    this._selectionDirection = 'left';\n\n    // only move cursor when there is no selection,\n    // otherwise we discard it, and leave cursor on same place\n    if (this.selectionEnd === this.selectionStart && this.selectionStart !== 0) {\n      change = this._moveLeft(e, 'selectionStart');\n\n    }\n    this.selectionEnd = this.selectionStart;\n    return change;\n  },\n\n  /**\n   * Moves cursor left while keeping selection\n   * @param {Event} e\n   */\n  moveCursorLeftWithShift: function(e) {\n    if (this._selectionDirection === 'right' && this.selectionStart !== this.selectionEnd) {\n      return this._moveLeft(e, 'selectionEnd');\n    }\n    else if (this.selectionStart !== 0){\n      this._selectionDirection = 'left';\n      return this._moveLeft(e, 'selectionStart');\n    }\n  },\n\n  /**\n   * Moves cursor right\n   * @param {Event} e Event object\n   */\n  moveCursorRight: function(e) {\n    if (this.selectionStart >= this.text.length && this.selectionEnd >= this.text.length) {\n      return;\n    }\n    this._moveCursorLeftOrRight('Right', e);\n  },\n\n  /**\n   * Moves cursor right or Left, fires event\n   * @param {String} direction 'Left', 'Right'\n   * @param {Event} e Event object\n   */\n  _moveCursorLeftOrRight: function(direction, e) {\n    var actionName = 'moveCursor' + direction + 'With';\n    this._currentCursorOpacity = 1;\n\n    if (e.shiftKey) {\n      actionName += 'Shift';\n    }\n    else {\n      actionName += 'outShift';\n    }\n    if (this[actionName](e)) {\n      this.abortCursorAnimation();\n      this.initDelayedCursor();\n      this._fireSelectionChanged();\n      this._updateTextarea();\n    }\n  },\n\n  /**\n   * Moves cursor right while keeping selection\n   * @param {Event} e\n   */\n  moveCursorRightWithShift: function(e) {\n    if (this._selectionDirection === 'left' && this.selectionStart !== this.selectionEnd) {\n      return this._moveRight(e, 'selectionStart');\n    }\n    else if (this.selectionEnd !== this.text.length) {\n      this._selectionDirection = 'right';\n      return this._moveRight(e, 'selectionEnd');\n    }\n  },\n\n  /**\n   * Moves cursor right without keeping selection\n   * @param {Event} e Event object\n   */\n  moveCursorRightWithoutShift: function(e) {\n    var changed = true;\n    this._selectionDirection = 'right';\n\n    if (this.selectionStart === this.selectionEnd) {\n      changed = this._moveRight(e, 'selectionStart');\n      this.selectionEnd = this.selectionStart;\n    }\n    else {\n      this.selectionStart = this.selectionEnd;\n    }\n    return changed;\n  },\n\n  /**\n   * Removes characters selected by selection\n   * @param {Event} e Event object\n   */\n  removeChars: function(e) {\n    if (this.selectionStart === this.selectionEnd) {\n      this._removeCharsNearCursor(e);\n    }\n    else {\n      this._removeCharsFromTo(this.selectionStart, this.selectionEnd);\n    }\n\n    this.setSelectionEnd(this.selectionStart);\n\n    this._removeExtraneousStyles();\n\n    this.canvas && this.canvas.renderAll();\n\n    this.setCoords();\n    this.fire('changed');\n    this.canvas && this.canvas.fire('text:changed', { target: this });\n  },\n\n  /**\n   * @private\n   * @param {Event} e Event object\n   */\n  _removeCharsNearCursor: function(e) {\n    if (this.selectionStart === 0) {\n      return;\n    }\n    if (e.metaKey) {\n      // remove all till the start of current line\n      var leftLineBoundary = this.findLineBoundaryLeft(this.selectionStart);\n\n      this._removeCharsFromTo(leftLineBoundary, this.selectionStart);\n      this.setSelectionStart(leftLineBoundary);\n    }\n    else if (e.altKey) {\n      // remove all till the start of current word\n      var leftWordBoundary = this.findWordBoundaryLeft(this.selectionStart);\n\n      this._removeCharsFromTo(leftWordBoundary, this.selectionStart);\n      this.setSelectionStart(leftWordBoundary);\n    }\n    else {\n      this._removeSingleCharAndStyle(this.selectionStart);\n      this.setSelectionStart(this.selectionStart - 1);\n    }\n  }\n});\n\n\n/* _TO_SVG_START_ */\n(function() {\n  var toFixed = fabric.util.toFixed,\n      NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS;\n\n  fabric.util.object.extend(fabric.IText.prototype, /** @lends fabric.IText.prototype */ {\n\n    /**\n     * @private\n     */\n    _setSVGTextLineText: function(lineIndex, textSpans, height, textLeftOffset, textTopOffset, textBgRects) {\n      if (!this._getLineStyle(lineIndex)) {\n        fabric.Text.prototype._setSVGTextLineText.call(this,\n          lineIndex, textSpans, height, textLeftOffset, textTopOffset);\n      }\n      else {\n        this._setSVGTextLineChars(\n          lineIndex, textSpans, height, textLeftOffset, textBgRects);\n      }\n    },\n\n    /**\n     * @private\n     */\n    _setSVGTextLineChars: function(lineIndex, textSpans, height, textLeftOffset, textBgRects) {\n\n      var chars = this._textLines[lineIndex],\n          charOffset = 0,\n          lineLeftOffset = this._getLineLeftOffset(this._getLineWidth(this.ctx, lineIndex)) - this.width / 2,\n          lineOffset = this._getSVGLineTopOffset(lineIndex),\n          heightOfLine = this._getHeightOfLine(this.ctx, lineIndex);\n\n      for (var i = 0, len = chars.length; i < len; i++) {\n        var styleDecl = this._getStyleDeclaration(lineIndex, i) || { };\n\n        textSpans.push(\n          this._createTextCharSpan(\n            chars[i], styleDecl, lineLeftOffset, lineOffset.lineTop + lineOffset.offset, charOffset));\n\n        var charWidth = this._getWidthOfChar(this.ctx, chars[i], lineIndex, i);\n\n        if (styleDecl.textBackgroundColor) {\n          textBgRects.push(\n            this._createTextCharBg(\n              styleDecl, lineLeftOffset, lineOffset.lineTop, heightOfLine, charWidth, charOffset));\n        }\n\n        charOffset += charWidth;\n      }\n    },\n\n    /**\n     * @private\n     */\n    _getSVGLineTopOffset: function(lineIndex) {\n      var lineTopOffset = 0, lastHeight = 0;\n      for (var j = 0; j < lineIndex; j++) {\n        lineTopOffset += this._getHeightOfLine(this.ctx, j);\n      }\n      lastHeight = this._getHeightOfLine(this.ctx, j);\n      return {\n        lineTop: lineTopOffset,\n        offset: (this._fontSizeMult - this._fontSizeFraction) * lastHeight / (this.lineHeight * this._fontSizeMult)\n      };\n    },\n\n    /**\n     * @private\n     */\n    _createTextCharBg: function(styleDecl, lineLeftOffset, lineTopOffset, heightOfLine, charWidth, charOffset) {\n      return [\n        '\\t\\t<rect fill=\"', styleDecl.textBackgroundColor,\n        '\" x=\"', toFixed(lineLeftOffset + charOffset, NUM_FRACTION_DIGITS),\n        '\" y=\"', toFixed(lineTopOffset - this.height / 2, NUM_FRACTION_DIGITS),\n        '\" width=\"', toFixed(charWidth, NUM_FRACTION_DIGITS),\n        '\" height=\"', toFixed(heightOfLine / this.lineHeight, NUM_FRACTION_DIGITS),\n        '\"></rect>\\n'\n      ].join('');\n    },\n\n    /**\n     * @private\n     */\n    _createTextCharSpan: function(_char, styleDecl, lineLeftOffset, lineTopOffset, charOffset) {\n\n      var fillStyles = this.getSvgStyles.call(fabric.util.object.extend({\n        visible: true,\n        fill: this.fill,\n        stroke: this.stroke,\n        type: 'text',\n        getSvgFilter: fabric.Object.prototype.getSvgFilter\n      }, styleDecl));\n\n      return [\n        '\\t\\t\\t<tspan x=\"', toFixed(lineLeftOffset + charOffset, NUM_FRACTION_DIGITS), '\" y=\"',\n        toFixed(lineTopOffset - this.height / 2, NUM_FRACTION_DIGITS), '\" ',\n          (styleDecl.fontFamily ? 'font-family=\"' + styleDecl.fontFamily.replace(/\"/g, '\\'') + '\" ' : ''),\n          (styleDecl.fontSize ? 'font-size=\"' + styleDecl.fontSize + '\" ' : ''),\n          (styleDecl.fontStyle ? 'font-style=\"' + styleDecl.fontStyle + '\" ' : ''),\n          (styleDecl.fontWeight ? 'font-weight=\"' + styleDecl.fontWeight + '\" ' : ''),\n          (styleDecl.textDecoration ? 'text-decoration=\"' + styleDecl.textDecoration + '\" ' : ''),\n        'style=\"', fillStyles, '\">',\n        fabric.util.string.escapeXml(_char),\n        '</tspan>\\n'\n      ].join('');\n    }\n  });\n})();\n/* _TO_SVG_END_ */\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = {}),\n      clone  = fabric.util.object.clone;\n\n  /**\n   * Textbox class, based on IText, allows the user to resize the text rectangle\n   * and wraps lines automatically. Textboxes have their Y scaling locked, the\n   * user can only change width. Height is adjusted automatically based on the\n   * wrapping of lines.\n   * @class fabric.Textbox\n   * @extends fabric.IText\n   * @mixes fabric.Observable\n   * @return {fabric.Textbox} thisArg\n   * @see {@link fabric.Textbox#initialize} for constructor definition\n   */\n  fabric.Textbox = fabric.util.createClass(fabric.IText, fabric.Observable, {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'textbox',\n\n    /**\n     * Minimum width of textbox, in pixels.\n     * @type Number\n     * @default\n     */\n    minWidth: 20,\n\n    /**\n     * Minimum calculated width of a textbox, in pixels.\n     * fixed to 2 so that an empty textbox cannot go to 0\n     * and is still selectable without text.\n     * @type Number\n     * @default\n     */\n    dynamicMinWidth: 2,\n\n    /**\n     * Cached array of text wrapping.\n     * @type Array\n     */\n    __cachedLines: null,\n\n    /**\n     * Override standard Object class values\n     */\n    lockScalingY: true,\n\n    /**\n     * Override standard Object class values\n     */\n    lockScalingFlip: true,\n\n    /**\n     * Override standard Object class values\n     * Textbox needs this on false\n     */\n    noScaleCache: false,\n\n    /**\n     * Constructor. Some scaling related property values are forced. Visibility\n     * of controls is also fixed; only the rotation and width controls are\n     * made available.\n     * @param {String} text Text string\n     * @param {Object} [options] Options object\n     * @return {fabric.Textbox} thisArg\n     */\n    initialize: function(text, options) {\n\n      this.callSuper('initialize', text, options);\n      this.setControlsVisibility(fabric.Textbox.getTextboxControlVisibility());\n      this.ctx = this.objectCaching ? this._cacheContext : fabric.util.createCanvasElement().getContext('2d');\n      // add width to this list of props that effect line wrapping.\n      this._dimensionAffectingProps.push('width');\n    },\n\n    /**\n     * Unlike superclass's version of this function, Textbox does not update\n     * its width.\n     * @param {CanvasRenderingContext2D} ctx Context to use for measurements\n     * @private\n     * @override\n     */\n    _initDimensions: function(ctx) {\n      if (this.__skipDimension) {\n        return;\n      }\n\n      if (!ctx) {\n        ctx = fabric.util.createCanvasElement().getContext('2d');\n        this._setTextStyles(ctx);\n        this.clearContextTop();\n      }\n\n      // clear dynamicMinWidth as it will be different after we re-wrap line\n      this.dynamicMinWidth = 0;\n\n      // wrap lines\n      this._textLines = this._splitTextIntoLines(ctx);\n      // if after wrapping, the width is smaller than dynamicMinWidth, change the width and re-wrap\n      if (this.dynamicMinWidth > this.width) {\n        this._set('width', this.dynamicMinWidth);\n      }\n\n      // clear cache and re-calculate height\n      this._clearCache();\n      this.height = this._getTextHeight(ctx);\n    },\n\n    /**\n     * Generate an object that translates the style object so that it is\n     * broken up by visual lines (new lines and automatic wrapping).\n     * The original text styles object is broken up by actual lines (new lines only),\n     * which is only sufficient for Text / IText\n     * @private\n     */\n    _generateStyleMap: function() {\n      var realLineCount     = 0,\n          realLineCharCount = 0,\n          charCount         = 0,\n          map               = {};\n\n      for (var i = 0; i < this._textLines.length; i++) {\n        if (this.text[charCount] === '\\n' && i > 0) {\n          realLineCharCount = 0;\n          charCount++;\n          realLineCount++;\n        }\n        else if (this.text[charCount] === ' ' && i > 0) {\n          // this case deals with space's that are removed from end of lines when wrapping\n          realLineCharCount++;\n          charCount++;\n        }\n\n        map[i] = { line: realLineCount, offset: realLineCharCount };\n\n        charCount += this._textLines[i].length;\n        realLineCharCount += this._textLines[i].length;\n      }\n\n      return map;\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @param {Boolean} [returnCloneOrEmpty=false]\n     * @private\n     */\n    _getStyleDeclaration: function(lineIndex, charIndex, returnCloneOrEmpty) {\n      if (this._styleMap) {\n        var map = this._styleMap[lineIndex];\n        if (!map) {\n          return returnCloneOrEmpty ? { } : null;\n        }\n        lineIndex = map.line;\n        charIndex = map.offset + charIndex;\n      }\n      return this.callSuper('_getStyleDeclaration', lineIndex, charIndex, returnCloneOrEmpty);\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @param {Object} style\n     * @private\n     */\n    _setStyleDeclaration: function(lineIndex, charIndex, style) {\n      var map = this._styleMap[lineIndex];\n      lineIndex = map.line;\n      charIndex = map.offset + charIndex;\n\n      this.styles[lineIndex][charIndex] = style;\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @private\n     */\n    _deleteStyleDeclaration: function(lineIndex, charIndex) {\n      var map = this._styleMap[lineIndex];\n      lineIndex = map.line;\n      charIndex = map.offset + charIndex;\n\n      delete this.styles[lineIndex][charIndex];\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @private\n     */\n    _getLineStyle: function(lineIndex) {\n      var map = this._styleMap[lineIndex];\n      return this.styles[map.line];\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @param {Object} style\n     * @private\n     */\n    _setLineStyle: function(lineIndex, style) {\n      var map = this._styleMap[lineIndex];\n      this.styles[map.line] = style;\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @private\n     */\n    _deleteLineStyle: function(lineIndex) {\n      var map = this._styleMap[lineIndex];\n      delete this.styles[map.line];\n    },\n\n    /**\n     * Wraps text using the 'width' property of Textbox. First this function\n     * splits text on newlines, so we preserve newlines entered by the user.\n     * Then it wraps each line using the width of the Textbox by calling\n     * _wrapLine().\n     * @param {CanvasRenderingContext2D} ctx Context to use for measurements\n     * @param {String} text The string of text that is split into lines\n     * @returns {Array} Array of lines\n     */\n    _wrapText: function(ctx, text) {\n      var lines = text.split(this._reNewline), wrapped = [], i;\n\n      for (i = 0; i < lines.length; i++) {\n        wrapped = wrapped.concat(this._wrapLine(ctx, lines[i], i));\n      }\n\n      return wrapped;\n    },\n\n    /**\n     * Helper function to measure a string of text, given its lineIndex and charIndex offset\n     *\n     * @param {CanvasRenderingContext2D} ctx\n     * @param {String} text\n     * @param {number} lineIndex\n     * @param {number} charOffset\n     * @returns {number}\n     * @private\n     */\n    _measureText: function(ctx, text, lineIndex, charOffset) {\n      var width = 0;\n      charOffset = charOffset || 0;\n      for (var i = 0, len = text.length; i < len; i++) {\n        width += this._getWidthOfChar(ctx, text[i], lineIndex, i + charOffset);\n      }\n      return width;\n    },\n\n    /**\n     * Wraps a line of text using the width of the Textbox and a context.\n     * @param {CanvasRenderingContext2D} ctx Context to use for measurements\n     * @param {String} text The string of text to split into lines\n     * @param {Number} lineIndex\n     * @returns {Array} Array of line(s) into which the given text is wrapped\n     * to.\n     */\n    _wrapLine: function(ctx, text, lineIndex) {\n      var lineWidth        = 0,\n          lines            = [],\n          line             = '',\n          words            = text.split(' '),\n          word             = '',\n          offset           = 0,\n          infix            = ' ',\n          wordWidth        = 0,\n          infixWidth       = 0,\n          largestWordWidth = 0,\n          lineJustStarted = true,\n          additionalSpace = this._getWidthOfCharSpacing();\n\n      for (var i = 0; i < words.length; i++) {\n        word = words[i];\n        wordWidth = this._measureText(ctx, word, lineIndex, offset);\n\n        offset += word.length;\n\n        lineWidth += infixWidth + wordWidth - additionalSpace;\n\n        if (lineWidth >= this.width && !lineJustStarted) {\n          lines.push(line);\n          line = '';\n          lineWidth = wordWidth;\n          lineJustStarted = true;\n        }\n        else {\n          lineWidth += additionalSpace;\n        }\n\n        if (!lineJustStarted) {\n          line += infix;\n        }\n        line += word;\n\n        infixWidth = this._measureText(ctx, infix, lineIndex, offset);\n        offset++;\n        lineJustStarted = false;\n        // keep track of largest word\n        if (wordWidth > largestWordWidth) {\n          largestWordWidth = wordWidth;\n        }\n      }\n\n      i && lines.push(line);\n\n      if (largestWordWidth > this.dynamicMinWidth) {\n        this.dynamicMinWidth = largestWordWidth - additionalSpace;\n      }\n\n      return lines;\n    },\n    /**\n     * Gets lines of text to render in the Textbox. This function calculates\n     * text wrapping on the fly everytime it is called.\n     * @returns {Array} Array of lines in the Textbox.\n     * @override\n     */\n    _splitTextIntoLines: function(ctx) {\n      ctx = ctx || this.ctx;\n      var originalAlign = this.textAlign;\n      this._styleMap = null;\n      ctx.save();\n      this._setTextStyles(ctx);\n      this.textAlign = 'left';\n      var lines = this._wrapText(ctx, this.text);\n      this.textAlign = originalAlign;\n      ctx.restore();\n      this._textLines = lines;\n      this._styleMap = this._generateStyleMap();\n      return lines;\n    },\n\n    /**\n     * When part of a group, we don't want the Textbox's scale to increase if\n     * the group's increases. That's why we reduce the scale of the Textbox by\n     * the amount that the group's increases. This is to maintain the effective\n     * scale of the Textbox at 1, so that font-size values make sense. Otherwise\n     * the same font-size value would result in different actual size depending\n     * on the value of the scale.\n     * @param {String} key\n     * @param {*} value\n     */\n    setOnGroup: function(key, value) {\n      if (key === 'scaleX') {\n        this.set('scaleX', Math.abs(1 / value));\n        this.set('width', (this.get('width') * value) /\n          (typeof this.__oldScaleX === 'undefined' ? 1 : this.__oldScaleX));\n        this.__oldScaleX = value;\n      }\n    },\n\n    /**\n     * Returns 2d representation (lineIndex and charIndex) of cursor (or selection start).\n     * Overrides the superclass function to take into account text wrapping.\n     *\n     * @param {Number} [selectionStart] Optional index. When not given, current selectionStart is used.\n     */\n    get2DCursorLocation: function(selectionStart) {\n      if (typeof selectionStart === 'undefined') {\n        selectionStart = this.selectionStart;\n      }\n\n      var numLines = this._textLines.length,\n          removed  = 0;\n\n      for (var i = 0; i < numLines; i++) {\n        var line    = this._textLines[i],\n            lineLen = line.length;\n\n        if (selectionStart <= removed + lineLen) {\n          return {\n            lineIndex: i,\n            charIndex: selectionStart - removed\n          };\n        }\n\n        removed += lineLen;\n\n        if (this.text[removed] === '\\n' || this.text[removed] === ' ') {\n          removed++;\n        }\n      }\n\n      return {\n        lineIndex: numLines - 1,\n        charIndex: this._textLines[numLines - 1].length\n      };\n    },\n\n    /**\n     * Overrides superclass function and uses text wrapping data to get cursor\n     * boundary offsets instead of the array of chars.\n     * @param {Array} chars Unused\n     * @param {String} typeOfBoundaries Can be 'cursor' or 'selection'\n     * @returns {Object} Object with 'top', 'left', and 'lineLeft' properties set.\n     */\n    _getCursorBoundariesOffsets: function(chars, typeOfBoundaries) {\n      var topOffset      = 0,\n          leftOffset     = 0,\n          cursorLocation = this.get2DCursorLocation(),\n          lineChars      = this._textLines[cursorLocation.lineIndex].split(''),\n          lineLeftOffset = this._getLineLeftOffset(this._getLineWidth(this.ctx, cursorLocation.lineIndex));\n\n      for (var i = 0; i < cursorLocation.charIndex; i++) {\n        leftOffset += this._getWidthOfChar(this.ctx, lineChars[i], cursorLocation.lineIndex, i);\n      }\n\n      for (i = 0; i < cursorLocation.lineIndex; i++) {\n        topOffset += this._getHeightOfLine(this.ctx, i);\n      }\n\n      if (typeOfBoundaries === 'cursor') {\n        topOffset += (1 - this._fontSizeFraction) * this._getHeightOfLine(this.ctx, cursorLocation.lineIndex)\n          / this.lineHeight - this.getCurrentCharFontSize(cursorLocation.lineIndex, cursorLocation.charIndex)\n          * (1 - this._fontSizeFraction);\n      }\n\n      return {\n        top: topOffset,\n        left: leftOffset,\n        lineLeft: lineLeftOffset\n      };\n    },\n\n    getMinWidth: function() {\n      return Math.max(this.minWidth, this.dynamicMinWidth);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @method toObject\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return this.callSuper('toObject', ['minWidth'].concat(propertiesToInclude));\n    }\n  });\n  /**\n   * Returns fabric.Textbox instance from an object representation\n   * @static\n   * @memberOf fabric.Textbox\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] Callback to invoke when an fabric.Textbox instance is created\n   * @return {fabric.Textbox} instance of fabric.Textbox\n   */\n  fabric.Textbox.fromObject = function(object, callback) {\n    var textbox = new fabric.Textbox(object.text, clone(object));\n    callback && callback(textbox);\n    return textbox;\n  };\n  /**\n   * Returns the default controls visibility required for Textboxes.\n   * @returns {Object}\n   */\n  fabric.Textbox.getTextboxControlVisibility = function() {\n    return {\n      tl: false,\n      tr: false,\n      br: false,\n      bl: false,\n      ml: true,\n      mt: false,\n      mr: true,\n      mb: false,\n      mtr: true\n    };\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function() {\n\n  /**\n   * Override _setObjectScale and add Textbox specific resizing behavior. Resizing\n   * a Textbox doesn't scale text, it only changes width and makes text wrap automatically.\n   */\n  var setObjectScaleOverridden = fabric.Canvas.prototype._setObjectScale;\n\n  fabric.Canvas.prototype._setObjectScale = function(localMouse, transform,\n                                                     lockScalingX, lockScalingY, by, lockScalingFlip, _dim) {\n\n    var t = transform.target;\n    if (t instanceof fabric.Textbox) {\n      var w = t.width * ((localMouse.x / transform.scaleX) / (t.width + t.strokeWidth));\n      if (w >= t.getMinWidth()) {\n        t.set('width', w);\n        return true;\n      }\n    }\n    else {\n      return setObjectScaleOverridden.call(fabric.Canvas.prototype, localMouse, transform,\n        lockScalingX, lockScalingY, by, lockScalingFlip, _dim);\n    }\n  };\n\n  /**\n   * Sets controls of this group to the Textbox's special configuration if\n   * one is present in the group. Deletes _controlsVisibility otherwise, so that\n   * it gets initialized to default value at runtime.\n   */\n  fabric.Group.prototype._refreshControlsVisibility = function() {\n    if (typeof fabric.Textbox === 'undefined') {\n      return;\n    }\n    for (var i = this._objects.length; i--;) {\n      if (this._objects[i] instanceof fabric.Textbox) {\n        this.setControlsVisibility(fabric.Textbox.getTextboxControlVisibility());\n        return;\n      }\n    }\n  };\n\n  var clone = fabric.util.object.clone;\n\n  fabric.util.object.extend(fabric.Textbox.prototype, /** @lends fabric.IText.prototype */ {\n    /**\n     * @private\n     */\n    _removeExtraneousStyles: function() {\n      for (var prop in this._styleMap) {\n        if (!this._textLines[prop]) {\n          delete this.styles[this._styleMap[prop].line];\n        }\n      }\n    },\n\n    /**\n     * Inserts style object for a given line/char index\n     * @param {Number} lineIndex Index of a line\n     * @param {Number} charIndex Index of a char\n     * @param {Object} [style] Style object to insert, if given\n     */\n    insertCharStyleObject: function(lineIndex, charIndex, style) {\n      // adjust lineIndex and charIndex\n      var map = this._styleMap[lineIndex];\n      lineIndex = map.line;\n      charIndex = map.offset + charIndex;\n\n      fabric.IText.prototype.insertCharStyleObject.apply(this, [lineIndex, charIndex, style]);\n    },\n\n    /**\n     * Inserts new style object\n     * @param {Number} lineIndex Index of a line\n     * @param {Number} charIndex Index of a char\n     * @param {Boolean} isEndOfLine True if it's end of line\n     */\n    insertNewlineStyleObject: function(lineIndex, charIndex, isEndOfLine) {\n      // adjust lineIndex and charIndex\n      var map = this._styleMap[lineIndex];\n      lineIndex = map.line;\n      charIndex = map.offset + charIndex;\n\n      fabric.IText.prototype.insertNewlineStyleObject.apply(this, [lineIndex, charIndex, isEndOfLine]);\n    },\n\n    /**\n     * Shifts line styles up or down. This function is slightly different than the one in\n     * itext_behaviour as it takes into account the styleMap.\n     *\n     * @param {Number} lineIndex Index of a line\n     * @param {Number} offset Can be -1 or +1\n     */\n    shiftLineStyles: function(lineIndex, offset) {\n      // shift all line styles by 1 upward\n      var clonedStyles = clone(this.styles),\n          map          = this._styleMap[lineIndex];\n\n      // adjust line index\n      lineIndex = map.line;\n\n      for (var line in this.styles) {\n        var numericLine = parseInt(line, 10);\n\n        if (numericLine > lineIndex) {\n          this.styles[numericLine + offset] = clonedStyles[numericLine];\n\n          if (!clonedStyles[numericLine - offset]) {\n            delete this.styles[numericLine];\n          }\n        }\n      }\n      //TODO: evaluate if delete old style lines with offset -1\n    },\n\n    /**\n     * Figure out programatically the text on previous actual line (actual = separated by \\n);\n     *\n     * @param {Number} lIndex\n     * @returns {String}\n     * @private\n     */\n    _getTextOnPreviousLine: function(lIndex) {\n      var textOnPreviousLine = this._textLines[lIndex - 1];\n\n      while (this._styleMap[lIndex - 2] && this._styleMap[lIndex - 2].line === this._styleMap[lIndex - 1].line) {\n        textOnPreviousLine = this._textLines[lIndex - 2] + textOnPreviousLine;\n\n        lIndex--;\n      }\n\n      return textOnPreviousLine;\n    },\n\n    /**\n     * Removes style object\n     * @param {Boolean} isBeginningOfLine True if cursor is at the beginning of line\n     * @param {Number} [index] Optional index. When not given, current selectionStart is used.\n     */\n    removeStyleObject: function(isBeginningOfLine, index) {\n\n      var cursorLocation = this.get2DCursorLocation(index),\n          map            = this._styleMap[cursorLocation.lineIndex],\n          lineIndex      = map.line,\n          charIndex      = map.offset + cursorLocation.charIndex;\n      this._removeStyleObject(isBeginningOfLine, cursorLocation, lineIndex, charIndex);\n    }\n  });\n})();\n\n\n(function() {\n  var override = fabric.IText.prototype._getNewSelectionStartFromOffset;\n  /**\n   * Overrides the IText implementation and adjusts character index as there is not always a linebreak\n   *\n   * @param {Number} mouseOffset\n   * @param {Number} prevWidth\n   * @param {Number} width\n   * @param {Number} index\n   * @param {Number} jlen\n   * @returns {Number}\n   */\n  fabric.IText.prototype._getNewSelectionStartFromOffset = function(mouseOffset, prevWidth, width, index, jlen) {\n    index = override.call(this, mouseOffset, prevWidth, width, index, jlen);\n\n    // the index passed into the function is padded by the amount of lines from _textLines (to account for \\n)\n    // we need to remove this padding, and pad it by actual lines, and / or spaces that are meant to be there\n    var tmp     = 0,\n        removed = 0;\n\n    // account for removed characters\n    for (var i = 0; i < this._textLines.length; i++) {\n      tmp += this._textLines[i].length;\n\n      if (tmp + removed >= index) {\n        break;\n      }\n\n      if (this.text[tmp + removed] === '\\n' || this.text[tmp + removed] === ' ') {\n        removed++;\n      }\n    }\n\n    return index - i + removed;\n  };\n})();\n\n\n(function() {\n\n  if (typeof document !== 'undefined' && typeof window !== 'undefined') {\n    return;\n  }\n\n  var DOMParser = require('xmldom').DOMParser,\n      URL = require('url'),\n      HTTP = require('http'),\n      HTTPS = require('https'),\n\n      Canvas = require('canvas'),\n      Image = require('canvas').Image;\n\n  /** @private */\n  function request(url, encoding, callback) {\n    var oURL = URL.parse(url);\n\n    // detect if http or https is used\n    if ( !oURL.port ) {\n      oURL.port = ( oURL.protocol.indexOf('https:') === 0 ) ? 443 : 80;\n    }\n\n    // assign request handler based on protocol\n    var reqHandler = (oURL.protocol.indexOf('https:') === 0 ) ? HTTPS : HTTP,\n        req = reqHandler.request({\n          hostname: oURL.hostname,\n          port: oURL.port,\n          path: oURL.path,\n          method: 'GET'\n        }, function(response) {\n          var body = '';\n          if (encoding) {\n            response.setEncoding(encoding);\n          }\n          response.on('end', function () {\n            callback(body);\n          });\n          response.on('data', function (chunk) {\n            if (response.statusCode === 200) {\n              body += chunk;\n            }\n          });\n        });\n\n    req.on('error', function(err) {\n      if (err.errno === process.ECONNREFUSED) {\n        fabric.log('ECONNREFUSED: connection refused to ' + oURL.hostname + ':' + oURL.port);\n      }\n      else {\n        fabric.log(err.message);\n      }\n      callback(null);\n    });\n\n    req.end();\n  }\n\n  /** @private */\n  function requestFs(path, callback) {\n    var fs = require('fs');\n    fs.readFile(path, function (err, data) {\n      if (err) {\n        fabric.log(err);\n        throw err;\n      }\n      else {\n        callback(data);\n      }\n    });\n  }\n\n  fabric.util.loadImage = function(url, callback, context) {\n    function createImageAndCallBack(data) {\n      if (data) {\n        img.src = new Buffer(data, 'binary');\n        // preserving original url, which seems to be lost in node-canvas\n        img._src = url;\n        callback && callback.call(context, img);\n      }\n      else {\n        img = null;\n        callback && callback.call(context, null, true);\n      }\n    }\n    var img = new Image();\n    if (url && (url instanceof Buffer || url.indexOf('data') === 0)) {\n      img.src = img._src = url;\n      callback && callback.call(context, img);\n    }\n    else if (url && url.indexOf('http') !== 0) {\n      requestFs(url, createImageAndCallBack);\n    }\n    else if (url) {\n      request(url, 'binary', createImageAndCallBack);\n    }\n    else {\n      callback && callback.call(context, url);\n    }\n  };\n\n  fabric.loadSVGFromURL = function(url, callback, reviver) {\n    url = url.replace(/^\\n\\s*/, '').replace(/\\?.*$/, '').trim();\n    if (url.indexOf('http') !== 0) {\n      requestFs(url, function(body) {\n        fabric.loadSVGFromString(body.toString(), callback, reviver);\n      });\n    }\n    else {\n      request(url, '', function(body) {\n        fabric.loadSVGFromString(body, callback, reviver);\n      });\n    }\n  };\n\n  fabric.loadSVGFromString = function(string, callback, reviver) {\n    var doc = new DOMParser().parseFromString(string);\n    fabric.parseSVGDocument(doc.documentElement, function(results, options) {\n      callback && callback(results, options);\n    }, reviver);\n  };\n\n  fabric.util.getScript = function(url, callback) {\n    request(url, '', function(body) {\n      // eslint-disable-next-line no-eval\n      eval(body);\n      callback && callback();\n    });\n  };\n\n  // fabric.util.createCanvasElement = function(_, width, height) {\n  //   return new Canvas(width, height);\n  // }\n\n  /**\n   * Only available when running fabric on node.js\n   * @param {Number} width Canvas width\n   * @param {Number} height Canvas height\n   * @param {Object} [options] Options to pass to FabricCanvas.\n   * @param {Object} [nodeCanvasOptions] Options to pass to NodeCanvas.\n   * @return {Object} wrapped canvas instance\n   */\n  fabric.createCanvasForNode = function(width, height, options, nodeCanvasOptions) {\n    nodeCanvasOptions = nodeCanvasOptions || options;\n\n    var canvasEl = fabric.document.createElement('canvas'),\n        nodeCanvas = new Canvas(width || 600, height || 600, nodeCanvasOptions),\n        nodeCacheCanvas = new Canvas(width || 600, height || 600, nodeCanvasOptions);\n\n    // jsdom doesn't create style on canvas element, so here be temp. workaround\n    canvasEl.style = { };\n\n    canvasEl.width = nodeCanvas.width;\n    canvasEl.height = nodeCanvas.height;\n    options = options || { };\n    options.nodeCanvas = nodeCanvas;\n    options.nodeCacheCanvas = nodeCacheCanvas;\n    var FabricCanvas = fabric.Canvas || fabric.StaticCanvas,\n        fabricCanvas = new FabricCanvas(canvasEl, options);\n    fabricCanvas.nodeCanvas = nodeCanvas;\n    fabricCanvas.nodeCacheCanvas = nodeCacheCanvas;\n    fabricCanvas.contextContainer = nodeCanvas.getContext('2d');\n    fabricCanvas.contextCache = nodeCacheCanvas.getContext('2d');\n    fabricCanvas.Font = Canvas.Font;\n    return fabricCanvas;\n  };\n\n  var originaInitStatic = fabric.StaticCanvas.prototype._initStatic;\n  fabric.StaticCanvas.prototype._initStatic = function(el, options) {\n    el = el || fabric.document.createElement('canvas');\n    this.nodeCanvas = new Canvas(el.width, el.height);\n    this.nodeCacheCanvas = new Canvas(el.width, el.height);\n    originaInitStatic.call(this, el, options);\n    this.contextContainer = this.nodeCanvas.getContext('2d');\n    this.contextCache = this.nodeCacheCanvas.getContext('2d');\n    this.Font = Canvas.Font;\n  }\n\n  /** @ignore */\n  fabric.StaticCanvas.prototype.createPNGStream = function() {\n    return this.nodeCanvas.createPNGStream();\n  };\n\n  fabric.StaticCanvas.prototype.createJPEGStream = function(opts) {\n    return this.nodeCanvas.createJPEGStream(opts);\n  };\n\n  fabric.StaticCanvas.prototype._initRetinaScaling = function() {\n    if (!this._isRetinaScaling()) {\n      return;\n    }\n\n    this.lowerCanvasEl.setAttribute('width', this.width * fabric.devicePixelRatio);\n    this.lowerCanvasEl.setAttribute('height', this.height * fabric.devicePixelRatio);\n    this.nodeCanvas.width = this.width * fabric.devicePixelRatio;\n    this.nodeCanvas.height = this.height * fabric.devicePixelRatio;\n    this.contextContainer.scale(fabric.devicePixelRatio, fabric.devicePixelRatio);\n    return this;\n  };\n  if (fabric.Canvas) {\n    fabric.Canvas.prototype._initRetinaScaling = fabric.StaticCanvas.prototype._initRetinaScaling;\n  }\n\n  var origSetBackstoreDimension = fabric.StaticCanvas.prototype._setBackstoreDimension;\n  fabric.StaticCanvas.prototype._setBackstoreDimension = function(prop, value) {\n    origSetBackstoreDimension.call(this, prop, value);\n    this.nodeCanvas[prop] = value;\n    return this;\n  };\n  if (fabric.Canvas) {\n    fabric.Canvas.prototype._setBackstoreDimension = fabric.StaticCanvas.prototype._setBackstoreDimension;\n  }\n\n})();\n\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    keys.push(key);\n  }return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\n\nutil.inherits(Duplex, Readable);\n\n{\n  // avoid scope creep, the keys array can then be collected\n  var keys = objectKeys(Writable.prototype);\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false) this.readable = false;\n\n  if (options && options.writable === false) this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  pna.nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});\n\nDuplex.prototype._destroy = function (err, cb) {\n  this.push(null);\n  this.end();\n\n  pna.nextTick(cb, err);\n};","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\n\nfunction isArray(arg) {\n  if (Array.isArray) {\n    return Array.isArray(arg);\n  }\n  return objectToString(arg) === '[object Array]';\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = Buffer.isBuffer;\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","'use strict';\n\nif (!process.version ||\n    process.version.indexOf('v0.') === 0 ||\n    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {\n  module.exports = { nextTick: nextTick };\n} else {\n  module.exports = process\n}\n\nfunction nextTick(fn, arg1, arg2, arg3) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('\"callback\" argument must be a function');\n  }\n  var len = arguments.length;\n  var args, i;\n  switch (len) {\n  case 0:\n  case 1:\n    return process.nextTick(fn);\n  case 2:\n    return process.nextTick(function afterTickOne() {\n      fn.call(null, arg1);\n    });\n  case 3:\n    return process.nextTick(function afterTickTwo() {\n      fn.call(null, arg1, arg2);\n    });\n  case 4:\n    return process.nextTick(function afterTickThree() {\n      fn.call(null, arg1, arg2, arg3);\n    });\n  default:\n    args = new Array(len - 1);\n    i = 0;\n    while (i < args.length) {\n      args[i++] = arguments[i];\n    }\n    return process.nextTick(function afterTick() {\n      fn.apply(null, args);\n    });\n  }\n}\n\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\n\nvar Duplex = require('./_stream_duplex');\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(Transform, Duplex);\n\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb) {\n    return this.emit('error', new Error('write callback called multiple times'));\n  }\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    this.push(data);\n\n  cb(er);\n\n  var rs = this._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  };\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.on('prefinish', prefinish);\n}\n\nfunction prefinish() {\n  var _this = this;\n\n  if (typeof this._flush === 'function') {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  throw new Error('_transform() is not implemented');\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nTransform.prototype._destroy = function (err, cb) {\n  var _this2 = this;\n\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n    _this2.emit('close');\n  });\n};\n\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    stream.push(data);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  if (stream._writableState.length) throw new Error('Calling transform done when ws.length != 0');\n\n  if (stream._transformState.transforming) throw new Error('Calling transform done when still transforming');\n\n  return stream.push(null);\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : pna.nextTick;\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\nvar destroyImpl = require('./internal/streams/destroy');\n\nutil.inherits(Writable, Stream);\n\nfunction nop() {}\n\nfunction WritableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var writableHwm = options.writableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (writableHwm || writableHwm === 0)) this.highWaterMark = writableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function () {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function (object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function (object) {\n    return object instanceof this;\n  };\n}\n\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {\n    return new Writable(options);\n  }\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n\n    if (typeof options.writev === 'function') this._writev = options.writev;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  this.emit('error', new Error('Cannot pipe, not readable'));\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  pna.nextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  var er = false;\n\n  if (chunk === null) {\n    er = new TypeError('May not write null values to stream');\n  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  if (er) {\n    stream.emit('error', er);\n    pna.nextTick(cb, er);\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n\n  if (typeof cb !== 'function') cb = nop;\n\n  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\n\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    pna.nextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    pna.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state);\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      /*<replacement>*/\n      asyncWrite(afterWrite, stream, state, finished, cb);\n      /*</replacement>*/\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new Error('_write() is not implemented'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending && !state.finished) endWritable(this, state, cb);\n};\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      stream.emit('error', err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function') {\n      state.pendingcb++;\n      state.finalCalled = true;\n      pna.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n    }\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) pna.nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\n\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n  if (state.corkedRequestsFree) {\n    state.corkedRequestsFree.next = corkReq;\n  } else {\n    state.corkedRequestsFree = corkReq;\n  }\n}\n\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  get: function () {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\n\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  this.end();\n  cb(err);\n};","'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {\n      pna.nextTick(emitErrorNT, this, err);\n    }\n    return this;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      pna.nextTick(emitErrorNT, _this, err);\n      if (_this._writableState) {\n        _this._writableState.errorEmitted = true;\n      }\n    } else if (cb) {\n      cb(err);\n    }\n  });\n\n  return this;\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy\n};","module.exports = require('events').EventEmitter;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar isArray = require('isarray');\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\n\nvar EElistenerCount = function (emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug = void 0;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function () {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/BufferList');\nvar destroyImpl = require('./internal/streams/destroy');\nvar StringDecoder;\n\nutil.inherits(Readable, Stream);\n\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\n\nfunction ReadableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var readableHwm = options.readableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (readableHwm || readableHwm === 0)) this.highWaterMark = readableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n\n  Stream.call(this);\n}\n\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\n\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  this.push(null);\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\n\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      stream.emit('error', er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n\n      if (addToFront) {\n        if (state.endEmitted) stream.emit('error', new Error('stream.unshift() after end event'));else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        stream.emit('error', new Error('stream.push() after EOF'));\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n    }\n  }\n\n  return needMoreData(state);\n}\n\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    stream.emit('data', chunk);\n    stream.read(0);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\n\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\n}\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 8MB\nvar MAX_HWM = 0x800000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n\n  return ret;\n};\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync) pna.nextTick(emitReadable_, stream);else emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    pna.nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;else len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  this.emit('error', new Error('_read() is not implemented'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) pna.nextTick(endFn);else src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  // If the user pushes more data while we're writing to dest then we'll end up\n  // in ondata again. However, we only want to increase awaitDrain once because\n  // dest will only emit one 'drain' event for the multiple writes.\n  // => Introduce a guard on increasing awaitDrain.\n  var increasedAwaitDrain = false;\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    increasedAwaitDrain = false;\n    var ret = dest.write(chunk);\n    if (false === ret && !increasedAwaitDrain) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', src._readableState.awaitDrain);\n        src._readableState.awaitDrain++;\n        increasedAwaitDrain = true;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function () {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = { hasUnpiped: false };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++) {\n      dests[i].emit('unpipe', this, unpipeInfo);\n    }return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this, unpipeInfo);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n\n  if (ev === 'data') {\n    // Start flowing on next tick if stream isn't explicitly paused\n    if (this._readableState.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    var state = this._readableState;\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.emittedReadable = false;\n      if (!state.reading) {\n        pna.nextTick(nReadingNextTick, this);\n      } else if (state.length) {\n        emitReadable(this);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    pna.nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  if (!state.reading) {\n    debug('resume read 0');\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  state.awaitDrain = 0;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null) {}\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n\n  var state = this._readableState;\n  var paused = false;\n\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n\n    _this.push(null);\n  });\n\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = _this.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function (method) {\n        return function () {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  this._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return this;\n};\n\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._readableState.highWaterMark;\n  }\n});\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = fromListPartial(n, state.buffer, state.decoder);\n  }\n\n  return ret;\n}\n\n// Extracts only enough buffered data to satisfy the amount requested.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromListPartial(n, list, hasStrings) {\n  var ret;\n  if (n < list.head.data.length) {\n    // slice is the same for buffers and strings\n    ret = list.head.data.slice(0, n);\n    list.head.data = list.head.data.slice(n);\n  } else if (n === list.head.data.length) {\n    // first chunk is a perfect match\n    ret = list.shift();\n  } else {\n    // result spans more than one buffer\n    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\n  }\n  return ret;\n}\n\n// Copies a specified amount of characters from the list of buffered data\n// chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBufferString(n, list) {\n  var p = list.head;\n  var c = 1;\n  var ret = p.data;\n  n -= ret.length;\n  while (p = p.next) {\n    var str = p.data;\n    var nb = n > str.length ? str.length : n;\n    if (nb === str.length) ret += str;else ret += str.slice(0, n);\n    n -= nb;\n    if (n === 0) {\n      if (nb === str.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = str.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\n// Copies a specified amount of bytes from the list of buffered data chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBuffer(n, list) {\n  var ret = Buffer.allocUnsafe(n);\n  var p = list.head;\n  var c = 1;\n  p.data.copy(ret);\n  n -= p.data.length;\n  while (p = p.next) {\n    var buf = p.data;\n    var nb = n > buf.length ? buf.length : n;\n    buf.copy(ret, ret.length - n, 0, nb);\n    n -= nb;\n    if (n === 0) {\n      if (nb === buf.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = buf.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    pna.nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}","exports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\n","var capability = require('./capability')\nvar inherits = require('inherits')\nvar stream = require('readable-stream')\n\nvar rStates = exports.readyStates = {\n\tUNSENT: 0,\n\tOPENED: 1,\n\tHEADERS_RECEIVED: 2,\n\tLOADING: 3,\n\tDONE: 4\n}\n\nvar IncomingMessage = exports.IncomingMessage = function (xhr, response, mode, fetchTimer) {\n\tvar self = this\n\tstream.Readable.call(self)\n\n\tself._mode = mode\n\tself.headers = {}\n\tself.rawHeaders = []\n\tself.trailers = {}\n\tself.rawTrailers = []\n\n\t// Fake the 'close' event, but only once 'end' fires\n\tself.on('end', function () {\n\t\t// The nextTick is necessary to prevent the 'request' module from causing an infinite loop\n\t\tprocess.nextTick(function () {\n\t\t\tself.emit('close')\n\t\t})\n\t})\n\n\tif (mode === 'fetch') {\n\t\tself._fetchResponse = response\n\n\t\tself.url = response.url\n\t\tself.statusCode = response.status\n\t\tself.statusMessage = response.statusText\n\t\t\n\t\tresponse.headers.forEach(function (header, key){\n\t\t\tself.headers[key.toLowerCase()] = header\n\t\t\tself.rawHeaders.push(key, header)\n\t\t})\n\n\t\tif (capability.writableStream) {\n\t\t\tvar writable = new WritableStream({\n\t\t\t\twrite: function (chunk) {\n\t\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\t\tif (self._destroyed) {\n\t\t\t\t\t\t\treject()\n\t\t\t\t\t\t} else if(self.push(new Buffer(chunk))) {\n\t\t\t\t\t\t\tresolve()\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tself._resumeFetch = resolve\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tclose: function () {\n\t\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\t\tif (!self._destroyed)\n\t\t\t\t\t\tself.push(null)\n\t\t\t\t},\n\t\t\t\tabort: function (err) {\n\t\t\t\t\tif (!self._destroyed)\n\t\t\t\t\t\tself.emit('error', err)\n\t\t\t\t}\n\t\t\t})\n\n\t\t\ttry {\n\t\t\t\tresponse.body.pipeTo(writable).catch(function (err) {\n\t\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\t\tif (!self._destroyed)\n\t\t\t\t\t\tself.emit('error', err)\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t} catch (e) {} // pipeTo method isn't defined. Can't find a better way to feature test this\n\t\t}\n\t\t// fallback for when writableStream or pipeTo aren't available\n\t\tvar reader = response.body.getReader()\n\t\tfunction read () {\n\t\t\treader.read().then(function (result) {\n\t\t\t\tif (self._destroyed)\n\t\t\t\t\treturn\n\t\t\t\tif (result.done) {\n\t\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\t\tself.push(null)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tself.push(new Buffer(result.value))\n\t\t\t\tread()\n\t\t\t}).catch(function (err) {\n\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\tif (!self._destroyed)\n\t\t\t\t\tself.emit('error', err)\n\t\t\t})\n\t\t}\n\t\tread()\n\t} else {\n\t\tself._xhr = xhr\n\t\tself._pos = 0\n\n\t\tself.url = xhr.responseURL\n\t\tself.statusCode = xhr.status\n\t\tself.statusMessage = xhr.statusText\n\t\tvar headers = xhr.getAllResponseHeaders().split(/\\r?\\n/)\n\t\theaders.forEach(function (header) {\n\t\t\tvar matches = header.match(/^([^:]+):\\s*(.*)/)\n\t\t\tif (matches) {\n\t\t\t\tvar key = matches[1].toLowerCase()\n\t\t\t\tif (key === 'set-cookie') {\n\t\t\t\t\tif (self.headers[key] === undefined) {\n\t\t\t\t\t\tself.headers[key] = []\n\t\t\t\t\t}\n\t\t\t\t\tself.headers[key].push(matches[2])\n\t\t\t\t} else if (self.headers[key] !== undefined) {\n\t\t\t\t\tself.headers[key] += ', ' + matches[2]\n\t\t\t\t} else {\n\t\t\t\t\tself.headers[key] = matches[2]\n\t\t\t\t}\n\t\t\t\tself.rawHeaders.push(matches[1], matches[2])\n\t\t\t}\n\t\t})\n\n\t\tself._charset = 'x-user-defined'\n\t\tif (!capability.overrideMimeType) {\n\t\t\tvar mimeType = self.rawHeaders['mime-type']\n\t\t\tif (mimeType) {\n\t\t\t\tvar charsetMatch = mimeType.match(/;\\s*charset=([^;])(;|$)/)\n\t\t\t\tif (charsetMatch) {\n\t\t\t\t\tself._charset = charsetMatch[1].toLowerCase()\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!self._charset)\n\t\t\t\tself._charset = 'utf-8' // best guess\n\t\t}\n\t}\n}\n\ninherits(IncomingMessage, stream.Readable)\n\nIncomingMessage.prototype._read = function () {\n\tvar self = this\n\n\tvar resolve = self._resumeFetch\n\tif (resolve) {\n\t\tself._resumeFetch = null\n\t\tresolve()\n\t}\n}\n\nIncomingMessage.prototype._onXHRProgress = function () {\n\tvar self = this\n\n\tvar xhr = self._xhr\n\n\tvar response = null\n\tswitch (self._mode) {\n\t\tcase 'text:vbarray': // For IE9\n\t\t\tif (xhr.readyState !== rStates.DONE)\n\t\t\t\tbreak\n\t\t\ttry {\n\t\t\t\t// This fails in IE8\n\t\t\t\tresponse = new global.VBArray(xhr.responseBody).toArray()\n\t\t\t} catch (e) {}\n\t\t\tif (response !== null) {\n\t\t\t\tself.push(new Buffer(response))\n\t\t\t\tbreak\n\t\t\t}\n\t\t\t// Falls through in IE8\t\n\t\tcase 'text':\n\t\t\ttry { // This will fail when readyState = 3 in IE9. Switch mode and wait for readyState = 4\n\t\t\t\tresponse = xhr.responseText\n\t\t\t} catch (e) {\n\t\t\t\tself._mode = 'text:vbarray'\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tif (response.length > self._pos) {\n\t\t\t\tvar newData = response.substr(self._pos)\n\t\t\t\tif (self._charset === 'x-user-defined') {\n\t\t\t\t\tvar buffer = new Buffer(newData.length)\n\t\t\t\t\tfor (var i = 0; i < newData.length; i++)\n\t\t\t\t\t\tbuffer[i] = newData.charCodeAt(i) & 0xff\n\n\t\t\t\t\tself.push(buffer)\n\t\t\t\t} else {\n\t\t\t\t\tself.push(newData, self._charset)\n\t\t\t\t}\n\t\t\t\tself._pos = response.length\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'arraybuffer':\n\t\t\tif (xhr.readyState !== rStates.DONE || !xhr.response)\n\t\t\t\tbreak\n\t\t\tresponse = xhr.response\n\t\t\tself.push(new Buffer(new Uint8Array(response)))\n\t\t\tbreak\n\t\tcase 'moz-chunked-arraybuffer': // take whole\n\t\t\tresponse = xhr.response\n\t\t\tif (xhr.readyState !== rStates.LOADING || !response)\n\t\t\t\tbreak\n\t\t\tself.push(new Buffer(new Uint8Array(response)))\n\t\t\tbreak\n\t\tcase 'ms-stream':\n\t\t\tresponse = xhr.response\n\t\t\tif (xhr.readyState !== rStates.LOADING)\n\t\t\t\tbreak\n\t\t\tvar reader = new global.MSStreamReader()\n\t\t\treader.onprogress = function () {\n\t\t\t\tif (reader.result.byteLength > self._pos) {\n\t\t\t\t\tself.push(new Buffer(new Uint8Array(reader.result.slice(self._pos))))\n\t\t\t\t\tself._pos = reader.result.byteLength\n\t\t\t\t}\n\t\t\t}\n\t\t\treader.onload = function () {\n\t\t\t\tself.push(null)\n\t\t\t}\n\t\t\t// reader.onerror = ??? // TODO: this\n\t\t\treader.readAsArrayBuffer(response)\n\t\t\tbreak\n\t}\n\n\t// The ms-stream case handles end separately in reader.onload()\n\tif (self._xhr.readyState === rStates.DONE && self._mode !== 'ms-stream') {\n\t\tself.push(null)\n\t}\n}\n","exports.fetch = isFunction(global.fetch) && isFunction(global.ReadableStream)\n\nexports.writableStream = isFunction(global.WritableStream)\n\nexports.abortController = isFunction(global.AbortController)\n\nexports.blobConstructor = false\ntry {\n\tnew Blob([new ArrayBuffer(1)])\n\texports.blobConstructor = true\n} catch (e) {}\n\n// The xhr request to example.com may violate some restrictive CSP configurations,\n// so if we're running in a browser that supports `fetch`, avoid calling getXHR()\n// and assume support for certain features below.\nvar xhr\nfunction getXHR () {\n\t// Cache the xhr value\n\tif (xhr !== undefined) return xhr\n\n\tif (global.XMLHttpRequest) {\n\t\txhr = new global.XMLHttpRequest()\n\t\t// If XDomainRequest is available (ie only, where xhr might not work\n\t\t// cross domain), use the page location. Otherwise use example.com\n\t\t// Note: this doesn't actually make an http request.\n\t\ttry {\n\t\t\txhr.open('GET', global.XDomainRequest ? '/' : 'https://example.com')\n\t\t} catch(e) {\n\t\t\txhr = null\n\t\t}\n\t} else {\n\t\t// Service workers don't have XHR\n\t\txhr = null\n\t}\n\treturn xhr\n}\n\nfunction checkTypeSupport (type) {\n\tvar xhr = getXHR()\n\tif (!xhr) return false\n\ttry {\n\t\txhr.responseType = type\n\t\treturn xhr.responseType === type\n\t} catch (e) {}\n\treturn false\n}\n\n// For some strange reason, Safari 7.0 reports typeof global.ArrayBuffer === 'object'.\n// Safari 7.1 appears to have fixed this bug.\nvar haveArrayBuffer = typeof global.ArrayBuffer !== 'undefined'\nvar haveSlice = haveArrayBuffer && isFunction(global.ArrayBuffer.prototype.slice)\n\n// If fetch is supported, then arraybuffer will be supported too. Skip calling\n// checkTypeSupport(), since that calls getXHR().\nexports.arraybuffer = exports.fetch || (haveArrayBuffer && checkTypeSupport('arraybuffer'))\n\n// These next two tests unavoidably show warnings in Chrome. Since fetch will always\n// be used if it's available, just return false for these to avoid the warnings.\nexports.msstream = !exports.fetch && haveSlice && checkTypeSupport('ms-stream')\nexports.mozchunkedarraybuffer = !exports.fetch && haveArrayBuffer &&\n\tcheckTypeSupport('moz-chunked-arraybuffer')\n\n// If fetch is supported, then overrideMimeType will be supported too. Skip calling\n// getXHR().\nexports.overrideMimeType = exports.fetch || (getXHR() ? isFunction(getXHR().overrideMimeType) : false)\n\nexports.vbArray = isFunction(global.VBArray)\n\nfunction isFunction (value) {\n\treturn typeof value === 'function'\n}\n\nxhr = null // Help gc\n","var ClientRequest = require('./lib/request')\nvar response = require('./lib/response')\nvar extend = require('xtend')\nvar statusCodes = require('builtin-status-codes')\nvar url = require('url')\n\nvar http = exports\n\nhttp.request = function (opts, cb) {\n\tif (typeof opts === 'string')\n\t\topts = url.parse(opts)\n\telse\n\t\topts = extend(opts)\n\n\t// Normally, the page is loaded from http or https, so not specifying a protocol\n\t// will result in a (valid) protocol-relative url. However, this won't work if\n\t// the protocol is something else, like 'file:'\n\tvar defaultProtocol = global.location.protocol.search(/^https?:$/) === -1 ? 'http:' : ''\n\n\tvar protocol = opts.protocol || defaultProtocol\n\tvar host = opts.hostname || opts.host\n\tvar port = opts.port\n\tvar path = opts.path || '/'\n\n\t// Necessary for IPv6 addresses\n\tif (host && host.indexOf(':') !== -1)\n\t\thost = '[' + host + ']'\n\n\t// This may be a relative url. The browser should always be able to interpret it correctly.\n\topts.url = (host ? (protocol + '//' + host) : '') + (port ? ':' + port : '') + path\n\topts.method = (opts.method || 'GET').toUpperCase()\n\topts.headers = opts.headers || {}\n\n\t// Also valid opts.auth, opts.mode\n\n\tvar req = new ClientRequest(opts)\n\tif (cb)\n\t\treq.on('response', cb)\n\treturn req\n}\n\nhttp.get = function get (opts, cb) {\n\tvar req = http.request(opts, cb)\n\treq.end()\n\treturn req\n}\n\nhttp.ClientRequest = ClientRequest\nhttp.IncomingMessage = response.IncomingMessage\n\nhttp.Agent = function () {}\nhttp.Agent.defaultMaxSockets = 4\n\nhttp.globalAgent = new http.Agent()\n\nhttp.STATUS_CODES = statusCodes\n\nhttp.METHODS = [\n\t'CHECKOUT',\n\t'CONNECT',\n\t'COPY',\n\t'DELETE',\n\t'GET',\n\t'HEAD',\n\t'LOCK',\n\t'M-SEARCH',\n\t'MERGE',\n\t'MKACTIVITY',\n\t'MKCOL',\n\t'MOVE',\n\t'NOTIFY',\n\t'OPTIONS',\n\t'PATCH',\n\t'POST',\n\t'PROPFIND',\n\t'PROPPATCH',\n\t'PURGE',\n\t'PUT',\n\t'REPORT',\n\t'SEARCH',\n\t'SUBSCRIBE',\n\t'TRACE',\n\t'UNLOCK',\n\t'UNSUBSCRIBE'\n]","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/**\n * Global DrawerJs namespace.\n *\n * @namespace\n * @type {{plugins: {}}}\n */\nwindow.DrawerJs = {\n\n  /**\n   * All available tool options\n   * @memberof DrawerJs\n   * @namespace options\n   */\n\n\n  /**\n   * Global namespace for all DrawerJs plugins.\n   *\n   * @memberof DrawerJs\n   * @namespace DrawerJs.plugins\n   */\n  plugins: {},\n\n  /**\n   * Global namespace for all DrawerJs utility functions.\n   *\n   * @memberof DrawerJs\n   * @namespace DrawerJs.util\n   */\n  util: {},\n\n  /**\n   * Global namespace for all DrawerJs utility plugins.\n   *\n   * @memberof DrawerJs\n   * @namespace DrawerJs.utilPlugins\n   */\n  utilPlugins: {},\n\n  /**\n   * All drawer brush classes.\n   *\n   * @memberof DrawerJs\n   * @namespace DrawerJs.brushes\n   */\n  brushes: {}\n};\n\nexport default DrawerJs\n","export default {\n  'Add Drawer': 'Add Drawer',\n  'Insert Drawer': 'Insert Drawer',\n  'Insert': 'Insert',\n  'Free drawing mode': 'Free drawing mode',\n  'SimpleWhiteEraser': 'SimpleWhiteEraser',\n  'Eraser': 'Eraser',\n  'Delete this canvas': 'Delete this canvas',\n  'Are you sure want to delete this canvas?': 'Are you sure want to delete this canvas?',\n\n  // canvas properties popup\n  'Size (px)': 'Size (px)',\n  'Position': 'Position',\n  'Inline': 'Inline',\n  'Left': 'Left',\n  'Center': 'Center',\n  'Right': 'Right',\n  'Floating': 'Floating',\n  'Canvas properties': 'Canvas properties',\n  'Background': 'Background',\n  'transparent': 'transparent',\n  'Cancel': 'Cancel',\n  'Save': 'Save',\n\n  // Fullscreen plugin\n  'Enter fullscreen mode': 'Enter fullscreen mode',\n  'Exit fullscreen mode': 'Exit fullscreen mode',\n\n  // shape context menu plugin\n  'Bring forward': 'Bring forward',\n  'Send backwards': 'Send backwards',\n  'Bring to front': 'Bring to front',\n  'Send to back': 'Send to back',\n  'Duplicate': 'Duplicate',\n  'Remove': 'Remove',\n\n  // brush size plugin\n  'Size:': 'Size:',\n\n  // colorpicker plugin\n  'Fill:': 'Fill:',\n  'Transparent': 'Transparent',\n\n  // shape border plugin\n  'Border:': 'Border:',\n  'None': 'None',\n\n  // arrow plugin\n  'Draw an arrow': 'Draw an arrow',\n  'Draw a two-sided arrow': 'Draw a two-sided arrow',\n  'Lines and arrows': 'Lines and arrows',\n\n  // circle plugin\n  'Draw a circle': 'Draw a circle',\n\n  // line plugin\n  'Draw a line': 'Draw a line',\n\n  // rectangle plugin\n  'Draw a rectangle': 'Draw a rectangle',\n\n  // triangle plugin\n  'Draw a triangle': 'Draw a triangle',\n\n  // polygon plugin\n  'Draw a Polygon': 'Draw a Polygon',\n  'Stop drawing a polygon': 'Stop drawing a polygon (esc)',\n  'Click to start a new line': 'Click to start a new line',\n\n  // text plugin\n  'Draw a text': 'Draw a text',\n  'Click to place a text': 'Click to place a text',\n  'Font:': 'Font:',\n\n  // movable floating mode plugin\n  'Move canvas': 'Move canvas',\n\n  // base shape\n  'Click to start drawing a ': 'Click to start drawing a '\n}\n","class AssetsProvider {\n\n  init (map) {\n    this._map = map\n    return this\n  }\n\n  urlFor (asset_file) {\n    return this._map[asset_file] || asset_file\n  }\n\n}\n\nexport default new AssetsProvider()\n","/**\n * Toolbar placeholder.\n *\n * @param {DrawerJs.Drawer} drawerInstance\n * @param {string} position\n * @param {string} [positionType]\n * @param {string} [customAnchorSelector]\n *\n * @constructor\n */\nvar ToolbarPlaceholder = function(drawerInstance, position, positionType, customAnchorSelector) {\n  this.drawerInstance = drawerInstance;\n  if (!drawerInstance) {\n    throw new Error(\"ToolbarPlaceholder: drawerInstance is not provided!\");\n  }\n\n  this._setupOptions(position, positionType, customAnchorSelector);\n\n\n  // Create element\n  this._setupElement();\n  this._attachEventHandlers();\n  this._attachDrawerEventHandlers();\n};\n\n// positions of placeholder\nToolbarPlaceholder.prototype.TOP_POSITION = 'top';\nToolbarPlaceholder.prototype.BOTTOM_POSITION = 'bottom';\nToolbarPlaceholder.prototype.LEFT_POSITION = 'left';\nToolbarPlaceholder.prototype.RIGHT_POSITION = 'right';\nToolbarPlaceholder.prototype.OVER_CANVAS_POSITION = 'canvas';\nToolbarPlaceholder.prototype.POPUP_POSITION = 'popup';\n\nToolbarPlaceholder.prototype.POSITION_TYPE_OUTSIDE = 'outside';\nToolbarPlaceholder.prototype.POSITION_TYPE_INSIDE = 'inside';\nToolbarPlaceholder.prototype.POSITION_TYPE_CUSTOM = 'custom';\n\nToolbarPlaceholder.prototype.CUSTOM_POSITION = 'custom';\n\n// orientations of placeholder\nToolbarPlaceholder.prototype.HORIZONTAL_ORIENTATION = 'horizontal';\nToolbarPlaceholder.prototype.VERTICAL_ORIENTATION = 'vertical';\n\n// States of placeholder\nToolbarPlaceholder.prototype.STATE_HIDDEN = 'hidden';\nToolbarPlaceholder.prototype.STATE_OVERLAY = 'overlay';\nToolbarPlaceholder.prototype.STATE_DISABLED = 'disabled';\n\n\n// placeholder html\nToolbarPlaceholder.prototype._html_default =  '' +\n    '<ul class=\"noselect toolbar-placeholder\" contenteditable=false>' +\n      '<li class=\"toolbar-placeholder-overlay\"></li>' +\n    '</ul>';\n\nToolbarPlaceholder.prototype._html_popup =  '' +\n    '<div class=\"noselect toolbar-placeholder hidden\" contenteditable=false>' +\n      '<div class=\"close-btn\">' +\n        '<span class=\"fa fa-close\"></span>' +\n      '</div>' +\n      '<div class=\"overlay\"></div>' +\n    '</div>';\n\n/**@\n * Save and process options\n * @param {String} position one of predefined positions - look at ToolbarPlaceholder.prototype.*_POSITION\n * @param {String} [positionType] one of predefined types - look at ToolbarPlaceholder.prototype.POSITION_TYPE_*\n * @param {String} [customAnchorSelector]\n * @private\n */\nToolbarPlaceholder.prototype._setupOptions = function (position, positionType, customAnchorSelector) {\n  if (position === this.POPUP_POSITION) {\n    var $popupWrapper = this.drawerInstance.$popupWrapper,\n        $popupContent = $popupWrapper && $popupWrapper.find('.popup-content');\n    if ($popupContent && $popupContent.length) {\n      position = this.CUSTOM_POSITION;\n      this.$customAnchor = $popupContent;\n    }\n  }\n\n  this.position = position;\n  this.positionType = positionType;\n  this.customAnchorSelector = customAnchorSelector;\n};\n\n\n/**\n * Setup event handlers\n * @private\n */\nToolbarPlaceholder.prototype._attachEventHandlers = function () {\n\n};\n\n/**\n * Setup event handlers for Drawer\n * @private\n */\nToolbarPlaceholder.prototype._attachDrawerEventHandlers = function () {\n  // remove on edit stop\n  var self = this;\n  this.drawerInstance.on(this.drawerInstance.EVENT_EDIT_STOP, function() {\n    self.$element.remove();\n  });\n\n  var checkElements = function ($elements) {\n    var excludeElements = $elements && $elements.length ? $elements : $(),\n        isParent,\n        isChild,\n        excludeElementsMatched;\n\n    excludeElements.each(function (i, element) {\n      var $currEl = $(element);\n      if (!excludeElementsMatched) {\n        isParent = self.$element.find($currEl).length;\n        isChild = self.$element.closest($currEl).length;\n        excludeElementsMatched = isParent || isChild;\n      }\n    });\n\n    return excludeElementsMatched;\n  };\n\n  this.drawerInstance.on(this.drawerInstance.EVENT_TOOLBAR_CHANGE_STATE, function(fEvent, data) {\n    var dataForChange = $.extend(true, {}, data || {});\n    self.changeState(dataForChange);\n  });\n\n  this.drawerInstance.on(this.drawerInstance.EVENT_TOOLBAR_CLEAR_STATE, function(fEvent, data) {\n    var excludeElements = data && data.excludeElements,\n        isParent = self.$element.find(excludeElements).length,\n        isChild = self.$element.closest(excludeElements).length,\n        customPosition = self.position === self.POSITION_TYPE_CUSTOM,\n        excludeElementsMatched = isParent || isChild;\n    if (!excludeElementsMatched && !customPosition) {\n      self.turnOffOverlay();\n      self.turnOffDisabled();\n      self._showPlaceholder();\n    }\n  });\n\n  this.drawerInstance.on(this.drawerInstance.EVENT_TOOLBAR_STATE_HIDDEN_OFF, function(fEvent, data) {\n    var dataForChange = $.extend(true, {}, data || {});\n    dataForChange.state = 'hidden';\n    dataForChange.turnOn = false;\n    self.changeState(dataForChange);\n  });\n\n  this.drawerInstance.on(this.drawerInstance.EVENT_TOOLBAR_STATE_HIDDEN_ON, function(fEvent, data) {\n    var dataForChange = $.extend(true, {}, data || {});\n    dataForChange.state = 'hidden';\n    dataForChange.turnOn = true;\n    self.changeState(dataForChange);\n  });\n\n  this.drawerInstance.on(this.drawerInstance.EVENT_TOOLBAR_STATE_OVERLAY_ON, function(fEvent, data) {\n    var dataForChange = $.extend(true, {}, data || {});\n    dataForChange.state = 'overlay';\n    dataForChange.turnOn = true;\n    self.changeState(dataForChange);\n  });\n\n  this.drawerInstance.on(this.drawerInstance.EVENT_TOOLBAR_STATE_OVERLAY_OFF, function(fEvent, data) {\n    var dataForChange = $.extend(true, {}, data || {});\n    dataForChange.state = 'overlay';\n    dataForChange.turnOn = false;\n    self.changeState(dataForChange);\n  });\n\n  this.drawerInstance.on(this.drawerInstance.EVENT_TOOLBAR_STATE_DISABLED_ON, function(fEvent, data) {\n    var dataForChange = $.extend(true, {}, data || {});\n    dataForChange.state = 'disabled';\n    dataForChange.turnOn = true;\n    self.changeState(dataForChange);\n  });\n\n  this.drawerInstance.on(this.drawerInstance.EVENT_TOOLBAR_STATE_DISABLED_OFF, function(fEvent, data) {\n    var dataForChange = $.extend(true, {}, data || {});\n    dataForChange.state = 'disabled';\n    dataForChange.turnOn = false;\n    self.changeState(dataForChange);\n  });\n};\n\n/**\n * Sets placeholder positioning.\n *\n * @param {String} [position] - one of predefined positions - look at ToolbarPlaceholder.prototype.*_POSITION\n * @param {String} [positionType] one of predefined types - look at ToolbarPlaceholder.prototype.POSITION_TYPE_*\n * @param {String} [customAnchorSelector]\n * @private\n */\nToolbarPlaceholder.prototype._setPosition = function(position, positionType, customAnchorSelector) {\n  position = position || this.position;\n  positionType = positionType || this.positionType;\n  customAnchorSelector = customAnchorSelector || this.customAnchorSelector;\n\n  this.position = position;\n  if (position == this.CUSTOM_POSITION) {\n      this.customAnchorSelector = customAnchorSelector;\n\n\n      var anchorFromElement = $(window.document).find(this.$customAnchor),\n          anchorFromSelector = $(window.document).find(customAnchorSelector),\n          $anchor = anchorFromElement.length ? anchorFromElement : (anchorFromSelector.length ? anchorFromSelector : false);\n      if ($anchor) {\n        // @todo - why this limitation?\n        // at the moment - only horizontal position for custom anchors\n        this.orientation = this.HORIZONTAL_ORIENTATION;\n\n        // wrap anchor in jQuery\n        this.$customAnchor = $anchor;\n        this.$customAnchor.append(this.$element);\n      } else {\n        this.drawerInstance.error(\"ToolbarPlaceholder : no anchor element found for custom toolbar by selector '\" + customAnchorSelector + \"'\");\n\n        // custom placeholder will be existing top placeholder\n        this.position = this.TOP_POSITION;\n      }\n  } else {\n\n    switch (position) {\n      case this.TOP_POSITION :\n        this.$element.addClass('toolbar-placeholder-top');\n        this.orientation = this.HORIZONTAL_ORIENTATION;\n      break;\n      case this.BOTTOM_POSITION :\n        this.$element.addClass('toolbar-placeholder-bottom');\n        this.orientation = this.HORIZONTAL_ORIENTATION;\n      break;\n      case this.LEFT_POSITION :\n        this.$element.addClass('toolbar-placeholder-left');\n        this.orientation = this.VERTICAL_ORIENTATION;\n      break;\n      case this.RIGHT_POSITION :\n        this.$element.addClass('toolbar-placeholder-right');\n        this.orientation = this.VERTICAL_ORIENTATION;\n      break;\n      case this.OVER_CANVAS_POSITION :\n        this.$element.addClass('toolbar-placeholder-overcanvas');\n        this.orientation = this.HORIZONTAL_ORIENTATION;\n        break;\n      default:\n        this.position = this.TOP_POSITION;\n        this.$element.addClass('toolbar-placeholder-top');\n        this.orientation = this.HORIZONTAL_ORIENTATION;\n    }\n\n    if (positionType && positionType === this.POSITION_TYPE_INSIDE) {\n      this.$element.addClass('toolbar-placeholder-inside');\n    }\n    this.$element.attr('data-position', position);\n\n    // add placeholder to container\n    var container = this.drawerInstance.$toolbarsWrapper;\n    container.append(this.$element);\n  }\n};\n\n/**@\n * Init placeholder element - create and setup\n * @private\n */\nToolbarPlaceholder.prototype._setupElement = function () {\n  var elementHtml = this._getHtmlOfElement();\n  this.$element = $(elementHtml);\n  this.$overlay = this.$element.find('.toolbar-placeholder-overlay');\n  this._setPosition();\n};\n\n/**\n * Get html of template\n * @private\n */\nToolbarPlaceholder.prototype._getHtmlOfElement = function () {\n  var result;\n  result = this._html_default;\n  if (this.position === this.POPUP_POSITION) {\n    result = this._html_popup;\n  }\n  return result;\n};\n\n\n/**\n * Toggle state of placeholder\n * @param {Object} data - Configuration object\n * @param {String} data.state - Type of state\n * @param {Boolean} [data.turnOn] - Turn on/off selected state\n * @param {jQuery} [data.excludeElements] - Do not change state of placeholder if it is parent/child at least of one of the next elements\n */\nToolbarPlaceholder.prototype.changeState = function (data) {\n  var self = this,\n      checkElements;\n\n  checkElements = function ($elements) {\n    var excludeElements = $elements && $elements.length ? $elements : $(),\n        isParent,\n        isChild,\n        excludeElementsMatched;\n\n    excludeElements.each(function (i, element) {\n      var $currEl = $(element);\n      if (!excludeElementsMatched) {\n        isParent = self.$element.find($currEl).length;\n        isChild = self.$element.closest($currEl).length;\n        excludeElementsMatched = isParent || isChild;\n      }\n    });\n\n    return excludeElementsMatched;\n  };\n\n  var excludeElements = data && data.excludeElements.length ? data.excludeElements : $(),\n      excludeElementsMatched = checkElements(excludeElements),\n      customPosition = self.position === self.POSITION_TYPE_CUSTOM,\n      ignore = excludeElementsMatched || customPosition;\n  if (!ignore) {\n    switch (data.state) {\n      case this.STATE_OVERLAY :\n        this.toggleOverlay(data.turnOn);\n        break;\n      case this.STATE_HIDDEN :\n        if (data.turnOn) {\n          this._hidePlaceholder();\n        } else {\n          this._showPlaceholder();\n        }\n        break;\n      case this.STATE_DISABLED :\n        if (data.turnOn) {\n          this.turnOnDisabled();\n        } else {\n          this.turnOffDisabled();\n        }\n        break;\n    }\n  }\n};\n\n\n/**\n * Hide placeholder element\n * @private\n */\nToolbarPlaceholder.prototype._hidePlaceholder = function () {\n  this.$element.addClass('hidden');\n};\n\n/**\n * Show placeholder element\n * @private\n */\nToolbarPlaceholder.prototype._showPlaceholder = function () {\n  this.$element.removeClass('hidden');\n};\n\n/**\n * Toggle state of overlay\n * @param {Boolean} [turnOn] - force to turn on overlay state\n */\nToolbarPlaceholder.prototype.toggleOverlay = function (turnOn) {\n  if (turnOn) {\n    this.turnOnOverlay();\n  } else {\n    this.turnOffOverlay();\n  }\n};\n\n/**\n * Turn on \"disabled\" state\n */\nToolbarPlaceholder.prototype.turnOnDisabled = function () {\n  this.$element.addClass('placeholder-disabled');\n};\n\n/**\n * Turn off \"disabled\" state\n */\nToolbarPlaceholder.prototype.turnOffDisabled = function () {\n  this.$element.removeClass('placeholder-disabled');\n};\n\n/**\n * Turn on \"overlay\" state\n */\nToolbarPlaceholder.prototype.turnOnOverlay = function () {\n  this.$element.addClass('placeholder-overlayed');\n};\n\n/**\n * Turn off \"overlay\" state\n */\nToolbarPlaceholder.prototype.turnOffOverlay = function () {\n  this.$element.removeClass('placeholder-overlayed');\n};\n\n/**\n * Adds toolbar to placeholder.\n * Shifts placeholder css position to retain its positioning\n *\n * @param {DrawerToolbar} toolbar to add\n */\nToolbarPlaceholder.prototype.addToolbar = function(toolbar) {\n  var $toolbar = toolbar.$toolbar;\n  this.$element.append($toolbar);\n\n  // set toolbar position equal to placeholder position\n  toolbar.position = this.position;\n\n  // set toolbar orientation\n  $toolbar.removeClass('toolbar-horizontal').removeClass('toolbar-vertical');\n  if (this.orientation == this.HORIZONTAL_ORIENTATION) {\n      // $toolbar.setOrientation(this.HORIZONTAL_ORIENTATION);\n      $toolbar.addClass('toolbar-horizontal');\n  } else {\n      // $toolbar.setOrientation(this.VERTICAL_ORIENTATION);\n      $toolbar.addClass('toolbar-vertical');\n  }\n\n};\n\nexport default ToolbarPlaceholder\n","import initToolbarTooltip from './ui-plugins/ToolbarTooltip'\nimport initToolbarTooltipManager from './ui-plugins/ToolbarTooltipManager'\nimport initToolbarComboBox from './ui-plugins/ToolbarComboBox'\n\nexport default (function (window, $, DrawerJs) {\n  initToolbarTooltip(window, $, DrawerJs.util, DrawerJs.utilPlugins);\n  initToolbarTooltipManager(window, $, DrawerJs.util, DrawerJs.utilPlugins)\n  initToolbarComboBox(window, $, DrawerJs.util, DrawerJs.utilPlugins)\n})\n","export default (function (window, $, util, utilPlugins) {\n  'use strict';\n\n  /**\n   * @typeDef {Object} returnObj\n   * @memberOf DrawerJs.utilPlugins.Tooltip\n   * @property {DrawerJs.utilPlugins.Tooltip} instance - Instance of tooltip plugin\n   * @property {jQuery} $trigger - Trigger element\n   * @property {DrawerJs.utilPlugins.Tooltip#destroy} destroy - Destroy instance\n   * @property {DrawerJs.utilPlugins.Tooltip#adjustPosition} adjustPosition - Refresh/change position\n   * @property {DrawerJs.utilPlugins.Tooltip#hideTooltip} hideTooltip - Hide tooltip func\n   * @property {DrawerJs.utilPlugins.Tooltip#showTooltip} showTooltip - Show tooltip func\n   **/\n\n  /**\n   * Plugin that provide ability to create tooltip for any element. Position/styles of tooltip are configurable.\n   * Can be used as jQuery plugin - $.fn.DrawerTooltip\n   * @param {HTMLElement} element - trigger element\n   * @param {DrawerJs.utilPlugins.Tooltip.defaultOptions} [options] - configuration object\n   * @returns {DrawerJs.utilPlugins.Tooltip.returnObj}\n   * @memberOf DrawerJs.utilPlugins\n   * @constructs Tooltip\n   */\n  var Tooltip = function(element, options){\n    this.$element = $(element);\n\n    this._setupOptions(options);\n    this._processOptions();\n    this._setupTooltip();\n    this._attachEventHandlers();\n\n    return {\n      instance: this,\n      $trigger: this.$element,\n      adjustPosition: this.adjustPosition.bind(this),\n      destroy: this.destroy.bind(this),\n      hideTooltip: this.hideTooltip.bind(this),\n      showTooltip: this.showTooltip.bind(this)\n    };\n  };\n\n  /**\n   * @memberOf DrawerJs.utilPlugins.Tooltip\n   * @typeDef {Object} defaultOptions\n   * @property {String} defaultClass=\"editable-canvas-tooltip\" - Tooltip class\n   * @property {String} defaultPositionX=\"center\" - Default horizontal position. Can be left/right/center\n   * @property {String} defaultPositionY=\"bottom\" - Default vertical position. Can be top/left/center\n   * @property {String} additionalClass - Tooltip additional class\n   * @property {String} text - Text of tooltip\n   * @property {Object} styleObj - Any valid css object\n   * @property {String} style - inline style of tooltip. Will be overrided if styleObj is defined\n   * @property {String} position - Position of tooltip. Any combination of left/right/center for horizontal and\n   * top/bottom/center for vertical. Valid values - \"left\", \"right top\", \"bottom left\", \"top center\", \"top\", etc.\n   * @property {jQuery} $tooltipWrapper - Wrapper element for tooltip\n   * @property {String} tooltipWrapperSelector - Selector of wrapper element for tooltip.\n   * Will be overrided if $tooltipWrapper if defined.\n   *\n   **/\n\n  /**\n   *\n   * @type {DrawerJs.utilPlugins.Tooltip.defaultOptions}\n   * @private\n   */\n  Tooltip.prototype._defaultOptions = {\n    defaultClass: 'editable-canvas-tooltip',\n    defaultPositionX: 'center',\n    defaultPositionY: 'bottom',\n    additionalClass: '',\n    text: '',\n    position: '',\n    style: '',\n    styleObj: {},\n    $tooltipWrapper: '',\n    tooltipWrapperSelector: undefined\n  };\n\n  /**\n   * Tooltip is enabled\n   * @type {boolean}\n   * @private\n   */\n  Tooltip.prototype.enabled = true;\n\n  /**\n   * Default tooltip wrapper\n   * @type {string}\n   * @private\n   */\n  Tooltip.prototype._defaultWrapper = 'body';\n\n  /**\n   * Namespace string for events\n   * @type {string}\n   * @private\n   */\n  Tooltip.prototype._eventsNamespace = '.drawerTooltip';\n\n  /**\n   * Indicates that tooltip is not displayed yet\n   * @type {boolean}\n   * @private\n   */\n  Tooltip.prototype._firstShow = true;\n\n\n  /**\n   * Setup options\n   * @param {Tooltip.defaultOptions | Object} [options] - Configuration object\n   * @returns {Tooltip.defaultOptions}\n   * @private\n   */\n  Tooltip.prototype._setupOptions = function(options) {\n    var optionsFromElement = this._collectOptionsFromElement();\n    this.options = $.extend(true, {}, this._defaultOptions || {}, optionsFromElement || {}, options || {});\n    this._initialOptions = $.extend(true, {}, options);\n    this._initialOptionsFromElement = $.extend(true, {}, optionsFromElement);\n    return this.options;\n  };\n\n\n  /**\n   * Check if jQuery element exists\n   * @param {jQuery} [element]\n   * @returns {jQuery|undefined}\n   * @private\n   */\n  Tooltip.prototype._checkElement = function(element) {\n    var result,\n        $element;\n    if (typeof element === 'string') {\n      $element = $(element);\n    }\n    if (element instanceof $) {\n      $element = element;\n    }\n    if ($element && $element.length) {\n      result = $element.eq(0);\n    }\n    return result;\n  };\n\n  /**\n   * Process collected options\n   * @private\n   */\n  Tooltip.prototype._processOptions = function() {\n    var $tooltipWrapper = this._checkElement(this.options.$tooltipWrapper),\n        $tooltipWrapperFromSelector = this._checkElement(this.options.tooltipWrapperSelector),\n        $defaultWrapper = this._checkElement(this._defaultWrapper);\n\n    this.$tooltipWrapper = $tooltipWrapper || $tooltipWrapperFromSelector || $defaultWrapper;\n  };\n\n\n  /**\n   * Setup tooltip element\n   * @private\n   */\n  Tooltip.prototype._setupTooltip = function() {\n    var tooltipHtml = this._generateTemplate(),\n        $tooltip = $(tooltipHtml);\n\n    if (this.options.styleObj) {\n      $tooltip.css(this.options.styleObj);\n    }\n    this.$element.addClass('tooltip-trigger');\n    this.$element.data('DrawerTooltip', this);\n    this.$tooltipWrapper.append($tooltip);\n    this.$tooltip = $tooltip;\n  };\n\n  /**\n   * Generate html of tooltip\n   * @returns {string}\n   * @private\n   */\n  Tooltip.prototype._generateTemplate = function () {\n    var html,\n        content = this.options.text || '',\n        classString = this.options.defaultClass + ' ' + this.options.additionalClass,\n        styleString = this.options.style || '';\n\n    html = '' +\n        '<span ' +\n          'class=\"' + classString + '\"' +\n          'style=\"' + styleString + '\"' +\n        '>' +\n        content +\n        '</span>';\n\n    return html;\n  };\n\n  /**\n   * Setup/attach event handlers\n   * @private\n   */\n  Tooltip.prototype._attachEventHandlers = function() {\n    var self = this,\n        $trigger = this.$element;\n    this._detachEventHandlers();\n    $trigger.on('mouseenter' + this._eventsNamespace, function (e) {\n      var $eventTrigger = $(e.currentTarget),\n          $body = $('body'),\n          isMoving = $body.hasClass('drawer-moving'),\n          isResizing = $body.hasClass('drawer-resizing'),\n          tooltipIsDisabled = $trigger.hasClass('disabled'),\n          ignore = isMoving || isResizing || tooltipIsDisabled;\n      if (!ignore) {\n        self.showTooltip($eventTrigger);\n      }\n    });\n    $trigger.on('mouseout' + this._eventsNamespace, function () {\n      self.hideTooltip();\n    });\n  };\n\n  /**\n   * Detach event handlers\n   * @private\n   */\n  Tooltip.prototype._detachEventHandlers = function() {\n    this.$element.off('mouseenter' + this._eventsNamespace);\n    this.$element.off('mouseout' + this._eventsNamespace);\n  };\n\n  /**\n   * Helper function which provides ability to parse string for position values\n   * @param {String} position\n   * @returns {Object}\n   * @private\n   */\n  Tooltip.prototype._parsePositionString = function(position) {\n    position = position || this.options.position || '';\n    var result = {},\n        haveAxisX = position.indexOf('right') !== -1 || position.indexOf('left') !== -1,\n        positionX = haveAxisX && (position.indexOf('right') !== -1 ? 'right' : 'left'),\n        haveAxisY = position.indexOf('top') !== -1 || position.indexOf('bottom') !== -1,\n        positionY = haveAxisY && (position.indexOf('top') !== -1 ? 'top' : 'bottom');\n\n\n    positionX = positionX || (haveAxisY ? 'center' : this.options.defaultPositionX);\n    positionY = positionY || (haveAxisX ? 'center' : this.options.defaultPositionY);\n\n    result.positionX = positionX;\n    result.positionY = positionY;\n\n    return result;\n  };\n\n  /**\n   *\n   * @param onlyClasses\n   * @private\n   */\n  Tooltip.prototype._resetTooltip = function(onlyClasses) {\n\n  };\n\n  /**\n   * Adjust tooltip position\n   * @param {String|undefined} [positionString] - Position of tooltip. Any combination of left/right/center for horizontal and\n   * top/bottom/center for vertical. Valid values - \"left\", \"right top\", \"bottom left\", \"top center\", \"top\", etc.\n   * @param {jQuery} [$trigger] - trigger element\n   */\n  Tooltip.prototype.adjustPosition = function(positionString, $trigger) {\n    if (!this.enabled) {\n      return;\n    }\n    $trigger = $trigger || this.$element;\n    var position = this._parsePositionString(positionString),\n        $tooltip = this.$tooltip;\n\n    var top = 0;\n    var left = 0;\n\n    var arrowSize = 8,\n        scroll = util.getScrollTopFromElement($trigger),\n        triggerSizes = $trigger.get(0).getBoundingClientRect(),\n        tooltipSizes = $tooltip.get(0).getBoundingClientRect();\n\n    switch (position.positionX) {\n      case 'right':\n        left = scroll.left + triggerSizes.left + triggerSizes.width + arrowSize;\n        break;\n      case 'left':\n        left = scroll.left + triggerSizes.left - tooltipSizes.width - arrowSize;\n        break;\n      default:\n        left = scroll.left + triggerSizes.left + (triggerSizes.width - tooltipSizes.width)/2 ;\n        break;\n    }\n\n    switch (position.positionY) {\n      case 'top':\n        top = scroll.top + triggerSizes.top - tooltipSizes.height - arrowSize;\n        break;\n      case 'bottom':\n        top = scroll.top + triggerSizes.top + triggerSizes.height + arrowSize;\n        break;\n      default:\n        top = scroll.top + triggerSizes.top + (triggerSizes.height - tooltipSizes.height)/2;\n        break;\n    }\n\n    $tooltip.attr('positionX',position.positionX);\n    $tooltip.attr('positionY',position.positionY);\n    $tooltip.css({\n      top: top + 'px',\n      left: left + 'px'\n    });\n  };\n\n  /**\n   * Collect array of available options from trigger element\n   * @param {jQuery} [$trigger]\n   * @returns {Object}\n   * @private\n   */\n  Tooltip.prototype._collectOptionsFromElement = function($trigger) {\n    $trigger = $trigger || this.$element;\n    var result = {};\n\n    result.items = [];\n      var triggerText = $trigger.text(),\n          text = $trigger.attr('tooltip-text'),\n          style = $trigger.attr('tooltip-style') || '',\n          position = $trigger.attr('tooltip-position') || '';\n    result.text = text || triggerText;\n    result.style = style;\n    result.position = position;\n    return result;\n  };\n\n  /**\n   * Destroy current instance of tooltip. Remove all elements and detach events.\n   */\n  Tooltip.prototype.destroy = function() {\n    this._detachEventHandlers();\n    this.$tooltip.remove();\n    this.$element.data('DrawerTooltip', undefined);\n    this.$element.removeClass('tooltip-trigger');\n    this.enabled = false;\n  };\n\n  /**\n   * Show tooltip\n   * @param {jQuery} [$trigger] - trigger element. For correct positioning\n   */\n  Tooltip.prototype.showTooltip = function($trigger) {\n    if (this.enabled) {\n      this.$element.trigger('showTooltip');\n      this._firstShow = false;\n      if (!this.$tooltip.is(':visible')) {\n        this.$tooltip.addClass('tooltip-transparent');\n      }\n      this.adjustPosition(undefined, $trigger);\n      this.$tooltip.removeClass('tooltip-transparent');\n      this.$tooltip.addClass('active');\n      this.isVisible = true;\n    }\n  };\n\n  /**\n   * Hide tooltip\n   */\n  Tooltip.prototype.hideTooltip = function() {\n    if (this.enabled && this.isVisible) {\n      this.$tooltip.removeClass('active');\n      this.isVisible = false;\n    }\n  };\n\n  /**\n   * @Function\n   * @param {Object} [options]\n   * @returns {Tooltip[]}\n   * @memberOf external:\"jQuery.fn\"\n   */\n  $.fn.DrawerTooltip = function (options) {\n    var instances = [];\n    $(this).each(function (i, element) {\n      var newInstance = new Tooltip(element, options);\n      $(element).data('DrawerTooltip', newInstance);\n      instances.push(newInstance);\n    });\n    return instances;\n  };\n\n  /**\n   * @Function\n   * @memberOf external:\"jQuery.fn\"\n   * @returns {Tooltip|Tooltip[]}\n   */\n  $.fn.getDrawerTooltip = function () {\n    var instances = [];\n    $(this).each(function (i, element) {\n      var currInstance = $(element).data('DrawerTooltip');\n      if (currInstance) {\n        instances.push(currInstance);\n      }\n    });\n    return instances.length > 1 ? instances : instances[0];\n  };\n\n  utilPlugins.Tooltip = Tooltip;\n})\n","import ToolbarPlaceholder from '../ToolbarPlaceholder'\n\nexport default (function (window, $, util, utilPlugins) {\n  'use strict';\n\n  /**\n   * @typeDef {Object} returnObj\n   * @memberOf DrawerJs.utilPlugins.TooltipManager\n   * @property {TooltipManager} instance - instance of tooltip manager\n   * @property {TooltipManager#createTooltip} createTooltip - Create tooltip\n   * @property {TooltipManager#removeAllTooltips} removeAllTooltips - Destroy all tooltips and all attached events\n   * @property {TooltipManager#hideAllTooltips} hideAllTooltips - Hide all tooltips\n   **/\n\n  /**\n   * Provides ability for Drawer to create/use tooltips.\n   * @param {Drawer} drawer - trigger element\n   * @param {TooltipManager.defaultOptions} [options] - configuration object\n   * @returns {DrawerJs.utilPlugins.TooltipManager.returnObj}\n   * @memberOf DrawerJs.utilPlugins\n   * @constructs TooltipManager\n   */\n  var TooltipManager = function (drawer, options) {\n    this.drawerInstance = drawer;\n\n    this._setupOptions(options);\n    this._processOptions();\n    this._createHelperElements();\n    this._attachDrawerEventHandlers();\n    this._attachEventHandlers();\n\n    return {\n      instance: this,\n      createTooltip: this.createTooltip.bind(this)\n    };\n  };\n\n  /**\n   * @memberOf DrawerJs.utilPlugins.TooltipManager\n   * @typeDef {Object} defaultOptions\n   * @property {Object} [style] - Allows css customizations of buttons tooltips. Could be any valid css object\n   *\n   **/\n\n  /**\n   *\n   * @type {DrawerJs.utilPlugins.TooltipManager.defaultOptions}\n   * @private\n   */\n  TooltipManager.prototype._defaultOptions = {\n    tooltipCss: {}\n  };\n\n  /**\n   * Array of tooltip instances\n   * @type {Array}\n   * @private\n   */\n  TooltipManager.prototype._tooltipInstances = [];\n\n  /**\n   * Setup options\n   * @param {DrawerJs.utilPlugins.TooltipManager.defaultOptions | Object} [options] - Configuration object\n   * @returns {DrawerJs.utilPlugins.TooltipManager.defaultOptions}\n   * @private\n   */\n  TooltipManager.prototype._setupOptions = function (options) {\n    var optionsFromDrawer = {\n      styleObj: this.drawerInstance.options.tooltipCss\n    };\n    this.options = $.extend(true, {}, this._defaultOptions || {}, optionsFromDrawer, options || {});\n    this._initialOptions = $.extend(true, {}, options);\n    return this.options;\n  };\n\n  /**\n   * Process options\n   * @private\n   */\n  TooltipManager.prototype._processOptions = function () {\n\n  };\n\n\n  /**\n   * Create new tooltip(s)\n   * @param {jQuery} elements\n   * @param {DrawerJs.utilPlugins.Tooltip.defaultOptions} [options]\n   * @returns {DrawerJs.utilPlugins.Tooltip[]}\n   */\n  TooltipManager.prototype.createTooltip = function (elements, options) {\n    elements = elements || [];\n    var self = this,\n        newInstances = [],\n        newTooltip,\n        optionsForTooltip = $.extend(true, {}, this.options, options || {});\n    elements.each(function (i, element) {\n      newTooltip = new utilPlugins.Tooltip(element, optionsForTooltip);\n      self._tooltipInstances.push(newTooltip);\n      newInstances.push(newTooltip);\n    });\n    return newInstances;\n  };\n\n  /**\n   * Destroy all tooltips and all attached events\n   */\n  TooltipManager.prototype.removeAllTooltips = function () {\n    this._tooltipInstances.forEach(function (tooltip) {\n      tooltip.destroy();\n    });\n    this._tooltipInstances = [];\n  };\n\n  /**\n   * Hide all tooltips\n   */\n  TooltipManager.prototype.hideAllTooltips = function () {\n    this._tooltipInstances.forEach(function (tooltip) {\n      tooltip.hideTooltip();\n    });\n  };\n\n  /**\n   * Remove helper elements such as tooltip container\n   * @private\n   */\n  TooltipManager.prototype._removeHelperElements = function () {\n    if (this.drawerInstance.$tooltipContainer && this.drawerInstance.$tooltipContainer.length) {\n      this.drawerInstance.$tooltipContainer.remove();\n    }\n  };\n\n  /**\n   * Create helper elements such as tooltip container\n   * @private\n   */\n  TooltipManager.prototype._createHelperElements = function () {\n    this._removeHelperElements();\n    var currDrawerInstanceId = this.drawerInstance.id,\n        tooltipContainerHtml = '' +\n            '<div ' +\n            'class=\"tooltip-container\" ' +\n            'data-drawer-instance=\"' + currDrawerInstanceId + '\">' +\n            '</div>';\n\n    var $tooltipContainer = $(tooltipContainerHtml),\n        $body = $('body');\n\n    $body.append($tooltipContainer);\n\n    this.options.$tooltipWrapper = $tooltipContainer;\n    this.drawerInstance.$tooltipContainer = $tooltipContainer;\n  };\n\n  /**\n   * Setup/attach drawer handlers\n   * @private\n   */\n  TooltipManager.prototype._attachDrawerEventHandlers = function () {\n    var self = this;\n\n    this.drawerInstance.on(this.drawerInstance.EVENT_CREATE_TOOLTIP, function (fEvent, elements, options) {\n      return self.createTooltip(elements, options);\n    });\n\n    this.drawerInstance.on(this.drawerInstance.EVENT_HIDE_TOOLTIPS, function () {\n      self.hideAllTooltips();\n    });\n\n    this.drawerInstance.on(this.drawerInstance.EVENT_DESTROY_TOOLTIPS, function () {\n      self.removeAllTooltips();\n    });\n\n    this.drawerInstance.on('destroy', function () {\n      self.removeAllTooltips();\n    });\n  };\n\n\n  /**\n   * Setup/attach event handlers\n   * @private\n   */\n  TooltipManager.prototype._attachEventHandlers = function () {\n    $('body').off('showTooltip').on('showTooltip', '.tooltip-trigger', function (e) {\n      var $trigger = $(e.currentTarget),\n          tooltipInstance = $trigger.data('DrawerTooltip');\n      if (tooltipInstance._firstShow) {\n        var $toolbarPlaceholder = $trigger.closest('.toolbar-placeholder'),\n            toolbarPosition = $toolbarPlaceholder.attr('data-position'),\n            tooltipPosition;\n        switch (toolbarPosition) {\n          case ToolbarPlaceholder.prototype.TOP_POSITION :\n            tooltipPosition = ToolbarPlaceholder.prototype.BOTTOM_POSITION;\n            break;\n          case ToolbarPlaceholder.prototype.BOTTOM_POSITION :\n            tooltipPosition = ToolbarPlaceholder.prototype.TOP_POSITION;\n            break;\n          case ToolbarPlaceholder.prototype.LEFT_POSITION :\n            tooltipPosition = ToolbarPlaceholder.prototype.RIGHT_POSITION;\n            break;\n          case ToolbarPlaceholder.prototype.RIGHT_POSITION :\n            tooltipPosition = ToolbarPlaceholder.prototype.LEFT_POSITION;\n            break;\n        }\n        if (tooltipPosition) {\n          tooltipInstance.options.position = tooltipPosition;\n        }\n      }\n    });\n  };\n\n  utilPlugins.TooltipManager = TooltipManager;\n})\n","export default (function (window, $, util, utilPlugins) {\n  'use strict';\n  var emptyFunc = function () {},\n      eventNameSpace = '.ToolbarComboBox';\n\n  /**\n   * @typeDef {Object} returnObj\n   * @memberOf ToolbarComboBox\n   * @property {ToolbarComboBox} instance - instance of combo box\n   * @property {ToolbarComboBox#updateSelectedValues} updateSelectedValues - Update selected values func\n   * @property {ToolbarComboBox#hideDropdown} hideDropdown - Hide dropdown func\n   * @property {ToolbarComboBox#showDropdown} showDropdown - Show dropdown func\n   **/\n\n  /**\n   * @param {HTMLElement} element - trigger element\n   * @param {ToolbarComboBox.defaultOptions} [options] - configuration object\n   * @returns {ToolbarComboBox.returnObj}\n   * @memberOf DrawerJs.utilPlugins\n   * @constructs ToolbarComboBox\n   */\n  var ToolbarComboBox = function(element, options){\n    this.$element = $(element);\n\n    this._setupOptions(options);\n    this._setupCombobox();\n    this._attachEventHandlers();\n    this._attachDrawerEventHandlers();\n\n    return {\n      instance: this,\n      updateSelectedValues: this.updateSelectedValues.bind(this),\n      hideDropdown: this.hideDropdown.bind(this),\n      showDropdown: this.hideDropdown.bind(this)\n    };\n  };\n\n  /**\n   * @memberOf ToolbarComboBox\n   * @typeDef {Object} defaultOptions\n   * @property {String} wrapper=\"toolbar-combobox-wrapper\" - wrapper class\n   * @property {Boolean} editable=false - wrapper class\n   * @property {Boolean} addNewOptions=false - wrapper class\n   * @property {Boolean} buttonMode=false - wrapper class\n   * @property {Array} items - wrapper class\n   *\n   **/\n\n  /**\n   *\n   * @type {ToolbarComboBox.defaultOptions}\n   * @private\n   */\n  ToolbarComboBox.prototype._defaultOptions = {\n    wrapper: 'toolbar-combobox-wrapper',\n    editable: false,\n    addNewOptions: false,\n    buttonMode: false,\n    items: []\n  };\n\n  /**\n   * Setup options\n   * @param {ToolbarComboBox.defaultOptions | Object} [options] - Configuration object\n   * @returns {ToolbarComboBox.defaultOptions}\n   * @private\n   */\n  ToolbarComboBox.prototype._setupOptions = function(options) {\n    var optionsFromElement = this._collectOptionsFromElement();\n    this.options = $.extend(true, {}, this._defaultOptions || {}, optionsFromElement || {}, options || {});\n    this._initialOptions = $.extend(true, {}, options);\n    this._initialOptionsFromElement = $.extend(true, {}, optionsFromElement);\n    return this.options;\n  };\n\n  /**\n   * Setup combobox element\n   * @private\n   */\n  ToolbarComboBox.prototype._setupCombobox = function() {\n    var comboboxHtml = this._generateTemplate(),\n        $comboboxElement = $(comboboxHtml);\n\n    $comboboxElement.insertAfter(this.$element);\n    this.$element.addClass('hidden');\n\n    this.$combobox = $comboboxElement;\n    this.$options = this.$combobox.find('ul');\n    this.$dropdown = this.$combobox.find(\".dropdown-box\");\n    this.$input = this.$combobox.find(\"input\");\n    this.$closestToolbarItem = this.$element.closest('.toolbar-item-wrapper');\n  };\n\n  /**\n   * Generate html of combobox\n   * @returns {string}\n   * @private\n   */\n  ToolbarComboBox.prototype._generateTemplate = function() {\n    var _self = this,\n        inputHtml =  '<div class=\"inputbox\"><input type=\"text\"/></div>',\n        optionsHtml = '',\n        html;\n\n\n    this.options.items.forEach(function(item){\n      var isObj = typeof item === 'object',\n          valueToFill = isObj ? item.value : item,\n          textToFill = isObj ? item.text || valueToFill : valueToFill,\n          styleToFill = isObj ? item.style || '' : '',\n          currItemHtml;\n      currItemHtml = _self._generateNewOptionItem(textToFill, valueToFill, false, true, styleToFill);\n      optionsHtml +=currItemHtml;\n    });\n\n    this.wrapperClasses = this.options.wrapper +\n        (this.options.buttonMode ? ' button-mode ' : '') +\n        (this.options.editable ? ' edit-mode ' : '');\n\n    html = '' +\n        '<div class=\"' + this.wrapperClasses + ' collapsed\" tabindex=\"-1\">' +\n          '<div class=\"selected\">' +\n            '<span></span>' +\n            '<a class=\"ui-button\"><i class=\"fa fa-angle-down\"></i></a>' +\n          '</div>' +\n          '<div class=\"dropdown-box\">' +\n            (this.options.editable ? inputHtml : '') +\n            '<ul class=\"option-list\">' +\n              optionsHtml +\n            '</ul>' +\n          '</div>' +\n        '</div>';\n    return html;\n  };\n\n  /**\n   *\n   * @param {String} [txt] - Text value of option\n   * @param {String} val - Value of option\n   * @param {Boolean} [isSelected] - This option is selected\n   * @param {Boolean} returnHtml - Need return html string\n   * @param {String} [style] - Inline styles of option\n   * @returns {jQuery|String}\n   * @private\n   */\n  ToolbarComboBox.prototype._generateNewOptionItem = function (txt, val, isSelected, returnHtml, style) {\n    txt = txt || '';\n    style = style || '';\n    var optionItemHtml = '' +\n        '<li ' +\n          'style=\"' + style + '\"' +\n          'data-val=\"' + val + '\"' +\n          'class=\"option-item\">' +\n            '<div class=\"option-item-text\">' + txt + '</div>' +\n        '</li>';\n    var $optionItem = $(optionItemHtml);\n    if (isSelected) {\n      this.$combobox.find(\".selected\").attr(\"data-val\", val).find('span').text(txt);\n      $optionItem.addClass('selected');\n    }\n    return returnHtml ? $optionItem.get(0).outerHTML : $optionItem;\n  };\n\n  /**\n   * Setup size of dropdown\n   * @private\n   */\n  ToolbarComboBox.prototype._setupDropDownSize = function() {\n    var comboboxWidth = this.$combobox.width();\n    if (comboboxWidth) {\n\n      this.sizesUpdated = true;\n    }\n  };\n\n  /**\n   * Setup/attach drawer handlers\n   * @private\n   */\n  ToolbarComboBox.prototype._attachDrawerEventHandlers = function() {\n    var _self = this,\n        $closestToolbarItem = this.$element.closest('.toolbar-item-wrapper');\n\n    if ($closestToolbarItem && $closestToolbarItem.length) {\n\n      util.bindClick($('body'), '_optionTool_toggleDropdown', function (event) {\n        var $target = $(event.target),\n            $clickToolbarItem = $target.closest('.toolbar-item-wrapper'),\n            isCanvas = $target.is('canvas'),\n            sameToolControl = $closestToolbarItem.get(0) === $clickToolbarItem.get(0),\n            needToHide = !sameToolControl && !isCanvas;\n        if (needToHide) {\n          $closestToolbarItem.find('.toolbar-dropdown-block').addClass('collapsed');\n          _self.hideDropdown();\n        }\n      });\n\n      util.bindClick($closestToolbarItem.find('.toolbar-item-icon'), '_optionTool_toggleDDropdown', function (event) {\n        var needRemoveClass = $closestToolbarItem.find('.toolbar-dropdown-block').hasClass('collapsed'),\n            toolbarHaveScrollable;\n        if (needRemoveClass) {\n          var toolbar = _self.options && _self.options.drawer && _self.options.drawer.toolbars && _self.options.drawer.toolbars.toolOptionsToolbar,\n              toolbarOptions = toolbar && toolbar.options,\n              notInsidePopup = toolbarOptions && toolbarOptions.position !== 'popup',\n              outside = toolbarOptions && toolbarOptions.positionType === 'outside',\n              insideScrollable = toolbarOptions && toolbarOptions.compactType === 'scrollable';\n          toolbarHaveScrollable = notInsidePopup && outside && insideScrollable;\n          if (toolbarHaveScrollable) {\n            var clone = _self.$combobox.clone(true);\n            // _self.$cloneControl = $('<div class=\"colorpicker-control\"></div>');\n            // _self.$cloneDropdown = this.$colorButton.$colorDropdown.clone(true);\n            // _self.$cloneControl.append(this.$cloneDropdown);\n            $closestToolbarItem.closest('.toolbar-placeholder').append(clone);\n            clone.addClass('combobox-cloned');\n            _self.$clonedCombobox = clone;\n\n            var drawerSizes = util.getScrollOffset(_self.options.drawer.$canvasEditContainer),\n                parentSizes = util.getScrollOffset(_self.$element.parent()),\n                canvasRect = _self.options.drawer.$canvasEditContainer.get(0).getBoundingClientRect();\n\n            var left = _self.$element.parent().get(0).getBoundingClientRect().left,\n                clonedComboboxLeft = (left - canvasRect.left - (parentSizes.left - drawerSizes.left)) - _self.$clonedCombobox.width() / 2;\n            _self.$clonedCombobox.css({\n              'left': clonedComboboxLeft\n            });\n          }\n        }\n\n        if (!toolbarHaveScrollable) {\n          $closestToolbarItem.find('.toolbar-dropdown-block').toggleClass('collapsed', !needRemoveClass);\n        }\n\n      });\n    }\n  };\n\n  /**\n   * Setup/attach event handlers\n   * @private\n   */\n  ToolbarComboBox.prototype._attachEventHandlers = function() {\n    var _self = this;\n    if (this.options.editable) {\n      var $input = this.$input,\n          bEdit;\n\n      $input.off('focus' + eventNameSpace).on('focus' + eventNameSpace, function(e){\n        _self.$combobox.addClass('focus');\n        bEdit = true;\n      });\n\n      $input.off('blur' + eventNameSpace).on('blur' + eventNameSpace, function(e){\n        bEdit = false;\n        _self.$combobox.trigger('blur');\n      });\n\n      $input.off('keypress' + eventNameSpace).on('keypress' + eventNameSpace, function(e){\n        if (e.keyCode == \"13\") {\n          var val = $input.val();\n\n          $input.val('');\n\n\n          var $originalSelect = $(\"<option>\").val(val).text(val).attr('data-is-input', 1);\n          _self.$element.append($originalSelect);\n\n          if (_self.options.addNewOptions) {\n            var $opt = _self._generateNewOptionItem(val, val, true);\n            _self.$options.append($opt);\n          }\n\n          _self.changeActiveOption(val);\n        }\n      });\n    }\n\n    this.$element.off('valueChanged' + eventNameSpace).on('valueChanged' + eventNameSpace, function(e, valueObj){\n      var valueFromElement = _self.$element.val(),\n          valueFromObject = valueObj ? valueObj.value : undefined,\n          value = valueObj ? valueFromObject : valueFromElement,\n          classes;\n\n      if (valueObj) {\n        classes = valueObj.classString;\n      }\n\n      _self.updateSelectedValues(value, classes);\n    });\n\n    this.$element.off('change' + eventNameSpace).on('change' + eventNameSpace, function(e){\n      if (!_self.addNewOptions) {\n        var $element = _self.$element,\n            prevValue = $element.attr('prev-value'),\n            prevValueIsNotInitial = _self.options.valuesArr.indexOf(prevValue) === -1;\n        if (prevValueIsNotInitial) {\n          $element.find('option[data-val=\"' + prevValue + '\"]').remove();\n        }\n      }\n    });\n\n\n    this.$combobox.off('mouseleave' + eventNameSpace).on('mouseleave' + eventNameSpace, function(e){\n      var $closestToolbarItem = _self.$element.closest('.toolbar-item-wrapper');\n      $closestToolbarItem.find('.toolbar-dropdown-block').addClass('collapsed');\n      _self.hideDropdown();\n    });\n\n    this.$combobox.off('click' + eventNameSpace + '_optionSelect').on('click' + eventNameSpace + '_optionSelect', '.option-item', this._onOptionSelect.bind(this));\n\n    this.$combobox.off('click' + eventNameSpace + '_toggleDropdown').on('click' + eventNameSpace + '_toggleDropdown', '.selected', function(){\n      _self.toggleDropdown();\n    });\n\n    this.$combobox.off('blur' + eventNameSpace).on('blur' + eventNameSpace, function (e) {\n      e.preventDefault();\n      setTimeout(function () {\n        if (bEdit) return;\n        _self.hideDropdown();\n      }, 100);\n      _self.$combobox.removeClass('focus');\n    });\n  };\n\n  /**\n   * Collect array of available options from trigger element\n   * @returns {Object}\n   * @private\n   */\n  ToolbarComboBox.prototype._collectOptionsFromElement = function() {\n    var result = {};\n\n    var isEditable = this.$element.attr('data-editable') && this.$element.attr('data-editable') === 'true';\n\n    result.items = [];\n    result.valuesArr = [];\n    this.$element.find('option').each(function (i, item) {\n      var $item = $(item),\n          value = $item.val(),\n          text = $item.text(),\n          style = $item.attr('style') || '',\n          currItemObj = {\n            value: value,\n            text: text,\n            style: style\n          };\n      result.valuesArr.push(value);\n      result.items.push(currItemObj);\n    });\n\n    result.editable = isEditable;\n\n    return result;\n  };\n\n  /**\n   * React on select of option\n   * @param {Event} event\n   * @private\n   */\n  ToolbarComboBox.prototype._onOptionSelect = function(event) {\n    var $selectedOption = $(event.currentTarget),\n        alreadySelected = $selectedOption.hasClass('selected'),\n        selectedValue = !alreadySelected ?  $selectedOption.attr('data-val') : '',\n        selectedText = $selectedOption.text();\n    this.hideDropdown();\n    this.changeActiveOption(selectedValue, selectedText);\n    event.stopPropagation();\n    event.preventDefault();\n  };\n\n  /**\n   * Change current active option\n   * @param {String} [value] - Value of new active option\n   * @param {*} [text] - Text of new active option\n   */\n  ToolbarComboBox.prototype.changeActiveOption = function(value, text) {\n    var prevValue = this.$element.val();\n\n    this.$element.attr('prev-value', prevValue);\n    this.$element.val(value);\n\n    this.updateSelectedValues(value);\n\n    this.$element.trigger('toolbarOptionChange');\n  };\n\n  /**\n   * Update selected values\n   * @param {*} [value] - Value of selected option\n   * @param {String} [classes] - Additional classes\n   * @param {String} [optionName] - Name of option\n   */\n  ToolbarComboBox.prototype.updateSelectedValues = function(value, classes, optionName) {\n    value = value || '';\n    var $allOptions = this.$combobox.find('.option-item'),\n        $neededOption = $allOptions.filter('[data-val=\"' + value + '\"]'),\n        neededText = $neededOption && $neededOption.length ? $neededOption.text() : value,\n        collapsedClass = this.$combobox.hasClass('collapsed') ? ' collapsed' : '',\n        wrapperClasses = this.wrapperClasses + ' ' + (classes || '') + collapsedClass;\n\n\n    this.$combobox.attr('class', wrapperClasses);\n    this.$combobox.find(\".selected span\").text(neededText);\n\n    $allOptions.removeClass('selected');\n    if ($neededOption) {\n      $neededOption.addClass('selected');\n      this.$input.val('');\n    } else {\n      this.$input.val(value);\n    }\n  };\n\n\n  /**\n   * Show combobox dropdown\n   */\n  ToolbarComboBox.prototype.showDropdown = function() {\n    this.dropdownIsVisible = true;\n    if (!this.sizesUpdated) {\n      this._setupDropDownSize();\n    }\n    this.$combobox.find('.ui-button .fa').addClass('fa-angle-down').removeClass('fa-angle-up');\n    this.$combobox.removeClass('collapsed');\n  };\n\n  /**\n   * Hide combobox dropdown\n   */\n  ToolbarComboBox.prototype.hideDropdown = function() {\n    this.dropdownIsVisible = false;\n    this.$combobox.addClass('collapsed');\n    this.$combobox.find('.ui-button .fa').removeClass('fa-angle-down').addClass('fa-angle-up');\n\n    if (this.$clonedCombobox) {\n      this.$clonedCombobox.remove();\n    }\n  };\n\n  /**\n   * Toggle visibility of combobox dropdown\n   * @param {Boolean} [show] - new state of dropdown\n   */\n  ToolbarComboBox.prototype.toggleDropdown = function(show) {\n    var needToShow = show !== undefined ? show : !this.dropdownIsVisible;\n    this.dropdownIsVisible = needToShow;\n\n    if (needToShow) {\n      this.showDropdown();\n    } else {\n      this.hideDropdown();\n    }\n  };\n\n  /**\n   * @Function\n   * @param options\n   * @returns {ToolbarComboBox[]}\n   * @memberOf external:\"jQuery.fn\"\n   */\n  $.fn.ToolbarComboBox = function (options) {\n    var instances = [];\n    $(this).each(function (i, element) {\n      var newInstance = new ToolbarComboBox(element, options);\n      $(element).data('comboBox', newInstance);\n      instances.push(newInstance);\n    });\n    return instances;\n  };\n\n  /**\n   * @Function\n   * @memberOf external:\"jQuery.fn\"\n   * @returns {ToolbarComboBox|ToolbarComboBox[]}\n   */\n  $.fn.getComboBox = function () {\n    var instances = [];\n    $(this).each(function (i, element) {\n      var currInstance = $(element).data('comboBox');\n      if (currInstance) {\n        instances.push(currInstance);\n      }\n    });\n    return instances.length > 1 ? instances : instances[0];\n  };\n\n  utilPlugins.ToolbarComboBox = ToolbarComboBox;\n})\n","/**\n * List of all available options for each mode of each toolbar\n * @typedef {Object} defaultSetOfOptions\n * @memberOf DrawerToolbar\n * @property {Boolean} [hidden=false] - Toolbar is hidden (via CSS)\n * @property {String} [position=\"top\"] - Position of the toolbar relative to the Drawer - top/right/left/bottom/custom\n * @property {Boolean} [toggleVisibilityButton=false] - Use \"Toggle visibility\" button. Will be ignored if compact type = 'popup'\n * @property {String} [positionType=\"outside\"] - Position type - inside/outside canvas\n * @property {String} [compactType=\"multiple\"] - Compact type - scrollable/multiple/popup\n * @property {String} [customAnchorSelector] - Anchor selector for custom position\n */\n\nvar emptyFunc = function() {};\n\n/**\n * Default configuration object of toolbar\n * @typedef {DrawerToolbar.defaultSetOfOptions} defaultToolbarOptions\n * @memberOf DrawerToolbar\n * @property {DrawerToolbar.defaultSetOfOptions} fullscreenMode - Options for fullscreen mode. Able to use same\n * options as for normal mode. Undefined options will be inherited from normal mode\n */\n\n/**\n * Configuration object of button.\n * @typedef {Object} DrawerToolbar.buttonConfig\n * @property {String} [additionalClass] add specified class to button's <li> element.\n * @property {String} [iconClass] add specified class to button's <i> element.\n * @property {String} [tooltipText] Tooltip text that will be shown on mouse over.\n * @property {Number} [buttonOrder=10] Order priority of button. Button with min order value will be first.\n * @property {Boolean} [isSubMenu=false] Button is submenu of other button\n * @property {Function} [clickHandler] function that will be invoked when user clicks on this button.\n * @property {Object} [group]  Group object with group class name and tooltip text\n * @property {String} [group.name]  Group unique id\n * @property {String} [group.tooltip]  A tooltip text that will be shown on mouse over\n */\n\n/**\n * Toolbar with tools like brush/rectangle/text etc.\n * @param {DrawerJs.Drawer} drawerInstance - Drawer instance\n * @param {DrawerToolbar.defaultSetOfOptions} [options] Configuration object\n * @constructor DrawerToolbar\n */\nvar DrawerToolbar = function (drawerInstance, options) {\n  if (!drawerInstance) {\n    throw new Error(\"DrawerToolbar c-tor : drawerInstance is not set!\");\n  }\n  this.drawerInstance = drawerInstance;\n  this.buttonsGroups = {};\n\n  this._setupOptions(options);\n  this._setupElement();\n  this._attachEventHandlers();\n  this._attachDrawerEventHandlers();\n  this._initCompactType();\n};\n\nDrawerToolbar.prototype.MULTILINE = 'multiline';\nDrawerToolbar.prototype.SCROLLABLE = 'scrollable';\nDrawerToolbar.prototype.POPUP = 'popup';\n\nDrawerToolbar.prototype.POSITION_TYPE_OUTSIDE = 'outside';\nDrawerToolbar.prototype.POSITION_TYPE_INSIDE = 'inside';\n\n/**\n * Toolbar position - one of [left, top, right, bottom, custom]\n * @type {string}\n */\nDrawerToolbar.prototype.position = 'top';\n// button groups\nDrawerToolbar.prototype.buttonsGroups = {};\nDrawerToolbar.prototype.buttons = [];\n\nDrawerToolbar.prototype._defaultOptions = {\n    compactType : DrawerToolbar.prototype.MULTILINE,\n    positionType: DrawerToolbar.prototype.POSITION_TYPE_OUTSIDE,\n    buttonWidth : 32,\n    buttonHeight : 35\n};\n\n/**\n * Default values of button config\n * @type {DrawerToolbar.buttonConfig}\n * @private\n */\nDrawerToolbar.prototype._defaultButtonConfig = {\n  additionalClass: '',\n  iconClass: '',\n  tooltipText: '',\n  buttonOrder: 10,\n  isSubMenu: false,\n  group: {\n    name: '',\n    tooltip: ''\n  },\n  clickHandler: emptyFunc\n};\n\n/**\n * Setup options\n * @param {Object} [options] - Configuration object\n * @private\n */\nDrawerToolbar.prototype._setupOptions = function (options) {\n  this.options = $.extend(true, {}, this._defaultOptions || {}, options || {});\n};\n\n/**\n * Create/setup toolbar element\n * @private\n */\nDrawerToolbar.prototype._setupElement = function () {\n  var toolbarHtml = this._generateTemplate(),\n      $toolbar = $(toolbarHtml);\n  this.$toolbar = $toolbar;\n  this.$toolbarContentHolder = this.$toolbar.find('.toolbar-content-wrapper');\n};\n\n/**\n * Get html of toolbar element\n * @returns {String}\n * @private\n */\nDrawerToolbar.prototype._generateTemplate = function () {\n  var html,\n      wrapperClasses = 'editable-canvas-toolbar ' +\n          (this.options.toolbarClass || '') +\n          (this.options.hidden ? ' hidden ' : '');\n\n  html = '' +\n      '<ul class=\"' + wrapperClasses + '\" ' +\n        'contenteditable=\"false\"' +\n        // 'tabindex=\"-1\"' +\n      '>' +\n          '<ul class=\"toolbar-content-wrapper\"></ul>' +\n      '</ul>';\n  return html;\n};\n\n/**\n * Setup events\n * @private\n */\nDrawerToolbar.prototype._attachEventHandlers = function () {\n\n};\n\n/**\n * Setup drawer events\n * @private\n */\nDrawerToolbar.prototype._attachDrawerEventHandlers = function () {\n  var self = this;\n  // always hide group dropdown when any tool activates\n  this.drawerInstance.on(this.drawerInstance.EVENT_DO_ACTIVATE_TOOL, function () {\n    // self.$toolbar.find('ul.group-items-container').addClass('hidden');\n    // @todo: hide all open sub-menus\n    self.hideActiveSubmenu();\n  });\n};\n\n/**\n * Process \"compactType\" option\n * @private\n */\nDrawerToolbar.prototype._initCompactType = function () {\n  switch (true) {\n    case (this.options.compactType === DrawerToolbar.prototype.SCROLLABLE):\n      this._initCompactType_scrollable();\n      break;\n    case (this.options.compactType === DrawerToolbar.prototype.MULTILINE):\n      this._initCompactType_multiline();\n      break;\n    case (this.options.compactType === DrawerToolbar.prototype.POPUP):\n      this._initCompactType_popup();\n      break;\n    default:\n      this._initCompactType_multiline();\n      break;\n  }\n};\n\n/**\n * Init 'scrollable' compact type\n * @private\n */\nDrawerToolbar.prototype._initCompactType_scrollable = function () {\n  this.isScrollable = true;\n  this.scrollModeActive = false;\n  this.currentScrollOffset = 0;\n\n  this.$toolbar.addClass('toolbar-scrollable');\n  this._addScrollButtons();\n\n  // look, if show scroll UI on drawer resize and edit start\n\n  this.drawerInstance.on(this.drawerInstance.EVENT_CANVAS_START_RESIZE, this._onCanvasResizeStart.bind(this));\n  this.drawerInstance.on(this.drawerInstance.EVENT_CANVAS_RESIZING, this._onCanvasResizing.bind(this));\n  this.drawerInstance.on(this.drawerInstance.EVENT_CANVAS_STOP_RESIZE, this._onCanvasResizeFinish.bind(this));\n  this.drawerInstance.on(this.drawerInstance.EVENT_EDIT_START, this.checkScroll.bind(this));\n\n  // handle scrolling by swipe\n  this.$toolbar.on('mousedown.toolbar touchstart.toolbar', this.onTouchStart.bind(this));\n};\n\n/**\n * Init 'multiline' compact type\n * @private\n */\nDrawerToolbar.prototype._initCompactType_multiline = function () {\n  this.$toolbar.addClass('toolbar-multiline');\n};\n\n/**\n * Init 'popup' compact type\n * @private\n */\nDrawerToolbar.prototype._initCompactType_popup = function () {\n  this._initCompactType_multiline();\n};\n\n\n/**\n * Removes toolbar element.\n * @fires DrawerJs.Drawer.EVENT_TOOLBAR_DESTROYED\n */\nDrawerToolbar.prototype.remove = function () {\n    this.$toolbar.remove();\n    this.buttonsGroups = {};\n    this.drawerInstance.trigger(this.drawerInstance.EVENT_TOOLBAR_DESTROYED, [this]);\n};\n\n\n/**\n * Adds control to toolbar.\n * @param {jQuery|HTMLElement} control\n * @param buttonOrder\n */\nDrawerToolbar.prototype.addControl = function (control, buttonOrder) {\n  buttonOrder = buttonOrder !== undefined ? buttonOrder : this._defaultButtonConfig.buttonOrder;\n  var orderString = this._getOrderString(buttonOrder),\n      currStyleAttr = control.attr('style');\n  control.attr('style', (currStyleAttr || '') + ';' + orderString);\n  this.$toolbarContentHolder.append(control);\n};\n\n\n/**\n * Add a button to this toolbar.\n * @param {DrawerToolbar.buttonConfig} options Button configuration object\n */\nDrawerToolbar.prototype.addButton = function (options) {\n  options = this._validateButtonConfig(options);\n  var $button = this.createButton(options);\n\n  this.buttons.push($button);\n\n  // add button and create tooltip\n  this.$toolbarContentHolder.append($button);\n\n  // toolbar grew bigger, so call check for scroll\n  this.checkScroll();\n\n  return $button;\n};\n\n/**\n * Add a button to this toolbar. Button will be appended to group.\n * Group is a one button which will show dropdown with its buttons on click.\n *\n * @param {DrawerToolbar.buttonConfig} options Button configuration object\n */\nDrawerToolbar.prototype.addButtonToGroup = function (options) {\n  options = this._validateButtonConfig(options);\n  var $groupContainer = this.buttonsGroups[options.group.name],\n      groupElementIsExist = $groupContainer && $groupContainer.length,\n      needToCreateGroup = !groupElementIsExist;\n\n  // create group. if no group exists\n  if (needToCreateGroup) {\n    this._createAndAppendGroup(options.group, options.iconClass,options.buttonOrder);\n    $groupContainer = this.buttonsGroups[options.group.name];\n  }\n\n  // create button\n  options.isSubMenu = true;\n  var $button = this.createButton(options);\n\n  // and append to toolbar\n  $groupContainer.$submenuWrapper.buttons.push($button);\n  $groupContainer.find('.group-items-container').append($button);\n\n  return $button;\n};\n\n/**\n * Check values of button config object\n * @param {DrawerToolbar.buttonConfig} options - button configuration\n * @returns {DrawerToolbar.buttonConfig}\n */\nDrawerToolbar.prototype._validateButtonConfig = function (options) {\n  options = options || {};\n  var defaultConf = $.extend(true, {}, this._defaultButtonConfig),\n      result = $.extend(true, {}, defaultConf, options);\n\n  result.buttonOrder = typeof result.buttonOrder === 'number' ? result.buttonOrder : defaultConf.buttonOrder;\n  result.isSubMenu = result.isSubMenu !== undefined ? result.isSubMenu : defaultConf.isSubMenu;\n  result.clickHandler = typeof result.clickHandler === 'function' ? result.clickHandler : defaultConf.clickHandler;\n  return result;\n};\n\nDrawerToolbar.prototype._getOrderString = function (orderValue) {\n  var orderString = '' +\n      '-webkit-order:' + orderValue + ';' +\n      '-ms-flex-order:' + orderValue + ';' +\n      'order:' + orderValue + ';';\n  return orderString;\n};\n\n/**\n * Creates jQuery object with button element markup.\n *\n * @param {DrawerToolbar.buttonConfig} options - button configuration\n * @returns {jQuery}\n */\nDrawerToolbar.prototype.createButton = function (options) {\n  var orderString = this._getOrderString(options.buttonOrder),\n      styleString = 'style=\"' + orderString + '\"';\n  // button html\n  var $button,\n      submenuClass = options.isSubMenu ? ' submenu-child ' : ' ',\n      classString = 'toolbar-button ' + options.additionalClass + submenuClass,\n      buttonHtml = '' +\n    '<li ' +\n          'class=\"' + classString + '\"' +\n          'data-tooltip-class=\"'+options.additionalClass+'\"' +\n        styleString +\n    '>' +\n      '<a href=\"#\" ' +\n          'class=\"toolbar-button-icon ' + submenuClass + '\"' +\n        'data-editable-canvas-sizeable=\"toolbar-button\" ' +\n        'data-editable-canvas-cssrules=\"line-height,font-size:($v / 2.5)\" tabindex=\"-1\"' +\n      '>' +\n          '<i class=\"fa ' + options.iconClass + ' ' + submenuClass + '\"></i>' +\n      '</a>' +\n    '</li>';\n  $button = $(buttonHtml);\n\n  var tooltipOptions = {\n    additionalClass: options.additionalClass,\n    text: options.tooltipText,\n    position: 'bottom'\n  };\n  $button.tooltip = this.drawerInstance.trigger(this.drawerInstance.EVENT_CREATE_TOOLTIP, [$button.find('a'), tooltipOptions]);\n\n  // prevent default behavior on link click\n  var $link = $button.find('a');\n  $link.on('click', function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n  });\n\n  // set click handler\n  DrawerJs.util.bindClick($link, 'editable-canvas-toolbar-button', options.clickHandler);\n  return $button;\n};\n\n\n/**\n * Remove button and attached handlers\n * @param {jQuery} $button - Button element\n */\nDrawerToolbar.prototype.removeButton = function ($button) {\n  if (!$button) {\n    console.warn(\"DrawerToolbar.removeButton() : no $button is provided!\");\n    return;\n  }\n  // unbind click handler\n  DrawerJs.util.unbindClick($button.find('a'), 'editable-canvas-toolbar-button');\n  // remove element\n  $button.remove();\n\n};\n\n/**\n * Creates group button with empty list of tools, and appends it to toolbar\n *\n * @param {Object} group - group data object\n * @param {string} group.name - name of group\n * @param {string} iconClass  - css icon class of group button\n * @param {Number} buttonOrder  - button order value\n * @private\n */\nDrawerToolbar.prototype._createAndAppendGroup = function(group, iconClass, buttonOrder) {\n  // group container html\n  var orderString = this._getOrderString(buttonOrder),\n      styleString = 'style=\"' + orderString + '\"';\n  var $groupContainer = $(\n      '<li class=\"toolbar-button btn-group group-' + group.name + '\"' +\n          'data-editable-canvas-sizeable=\"toolbar-button\" ' +\n          'data-editable-canvas-cssrules=\"width,height\"' +\n          styleString +\n      '>' +\n          '<a href=\"#\" ' +\n              'class=\"toolbar-button-icon\"'+\n              'data-editable-canvas-sizeable=\"toolbar-button\" ' +\n              'data-editable-canvas-cssrules=\"line-height,font-size:($v / 2.5)\" ' +\n              'tabindex=\"-1\"' +\n          '>' +\n              '<i class=\"fa ' + iconClass + '\"></i>' +\n        '</a>' +\n        '<div class=\"submenu-wrapper\">' +\n            '<ul class=\"group-items-container submenu-child toolbar-dropdown-block\">' +\n            '</ul>' +\n        '</div>' +\n      '</li>');\n\n  $groupContainer.$submenuWrapper = $groupContainer.find('.submenu-wrapper');\n  $groupContainer.$submenuWrapper.buttons = [];\n\n  // add group container to toolbar\n  this.$toolbarContentHolder.append($groupContainer);\n  this.buttonsGroups[group.name] = $groupContainer;\n\n  // prevent default action on link click - moving to anchor\n  $groupContainer.find('a').on('click',  function(e) {\n      e.preventDefault();\n  });\n  // react on click\n  $groupContainer.on('click', this.onGroupButtonClick.bind(this, $groupContainer));\n\n  // create tooltip to group\n\n  var tooltipOptions = {\n    additionalClass: group.name,\n    text: group.tooltip,\n    position: 'bottom'\n  };\n  this.drawerInstance.trigger(this.drawerInstance.EVENT_CREATE_TOOLTIP, [$groupContainer.children('a'), tooltipOptions]);\n};\n\n/**\n * Set active button\n * @param {String} buttonClassName\n */\nDrawerToolbar.prototype.setActiveButton = function (buttonClassName) {\n  var $button = this.$toolbar.find('.toolbar-button.' + buttonClassName),\n      $buttonIcon = $button.find('.toolbar-button-icon');\n  $buttonIcon.addClass('active');\n};\n\n/**\n * Remove active state for all buttons\n */\nDrawerToolbar.prototype.clearActiveButton = function () {\n  var $activeButton = this.$toolbar.find('.toolbar-button .toolbar-button-icon.active');\n  $activeButton.removeClass('active');\n};\n\n\n/**\n * React on group button click\n * @param {jQuery} $groupButtton - Group container\n * @param {Event} evt\n * @private\n */\nDrawerToolbar.prototype.onGroupButtonClick = function($groupButtton, evt) {\n  // copy submenu, including handlers\n  this.activeSubmenu = $groupButtton.$submenuWrapper.clone(true);\n  // var $submenu = $submenuSrc.clone(true);\n\n  // position our submenu below button\n  var $btn = $(evt.currentTarget);\n\n  // button position relative to toolbar placeholder =\n  // button position relative to toolbarContentWrapper - toolbarOffset +\n  // toolbar padding\n  if (this.isHorizontal()) {\n      var paddingLeft = parseInt(this.$toolbar.css('padding-left'));\n      var left = $btn.position().left - this.currentScrollOffset + paddingLeft;\n      this.activeSubmenu.css('left', left + 'px');\n  } else {\n      var paddingTop = parseInt(this.$toolbar.css('padding-top'));\n      var top = $btn.position().top - this.currentScrollOffset + paddingTop;\n      this.activeSubmenu.css('top', top + 'px');\n  }\n\n  // append to toolbar before positioning, so this.activeSubmenu has width and height for further calculations\n  this.$toolbar.parent().append(this.activeSubmenu);\n\n  // offset of submenu relative to toolbar placeholder\n  var submenuOffset = 0;\n  switch (this.position) {\n    case 'custom' :\n    case 'top' :\n    // position submenu below of the toolbar\n        submenuOffset = this.$toolbar[0].offsetTop + this.$toolbar.height();\n        this.activeSubmenu.css('top', submenuOffset + 'px');\n    break;\n    case 'left' :\n    // position submenu to the right of toolbar\n        submenuOffset = this.$toolbar[0].offsetLeft + this.$toolbar.width();\n        this.activeSubmenu.css('left', submenuOffset + 'px');\n    break;\n    case 'right' :\n    // position submenu to the left of toolbar\n        submenuOffset = this.$toolbar[0].offsetLeft - this.$toolbar.width();\n        this.activeSubmenu.css('left', submenuOffset + 'px');\n    break;\n    case 'bottom' :\n    // position submenu above of toolbar\n        submenuOffset = this.$toolbar[0].offsetTop - this.activeSubmenu.height();\n        this.activeSubmenu.css('top', submenuOffset + 'px');\n    break;\n  }\n\n  $('body').on('mousedown.submenu', this.onSubmenuMouseDown.bind(this));\n\n};\n\n/**\n * React on submenu click\n * @param {Event} evt\n * @private\n */\nDrawerToolbar.prototype.onSubmenuMouseDown = function(evt) {\n    if (!this.activeSubmenu)\n        return;\n    if (evt.target == this.activeSubmenu || $(evt.target).hasClass('submenu-child') )\n        return;\n\n    this.hideActiveSubmenu();\n};\n\n/**\n * Hide active submenu\n */\nDrawerToolbar.prototype.hideActiveSubmenu = function() {\n    if (this.activeSubmenu) {\n        // hide all tooltips\n        this.drawerInstance.trigger(this.drawerInstance.EVENT_HIDE_TOOLTIPS);\n\n        this.activeSubmenu.remove();\n        this.activeSubmenu = null;\n        $('body').off('mousedown.submenu');\n\n    }\n};\n\n// DrawerToolbar.prototype.onGroupButtonClick = function(evt, button) {\n\n// };\n\n/**\n * Makes tool button with css class buttonClass as active.\n * This is achieved by making group button copy of the tool button.\n *\n * @param groupName\n * @param buttonClass\n * @private\n */\nDrawerToolbar.prototype._setGroupButtonActive = function (groupName, buttonClass) {\n  // find group and button\n  var $groupContainer = this.buttonsGroups[groupName];\n  var $button = this.$toolbar.find('.' + buttonClass);\n\n  // set $groupContainer css class same as $button class\n  $groupContainer.attr('class', $button.attr('class'));\n  $groupContainer.addClass('btn-group');\n\n  var groupButton = $groupContainer.children('a');\n  // make $button.a active\n  groupButton.addClass('active');\n  // copy $button.a html to $groupContainer.a\n  groupButton.html($button.children('a').html());\n};\n\n\n/**\n * Setup/add scroll buttons\n * @private\n */\nDrawerToolbar.prototype._addScrollButtons = function() {\n  // aux function\n  var _getBtnHtml = function(btnClass) {\n    return '<li class=\"toolbar-button ' + btnClass + '\">' +\n                '<a href=\"#\" ' +\n                  'data-editable-canvas-sizeable=\"toolbar-button\" ' +\n                  'data-editable-canvas-cssrules=\"line-height,font-size:($v / 2.5)\" tabindex=\"-1\"' +\n                '>' +\n                   '<i class=\"fa\"></i>' +\n               '</a>' +\n            '</li>';\n  };\n\n  // buttons html\n  this.$scrollToBeginBtn = $(_getBtnHtml('scroll-to-begin-btn'));\n  this.$scrollToEndBtn   = $(_getBtnHtml('scroll-to-end-btn'));\n\n  // prevent default behavior on link click\n  var $linkToBegin = this.$scrollToBeginBtn.find('a');\n  var $linkToEnd = this.$scrollToEndBtn.find('a');\n  $linkToBegin.on('click', function (e) {\n      e.preventDefault();\n      // e.stopPropagation();\n  });\n  $linkToEnd.on('click', function (e) {\n      e.preventDefault();\n      // e.stopPropagation();\n  });\n\n  // set click handlers\n  DrawerJs.util.bindClick($linkToBegin, 'scroll-to-begin-btn', this.onScrollToBegin.bind(this));\n  DrawerJs.util.bindClick($linkToEnd, 'scroll-to-end-btn', this.onScrollToEnd.bind(this));\n\n  // scroll buttons are added direct;y to toolbar,\n  // unlike common buttons, which are added to $toolbarContentHolder\n  this.$toolbar.append(this.$scrollToBeginBtn);\n  this.$toolbar.append(this.$scrollToEndBtn);\n};\n\n\n/**\n * React on touch start\n * @param {Event} evt\n * @private\n */\nDrawerToolbar.prototype.onTouchStart = function(evt) {\n    if (!this.scrollModeActive)\n        return;\n\n    this.mouseDown = true;\n\n    // handling touch events\n    var e = (evt.type == 'touchstart') ?  evt.originalEvent.touches[0] : evt;\n    // get coord we are interested in\n    var curCoord = this.isHorizontal() ? e.pageX : e.pageY;\n\n    // touch start coord plus existing offset\n    this.touchStartCoord = curCoord + this.currentScrollOffset;\n\n    console.log('TOUCH START', this.touchStartCoord, evt);\n\n    $('body').on('mouseup.toolbar touchend.toolbar', this.onTouchEnd.bind(this));\n\n    this.$toolbar.on('mousemove.toolbar touchmove.toolbar', this.onTouchMove.bind(this));\n};\n\n/**\n * React on touch end\n * @param {Event} evt\n * @private\n */\nDrawerToolbar.prototype.onTouchEnd = function(evt) {\n    console.log('TOUCH END', evt);\n    this.mouseDown = false;\n    $('body').off('mousemove.toolbar touchmove.toolbar');\n    $('body').off('mouseup.toolbar touchend.toolbar');\n};\n\n/**\n * React on touch move\n * @param {Event} evt\n * @private\n */\nDrawerToolbar.prototype.onTouchMove = function(evt) {\n  if (this.mouseDown) {\n    var eventTarget = evt.target,\n        $eventTarget = $(eventTarget),\n        isInput = $eventTarget.is('input'),\n        isColorIndicator = $eventTarget.is('.color-indicator'),\n        processEvent = !isInput && !isColorIndicator;\n\n    if (processEvent) {\n      // prevent default action - copying of toolbar content\n      evt.preventDefault();\n\n      // handling touch events\n      var e = (evt.type === 'touchmove') ?  evt.originalEvent.touches[0] : evt;\n\n      // get coord we are interested in\n      var curCoord = this.isHorizontal() ? e.pageX : e.pageY;\n\n      var delta = this.touchStartCoord - curCoord;\n      console.log('TOUCH MOVE', curCoord, delta);\n\n      this.scrollTo(delta);\n    }\n  }\n};\n\n/**\n * React on canvas resize start\n * @private\n */\nDrawerToolbar.prototype._onCanvasResizeStart = function() {\n  this.checkScroll();\n};\n\n/**\n * React on canvas resizing\n * @private\n */\nDrawerToolbar.prototype._onCanvasResizing = function() {\n  this.checkScroll();\n};\n\n/**\n * React on canvas resize finish\n * @private\n */\nDrawerToolbar.prototype._onCanvasResizeFinish = function() {\n  this.checkScroll();\n};\n\n/**\n *  Compares sizes of toolbar and its placeholder,\n *  if toolbar is bigger - shows scroll\n */\nDrawerToolbar.prototype.checkScroll = function() {\n    var toolbarContentHolder = this.$toolbarContentHolder.get(0),\n        contentSize = this.isHorizontal() ? toolbarContentHolder.scrollWidth : toolbarContentHolder.scrollHeight;\n\n    var toolbarSize = this.isHorizontal() ? this.$toolbar.width()\n                                          : this.$toolbar.height();\n\n    if (contentSize > toolbarSize) {\n        this.scrollModeActive = true;\n        this.$toolbar.addClass('show-scroll');\n    } else {\n        this.scrollModeActive = false;\n        this.$toolbar.removeClass('show-scroll');\n        this.scrollTo(0);\n    }\n};\n\n\nDrawerToolbar.prototype._getCurrOffsetProps = function () {\n  var result = {},\n      $element,\n      isHorizontal = this.isHorizontal(),\n      currentScrollOffset = this.currentScrollOffset,\n      $contentWrapper = this.$toolbar.find('.toolbar-content-wrapper'),\n      contentWrapperSizes = $contentWrapper.get(0).getBoundingClientRect(),\n      $elementsToCheck = $contentWrapper.children(),\n      minOffset,\n      relativeOffset;\n\n  $elementsToCheck.each(function (i, currElement) {\n    var $currElement = $(currElement),\n        currElSizes = currElement.getBoundingClientRect(),\n        currElOffsetAbsolute = isHorizontal ? currElSizes.left - contentWrapperSizes.left : currElSizes.top - contentWrapperSizes.top,\n        currElOffset = Math.abs(currElOffsetAbsolute - currentScrollOffset),\n        currElIsVisible = $currElement.is(':visible'),\n        currElIsCloser = minOffset > currElOffset,\n        currElIsMatched = currElIsVisible && (minOffset === undefined || currElIsCloser);\n\n    if (currElIsMatched) {\n      minOffset = currElOffset;\n\n      result.relativeOffset = currElOffsetAbsolute - currentScrollOffset;\n      result.$element = $currElement;\n      result.sizes = currElSizes;\n    }\n  });\n  return result;\n};\n\nDrawerToolbar.prototype._getOffsetStep_Custom = function (toBegin) {\n  var result = 0,\n      isHorizontal = this.isHorizontal(),\n      toolbarSize = isHorizontal ? this.$toolbar.width() : this.$toolbar.height(),\n      buttonSize = isHorizontal ? this.options.buttonWidth : this.options.buttonHeight,\n      maxOffsetVal = toolbarSize - buttonSize*2;\n\n  var offsetProps = this._getCurrOffsetProps(),\n      $currentStartOffsetEl = offsetProps.$element,\n      needMoreOffset = true,\n      $el,\n      $nextEl,\n      prevSizes,\n      currSizes,\n      delta;\n\n  result = offsetProps.relativeOffset;\n\n\n\n    var startElSizes = $currentStartOffsetEl.get(0).getBoundingClientRect();\n    $el = $currentStartOffsetEl;\n\n    while (needMoreOffset) {\n      $nextEl = toBegin ? $el.prev() : $el.next();\n      if ($nextEl.length && (Math.abs(result) < maxOffsetVal)) {\n        var isVisible = $nextEl.is(':visible');\n        if (isVisible) {\n          currSizes = $nextEl.get(0).getBoundingClientRect();\n          delta = isHorizontal ? currSizes.left - startElSizes.left :currSizes.top - startElSizes.top;\n\n          if (delta > 0) {\n            delta += 3;\n          } else {\n            delta -= 3;\n          }\n          result += delta;\n          needMoreOffset = false;\n        }\n      } else {\n        needMoreOffset = false;\n      }\n      $el = $nextEl;\n    }\n  // result += buttonSize;\n  return result;\n};\n\nDrawerToolbar.prototype._getOffsetStep_Buttons = function() {\n  var offset,\n      toolbarLength = this.isHorizontal() ? this.$toolbar.width() : this.$toolbar.height(),\n      btnLength     = this.isHorizontal() ? this.options.buttonWidth : this.options.buttonHeight,\n      buttonsPerToolbar = Math.ceil(toolbarLength / btnLength),\n      buttonsToScroll = Math.max(buttonsPerToolbar - 1, 1);\n  offset = buttonsToScroll * btnLength;\n  return offset;\n};\n\n/**\n * Do scroll to begin\n */\nDrawerToolbar.prototype.onScrollToBegin = function () {\n  var offset,\n      offsetDelta;\n  if (this.customScrollMode) {\n    offset = this._getOffsetStep_Custom(true);\n  } else {\n    offsetDelta = this._getOffsetStep_Buttons();\n    offset = -offsetDelta;\n  }\n  this.scrollToolbarBy(offset);\n};\n\n/**\n * Do scroll to end\n */\nDrawerToolbar.prototype.onScrollToEnd = function() {\n  var offset,\n      offsetDelta;\n  if (this.customScrollMode) {\n    offset = this._getOffsetStep_Custom();\n  } else {\n    offsetDelta = this._getOffsetStep_Buttons();\n    offset = offsetDelta;\n  }\n  this.scrollToolbarBy(offset);\n};\n\n\n/**\n * Scrolls toolbar  by offset in directions - to the end(offset>0)/ to the beginning (offset<0).\n * If offset is to big, it is set to max possible.\n * @param offset\n */\nDrawerToolbar.prototype.scrollToolbarBy = function (offset) {\n  var newOffset = this.currentScrollOffset + parseInt(offset),\n      toolbarEl = this.$toolbar.get(0),\n      isHorizontal = this.isHorizontal(),\n      toolbarSize = isHorizontal ? this.$toolbar.width() : this.$toolbar.height(),\n      toolbarContentSize = isHorizontal ? toolbarEl.scrollWidth : toolbarEl.scrollHeight,\n      btnSize = isHorizontal ? this.options.buttonWidth : this.options.buttonHeight,\n      maxOffset = toolbarContentSize - btnSize;\n\n  newOffset = Math.min(newOffset, maxOffset); // see, if offset not exceeds maximum\n  newOffset = Math.max(newOffset, 0); // no negative offset check\n  // scroll it\n  this.scrollTo(newOffset);\n};\n\n/**\n * Toggle toolbar visibility\n * @param {Boolean} [saveCurrentState]\n * @param {Boolean} [useSaved]\n */\nDrawerToolbar.prototype.toggleToolbarVisibility = function (saveCurrentState, useSaved) {\n  var currentState = !this.$toolbar.hasClass('hidden'),\n      showToolbar = useSaved ? this.visibilityState : currentState;\n\n  if (showToolbar) {\n    this.showToolbar(saveCurrentState);\n  } else {\n    this.hideToolbar(saveCurrentState);\n  }\n};\n\n/**\n * Hide toolbar\n * @param {Boolean} [saveCurrentState]\n */\nDrawerToolbar.prototype.hideToolbar = function (saveCurrentState) {\n  if (saveCurrentState) {\n    this.visibilityState = !this.$toolbar.hasClass('hidden');\n  }\n  this.invisible = true;\n  this.$toolbar.addClass('hidden');\n};\n\n/**\n * Show toolbar\n * @param {Boolean} [saveCurrentState]\n */\nDrawerToolbar.prototype.showToolbar = function (saveCurrentState) {\n  if (saveCurrentState) {\n    this.visibilityState = !this.$toolbar.hasClass('hidden');\n  }\n  this.invisible = false;\n  this.$toolbar.removeClass('hidden');\n};\n\n\n/**\n * Scroll toolbar to the offset.\n * @param  {Number} newOffset\n */\nDrawerToolbar.prototype.scrollTo = function (newOffset) {\n    this.currentScrollOffset = parseInt(newOffset);\n    if (this.isHorizontal()) {\n        this.$toolbarContentHolder.css('left', '-' + this.currentScrollOffset + 'px');\n    } else {\n        this.$toolbarContentHolder.css('top', '-' + this.currentScrollOffset + 'px');\n    }\n};\n\n\n/**\n * Returns one of [horizontal, vertical]\n * @return {String} toolbar orientation\n */\nDrawerToolbar.prototype.getToolbarOrientation = function () {\n  return this.$toolbar.hasClass('toolbar-vertical') ? 'vertical' : 'horizontal';\n};\n\n\n/**\n * @return {Boolean}\n */\nDrawerToolbar.prototype.isHorizontal = function () {\n  return (this.getToolbarOrientation() ===  'horizontal');\n};\n\n\n/**\n * height of toolbar\n * @return {Number}\n */\nDrawerToolbar.prototype.height = function () {\n  return this.$toolbar.height();\n};\n\n\n/**\n * Width of toolbar\n * @return {Number}\n */\nDrawerToolbar.prototype.width = function () {\n  return this.$toolbar.width();\n};\n\nexport default DrawerToolbar\n","import DrawerToolbar from '../DrawerToolbar'\n/**\n * Toolbar with tool options\n *\n * @param {DrawerJs.Drawer} drawerInstance\n * @param {Object} [options]\n * @extends DrawerToolbar\n * @constructor\n */\nvar ToolOptionsToolbar = function (drawerInstance, options) {\n  // css class for toolbar\n  options.toolbarClass = 'tool-options-toolbar';\n  // call DrawerToolbar c-tor\n  DrawerToolbar.call(this, drawerInstance, options);\n  // cry loud of birth\n  drawerInstance.trigger(drawerInstance.EVENT_OPTIONS_TOOLBAR_CREATED, [this]);\n};\n\nToolOptionsToolbar.prototype = Object.create(DrawerToolbar.prototype);\nToolOptionsToolbar.prototype.constructor = DrawerToolbar;\n\nToolOptionsToolbar.prototype.customScrollMode = true;\n\nexport default ToolOptionsToolbar\n","import DrawerToolbar from '../DrawerToolbar'\n/**\n * Drawing tools toolbar\n *\n * @param {DrawerJs.Drawer} drawerInstance\n * @param {Object} [options]\n * @extends DrawerToolbar\n * @constructor\n */\nvar DrawingToolsToolbar = function (drawerInstance, options) {\n  options.toolbarClass = 'drawing-tools-toolbar';\n  this.eventNameSpace = '.toolbar-drawingTools';\n\n  // call super constructor\n  DrawerToolbar.call(this, drawerInstance, options);\n  this._setDrawerHandlers();\n  drawerInstance.trigger(drawerInstance.EVENT_TOOLS_TOOLBAR_CREATED, [this]);\n};\n\nDrawingToolsToolbar.prototype = Object.create(DrawerToolbar.prototype);\nDrawingToolsToolbar.prototype.constructor = DrawerToolbar;\n\n/**\n * Attach drawer events handlers\n * @private\n */\nDrawingToolsToolbar.prototype._setDrawerHandlers = function() {\n  var drawerInstance = this.drawerInstance,\n      ns = this.eventNameSpace;\n  // @todo - move this to some other place!\n  // on activating tool - remember it in lastUsedPluginName\n  drawerInstance.off(drawerInstance.EVENT_DO_ACTIVATE_TOOL + ns);\n  drawerInstance.on(drawerInstance.EVENT_DO_ACTIVATE_TOOL + ns, function (e, tool) {\n    drawerInstance.lastUsedPluginName = tool.name;\n  });\n\n  // @todo - move this to some other place!\n  // if tool was manually switched off - reset lastUsedPluginName\n  drawerInstance.off(drawerInstance.EVENT_DO_DEACTIVATE_TOOL + ns);\n  drawerInstance.on(drawerInstance.EVENT_DO_DEACTIVATE_TOOL + ns, function(e, tool) {\n    if (drawerInstance.lastUsedPluginName == tool.name) {\n      drawerInstance.lastUsedPluginName = null;\n    }\n  });\n\n  drawerInstance.off(drawerInstance.AFTER_CREATE_TOOLBARS + ns);\n  drawerInstance.on(drawerInstance.AFTER_CREATE_TOOLBARS + ns, function() {\n    drawerInstance.activateDefaultPlugin();\n  });\n};\n\nexport default DrawingToolsToolbar\n","import DrawerToolbar from '../DrawerToolbar'\n/**\n * Toolbar where will be buttons for image cropper\n *\n * @param {DrawerJs.Drawer} drawerInstance\n * @param {Object} [options]\n * @extends DrawerToolbar\n * @constructor\n */\nvar CropImageToolbar = function (drawerInstance, options) {\n  options = options || {};\n  options.toolbarClass = 'tool-cropimage hidden';\n  // call super c-tor\n  DrawerToolbar.call(this, drawerInstance, options);\n\n  // create default buttons for toolbar\n  this._createDefaultButtons();\n\n  // Trigger event\n  drawerInstance.trigger(drawerInstance.EVENT_IMAGECROP_TOOLBAR_CREATED, [this]);\n};\n\nCropImageToolbar.prototype = Object.create(DrawerToolbar.prototype);\nCropImageToolbar.prototype.constructor = DrawerToolbar;\n\n\n/**\n * Creates defaults buttons.\n */\nCropImageToolbar.prototype._createDefaultButtons = function() {\n};\n\nexport default CropImageToolbar\n","import DrawerToolbar from '../DrawerToolbar'\n/**\n* Toolbar with floating buttons\n*\n* @param {DrawerJs.Drawer} drawerInstance\n* @param {Object} [options]\n* @extends DrawerToolbar\n* @constructor\n*/\nvar MinimizedToolbar = function (drawerInstance, options) {\n  options = options || {};\n  // css class for toolbar\n  options.toolbarClass = 'tool-minimized-toolbar';\n  // call DrawerToolbar c-tor\n  DrawerToolbar.call(this, drawerInstance, options);\n  // cry loud of birth\n  drawerInstance.trigger(drawerInstance.EVENT_MINIMIZED_TOOLBAR_CREATED, [this]);\n};\n\nMinimizedToolbar.prototype = Object.create(DrawerToolbar.prototype);\nMinimizedToolbar.prototype.constructor = DrawerToolbar;\n\nexport default MinimizedToolbar\n","import DrawerToolbar from '../DrawerToolbar'\n/**\n* Toolbar with floating buttons\n*\n* @param {DrawerJs.Drawer} drawerInstance\n* @param {Object} [options]\n* @extends DrawerToolbar\n* @constructor\n*/\nvar OverCanvasToolbar = function (drawerInstance, options) {\n  options = options || {};\n  // css class for toolbar\n  options.toolbarClass = 'tool-overcanvas-toolbar';\n  // call DrawerToolbar c-tor\n  DrawerToolbar.call(this, drawerInstance, options);\n  // cry loud of birth\n  drawerInstance.trigger(drawerInstance.EVENT_FLOATING_TOOLBAR_CREATED, [this]);\n};\n\nOverCanvasToolbar.prototype = Object.create(DrawerToolbar.prototype);\nOverCanvasToolbar.prototype.constructor = DrawerToolbar;\n\nexport default OverCanvasToolbar\n","import DrawerToolbar from '../DrawerToolbar'\n/**\n * Toolbar where will be close, move, fullscreen, open settigs buttons.\n *\n * @param {DrawerJs.Drawer} drawerInstance\n * @param {Object} [options]\n * @extends DrawerToolbar\n * @constructor\n */\nvar SettingsToolbar = function (drawerInstance, options) {\n  options = options || {};\n  options.toolbarClass = 'tool-settings-toolbar';\n  // call super c-tor\n  DrawerToolbar.call(this, drawerInstance, options);\n\n  // create default buttons for tghi toolbart\n  this._createDefaultButtons();\n\n  // Trigger event\n  drawerInstance.trigger(drawerInstance.EVENT_CONFIG_TOOLBAR_CREATED, [this]);\n};\n\nSettingsToolbar.prototype = Object.create(DrawerToolbar.prototype);\nSettingsToolbar.prototype.constructor = DrawerToolbar;\n\n\n/**\n * Creates defaults buttons : close.\n * @private\n */\nSettingsToolbar.prototype._createDefaultButtons = function() {\n};\n\nexport default SettingsToolbar\n","import DrawerToolbar from       './DrawerToolbar'\nimport ToolbarPlaceholder from  './ToolbarPlaceholder'\nimport ToolOptionsToolbar from  './instances/ToolOptionsToolbar'\nimport DrawingToolsToolbar from './instances/DrawingToolsToolbar'\nimport CropImageToolbar from    './instances/CropImageToolbar'\nimport MinimizedToolbar from    './instances/MinimizedToolbar'\nimport OverCanvasToolbar from   './instances/OverCanvasToolbar'\nimport SettingsToolbar from     './instances/SettingsToolbar'\n\n/**\n* Drawer toolbar  class.\n* @param {Drawer} drawerInstance\n*\n* @constructor\n*/\nvar DrawerToolbarManager = function (drawer) {\n  this.drawerInstance = drawer;\n  if (!drawer) {\n    throw new Error(\"DrawerToolbarManager : drawer must be provided!\");\n  }\n  this.toolbars = {};\n  this.toolbarPlaceholders = {};\n  this.TooltipManager = new DrawerJs.utilPlugins.TooltipManager(this.drawerInstance);\n};\n\n\n/**\n * Appends toolbar to specified location.\n *\n * @param {DrawerToolbar} toolbar - toolbar to append\n * @param {DrawerToolbar.defaultSetOfOptions} [options] - options of toolbar\n */\nDrawerToolbarManager.prototype.addToolbar = function (toolbar, options) {\n  options = options || {};\n  var customPosition = (options.position == ToolbarPlaceholder.prototype.CUSTOM_POSITION),\n      posKey = customPosition ? options.customAnchorSelector : options.position,\n      isCustomPositionType = posKey === ToolbarPlaceholder.prototype.POPUP_POSITION || posKey === ToolbarPlaceholder.prototype.OVER_CANVAS_POSITION,\n      posTypeKey = isCustomPositionType ? ToolbarPlaceholder.prototype.POSITION_TYPE_CUSTOM : options.positionType || ToolbarPlaceholder.prototype.POSITION_TYPE_OUTSIDE,\n      placeHolderByType = this.toolbarPlaceholders[posTypeKey] && this.toolbarPlaceholders[posTypeKey][posKey],\n      placeholderByKey = this.toolbarPlaceholders[posKey],\n      placeholder = placeHolderByType || placeholderByKey;\n  if (placeholder) {\n    placeholder.addToolbar(toolbar);\n  } else {\n    if (!customPosition) {\n      var messageText = \"DrawerToolbarManager.addToolbar() : no placeholder exists with name '\",\n          variablesText = posTypeKey + \" \" + posKey + \" \" + options.customAnchorSelector + \"'\";\n      this.drawerInstance.error(messageText + variablesText);\n    }\n  }\n};\n\n\n/**\n * Setup/create all toolbars\n */\nDrawerToolbarManager.prototype.createAllToolbars = function () {\n  var _this = this;\n\n  this.drawerInstance.trigger(this.drawerInstance.BEFORE_CREATE_TOOLBARS, [this]);\n\n  // create wrapper for toolbar\n  this._createHelperElements();\n\n  // create placeholders for toolbars\n\n  this._createToolbarsPlaceholders();\n\n  var toolbarsOptions = this.drawerInstance.options.toolbars,\n      isFullscreen = this.drawerInstance.$canvasEditContainer.hasClass('fullscreen');\n\n  var toolOptions_conf,\n      drawingTools_conf,\n      settingsToolbar_conf,\n      overCanvasToolbar_conf = toolbarsOptions.overCanvas;\n\n  if (!isFullscreen) {\n    toolOptions_conf = toolbarsOptions.toolOptions;\n    drawingTools_conf = toolbarsOptions.drawingTools;\n    settingsToolbar_conf = toolbarsOptions.settings;\n  } else {\n    var overridedValues = {\n      positionType: ToolbarPlaceholder.prototype.POSITION_TYPE_INSIDE\n    };\n    toolOptions_conf = $.extend(true,\n        {},\n        toolbarsOptions.toolOptions,\n        toolbarsOptions.toolOptions.fullscreenMode || {},\n        overridedValues);\n    drawingTools_conf = $.extend(true,\n        {},\n        toolbarsOptions.drawingTools,\n        toolbarsOptions.drawingTools.fullscreenMode || {},\n        overridedValues);\n    settingsToolbar_conf = $.extend(true,\n        {},\n        toolbarsOptions.settings,\n        toolbarsOptions.settings.fullscreenMode || {},\n        overridedValues);\n  }\n\n  // order of toolbox creation MATTERS\n  // OptionsToolbar must be created first, because in createToolsToolbar() we can activate default tool,\n  // which will trigger updates in BrushSize and BrushColor tools.\n  this.toolOptionsToolbar = new ToolOptionsToolbar(this.drawerInstance, toolOptions_conf);\n  var toolOptionsToolbarOptions = {\n    position: toolOptions_conf.position,\n    positionType: toolOptions_conf.positionType,\n    customAnchorSelector: toolOptions_conf.customAnchorSelector\n  };\n  if (toolOptions_conf.compactType === DrawerToolbar.prototype.POPUP) {\n    toolOptionsToolbarOptions.position = ToolbarPlaceholder.prototype.POPUP_POSITION;\n    toolOptionsToolbarOptions.positionType = ToolbarPlaceholder.prototype.POSITION_TYPE_CUSTOM;\n  }\n  this.addToolbar(this.toolOptionsToolbar, toolOptionsToolbarOptions);\n\n\n  // drawer tools\n  this.drawingToolsToolbar = new DrawingToolsToolbar(this.drawerInstance, drawingTools_conf);\n\n  var drawingToolsToolbarOptions = {\n    position: drawingTools_conf.position,\n    positionType: drawingTools_conf.positionType,\n    customAnchorSelector: drawingTools_conf.customAnchorSelector\n  };\n  this.addToolbar(this.drawingToolsToolbar, drawingToolsToolbarOptions);\n\n  // toolbar with close, move, options buttons\n  this.settingsToolbar = new SettingsToolbar(this.drawerInstance, settingsToolbar_conf);\n  var settingsToolbarOptions = {\n    position: settingsToolbar_conf.position,\n    positionType: settingsToolbar_conf.positionType,\n    customAnchorSelector: settingsToolbar_conf.customAnchorSelector\n  };\n  this.addToolbar(this.settingsToolbar, settingsToolbarOptions);\n\n  // Over canvas toolbar\n  this.overCanvasToolbar = new OverCanvasToolbar(this.drawerInstance, overCanvasToolbar_conf);\n  var overCanvasToolbarOptions = {\n    position: ToolbarPlaceholder.prototype.OVER_CANVAS_POSITION,\n    positionType: ToolbarPlaceholder.prototype.POSITION_TYPE_CUSTOM\n  };\n  this.addToolbar(this.overCanvasToolbar, overCanvasToolbarOptions);\n\n  // Over canvas toolbar\n  this.cropImageToolbar = new CropImageToolbar(this.drawerInstance, overCanvasToolbar_conf);\n  var cropImageToolbarOptions = {\n    position: ToolbarPlaceholder.prototype.TOP_POSITION,\n    positionType: ToolbarPlaceholder.prototype.POSITION_TYPE_INSIDE\n  };\n\n  this.addToolbar(this.cropImageToolbar, cropImageToolbarOptions);\n\n  // Minimized toolbar\n  this.minimizedToolbar = new MinimizedToolbar(this.drawerInstance);\n  var minimizedToolbarOptions = {\n    position: ToolbarPlaceholder.prototype.TOP_POSITION,\n    positionType: ToolbarPlaceholder.prototype.POSITION_TYPE_INSIDE\n  };\n  this.addToolbar(this.minimizedToolbar, minimizedToolbarOptions);\n\n  // @todo: move to other place\n  this.setToolbarButtonsSize();\n\n  // remove all toolbars on exit\n  this.drawerInstance.on(this.drawerInstance.EVENT_EDIT_STOP, function () {\n    _this.destroyAllToolbars();\n  });\n\n  this.drawerInstance.trigger(this.drawerInstance.AFTER_CREATE_TOOLBARS, [this]);\n};\n\n\n/**\n * Creates placeholders for toolbars.\n * All placeholders are inside this.toolbarPlaceholders.\n * Default keys are : left, right, top, bottom\n * Custom anchor toolbars placeholders are stored as this.toolbarPlaceholders[customAnchorSelector]\n * If no anchor element found by selector - 'top' placeholder is used instead\n *\n * @private\n */\nDrawerToolbarManager.prototype._createToolbarsPlaceholders = function() {\n  // create placeholders elements\n  this.toolbarPlaceholders['outside'] = {};\n  this.toolbarPlaceholders['inside'] = {};\n  this.toolbarPlaceholders['custom'] = {};\n\n  this.toolbarPlaceholders['outside']['top'] = new ToolbarPlaceholder(this.drawerInstance, ToolbarPlaceholder.prototype.TOP_POSITION, ToolbarPlaceholder.prototype.POSITION_TYPE_OUTSIDE);\n  this.toolbarPlaceholders['outside']['left'] = new ToolbarPlaceholder(this.drawerInstance, ToolbarPlaceholder.prototype.LEFT_POSITION, ToolbarPlaceholder.prototype.POSITION_TYPE_OUTSIDE);\n  this.toolbarPlaceholders['outside']['right'] = new ToolbarPlaceholder(this.drawerInstance, ToolbarPlaceholder.prototype.RIGHT_POSITION, ToolbarPlaceholder.prototype.POSITION_TYPE_OUTSIDE);\n  this.toolbarPlaceholders['outside']['bottom'] = new ToolbarPlaceholder(this.drawerInstance, ToolbarPlaceholder.prototype.BOTTOM_POSITION, ToolbarPlaceholder.prototype.POSITION_TYPE_OUTSIDE);\n\n  this.toolbarPlaceholders['inside']['top'] = new ToolbarPlaceholder(this.drawerInstance, ToolbarPlaceholder.prototype.TOP_POSITION, ToolbarPlaceholder.prototype.POSITION_TYPE_INSIDE);\n  this.toolbarPlaceholders['inside']['left'] = new ToolbarPlaceholder(this.drawerInstance, ToolbarPlaceholder.prototype.LEFT_POSITION, ToolbarPlaceholder.prototype.POSITION_TYPE_INSIDE);\n  this.toolbarPlaceholders['inside']['right'] = new ToolbarPlaceholder(this.drawerInstance, ToolbarPlaceholder.prototype.RIGHT_POSITION, ToolbarPlaceholder.prototype.POSITION_TYPE_INSIDE);\n  this.toolbarPlaceholders['inside']['bottom'] = new ToolbarPlaceholder(this.drawerInstance, ToolbarPlaceholder.prototype.BOTTOM_POSITION, ToolbarPlaceholder.prototype.POSITION_TYPE_INSIDE);\n\n  this.toolbarPlaceholders['custom']['canvas'] = new ToolbarPlaceholder(this.drawerInstance, ToolbarPlaceholder.prototype.OVER_CANVAS_POSITION, ToolbarPlaceholder.prototype.POSITION_TYPE_CUSTOM);\n  this.toolbarPlaceholders['custom']['popup'] = new ToolbarPlaceholder(this.drawerInstance, ToolbarPlaceholder.prototype.POPUP_POSITION, ToolbarPlaceholder.prototype.POSITION_TYPE_CUSTOM);\n  this.toolbarPlaceholders['custom']['minimized'] = new ToolbarPlaceholder(this.drawerInstance, ToolbarPlaceholder.prototype.TOP_POSITION, ToolbarPlaceholder.prototype.POSITION_TYPE_INSIDE);\n\n  // @todo: remake this!\n  var toolbarNames = ['drawingTools', 'toolOptions', 'settings'];\n\n  // look for all toolbars options and see, if there are custom positions, to create placeholder\n  for (var i = 0; i < toolbarNames.length; i++) {\n    var toolbarConf = this.drawerInstance.options.toolbars[toolbarNames[i]];\n    if (toolbarConf && (toolbarConf.position == ToolbarPlaceholder.prototype.CUSTOM_POSITION) && (toolbarConf.customAnchorSelector)) {\n        var anchorSelector = toolbarConf.customAnchorSelector;\n        this.toolbarPlaceholders[anchorSelector] = new ToolbarPlaceholder(this.drawerInstance, ToolbarPlaceholder.prototype.CUSTOM_POSITION, null, anchorSelector);\n    }\n  }\n};\n\n/**\n * Remove helper elements such as toolbars wrapper, etc.\n * @private\n */\nDrawerToolbarManager.prototype._removeHelperElements = function() {\n  if (this.drawerInstance.$toolbarsWrapper && this.drawerInstance.$toolbarsWrapper.length) {\n    this.drawerInstance.$toolbarsWrapper.remove();\n  }\n  var $toolbarsWrapper = this.drawerInstance.$canvasEditContainer.find('.toolbars-wrapper');\n  if ($toolbarsWrapper && $toolbarsWrapper.length) {\n    $toolbarsWrapper.remove();\n  }\n  this.drawerInstance.$toolbarsWrapper = undefined;\n};\n\n/**\n * Create helper elements such as toolbars wrapper, etc.\n * @private\n */\nDrawerToolbarManager.prototype._createHelperElements = function() {\n  this._removeHelperElements();\n  var toolbarsWrapperHtml = '<div class=\"toolbars-wrapper\"></div>';\n\n  var $toolbarsWrapper = $(toolbarsWrapperHtml),\n      container = this.drawerInstance.$canvasEditContainer;\n\n  container.append($toolbarsWrapper);\n\n  this.drawerInstance.$toolbarsWrapper = $toolbarsWrapper;\n};\n\n/**\n * Removes all toolbars.\n */\nDrawerToolbarManager.prototype.destroyAllToolbars = function () {\n    this.settingsToolbar.remove();\n    this.drawingToolsToolbar.remove();\n    this.toolOptionsToolbar.remove();\n};\n\n\n/**\n * Removes and then re-creates all toolbars.\n */\nDrawerToolbarManager.prototype.resetAllToolbars = function() {\n  this.destroyAllToolbars();\n  this.createAllToolbars();\n};\n\n\n/**\n * This method allows dynamical size adjustment of elements.\n * Elements which needs to be resized should have two attributes:\n *\n * data-editable-canvas-sizeable=\"someNamespace\",\n * where someNamespace is unique id for the group of elements tht will be\n * resized together.\n *\n * data-editable-canvas-cssrules=width,height,font-size:($v / 2.5)\n * which provides a list of css rules on which a new size will be applied.\n * If resulting size needs to be modififed in some way, the one could\n * specify a function like in font-size.\n *\n * @param {String} namespace\n * @param {String} newSize\n * @private\n */\nDrawerToolbarManager.prototype._adjustElementsSize = function (namespace, newSize) {\n  var elementsToResize =\n    $('[data-editable-canvas-sizeable=' + namespace + ']');\n\n  for (var i = 0; i < elementsToResize.length; i++) {\n    var elem = elementsToResize[i];\n\n    var attributesToChange = $(elem).attr('data-editable-canvas-cssrules');\n    // if no attributes to change - skip\n    if (!attributesToChange)\n      continue;\n\n    var attributesToChangeArr = attributesToChange.split(',');\n\n    for (var a = 0; a < attributesToChangeArr.length; a++) {\n      var attrName = attributesToChangeArr[a];\n      var attrVal = newSize;\n\n      if (attrName[0] == '-') {\n        attrName = attrName.substr(1);\n        attrVal = '-' + newSize;\n      }\n\n      var matches = attrName.match(/:\\((.+)\\)/);\n      if (matches) {\n        attrName = attrName.replace(matches[0], '');\n        var expression = matches[1];\n        expression = expression.replace('$v', attrVal);\n        var result = new Function(\"return \" + expression)();\n        attrVal = result;\n      }\n\n      $(elem).css(attrName, attrVal + 'px');\n    }\n  }\n};\n\n\n\n/**\n * Sets the size of buttons on all toolbars.\n *\n * @param [size] width and height in px\n */\nDrawerToolbarManager.prototype.setToolbarButtonsSize = function (size) {\n  if (size) {\n    if (this.touchDevice) {\n      this.drawerInstance.options.toolbarSizeTouch = size;\n    } else {\n      this.drawerInstance.options.toolbarSize = size;\n    }\n  } else {\n    if (this.touchDevice) {\n      size = this.drawerInstance.options.toolbarSizeTouch;\n    } else {\n      size = this.drawerInstance.options.toolbarSize;\n    }\n  }\n\n  this._adjustElementsSize('toolbar-button', size);\n};\n\nexport default DrawerToolbarManager\n","export default (function  (Drawer, util) {\n\n  /**\n   * Returns canvas data(information about all objects presented on canvas).\n   *\n   * The order of sources is following:\n   * - fabricjs canvas instance(if available) toJSON method.\n   * - options.contentConfig.loadCanvasData(if available)\n   * - options.contentCOnfig.canvasDataContainer(if available)\n   * - data-canvas-serialized attribute\n   *   (if options.contentConfig.saveToHtml=true)\n   *\n   * @return {Object} serialized canvas data\n   */\n  Drawer.prototype.getCanvasData = function () {\n    var serializedCanvas = null;\n\n    if (this.fCanvas) {\n      serializedCanvas = this.fCanvas.toJSON();\n    } else if (this.options.contentConfig.loadCanvasData) {\n      serializedCanvas = this.options.contentConfig.loadCanvasData(this.id);\n    } else if (this.$canvasDataContainer) {\n      var canvasDataText = this.$canvasDataContainer.text();\n      if (canvasDataText) {\n        serializedCanvas = JSON.parse(canvasDataText)[this.id];\n      }\n    }\n    else {\n      var attr = this.$imageElement.attr('data-canvas-serialized');\n      if (attr) {\n        serializedCanvas = JSON.parse(attr);\n      }\n    }\n\n    return serializedCanvas;\n  };\n\n\n  /**\n   * Returns data-url with image encoded to base64\n   *\n   * Firstly this method will try to get image data from fabric canvas instance.\n   * If that is not available (for example when in edit mode)\n   * it will check options for loadImageData function. If it is specified,\n   * it will be invoked with this.id argument.\n   *\n   * If options.contentConfig.loadImageData is not set,\n   * options.contentConfig.imagesContainer will be checked for data.\n   *\n   * @returns {String} image data encoded in base64/png.\n   */\n  Drawer.prototype.getImageData = function () {\n    if (this.fCanvas) {\n      this.imageData = this.fCanvas.toDataURL();\n    } else if (this.options.contentConfig.loadImageData) {\n      this.imageData = this.options.contentConfig.loadImageData(this.id);\n      if (this.imageData[0] == '\"' &&\n        this.imageData[this.imageData.length - 1] == '\"') {\n        this.imageData = this.imageData.substr(1, this.imageData.length - 2);\n      }\n    } else if (this.$imagesContainer) {\n      var imagesDataText = this.$imagesContainer.text();\n      if (imagesDataText) {\n        var imagesData = JSON.parse(imagesDataText);\n        this.imageData = imagesData[this.id];\n      }\n    }\n\n    return this.imageData;\n  };\n\n\n\n\n  /**\n   * Loads canvas from serialized data.\n   * Triggers EVENT_LOADED_FROM_JSON on complete.\n   */\n  Drawer.prototype.loadCanvas = function (serializedCanvas) {\n    var _this = this;\n    if (serializedCanvas) {\n      this.fCanvas.loadFromJSON(serializedCanvas, function() {\n        // now when we load everything we should adjust object's properties\n        // for selection controls based on our config\n        var allObjects = _this.fCanvas.getObjects();\n        for (var o in allObjects) {\n          _this._updateObjectsControls(allObjects[o]);\n        }\n\n        // set mode to ACTIVE and trigger event\n        _this.mode = _this.MODE_ACTIVE;\n        _this.trigger(_this.EVENT_LOADED_FROM_JSON);\n\n        _this.fCanvas.renderAll();\n        _this.onCanvasLoaded();\n      });\n    } else {\n      // yes, we have not set all listeners, and better place for this\n      // is in the end of startEditing(), but it does not affect anything,\n      // so I let it here\n      _this.mode = this.MODE_ACTIVE;\n      _this.onCanvasLoaded();\n    }\n  };\n\n\n  Drawer.prototype.onCanvasLoaded = function () {\n    var _this = this;\n    // subscribe to events only after deserialization to avoid triggering\n    // for all objects while loading\n    this.fCanvas.on('object:added', function (fEvent) {\n      _this._updateObjectsControls(fEvent.target);\n      _this.trigger(_this.EVENT_OBJECT_ADDED, fEvent);\n      _this.onCanvasModified();\n    });\n    this.fCanvas.on('object:moving', function (fEvent) {\n      _this.trigger(_this.EVENT_OBJECT_MOVING, fEvent);\n    });\n    this.fCanvas.on('object:modified', function () {\n      _this.onCanvasModified();\n    });\n    this.fCanvas.on('before:render', function (fEvent) {\n      _this.trigger(_this.EVENT_BEFORE_RENDER, fEvent);\n    });\n    this.fCanvas.on('after:render', function (fEvent) {\n      _this.trigger(_this.EVENT_AFTER_RENDER, fEvent);\n    });\n    this.fCanvas.on('canvas:zoom:lower:set', function (fEvent) {\n      _this.trigger(_this.EVENT_ZOOM_SET, fEvent);\n    });\n    this.fCanvas.on('canvas:zoom:lower:restore', function (fEvent) {\n      _this.trigger(_this.EVENT_ZOOM_RESTORE, fEvent);\n    });\n    this.fCanvas.on('canvas:zoom:upper:set', function (fEvent) {\n      _this.trigger(_this.EVENT_ZOOM_UPPER_SET, fEvent);\n    });\n    this.fCanvas.on('canvas:zoom:upper:restore', function (fEvent) {\n      _this.trigger(_this.EVENT_ZOOM_UPPER_RESTORE, fEvent);\n    });\n    this.fCanvas.on('pencil:move:before', function (fEvent) {\n      _this.trigger(_this.EVENT_ZOOM_UPPER_SET, fEvent);\n    });\n    this.fCanvas.on('pencil:move:after', function (fEvent) {\n      _this.trigger(_this.EVENT_ZOOM_UPPER_RESTORE, fEvent);\n    });\n\n\n    this.fCanvas.on('object:removed', function () {\n      _this.onCanvasModified();\n    });\n    this.fCanvas.on('object:selected', function (fEvent) {\n      _this.trigger(_this.EVENT_OBJECT_SELECTED, fEvent);\n    });\n    this.fCanvas.on('selection:cleared', function (fEvent) {\n      _this.trigger(_this.EVENT_SELECTION_CLEARED, fEvent);\n    });\n    this.fCanvas.on('text:selection:changed', function (fEvent) {\n      _this.trigger(_this.EVENT_TEXT_SELECTION_CHANGED, fEvent);\n    });\n    this.fCanvas.on('text:editing:entered', function (fEvent) {\n      _this.trigger(_this.EVENT_TEXT_EDITING_ENTERED, fEvent);\n    });\n    this.fCanvas.on('text:editing:exited', function (fEvent) {\n      _this.trigger(_this.EVENT_TEXT_EDITING_EXITED, fEvent);\n    });\n\n    // restore brush and color settings\n    this.setColor();\n    // this.setBrushSize();\n\n    // create all toolbars. Toolbars must be created after fCanvas is initialized.\n    this.toolbars.createAllToolbars();\n\n    // give upper-canvas some id to properly handle clicks inside it\n    $(this.fCanvas.upperCanvasEl).attr('data-id', 1);\n\n    this.setSize(this.width, this.height);\n\n    this.$canvasEditContainer.on('contextmenu', function (event) {\n      // disable context menu in drawer for any other plugins, but trigger an\n      // event for all drawer-plugins to handle\n      _this.trigger(_this.EVENT_CONTEXTMENU, [event]);\n      return false;\n    });\n\n    util.bindLongPress(this.$canvasEditContainer, 'canvasEdit',\n        function (event) {\n          _this.trigger(_this.EVENT_CONTEXTMENU, [event]);\n        });\n\n    this.trigger(this.EVENT_EDIT_START);\n\n    this.$canvasEditContainer.on('keydown', '.canvas-container', function (event) {\n      _this.trigger(_this.EVENT_KEYDOWN, event);\n\n      var isDelKey = event.which == 8,\n          isBackspaceKey = event.which == 46,\n          removeKeyTriggered = isDelKey || isBackspaceKey,\n          needToDeleteActiveObj = removeKeyTriggered;\n\n      if (needToDeleteActiveObj) {\n        _this.fCanvas.renderOnAddRemove = false;\n        var activeObject = _this.fCanvas.getActiveObject();\n        if (activeObject) {\n          activeObject.remove();\n\n          event.preventDefault();\n          event.stopPropagation();\n        }\n\n        var activeGroup = _this.fCanvas.getActiveGroup();\n        if (activeGroup) {\n          activeGroup.getObjects().map(function (canvasObject) {\n            canvasObject.remove();\n          });\n\n          _this.fCanvas.discardActiveGroup();\n\n          event.preventDefault();\n          event.stopPropagation();\n        }\n\n        _this.fCanvas.renderAll();\n        _this.fCanvas.renderOnAddRemove = true;\n\n        return false;\n      }\n    });\n\n    this.trigger(this.EVENT_CANVAS_READY);\n  };\n\n  Drawer.prototype.getSerializedCanvas = function () {\n    var serializedCanvas = this.fCanvas.toJSON();\n    var serializedCanvasStr = JSON.stringify(serializedCanvas, null, 2);\n    return serializedCanvasStr;\n  };\n\n\n  Drawer.prototype.beforeSync = function () {\n    // we do not want redactor to see image's data in its tag since it could be\n    // huge.\n    if (this.options.contentConfig && !this.options.contentConfig.saveInHtml) {\n      this.$imageElement.attr('src', '');\n    }\n\n    if (this.fCanvas) {\n      this.beforeSyncActiveObject = this.fCanvas.getActiveObject();\n      this.beforeSyncActiveGroup = this.fCanvas.getActiveGroup();\n      this.fCanvas.deactivateAll();\n    }\n  };\n\n  Drawer.prototype.afterSync = function () {\n    if (this.beforeSyncActiveObject) {\n      this.fCanvas.setActiveObject(this.beforeSyncActiveObject);\n      delete this.beforeSyncActiveObject;\n    }\n\n    if (this.beforeSyncActiveGroup) {\n      this.fCanvas.setActiveGroup(this.beforeSyncActiveGroup);\n      delete this.beforeSyncActiveGroup;\n    }\n\n    if (this.options.contentConfig && !this.options.contentConfig.saveInHtml) {\n      this.$imageElement.attr('src', this.getImageData());\n    }\n  };\n\n  /**\n   * Synchronizes canvas data with storages specified in options.contentConfig.\n   *\n   * @param deleteItself\n   */\n  Drawer.prototype.syncCanvasData = function (deleteItself) {\n    var _this = this;\n\n    if (!_this.fCanvas) {\n      return;\n    }\n\n    var serializedCanvasStr = this.getSerializedCanvas();\n\n    if (_this.$canvasDataContainer) {\n      var existingDataText = _this.$canvasDataContainer.text();\n      var existingData = {};\n      if (existingDataText.length > 0) {\n        existingData = JSON.parse(existingDataText);\n      }\n\n      if (!deleteItself) {\n        if (_this.fCanvas) {\n          existingData[_this.id] = serializedCanvasStr;\n        }\n      } else {\n        delete existingData[_this.id];\n      }\n\n      _this.$canvasDataContainer.text(JSON.stringify(existingData, null, 2));\n\n      _this.log('sync', 'sync with data container done.');\n    }\n\n    if (this.options.contentConfig.saveCanvasData) {\n      this.options.contentConfig.saveCanvasData(this.id, serializedCanvasStr);\n    }\n\n    if (this.options.contentConfig.saveInHtml) {\n      this.$imageElement.attr('data-canvas-serialized', serializedCanvasStr);\n    }\n  };\n\n\n  /**\n   * Synchronizes image data(base64/png) string with storages defined in\n   * options.contentConfig.\n   *\n   * @param deleteItself\n   */\n  Drawer.prototype.syncImageData = function (deleteItself) {\n    var _this = this;\n\n    var imageData = _this.getImageData();\n\n    if (_this.$imagesContainer) {\n\n      var existingDataText = _this.$imagesContainer.text();\n      var existingData = {};\n      if (existingDataText.length > 0) {\n        existingData = JSON.parse(existingDataText);\n      }\n\n      if (!deleteItself) {\n        existingData[_this.id] = imageData;\n      } else {\n        delete existingData[_this.id];\n      }\n\n      _this.$imagesContainer.text(JSON.stringify(existingData, null, 2));\n\n      _this.log('sync', 'sync with images container done.');\n    }\n\n    if (_this.options.contentConfig.saveImageData) {\n      _this.options.contentConfig.saveImageData(this.id, imageData);\n    }\n  };\n\n\n})\n","export default (function (global) {\n    'use strict';\n\n    var fabric = global.fabric || (global.fabric = {}),\n        extend = fabric.util.object.extend;\n\n\n    /**\n     *\n     * @param {Object[]} eraserPathsData\n     * @constructor\n     */\n    fabric.ErasableMixin = function(objData) {\n        // clear eraserPaths. Do this, because inside fabric.Object.initialize()\n        // options properties were merged into 'this', and this.eraserPaths is copy of objData.eraserPaths\n        this.eraserPaths = [];\n        if (objData) {\n            // create eraserPaths from eraserPathsData\n            this.eraserPaths = this._createEraserPaths(objData.eraserPaths);\n        }\n    };\n\n\n    /**\n     * Initialization of object instance.\n     * Resets this.eraserPaths, then instantiates array of eraserPaths in it,\n     * data taken from objData.eraserPaths\n     *\n     * @param {Object} objData\n     */\n    fabric.ErasableMixin.prototype.initialize = function(objData) {\n        // add eraserPaths property to object instance\n        this.eraserPaths = [];\n\n        // TODO: do we need this??\n        if (objData) {\n            this.eraserPaths = fabric.ErasableMixin.prototype._createEraserPaths.call(this, objData.eraserPaths);\n            // this.eraserPaths = this._createEraserPaths(objData.eraserPaths);\n        }\n    };\n\n\n    /**\n     * Fills this.eraserPaths with paths, created from objData.eraserPaths\n     *\n     * @param {Object[]} eraserPathsData\n     * @private\n     */\n    fabric.ErasableMixin.prototype._createEraserPaths = function(eraserPathsData) {\n        var eraserPaths = [];\n        // fill this.eraserPaths with EraserPath objects, created from objData.eraserPaths\n        if (eraserPathsData) {\n            eraserPathsData.map(function (p) {\n                fabric.EraserPath.fromObject(p, function (createdPath) {\n                    eraserPaths.push(createdPath);\n                });\n            });\n        }\n        return eraserPaths;\n    };\n\n\n    /**\n     *\n     * @param ctx\n     */\n    fabric.ErasableMixin.prototype.render = function ErasableMixinRender (ctx, mainObjectRenderer) {\n        // get temp canvas\n        var tempCanvas = DrawerJs.util.getTemporaryCanvas(this.canvas);\n        var tempContext = tempCanvas.getContext('2d');\n\n        // clear rect with size as working canvas\n        var width = this.canvas.width;\n        var height = this.canvas.height;\n        tempContext.clearRect(0, 0, width, height);\n\n        // render object in tempContext, (Object._render() will be called)\n        mainObjectRenderer(tempContext);\n\n        // now render erasers on top of object\n        for (var i = 0; i < this.eraserPaths.length; i++) {\n            this.eraserPaths[i].globalCompositeOperation = 'destination-out';\n            this.eraserPaths[i].render(tempContext);\n        }\n\n        // render tempCanvas on working one\n        ctx.drawImage(tempCanvas, 0, 0);\n    };\n\n\n    /**\n     * Add eraser path to object.\n     * Sets neccessary path properties;\n     * Sets path angle same as object's,\n     * to keep path points in same place - rotates them back individually\n     *\n     * @param {fabric.Path} path\n     * @param {Function} callback\n     */\n    fabric.ErasableMixin.prototype.addEraserPath = function (srcPath, callback) {\n        var self = this;\n        // clone path, modify clone and add it\n        srcPath.clone(function (clonedPath) {\n            // eraser path must be non-interactive\n            clonedPath.set('stroke', 'blue');\n            clonedPath.selectable = false;\n            clonedPath.evented = false;\n\n            var thisCenter = self.getCenterPoint();\n            var pathCenter = clonedPath.getCenterPoint();\n\n            // eraser path offset to object\n            clonedPath.polygonOffsetX = pathCenter.x - thisCenter.x;\n            clonedPath.polygonOffsetY = pathCenter.y - thisCenter.y;\n\n            // set path angle same, as angle of object\n            var a = self.angle;\n            clonedPath.set({angle : a});\n\n            // to keep path points in same place - rotate them by -a\n            for (var i = 0; i < clonedPath.path.length; i++) {\n                fabric.ErasableMixin.prototype._rotatePathPoints(clonedPath.path[i], thisCenter, -a);\n            }\n\n            // call to make path be in correct position with object\n            fabric.ErasableMixin.prototype._updatePathPosition.call(self, clonedPath);\n\n            // now add modified clonedPath to list of eraser paths\n            self.eraserPaths.push(clonedPath);\n\n            // call callback\n            if (callback) {\n                callback(this);\n            }\n        });\n    };\n\n\n    /**\n     * Override default _set().\n     * Updates eraser paths' position, angle and scale,\n     * to be consistent with changes in object.\n     *\n     * @param key\n     * @param value\n     * @private\n     */\n    fabric.ErasableMixin.prototype._updateEPathsOnSet = function (key, value) {\n        if (!this.eraserPaths)\n            return;\n\n        var thisCenter = this.getCenterPoint();\n\n        for (var p = 0; p < this.eraserPaths.length; p++) {\n            var ePath = this.eraserPaths[p];\n\n            if (!(ePath instanceof fabric.EraserPath)) {\n                continue;\n            }\n\n            var ePathScaleX = ePath.scaleX, ePathScaleY = ePath.scaleY;\n            var coeff;\n\n            // if object's scaleX has changed - update each ePath individual scaleX\n            if (key == 'scaleX') {\n                coeff = value / this.scaleX;\n                ePathScaleX = ePathScaleX * coeff;\n                ePath.set('scaleX', ePathScaleX);\n            }\n\n            // if object's scaleY has changed - update each ePath individual scaleY\n            if (key == 'scaleY') {\n                coeff = value / this.scaleY;\n                ePathScaleY = ePathScaleY * coeff;\n                ePath.set('scaleY', ePathScaleY);\n            }\n\n            // eraser's angle is always same as object's\n            if (key == 'angle') {\n                ePath.set('angle', this.angle);\n            }\n\n            fabric.ErasableMixin.prototype._updatePathPosition.call(this, ePath);\n        }\n    };\n\n\n    fabric.ErasableMixin.prototype._updatePathPosition = function(ePath) {\n        var thisCenter = this.getCenterPoint();\n        var ePathScaleX = ePath.scaleX, ePathScaleY = ePath.scaleY;\n\n        // global ePath origin coord = object center coord +  scaled ePath offset\n        var globalOffsetPointX = thisCenter.x + (ePath.polygonOffsetX * ePathScaleX);\n        var globalOffsetPointY = thisCenter.y + (ePath.polygonOffsetY * ePathScaleY);\n\n        // calc ePath origin offset, respecting rotation\n        var rotatedPoint = fabric.util.rotatePoint(\n            new fabric.Point(globalOffsetPointX, globalOffsetPointY),\n            thisCenter,\n            fabric.util.degreesToRadians(ePath.angle)\n        );\n\n        ePath.set('left', rotatedPoint.x);\n        ePath.set('top', rotatedPoint.y);\n    };\n\n   /**\n     * Rotate all points in path around 'rotationOrigin' by 'angle'\n     * Iterates through 'data', and makes changes in-place\n     *\n     * @param  array data  array with path commands and coords, and coords WILL BE CHANGED\n     * @param  fabric.Point rotationOrigin\n     * @param  number angle angle in degrees\n     *\n     * @return array\n     */\n    fabric.ErasableMixin.prototype._rotatePathPoints = function(data, rotationOrigin, angle) {\n        var point, rotatedPoint;\n        var angleRad = fabric.util.degreesToRadians(angle);\n        var l = data.length;\n        for (var i = 0; i < l; i++) {\n            // skip non-numeric\n            if (typeof data[i] != 'number')\n                continue;\n\n            // if data[i] is number, then it and next number are coords of point in path:\n            // data[i] -> x, data[i + 1] -> y\n            point = new fabric.Point(data[i], data[i + 1]);\n\n            // rotate point around rotationOrigin\n            rotatedPoint = fabric.util.rotatePoint(point, rotationOrigin, angleRad);\n\n            // write rotatedPoint coords back in data[]\n            data[i] = rotatedPoint.x;\n            data[i + 1] = rotatedPoint.y;\n\n            // jump to next pair\n            i++;\n        }\n\n        return data;\n    };\n\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    fabric.ErasableMixin.prototype.toObject = function () {\n        var o =  { eraserPaths : this.eraserPaths.map(function (p) {\n            return p.toObject();\n        })\n        };\n        return o;\n    };\n\n\n    /**\n     * Returns fabric.ErasableObject instance from an object representation\n     *\n     * @static\n     * @memberOf fabric.Polygon\n     * @param {Object} objectData Object to create an instance from\n     * @return {fabric.ErasableObject} Instance of fabric.ErasableObject\n     */\n    fabric.ErasableMixin.prototype.fromObject = function (objectData) {\n        this.eraserPaths = fabric.ErasableMixin.prototype._createEraserPaths(objectData.eraserPaths);\n        return this;\n    };\n\n\n    /**\n     * @param {fabric.Object} obj\n     */\n    fabric.makeObjectErasable = function(obj) {\n        var mixin = new fabric.ErasableMixin();\n\n        // will be used in Eraser to determine, which objects are erasable\n        obj.prototype.isErasable = true;\n\n        var objInitialize = obj.prototype.initialize;\n        obj.prototype.initialize = function() {\n            // first call object initialize() with arguments\n            objInitialize.apply(this, arguments);\n            // then call mixin initialize()\n            mixin.initialize.apply(this, arguments);\n        };\n\n        obj.prototype.addEraserPath = function(path) {\n            mixin.addEraserPath.call(this, path);\n        };\n\n        var oldRender = obj.prototype.render;\n        obj.prototype.render = function(ctx) {\n            mixin.render.call(this, ctx, oldRender.bind(this));   // then render eraser paths\n        };\n\n        var oldSet = obj.prototype._set;\n        obj.prototype._set = function(key, value) {\n            mixin._updateEPathsOnSet.call(this, key, value);   // first update eraserPaths\n            oldSet.call(this, key, value);  // then call original _set() of object\n        };\n\n\n        // fromObject - special case. It is part of obj, not its prototype\n        var oldFromObject = obj.fromObject;\n          obj.fromObject = function(objData, callback) {\n            if (this.async) {\n                // first call fromObject() of object\n                oldFromObject.call(this, objData,\n                    function(createdObject){\n                        // then call ErasableMixin.fromObject to instantiate eraserPath\n                        var objWithErasers = mixin.fromObject.call(createdObject, objData);\n                        if(callback) {\n                          callback(objWithErasers);\n                        }\n                    });\n            } else {\n                // first call fromObject() of object\n                var createdObject = oldFromObject.call(this, objData);\n                // then call ErasableMixin.fromObject to instantiate eraserPath\n                var objWithErasers = mixin.fromObject.call(createdObject, objData);\n\n                return objWithErasers;\n            }\n        };\n\n\n        var oldToObject = obj.prototype.toObject;\n        obj.prototype.toObject = function() {\n            // first call oldToObject () of object\n            var objData = oldToObject.call(this);\n            // then extend result with\n            extend(objData, mixin.toObject.call(this));\n\n            return objData;\n        };\n    };\n\n\n})\n","export default (function (global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = {}),\n  extend = fabric.util.object.extend;\n\n  /**\n  * @class\n  * @extends fabric.IText\n  */\n  fabric.PText = fabric.util.createClass(fabric.IText, {\n    type: 'PText',\n\n    _defaultOptions : {\n      editIconMode    : true,\n    },\n\n    /**\n    * List of options to show when object is selected\n    * @type {Array}\n    */\n    objectOptionsList : [\n      'color',\n      'border',\n      'opacity',\n\n      'TextLineHeight',\n      'TextAlign'\n    ],\n\n    /**\n    * Initializes object.\n    * @param  {String} text\n    * @param  {Object} options\n    * @param  {boolean} options.editIconMode edit icon size, in pixels\n    * @param  {number|String} options.editIconSize edit icon size, in pixels or strings:  small, medium, large\n    */\n    initialize: function (text, options) {\n      this.callSuper('initialize', text, options);\n\n      this.options =  $.extend(true, this._defaultOptions || {}, options || {});\n\n      // create icon\n      var iconPath = DrawerJs.util.getDrawerFolderUrl() + 'assets/pencil-square-o.32.png';\n\n      // initialize control\n      if (this.options.editIconMode) {\n        this.startEditControl = new ObjectFloatingControl(this, iconPath, this._iconClickHandler.bind(this), this.options);\n      }\n    },\n    /**\n    * Copied from fabric js - add support of useCopiedStyles\n    * Handles onInput event\n    * @param {Event} e Event object\n    */\n    onInput: function(e) {\n      if (!this.isEditing || this.inCompositionMode) {\n        return;\n      }\n      var offset = this.selectionStart || 0,\n      offsetEnd = this.selectionEnd || 0,\n      textLength = this.text.length,\n      newTextLength = this.hiddenTextarea.value.length,\n      diff, charsToInsert, start;\n      if (newTextLength > textLength) {\n        //we added some character\n        start = this._selectionDirection === 'left' ? offsetEnd : offset;\n        diff = newTextLength - textLength;\n        charsToInsert = this.hiddenTextarea.value.slice(start, start + diff);\n      }\n      else {\n        //we selected a portion of text and then input something else.\n        //Internet explorer does not trigger this else\n        diff = newTextLength - textLength + offsetEnd - offset;\n        charsToInsert = this.hiddenTextarea.value.slice(offset, offset + diff);\n      }\n      var emptySelection = this.selectionStart === this.selectionEnd,\n      useCopiedStyles = emptySelection && this.canvas.copiedTextStyle;\n      this.insertChars(charsToInsert, useCopiedStyles);\n      e.stopPropagation();\n    },\n\n    renderCursorOrSelection: function (ctx) {\n      this.canvas.fire('canvas:zoom:upper:set');\n      this.callSuper('renderCursorOrSelection', ctx);\n      this.canvas.fire('canvas:zoom:upper:restore');\n\n    },\n\n\n    /**\n    * Overriding IText mouseup handler.\n    * This version do not trigger editing mode on second click.\n    * This functionality is inside _iconClickHandler\n    */\n    initMouseupHandler: function() {\n      this.on('mouseup', function(evt) {\n        if (this.options.editIconMode) {\n          this.onMouseUpHandler(evt);\n        } else {\n          this.onMouseUpSuperHandler(evt);\n        }\n      });\n    },\n\n\n    onMouseUpHandler : function (evt) {\n      this.__isMousedown = false;\n      if (!this.editable || (this._isObjectMoved && this._isObjectMoved(evt.e))) {\n        return;\n      }\n\n      this.selected = true;\n    },\n\n    /**\n    *\n    * @see fabric.js Text.onMouseUpSuperHandler\n    * @param  {fabric.Event} evt\n    */\n    onMouseUpSuperHandler : function(evt) {\n      this.__isMousedown = false;\n      if (!this.editable || (this._isObjectMoved && this._isObjectMoved(evt.e))) {\n        return;\n      }\n\n      if (this.__lastSelected && !this.__corner) {\n        this.enterEditing(evt.e);\n        if (this.selectionStart === this.selectionEnd) {\n          this.initDelayedCursor(true);\n        }\n        else {\n          this.renderCursorOrSelection();\n        }\n      }\n\n      this.selected = true;\n    },\n\n\n    /**\n    * Checks, if click on canvas is inside icon rect.\n    * If yes - launches editing mode\n    *\n    * @param  {fabric.Event} evt\n    */\n    _iconClickHandler : function(evt) {\n      //  select current object again, it is required for proper UI work\n      this.canvas.setActiveObject(this);\n\n      // enter editing and do stuff. Code is copied from IText.initMouseupHandler\n      this.enterEditing(evt.e);\n      if (this.selectionStart === this.selectionEnd) {\n        this.initDelayedCursor(true);\n      }\n      else {\n        this.renderCursorOrSelection();\n      }\n    },\n    /**\n    * Collect all styles which affects text\n    *\n    * @param  {fabric.Object} [obj] - text object\n    * @returns {object} - styles object\n    */\n    getObjStyles: function (obj) {\n      obj = obj || this;\n      var styles = {\n        fontSize: obj.fontSize,\n        fill: obj.fill,\n        textBackgroundColor: obj.textBackgroundColor,\n        textDecoration: obj.textDecoration,\n        fontFamily: obj.fontFamily,\n        fontWeight: obj.fontWeight,\n        fontStyle: obj.fontStyle,\n        lineHeight: obj.lineHeight,\n        stroke: obj.stroke,\n        strokeWidth: obj.strokeWidth\n      };\n      return styles;\n    },\n\n\n    /**\n    * Draws text and edit icon\n    * @param  {Context2D} ctx\n    */\n    render : function (ctx) {\n      this.callSuper('render', ctx);\n    },\n\n\n    toObject: function (propertiesToInclude) {\n      return extend(this.callSuper('toObject', propertiesToInclude));\n    }\n\n  });\n\n\n  /**\n  * Creates fabric object from data.\n  * Is sync, so simply returns new object.\n  *\n  * @param objData\n  * @param {function} callback\n  */\n  fabric.PText.fromObject = function (objData) {\n    return new fabric.PText(objData.text, objData);\n  };\n\n})\n","import initErasableMixin from './ErasableMixin'\nimport initErasableObject from './ErasableObject'\nimport initSegmentablePolygon from './SegmentablePolygon'\nimport initPText from './PText'\nimport initErasableText from './ErasableText'\nimport initErasableArrow from './ErasableArrow'\nimport initArrow from './Arrow'\nimport initClipping from './Clipping'\nimport initErasableImage from './ErasableImage'\nimport initErasableLine from './ErasableLine'\nimport initErasablePath from './ErasablePath'\nimport initErasablePencilBrush from './ErasablePencilBrush'\nimport initFloatingControl from './FloatingControl'\nimport initFabricJsExtensionsLine from './Line'\nimport initPCircle from './PCircle'\nimport initPRect from './PRect'\nimport initPTriangle from './PTriangle'\n\nexport default (function (DrawerJs) {\n  initErasableMixin(DrawerJs.global)\n  initErasableObject(DrawerJs.global)\n  initSegmentablePolygon(DrawerJs.global)\n  initPText(DrawerJs.global)\n  initErasableText(DrawerJs.global)\n  initArrow(DrawerJs.global)\n  initClipping(DrawerJs.clipping)\n  initErasableArrow(DrawerJs.global)\n  initErasableImage(DrawerJs.global)\n  initErasableLine(DrawerJs.global)\n  initErasablePath(DrawerJs.global)\n  initErasablePencilBrush(DrawerJs.global)\n  initFloatingControl(DrawerJs.global, DrawerJs.util)\n  initFabricJsExtensionsLine(DrawerJs.global)\n  initPCircle(DrawerJs.global)\n  initPRect(DrawerJs.global)\n  initPTriangle(DrawerJs.global)\n})\n","export default (function (global) {\n\n    'use strict';\n\n    var fabric = global.fabric || (global.fabric = {}),\n        extend = fabric.util.object.extend;\n\n    fabric.ErasableObject = fabric.util.createClass(fabric.Object, {\n        /**\n         * Type of an object\n         * @type String\n         * @default\n         */\n        type: 'erasableObject',\n\n        /**\n         * Constructor\n         * @param {Object} objData object\n         * @return {fabric.ErasableObject}\n         */\n        initialize: function (objData) {\n            objData = objData || {};\n\n            // call super[fabric.Object].initialize()\n            this.callSuper('initialize', objData);\n        }\n    });\n\n\n    /**\n     * Creates fabric object from data.\n     *\n     * @param objData\n     * @param {function} callback\n     * @return {fabric.ErasableObject} Instance of fabric.ErasableObject\n     */\n    fabric.ErasableObject.fromObject = function (objData) {\n        return new fabric.ErasableObject(objData);\n    };\n\n    // make our object erasable via ErasableMixin.\n    fabric.makeObjectErasable(fabric.ErasableObject);\n\n})\n","export default (function (global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = {}),\n    extend = fabric.util.object.extend,\n    min = fabric.util.array.min,\n    max = fabric.util.array.max,\n    toFixed = fabric.util.toFixed;\n\n  fabric.SegmentablePolygon = fabric.util.createClass(fabric.ErasableObject, {\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'segmentablePolygon',\n\n    /**\n     * Points array\n     * @type Array[]\n     * @default\n     */\n    points: null,\n\n    /**\n     * Minimum X from points values, necessary to offset points\n     * @type Number\n     * @default\n     */\n    minX: 0,\n\n    /**\n     * Minimum Y from points values, necessary to offset points\n     * @type Number\n     * @default\n     */\n    minY: 0,\n\n    /**\n     * List of options to show when object is selected\n     * @type {String[]}\n     */\n    objectOptionsList : ['color', 'border', 'opacity'],\n\n    /**\n     * Constructor\n     * @param {Array} points Array of points\n     * @param {Object} [options] Options object\n     * @return {fabric.Polygon} thisArg\n     */\n    initialize: function (points, options) {\n      var _this = this;\n\n      this.points = points;\n      if (points === undefined) {\n        console.error('Points should be array.');\n      }\n      options = options || {};\n\n      // call super[ErasableObject].initialize()\n      this.callSuper('initialize', options);\n\n      this._calcDimensions();\n      if (!('top' in options)) {\n        this.top = this.minY;\n      }\n      if (!('left' in options)) {\n        this.left = this.minX;\n      }\n    },\n\n    /**\n     * @private\n     */\n    _calcDimensions: function () {\n      var minX = null;\n      var minY = null;\n      var maxX = null;\n      var maxY = null;\n\n      for (var i = 0; i < this.points.length; i++) {\n        var _minX = min(this.points[i], 'x');\n        if (minX === null || _minX < minX) {\n          minX = _minX;\n        }\n\n        var _minY = min(this.points[i], 'y');\n        if (minY === null || _minY < minY) {\n          minY = _minY;\n        }\n\n        var _maxX = max(this.points[i], 'x');\n        if (maxX === null || _maxX > maxX) {\n          maxX = _maxX;\n        }\n\n        var _maxY = max(this.points[i], 'y');\n        if (maxY === null || _maxY > maxY) {\n          maxY = _maxY;\n        }\n      }\n\n      this.width = (maxX - minX) || 1;\n      this.height = (maxY - minY) || 1;\n\n      this.minX = minX;\n      this.minY = minY;\n    },\n\n    _fixPoints: function () {\n      this._calcDimensions();\n\n      if (this.minX != (this.width / 2) * -1 || this.minY != (this.height / 2) * -1) {\n        this.points.forEach(function (pointSegment) {\n          pointSegment.forEach(function (p) {\n            p.x -= (this.minX + this.width / 2);\n            p.y -= (this.minY + this.height / 2);\n          }, this);\n        }, this);\n      }\n    },\n\n\n    /**\n     * @private\n     */\n    _applyPointOffset: function () {\n      // change points to offset polygon into a bounding box\n      // executed one time\n      this.points.forEach(function (pointSegment) {\n        pointSegment.forEach(function (p) {\n          p.x -= (this.minX + this.width / 2);\n          p.y -= (this.minY + this.height / 2);\n        }, this);\n      }, this);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function (propertiesToInclude) {\n      return extend(this.callSuper('toObject', propertiesToInclude), {\n        points: this.points.concat(),\n        type: this.type\n      });\n    },\n\n    render: function (ctx, noTransform) {\n      // fix some stroke issue, save old stroke\n      if (this.points[0].length == 2) {\n        this.oldStroke = this.stroke;\n        this.oldStrokeDashArray = this.strokeDashArray;\n        this.oldStrokeWidth = this.strokeWidth;\n\n        this.stroke = this.fill;\n        this.strokeWidth = 3;\n        this.strokeDashArray = [];\n      }\n\n      // call super[ErasableObject].render\n      this.callSuper('render', ctx, noTransform);\n\n      // fix some stroke issue again, restore old stroke\n      if (this.points[0].length == 2) {\n        this.stroke = this.oldStroke;\n        this.strokeDashArray = this.oldStrokeDashArray;\n        this.strokeWidth = this.oldStrokeWidth;\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function (ctx) {\n      this.commonRender(ctx);\n      this._renderFill(ctx);\n      if (this.stroke || this.strokeDashArray) {\n        ctx.closePath();\n        this._renderStroke(ctx);\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    commonRender: function (ctx) {\n      var point;\n      ctx.beginPath();\n\n      if (this._applyPointOffset) {\n        if (!(this.group && this.group.type === 'path-group')) {\n          this._applyPointOffset();\n        }\n        this._applyPointOffset = null;\n      }\n\n      var firstSegment = this.points[0];\n\n      // when we have only one point we should draw a small cirlce\n      // so user could see it\n      if(firstSegment.length == 1){\n        var radius = 2;\n        ctx.arc(firstSegment[0].x, firstSegment[0].y,\n          radius, 0, 2 * Math.PI, false\n        );\n      }\n\n      ctx.moveTo(firstSegment[0].x, firstSegment[0].y);\n      for (var i = 0, len = firstSegment.length; i < len; i++) {\n        point = firstSegment[i];\n        ctx.lineTo(point.x, point.y);\n      }\n\n      ctx.closePath();\n\n      if (this.points.length > 1) {\n        for (var s = 1; s < this.points.length; s++) {\n          var segmentPoints = this.points[s];\n          ctx.moveTo(segmentPoints[0].x, segmentPoints[0].y);\n\n          for (var sp = 0; sp < segmentPoints.length; sp++) {\n            ctx.lineTo(segmentPoints[sp].x, segmentPoints[sp].y);\n          }\n\n        }\n      }\n    },\n\n\n    /**\n     * Returns complexity of an instance\n     * @return {Number} complexity of this instance\n     */\n    complexity: function () {\n      var sum = 0;\n      for (var i = 0; i < this.points.length; i++) {\n        sum += this.points[i].length;\n      }\n      return sum;\n    }\n\n  });\n\n  /**\n   * Returns fabric.Polygon instance from an object representation\n   * @static\n   * @memberOf fabric.Polygon\n   * @param {Object} object Object to create an instance from\n   * @return {fabric.Polygon} Instance of fabric.Polygon\n   */\n  fabric.SegmentablePolygon.fromObject = function (object) {\n    return new fabric.SegmentablePolygon(object.points, object, true);\n  };\n\n})\n","export default (function (global) {\n\n    'use strict';\n\n    var fabric = global.fabric || (global.fabric = {}),\n        extend = fabric.util.object.extend;\n\n    /**\n     * @class\n     * @extends fabric.Image\n     */\n    fabric.ErasableText = fabric.util.createClass(fabric.PText, {\n        type: 'ErasableText',\n        isErasable : true,\n\n        /**\n         */\n        initialize: function (text, options) {\n            this.callSuper('initialize', text, options);\n        },\n    });\n\n\n    /**\n     * Creates fabric object from data.\n     * Is async, so always use callback param.\n     *\n     * @param objData\n     * @param {function} callback\n     */\n    fabric.ErasableText.fromObject = function (objData/*, callback*/) {\n        return new fabric.ErasableText(objData.text, objData);\n    };\n\n    // important! set 'ErasableText.async'\n    // It is already set for the prototype, but if do not set here - it WILL CRASH on image load from object;\n    // idiotic stuff...\n    // fabric.ErasableText.async = true;\n\n    // make our object erasable via ErasableMixin.\n    fabric.makeObjectErasable(fabric.ErasableText);\n\n})\n","export default (function (global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = {}),\n    extend = fabric.util.object.extend;\n\n\n  fabric.Arrow = fabric.util.createClass(fabric.Line, {\n\n    type: 'arrow',\n\n    objectCaching : false,\n\n    /**\n     * List of options to show when object is selected\n     * @type {String[]}\n     */\n    objectOptionsList : ['border', 'opacity', 'lineWidth', 'strokeWidth'],\n\n\n    initialize: function (points, options) {\n      this.callSuper('initialize', points, options);\n      if (options) {\n        this.set('oneSided', options.oneSided);\n      }\n    },\n\n\n    // _getNonTransformedDimensions :function(argument) {\n    //     var strokeWidth = this.strokeWidth,\n    //     w = this.width + strokeWidth + 30,\n    //     h = this.height + strokeWidth + 30;\n\n    //     return { x: w, y: h };\n    // },\n\n    _render: function (ctx, noTransform) {\n      if (\n        (this.width < 20 && this.height < 20) ||\n        (this.scaleX < 0.3 && this.scaleY < 0.3)\n      ) {\n        this.set('padding', 20);\n      } else {\n        this.set('padding', 10);\n      }\n\n      this.canvas.calcOffset();\n\n      this.callSuper('_render', ctx, noTransform);\n      var points = this.callSuper('calcLinePoints');\n\n      var angle = this._calcArrowAngle(points.x1, points.y1, points.x2, points.y2);\n\n      if (!this.oneSided) {\n        this._drawArrow(ctx, {x: points.x1, y: points.y1}, angle + 90);\n      }\n      this._drawArrow(ctx, {x: points.x2, y: points.y2}, angle - 90);\n    },\n\n    _drawArrow: function (ctx, point, angle) {\n      var arrowSize = 0.5;\n\n      if(this.get('strokeWidth') > 1){\n        arrowSize = arrowSize * (this.get('strokeWidth') / 2);\n      }\n\n      var arrowPointOffsetX = 10;\n      var arrowPointOffsetY = 20;\n\n      var frontCenterPoint = {\n        x: point.x,\n        y: point.y + (arrowPointOffsetX * arrowSize)\n      };\n      var leftPoint = {\n        x: point.x - (arrowPointOffsetX * arrowSize),\n        y: point.y - (arrowPointOffsetY * arrowSize)\n      };\n      var backCenterPoint = {\n        x: point.x,\n        y: point.y - (arrowPointOffsetX * arrowSize)\n      };\n      var rightPoint = {\n        x: point.x + (arrowPointOffsetX * arrowSize),\n        y: point.y - (arrowPointOffsetY * arrowSize)\n      };\n\n      ctx.save();\n\n      ctx.translate(point.x, point.y);\n      ctx.rotate(angle * Math.PI / 180);\n      ctx.translate(point.x * -1, point.y * -1);\n\n      ctx.beginPath();\n      ctx.moveTo(frontCenterPoint.x, frontCenterPoint.y);\n      ctx.lineTo(leftPoint.x, leftPoint.y);\n      ctx.lineTo(backCenterPoint.x, backCenterPoint.y);\n      ctx.lineTo(rightPoint.x, rightPoint.y);\n      ctx.fillStyle = this.stroke;\n      ctx.fill();\n\n      ctx.restore();\n    },\n\n    _calcArrowAngle: function (x1, y1, x2, y2) {\n      var angle = 0,\n        x, y;\n\n      x = (x2 - x1);\n      y = (y2 - y1);\n\n      if (x === 0) {\n        angle = (y === 0) ? 0 :\n          (y > 0) ? Math.PI / 2 : Math.PI * 3 / 2;\n      }\n      else if (y === 0) {\n        angle = (x > 0) ? 0 : Math.PI;\n      }\n      else {\n        angle = (x < 0) ? Math.atan(y / x) + Math.PI :\n          (y < 0) ? Math.atan(y / x) + (2 * Math.PI) : Math.atan(y / x);\n      }\n\n      return (angle * 180 / Math.PI);\n    },\n\n    /**\n     * Returns object representation of an instance\n     */\n    toObject: function (propertiesToInclude) {\n      if (!propertiesToInclude) {\n        propertiesToInclude = [];\n      }\n\n      propertiesToInclude.push('oneSided', 'padding');\n\n      return fabric.util.object.extend(\n        this.callSuper('toObject', propertiesToInclude),\n        this.calcLinePoints()\n      );\n    }\n  });\n\n\n  /**\n   * Returns fabric.Arrow instance from an object representation\n   */\n  fabric.Arrow.fromObject = function (object) {\n    var points = [object.x1, object.y1, object.x2, object.y2];\n    return new fabric.Arrow(points, object);\n  };\n\n})\n","// if (!this.DrawerJs) {\n//   this.DrawerJs = {};\n// }\n//\n// this.DrawerJs.clipping = {};\n\nexport default (function (namespace) {\n  \"use strict\";\n\n  namespace.runClippingOperation = function (params) {\n    var firstShape = params.firstShape;\n    var secondShape = params.secondShape;\n\n    var polyPoints = prepareForClipper(\n      firstShape.width, firstShape.currentWidth,\n      firstShape.height, firstShape.currentHeight,\n      firstShape.center, firstShape.angleInRadians, firstShape.points);\n\n    // TODO: another shape angle and scaling needed\n    var anotherShapePointsGlobal =\n      localToGlobal(secondShape.center, secondShape.points);\n\n    var solution = processShape(params.cmd, polyPoints,\n      uppercaseCoords(anotherShapePointsGlobal));\n\n    if (secondShape.centersQueue) {\n      for (var i = 0; i < secondShape.centersQueue.length; i++) {\n\n        anotherShapePointsGlobal = localToGlobal(\n          secondShape.centersQueue[i], secondShape.points\n        );\n\n        solution = processShape(\n          params.cmd, solution, uppercaseCoords(anotherShapePointsGlobal)\n        );\n      }\n    }\n\n    solution = ClipperLib.JS.Lighten(solution, 0.1);\n\n    var result = null;\n\n    if (solution.length > 0) {\n      result = restoreAfterClipper(\n        firstShape.currentWidth, firstShape.width,\n        firstShape.currentHeight, firstShape.height,\n        firstShape.center, firstShape.angleInRadians * -1, solution);\n    }\n\n    return result;\n  };\n\n\n  var processShape = function (cmd, firstShapePoints, secondShapePoints) {\n    var solution = new ClipperLib.Paths();\n    var c = new ClipperLib.Clipper();\n\n    c.AddPaths(firstShapePoints,\n      ClipperLib.PolyType.ptSubject, true\n    );\n\n    c.AddPaths(secondShapePoints,\n      ClipperLib.PolyType.ptClip, true\n    );\n    c.Execute(cmd, solution);\n\n    return solution;\n  };\n\n  var localToGlobal = function (center, pointsSegments) {\n    var result = [];\n    for (var s = 0; s < pointsSegments.length; s++) {\n      var segmentResult = [];\n      for (var p = 0; p < pointsSegments[s].length; p++) {\n        segmentResult.push({\n          x: center.x + pointsSegments[s][p].x,\n          y: center.y + pointsSegments[s][p].y\n        });\n      }\n      result.push(segmentResult);\n    }\n    return result;\n  };\n\n  var globalToLocal = function (center, pointsSegments) {\n    var result = [];\n    for (var s = 0; s < pointsSegments.length; s++) {\n      var segmentResult = [];\n      for (var p = 0; p < pointsSegments[s].length; p++) {\n        segmentResult.push({\n          x: pointsSegments[s][p].x - center.x,\n          y: pointsSegments[s][p].y - center.y\n        });\n      }\n      result.push(segmentResult);\n    }\n    return result;\n  };\n\n  var rotatePoints = function (pointsSegments, center, angle) {\n    var result = [];\n    for (var s = 0; s < pointsSegments.length; s++) {\n      var segmentResult = [];\n      for (var p = 0; p < pointsSegments[s].length; p++) {\n        var point = new fabric.Point(pointsSegments[s][p].x,\n          pointsSegments[s][p].y\n        );\n        var rotatedPoint = fabric.util.rotatePoint(point, center, angle);\n        segmentResult.push({\n          x: rotatedPoint.x,\n          y: rotatedPoint.y\n        });\n      }\n      result.push(segmentResult);\n    }\n    return result;\n  };\n\n  var uppercaseCoords = function (pointsSegments) {\n    var result = [];\n    for (var s = 0; s < pointsSegments.length; s++) {\n      var segmentResult = [];\n      for (var p = 0; p < pointsSegments[s].length; p++) {\n        segmentResult.push({\n          X: pointsSegments[s][p].x,\n          Y: pointsSegments[s][p].y\n        });\n      }\n      result.push(segmentResult);\n    }\n    return result;\n  };\n\n  var lowercaseCoords = function (pointsSegments) {\n    var result = [];\n    for (var s = 0; s < pointsSegments.length; s++) {\n      var segmentResult = [];\n      for (var p = 0; p < pointsSegments[s].length; p++) {\n        segmentResult.push({\n          x: pointsSegments[s][p].X,\n          y: pointsSegments[s][p].Y\n        });\n      }\n      result.push(segmentResult);\n    }\n    return result;\n  };\n\n  var scaleCoords = function (originalWidth, scaledWidth,\n                              originalHeight, scaledHeight, pointsSegments) {\n    var result = [];\n    for (var s = 0; s < pointsSegments.length; s++) {\n      var segmentResult = [];\n      for (var p = 0; p < pointsSegments[s].length; p++) {\n        var x = pointsSegments[s][p].x;\n        var y = pointsSegments[s][p].y;\n\n        var originalWidthPercent = x * 100 / originalWidth;\n        var newX = originalWidthPercent * scaledWidth / 100;\n\n        var originalHeightPercent = y * 100 / originalHeight;\n        var newY = originalHeightPercent * scaledHeight / 100;\n\n        segmentResult.push({\n          x: newX,\n          y: newY\n        });\n      }\n      result.push(segmentResult);\n    }\n    return result;\n  };\n\n  var prepareForClipper = function (originalWidth, scaledWidth,\n                                    originalHeight, scaledHeight,\n                                    centerPoint, rotationAngleInRadians,\n                                    pointsSegments) {\n    var result = [];\n    var sin = Math.sin(rotationAngleInRadians),\n      cos = Math.cos(rotationAngleInRadians);\n\n    for (var s = 0; s < pointsSegments.length; s++) {\n      var segmentResult = [];\n      for (var p = 0; p < pointsSegments[s].length; p++) {\n        var x = pointsSegments[s][p].x;\n        var y = pointsSegments[s][p].y;\n\n        // --- scale ---\n        var originalWidthPercent = x * 100 / originalWidth;\n        var newX = originalWidthPercent * scaledWidth / 100;\n\n        var originalHeightPercent = y * 100 / originalHeight;\n        var newY = originalHeightPercent * scaledHeight / 100;\n        // --- /scale ---\n\n        // ---- local to global ----\n        newX = centerPoint.x + newX;\n        newY = centerPoint.y + newY;\n        // ---- /local to global ----\n\n\n        // ---- rotation angle ----\n        // we could not use fabric point here because it's needed to be constructed\n        // with memory allocation but that is bad idea for large data processing\n        newX -= centerPoint.x;\n        newY -= centerPoint.y;\n\n        var rx = newX * cos - newY * sin,\n          ry = newX * sin + newY * cos;\n\n        newX = rx += centerPoint.x;\n        newY = ry += centerPoint.y;\n        // ---- /rotation angle ----\n\n        segmentResult.push({\n          X: newX,\n          Y: newY\n        });\n      }\n      result.push(segmentResult);\n    }\n    return result;\n  };\n\n  var restoreAfterClipper = function (originalWidth, scaledWidth,\n                                      originalHeight, scaledHeight,\n                                      centerPoint, rotationAngleInRadians,\n                                      pointsSegments) {\n    var result = [];\n    var sin = Math.sin(rotationAngleInRadians),\n      cos = Math.cos(rotationAngleInRadians);\n\n    for (var s = 0; s < pointsSegments.length; s++) {\n      var segmentResult = [];\n      for (var p = 0; p < pointsSegments[s].length; p++) {\n        var x = pointsSegments[s][p].X;\n        var y = pointsSegments[s][p].Y;\n\n        // ---- rotation angle ----\n        // we could not use fabric point here because it's needed to be constructed\n        // with memory allocation but that is bad idea for large data processing\n        x -= centerPoint.x;\n        y -= centerPoint.y;\n\n        var rx = x * cos - y * sin,\n          ry = x * sin + y * cos;\n\n        x = rx += centerPoint.x;\n        y = ry += centerPoint.y;\n        // ---- /rotation angle ----\n\n        // ---- local to global ----\n        x = x - centerPoint.x;\n        y = y - centerPoint.y;\n        // ---- /local to global ----\n\n        // --- scale ---\n        var originalWidthPercent = x * 100 / originalWidth;\n        x = originalWidthPercent * scaledWidth / 100;\n\n        var originalHeightPercent = y * 100 / originalHeight;\n        y = originalHeightPercent * scaledHeight / 100;\n        // --- /scale ---\n\n        segmentResult.push({\n          x: x,\n          y: y\n        });\n      }\n      result.push(segmentResult);\n    }\n    return result;\n  };\n\n})\n","export default (function (global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = {});\n\n  fabric.ErasableArrow = fabric.util.createClass(fabric.Arrow, {\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'ErasableArrow',\n    originX: 'center',\n    originY: 'center',\n\n\n    /**\n     * Constructor\n     * @param {Array} points Array of points\n     * @param {Object} [options] Options object\n     * @return {fabric.ErasableArrow}\n     */\n    initialize: function (points, options) {\n      options = options || {};\n      this.callSuper('initialize', points, options);\n    },\n\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Objectr representation of an instance\n     */\n    toObject: function (propertiesToInclude) {\n      return this.callSuper('toObject', propertiesToInclude);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function (ctx) {\n        this.callSuper('_render', ctx);\n    }\n\n  });\n\n  /**\n   * Returns fabric.Polygon instance from an object representation\n   * @static\n   * @memberOf fabric.Polygon\n   * @param {Object} object Object to create an instance from\n   * @return {fabric.Polygon} Instance of fabric.Polygon\n   */\n  fabric.ErasableArrow.fromObject = function (object) {\n      // form 'points' array, for first parameter in fabric.ErasableArrow c-tor\n      var points = [object.x1, object.y1, object.x2, object.y2];\n      return new fabric.ErasableArrow(points, object);\n  };\n\n\n  // make our object erasable via ErasableMixin.\n  fabric.makeObjectErasable(fabric.ErasableArrow);\n})\n","export default (function (global) {\n\n    'use strict';\n\n    var fabric = global.fabric || (global.fabric = {}),\n        extend = fabric.util.object.extend;\n\n    /**\n     * @class\n     * @extends fabric.Image\n     */\n    fabric.ErasableImage = fabric.util.createClass(fabric.Image, {\n        type: 'ErasableImage',\n        async: true,\n\n        /**\n         * List of options to show when object is selected\n         * @type {String[]}\n         */\n        objectOptionsList : ['opacity', 'border'],\n\n        /**\n         * Initializes ErasableImage with fabric.Image\n         *\n         * @param {fabric.Image} fabricImage\n         * @param options\n         */\n        initialize: function (fabricImage, options) {\n            var _this = this;\n            options = options || {};\n\n            // set width and height\n            this.width = options.width || 10;\n            this.height = options.height || 10;\n\n            this.callSuper('initialize', fabricImage, options);\n        },\n\n        _render: function (ctx) {\n            this.callSuper('_render', ctx);\n        },\n\n        _set: function (key, value) {\n            this.callSuper('_set', key, value);\n        },\n\n        toObject: function (propertiesToInclude) {\n            return extend(this.callSuper('toObject', propertiesToInclude), {\n                width: this.width,\n                height: this.height\n            });\n        }\n\n    });\n\n\n    /**\n     * Creates fabric object from data.\n     * Is async, so always use callback param.\n     *\n     * @param objData\n     * @param {function} callback\n     */\n    fabric.ErasableImage.fromObject = function (objData, callback) {\n        fabric.util.loadImage(objData.src, function(createdImage) {\n            var erasableImage = new fabric.ErasableImage(createdImage, objData);\n            // call callback with instance of our erasableImage\n            if (callback)\n                callback(erasableImage);\n        });\n    };\n\n    // important! set 'ErasableImage.async'\n    // It is already set for the prototype, but if do not set here - it WILL CRASH on image load from object;\n    // idiotic stuff...\n    fabric.ErasableImage.async = true;\n\n    // make our object erasable via ErasableMixin.\n    fabric.makeObjectErasable(fabric.ErasableImage);\n\n})\n","export default (function (global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = {});\n\n  fabric.ErasableLine = fabric.util.createClass(fabric.Line, {\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'ErasableLine',\n    originX: 'center',\n    originY: 'center',\n\n    /**\n     * List of options to show when object is selected\n     * @type {String[]}\n     */\n    objectOptionsList : ['border', 'opacity', 'lineWidth', 'strokeWidth'],\n\n    /**\n     * Constructor\n     * @param {Array} points Array of points\n     * @param {Object} [options] Options object\n     * @return {fabric.ErasableLine}\n     */\n    initialize: function (points, options) {\n      options = options || {};\n      this.callSuper('initialize', points, options);\n    },\n\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Objectr representation of an instance\n     */\n    toObject: function (propertiesToInclude) {\n      return this.callSuper('toObject', propertiesToInclude);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function (ctx) {\n        this.callSuper('_render', ctx);\n    }\n\n  });\n\n  /**\n   * Returns fabric.Polygon instance from an object representation\n   * @static\n   * @memberOf fabric.Polygon\n   * @param {Object} object Object to create an instance from\n   * @return {fabric.Polygon} Instance of fabric.Polygon\n   */\n  fabric.ErasableLine.fromObject = function (object) {\n      // form 'points' array, for first parameter in fabric.ErasableLine c-tor\n      var points = [object.x1, object.y1, object.x2, object.y2];\n      return new fabric.ErasableLine(points, object);\n  };\n\n\n  // make our object erasable via ErasableMixin.\n  fabric.makeObjectErasable(fabric.ErasableLine);\n})\n","export default (function(global) {\n\n    'use strict';\n\n    var fabric = global.fabric || (global.fabric = {}),\n        extend = fabric.util.object.extend;\n\n    fabric.ErasablePath = fabric.util.createClass(fabric.Path, {\n\n        type: 'ErasablePath',\n\n        objectCaching : false,\n        evented : false,\n        selectable : false,\n\n\n        initialize: function(pathData, options) {\n            options = options || {};\n            this.callSuper('initialize', pathData, options);\n        },\n\n\n        _render: function(ctx) {\n            this.callSuper('_render', ctx);\n        },\n\n\n        toObject: function(propertiesToInclude) {\n            return this.callSuper('toObject', propertiesToInclude);\n        }\n\n    });\n\n    /**\n     * Creates object from  serialized data\n     * @param  {Object} object\n     * @return {ErasablePath}\n     */\n    fabric.ErasablePath.fromObject = function(data) {\n        // @todo: maybe use code from fabric.Path.fromObject\n        return new fabric.ErasablePath(data.path, data);\n    };\n\n\n    fabric.ErasablePath.async = false;\n\n    // make our object erasable via ErasableMixin.\n    fabric.makeObjectErasable(fabric.ErasablePath);\n\n})\n","export default (function(global) {\n    'use strict';\n\n    var fabric = global.fabric || (global.fabric = {});\n\n    fabric.ErasablePencilBrush = fabric.util.createClass(fabric.PencilBrush, {\n\n        type: 'ErasablePencilBrush',\n\n        /**\n         * List of tool options to show when object is selected\n         * @type {String[]}\n         */\n        objectOptionsList : ['color', 'opacity', 'brush'],\n\n\n      /**\n       * Overriding fabric.PencilBrush.onMouseMove\n       * Method code is exactly copy of fabric.PencilBrush.onMouseMove,\n       * only change is trigger events\n       *\n       * @param {Object} pointer - object with \"x\" and \"y\" values\n       * @see {fabric.PencilBrush.onMouseMove}\n       */\n      onMouseMove: function(pointer) {\n        this._captureDrawingPath(pointer);\n        // redraw curve\n        // clear top canvas\n\n        this.canvas.clearContext(this.canvas.contextTop);\n        // this.canvas.fire('pencil:move:before');\n        this._render();\n        // this.canvas.fire('pencil:move:after');\n        this.canvas.renderAll();\n      },\n\n      /**\n       * Overriding fabric.PencilBrush._render\n       * Method code is exactly copy of fabric.PencilBrush._render,\n       * only change is trigger events\n       *\n       * @see {fabric.PencilBrush._render}\n       * @private\n       */\n      _render: function () {\n        this.canvas.fire('pencil:move:before');\n        this.callSuper('_render');\n        this.canvas.fire('pencil:move:after');\n      },\n\n        initialize: function(canvas, options) {\n            options = options || {};\n            // parent c-tor has no options argument, so adding them here\n            this.options = options;\n            // call parent c-tor\n            this.callSuper('initialize', canvas);\n        },\n\n\n        /**\n         * Overriding fabric.PencilBrush.createPath\n         * Method code is exactly copy of fabric.PencilBrush.createPath,\n         * only change is creating fabric.ErasablePath instead of fabric.Path\n         *\n         * Creates fabric.ErasablePath object to add on canvas\n         * @param {String} pathData Path data\n         * @return {fabric.Path} Path to add on canvas\n         * @see {fabric.PencilBrush.createPath}\n         */\n        createPath: function(pathData) {\n            var path = new fabric.ErasablePath(pathData, {\n                fill: null,\n                stroke: this.color,\n                opacity: this.opacity,\n                strokeWidth: this.width,\n                strokeLineCap: this.strokeLineCap,\n                strokeLineJoin: this.strokeLineJoin,\n                strokeDashArray: this.strokeDashArray,\n                originX: 'center',\n                originY: 'center'\n            });\n\n            if (this.shadow) {\n                this.shadow.affectStroke = true;\n                path.setShadow(this.shadow);\n            }\n\n            return path;\n        }\n\n    });\n\n})\n","export default (function (global, Util) {\n\n    'use strict';\n\n    var fabric = global.fabric || (global.fabric = {}),\n        extend = fabric.util.object.extend;\n\n\n    var ObjectFloatingControl = function(obj, iconPath, callback, options) {\n        // set object\n        if (!obj || !(obj instanceof fabric.Object)) {\n            throw new Error('[ObjectFloatingControl()]  invalid param : obj');\n        }\n        this.obj = obj;\n\n        // set iconPath\n        if (!iconPath || !Util.isString(iconPath)) {\n            throw new Error('[ObjectFloatingControl()]  invalid param : iconPath');\n        }\n        this.iconPath = iconPath;\n\n        // set iconClickHandler\n        if (!callback || !(callback instanceof Function)) {\n            throw new Error('[ObjectFloatingControl()]  invalid param : callback');\n        }\n        this.callback = callback;\n\n        // set options\n        this.options = $.extend(true, {}, this._defaultOptions || {}, options || {});\n\n        // by default control is enabled\n        this.enabled = this.options.enabled;\n\n        // load icon\n        fabric.Image.fromURL(iconPath, this._onIconReady.bind(this));\n\n        // set handlers on object added to / removed from canvas\n        this.obj.on('added', this._onAdded.bind(this));\n        this.obj.on('removed', this._onRemoved.bind(this));\n    };\n\n\n    ObjectFloatingControl.prototype.SMALL_ICON  = 'small';\n    ObjectFloatingControl.prototype.MEDIUM_ICON = 'medium';\n    ObjectFloatingControl.prototype.LARGE_ICON  = 'large';\n\n    ObjectFloatingControl.prototype.LEFT_TOP  = 'left-top';\n    ObjectFloatingControl.prototype.LEFT_BOTTOM  = 'left-bottom';\n    ObjectFloatingControl.prototype.RIGHT_TOP  = 'right-top';\n    ObjectFloatingControl.prototype.RIGHT_BOTTOM  = 'right-bottom';\n\n    ObjectFloatingControl.prototype._defaultOptions = {\n        defaulIconSize : 32,\n        symbolicIconSizes : {\n            'small'  : 16,\n            'medium' : 32,\n            'large'  : 48\n        },\n        enabled : true\n    };\n\n\n    ObjectFloatingControl.prototype.remove = function() {\n        this._onRemoved();\n    };\n\n\n    ObjectFloatingControl.prototype.enable = function() {\n        this.enabled = true;\n    };\n\n\n    ObjectFloatingControl.prototype.disable = function() {\n        this.enabled = false;\n    };\n\n    /**\n     * After object was added to canvas - add our click handler on canvas\n     * @param  {fabric.Event} evt\n     */\n    ObjectFloatingControl.prototype._onAdded = function(evt) {\n        // object now has canvas property set\n        this.canvas = this.obj.canvas;\n\n        // set click handlers\n        this._iconClickHandlerBinded = this._iconClickHandler.bind(this);\n        this.canvas.on('mouse:up', this._iconClickHandlerBinded);\n        this.canvas.on('touchend', this._iconClickHandlerBinded);\n\n        // set after:render handler\n        this._bindedAfterRender = this._onAfterRender.bind(this);\n        this.canvas.on('after:render', this._bindedAfterRender);\n    };\n\n\n    /**\n     * After object was removed from canvas - remove our click handler on canvas\n     * @param  {fabric.Event} evt\n     */\n    ObjectFloatingControl.prototype._onRemoved = function(evt) {\n        this.canvas.off('mouse:up', this._iconClickHandlerBinded);\n        this.canvas.off('touchend', this._iconClickHandlerBinded);\n        this.canvas.off('after:render', this._bindedAfterRender);\n    };\n\n\n    /**\n     * When image is loaded - save it as this.icon,\n     * and calc it dimensions;\n     *\n     * @param  {fabric.Image} image\n     */\n    ObjectFloatingControl.prototype._onIconReady = function(image) {\n        var originalSize = this.options.iconSize || this.options.defaulIconSize,\n            sizeFromOptions = this.options.editIconSize,\n            neededSizeAsSymbolic = typeof sizeFromOptions === 'string' && this.options.symbolicIconSizes[sizeFromOptions],\n            neededSize = neededSizeAsSymbolic || sizeFromOptions || this.options.defaulIconSize,\n            iconScale = neededSize / originalSize;\n\n        this.icon = image;\n        this.iconSize = originalSize;\n        this.iconScale = iconScale;\n\n        // calc the best looking offset\n        this.icon.offsetFromLeft = this.options.defaulIconSize * 0.66;\n        this.icon.offsetFromTop  = -this.iconSize * 0.66;\n\n        this.icon.set({\n          scaleX: iconScale,\n          scaleY: iconScale,\n          originX : 'center',\n          originY : 'center',\n          opacity: 1});\n    };\n\n\n    /**\n     * If click on canvas is inside icon rect - launches iconClickHandler.\n     *\n     * @param  {fabric.Event} evt\n     */\n    ObjectFloatingControl.prototype._iconClickHandler = function(evt) {\n        // checking for this.canvas to be sure, kinda hacky\n        // checking for this.icon, as event can be fired, when icon is not ready yet\n        if (!this.enabled || !this.canvas || !this.icon) {\n            return;\n        }\n\n        var x, y;\n\n        var evtCoords = this.canvas.getPointer(evt.e);\n\n        if (evtCoords) {\n          x = evtCoords.x;\n          y = evtCoords.y;\n        } else {\n          // if no offsetX provided (case of touch events)\n          if (evt.e.offsetX === undefined) {\n            var drawerLeft = drawer.left();\n            var drawerTop = drawer.top();\n\n            // in case of touch event - we have no offestX, offsetY\n            x = evt.e.pageX - drawerLeft;\n            y = evt.e.pageY - drawerTop;\n            console.log('x : ', evt.e.pageX, '-', drawerLeft, '=', x);\n            console.log('y : ', evt.e.pageY, '-', drawerTop,  '=', y);\n          } else {\n            x = evt.e.offsetX;\n            y = evt.e.offsetY;\n          }\n        }\n\n        if (this._coordInsideIcon(x, y)) {\n            this.callback(evt, this);\n        }\n    };\n\n\n    /**\n     * Returns true, if coord is inside icon rect\n     *\n     * @param  {number} x\n     * @param  {number} y\n     * @return {Boolean}\n     */\n    ObjectFloatingControl.prototype._coordInsideIcon = function (x, y) {\n      var rect = (this.icon.width * this.icon.scaleX) / 2,\n          coords = this._calcIconCoords(),\n          insideX = (x > coords.x - rect) && (x < coords.x + rect),\n          insideY = (y > coords.y - rect)  && (y < coords.y + rect),\n          inside = insideX && insideY;\n\n      return inside;\n    };\n\n\n    ObjectFloatingControl.prototype._onAfterRender = function (evt) {\n      this.canvas.fire('canvas:zoom:lower:set');\n      this._drawIcon();\n      this.canvas.fire('canvas:zoom:lower:restore');\n    };\n\n    /**\n     * Draws edit icon, if object is selected.\n     *\n     * @param  {context2D} ctx\n     */\n    ObjectFloatingControl.prototype._drawIcon = function () {\n        if (this.enabled && this.icon && this.obj.active) {\n            var coords = this._calcIconCoords();\n\n            this.icon.left = coords.x;\n            this.icon.top = coords.y;\n            this.icon.render(this.canvas.getContext());\n        }\n    };\n\n\n    /**\n     * Calc icon coords based on object coords.\n     * @return {Object} coords {x, y}\n     */\n    ObjectFloatingControl.prototype._calcIconCoords = function() {\n        var realTopLeft = this.obj.getPointByOrigin('left', 'top');\n\n        var xOffsetLocal = this.icon.offsetFromLeft * this.obj.scaleX;\n        var yOffsetLocal = this.icon.offsetFromTop;\n\n        var a = fabric.util.degreesToRadians(this.obj.angle);\n        var xOffset = xOffsetLocal * Math.cos(a) - yOffsetLocal * Math.sin(a);\n        var yOffset = xOffsetLocal * Math.sin(a) + yOffsetLocal * Math.cos(a);\n\n        return {x: realTopLeft.x + xOffset, y : realTopLeft.y + yOffset};\n    };\n\n    global.ObjectFloatingControl = ObjectFloatingControl;\n\n})\n","export default (function (global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = {}),\n    extend = fabric.util.object.extend,\n    min = fabric.util.array.min,\n    max = fabric.util.array.max,\n    toFixed = fabric.util.toFixed;\n\n  fabric.SegmentableLine = fabric.util.createClass(fabric.Object, {\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'SegmentableLine',\n\n    /**\n     * List of options to show when object is selected\n     * @type {String[]}\n     */\n    objectOptionsList : ['border', 'opacity', 'lineWidth', 'strokeWidth'],\n\n    /**\n     * Points array\n     * @type Array[]\n     * @default\n     */\n    points: null,\n\n    /**\n     * Minimum X from points values, necessary to offset points\n     * @type Number\n     * @default\n     */\n    minX: 0,\n\n    /**\n     * Minimum Y from points values, necessary to offset points\n     * @type Number\n     * @default\n     */\n    minY: 0,\n\n    /**\n     * Constructor\n     * @param {Array} points Array of points\n     * @param {Object} [options] Options object\n     * @return {fabric.Polygon} thisArg\n     */\n    initialize: function (points, options) {\n      options = options || {};\n      this.points = points;\n      this.callSuper('initialize', options);\n      this._calcDimensions();\n      if (!('top' in options)) {\n        this.top = this.minY;\n      }\n      if (!('left' in options)) {\n        this.left = this.minX;\n      }\n    },\n    /**\n     * @private\n     */\n    _calcDimensions: function () {\n\n      var points = this.points;\n\n      var minX = null;\n      var minY = null;\n      var maxX = null;\n      var maxY = null;\n\n      for (var i = 0; i < this.points.length; i++) {\n        var _minX = min(this.points[i], 'x');\n        if (minX === null || _minX < minX) {\n          minX = _minX;\n        }\n\n        var _minY = min(this.points[i], 'y');\n        if (minY === null || _minY < minY) {\n          minY = _minY;\n        }\n\n        var _maxX = max(this.points[i], 'x');\n        if (maxX === null || _maxX > maxX) {\n          maxX = _maxX;\n        }\n\n        var _maxY = max(this.points[i], 'y');\n        if (maxY === null || _maxY > maxY) {\n          maxY = _maxY;\n        }\n      }\n\n      this.width = (maxX - minX) || 1;\n      this.height = (maxY - minY) || 1;\n\n      this.minX = minX;\n      this.minY = minY;\n    },\n\n    /**\n     * @private\n     */\n    _applyPointOffset: function () {\n      // change points to offset polygon into a bounding box\n      // executed one time\n      this.points.forEach(function (pointSegment) {\n        pointSegment.forEach(function (p) {\n          p.x -= (this.minX + this.width / 2);\n          p.y -= (this.minY + this.height / 2);\n        }, this);\n      }, this);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function (propertiesToInclude) {\n      return extend(this.callSuper('toObject', propertiesToInclude), {\n        points: this.points.concat(),\n        type: this.type\n      });\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toSVG: function (reviver) {\n      var points = [],\n        markup = this._createBaseSVGMarkup();\n\n      for (var i = 0, len = this.points.length; i < len; i++) {\n        points.push(toFixed(this.points[i].x, 2), ',', toFixed(this.points[i].y, 2), ' ');\n      }\n\n      markup.push(\n        '<', this.type, ' ',\n        'points=\"', points.join(''),\n        '\" style=\"', this.getSvgStyles(),\n        '\" transform=\"', this.getSvgTransform(),\n        ' ', this.getSvgTransformMatrix(),\n        '\"/>\\n'\n      );\n\n      return reviver ? reviver(markup.join('')) : markup.join('');\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function (ctx) {\n      this.commonRender(ctx);\n      this._renderFill(ctx);\n      if (this.stroke || this.strokeDashArray) {\n        //ctx.closePath();\n        this._renderStroke(ctx);\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    commonRender: function (ctx) {\n      var point;\n      ctx.beginPath();\n\n      if (this._applyPointOffset) {\n        if (!(this.group && this.group.type === 'path-group')) {\n          this._applyPointOffset();\n        }\n        this._applyPointOffset = null;\n      }\n\n      var firstSegment = this.points[0];\n\n      ctx.moveTo(firstSegment[0].x, firstSegment[0].y);\n      for (var i = 0, len = firstSegment.length; i < len; i++) {\n        point = firstSegment[i];\n        ctx.lineTo(point.x, point.y);\n      }\n\n      //ctx.closePath();\n\n      if (this.points.length > 1) {\n        for (var s = 1; s < this.points.length; s++) {\n          var segmentPoints = this.points[s];\n          ctx.moveTo(segmentPoints[0].x, segmentPoints[0].y);\n\n          for (var sp = 0; sp < segmentPoints.length; sp++) {\n            ctx.lineTo(segmentPoints[sp].x, segmentPoints[sp].y);\n          }\n\n        }\n      }\n    },\n\n    /**\n     * Returns complexity of an instance\n     * @return {Number} complexity of this instance\n     */\n    complexity: function () {\n      return this.points.length;\n    }\n\n  });\n\n  /**\n   * Returns fabric.Polygon instance from an object representation\n   * @static\n   * @memberOf fabric.Polygon\n   * @param {Object} object Object to create an instance from\n   * @return {fabric.Polygon} Instance of fabric.Polygon\n   */\n  fabric.SegmentableLine.fromObject = function (object) {\n    return new fabric.SegmentableLine(object.points, object, true);\n  };\n\n})\n","export default (function (global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = {}),\n    extend = fabric.util.object.extend,\n    min = fabric.util.array.min,\n    max = fabric.util.array.max,\n    toFixed = fabric.util.toFixed;\n\n  fabric.PCircle = fabric.util.createClass(fabric.SegmentablePolygon, {\n\n    radius: 0,\n    type: 'PCircle',\n    initialize: function (options) {\n      var _this = this;\n      options = options || {};\n      this.radius = options.radius || 0;\n\n      var points = this.makeCircle(this.radius);\n\n      this.width = this.radius * 2;\n      this.height = this.radius * 2;\n\n      this.callSuper('initialize', points, options);\n    },\n    makeCircle: function (radius) {\n      var points = [];\n\n      var centerX = 0;\n      var centerY = 0;\n\n      for (var degree = 0; degree < 360; degree++) {\n        var radians = degree * Math.PI / 180;\n        var x = centerX + radius * Math.cos(radians);\n        var y = centerY + radius * Math.sin(radians);\n        points.push({x: x, y: y});\n      }\n\n      return [points];\n    },\n    _render: function (ctx) {\n      this.callSuper('_render', ctx);\n    },\n    _set: function (key, value) {\n      if (key === 'radius') {\n        this.points = this.makeCircle(value);\n        this.width = value * 2;\n        this.height = value * 2;\n        this.callSuper('_set', 'points', this.points);\n      }\n\n      this.callSuper('_set', key, value);\n    },\n    isPointInside: function (x, y) {\n      var center = this.getCenterPoint();\n      return Math.sqrt(\n          (x - center.x) * (x - center.x) + (y - center.y) * (y - center.y)\n        ) < this.radius;\n    },\n    getPerimeterPoints: function (deltaX, deltaY, useEntireCircle) {\n      var result;\n      var sectorAngleOffset = 0,\n          sectorAngle = 360;\n\n      var deltaIsValid = typeof deltaX == 'number' && typeof deltaY == 'number',\n          getPointsFromSector = deltaIsValid && !useEntireCircle;\n      if (getPointsFromSector) {\n        // Check if eraser tool position is changed\n        if (deltaX || deltaY) {\n          sectorAngle = deltaX !== 0 && deltaY !== 0 ? 90 : 180;\n          if (deltaY < 0) {\n            sectorAngleOffset = 180;\n            if (deltaX > 0) {\n              sectorAngleOffset = 270;\n            }\n          } else {\n            if (deltaX < 0) {\n              sectorAngleOffset = 90;\n            }\n          }\n        }\n      }\n\n      result = this.getSectorPoints(sectorAngleOffset, sectorAngle);\n      return result;\n    },\n    getSectorPoints: function (sectorAngleOffset, sectorAngle) {\n      var result = [],\n          sizeOfStepInDeg = 15,\n          randomDiff = Math.round(Math.random() * sizeOfStepInDeg / 2),\n          endPoint = sectorAngleOffset + sectorAngle + sizeOfStepInDeg - randomDiff,\n          currPointAngle = sectorAngleOffset - randomDiff;\n\n      for (currPointAngle; currPointAngle <= endPoint; currPointAngle += sizeOfStepInDeg) {\n        var currPointCoords = {},\n            currPointAngleRad = fabric.util.degreesToRadians(currPointAngle % 360),\n            pointOffsetX = (this.radius * Math.cos(currPointAngleRad)),\n            pointOffsetY = (this.radius * Math.sin(currPointAngleRad));\n\n        currPointCoords.x = this.left  + Math.round(pointOffsetX);\n        currPointCoords.y = this.top + Math.round(pointOffsetY);\n        result.push(currPointCoords);\n      }\n      return result;\n    },\n    toObject: function (propertiesToInclude) {\n      return extend(this.callSuper('toObject', propertiesToInclude), {\n        radius: this.radius\n      });\n    }\n  });\n\n  fabric.PCircle.fromObject = function (object) {\n    return new fabric.PCircle(object, true);\n  };\n\n  fabric.PCircle.async = false;\n\n})\n","export default (function (global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = {}),\n    extend = fabric.util.object.extend,\n    min = fabric.util.array.min,\n    max = fabric.util.array.max,\n    toFixed = fabric.util.toFixed;\n\n  fabric.PRect = fabric.util.createClass(fabric.SegmentablePolygon, {\n    type: 'PRect',\n    initialize: function (options) {\n      var _this = this;\n      options = options || {};\n\n      this.width = options.width || 10;\n      this.height = options.height || 10;\n\n      var points = this.makeRect(this.width, this.height);\n\n      this.callSuper('initialize', points, options);\n    },\n    makeRect: function (width, height) {\n      var halfWidth = width / 2;\n      var halfHeight = height / 2;\n\n      var points = [\n        {x: halfWidth * -1, y: halfHeight * -1},\n        {x: halfWidth, y: halfHeight * -1},\n        {x: halfWidth, y: halfHeight},\n        {x: halfWidth * -1, y: halfHeight}\n      ];\n\n      return [points];\n    },\n    _render: function (ctx) {\n      this.callSuper('_render', ctx);\n    },\n    _set: function (key, value) {\n      var dimensionsChanged = false;\n      if (key === 'width') {\n        this.width = value;\n        dimensionsChanged = true;\n      }\n      if (key === 'height') {\n        this.height = value;\n        dimensionsChanged = true;\n      }\n      if (dimensionsChanged) {\n        this.points = this.makeRect(this.width, this.height);\n        this.callSuper('_set', 'points', this.points);\n      }\n\n      this.callSuper('_set', key, value);\n    },\n    toObject: function (propertiesToInclude) {\n      return extend(this.callSuper('toObject', propertiesToInclude), {\n        width: this.width,\n        height: this.height\n      });\n    }\n  });\n\n\n  fabric.PRect.fromObject = function (object) {\n    return new fabric.PRect(object, true);\n  };\n\n  fabric.PRect.async = false;\n\n})\n","export default (function (global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = {}),\n    extend = fabric.util.object.extend,\n    min = fabric.util.array.min,\n    max = fabric.util.array.max,\n    toFixed = fabric.util.toFixed;\n\n  fabric.PTriangle = fabric.util.createClass(fabric.SegmentablePolygon, {\n    type: 'PTriangle',\n    initialize: function (options) {\n      var _this = this;\n      options = options || {};\n\n      this.width = options.width || 10;\n      this.height = options.height || 10;\n\n      var points = this.makeTriangle(this.width, this.height);\n\n      this.callSuper('initialize', points, options);\n    },\n    makeTriangle: function (width, height) {\n      var halfWidth = width / 2;\n      var halfHeight = height / 2;\n\n      var points = [\n        {x: halfWidth * -1, y: halfHeight},\n        {x: 0, y: halfHeight * -1},\n        {x: halfWidth, y: halfHeight}\n      ];\n\n      return [points];\n    },\n    _render: function (ctx) {\n      this.callSuper('_render', ctx);\n    },\n    _set: function (key, value) {\n      var dimensionsChanged = false;\n      if (key === 'width') {\n        this.width = value;\n        dimensionsChanged = true;\n      }\n      if (key === 'height') {\n        this.height = value;\n        dimensionsChanged = true;\n      }\n      if (dimensionsChanged) {\n        this.points = this.makeTriangle(this.width, this.height);\n        this.callSuper('_set', 'points', this.points);\n      }\n\n      this.callSuper('_set', key, value);\n    },\n    toObject: function (propertiesToInclude) {\n      return extend(this.callSuper('toObject', propertiesToInclude), {\n        width: this.width,\n        height: this.height\n      });\n    }\n  });\n\n\n  fabric.PTriangle.fromObject = function (object) {\n    return new fabric.PTriangle(object, true);\n  };\n\n  fabric.PTriangle.async = false;\n\n})\n","export default (function(jQuery, BaseShape, pluginsNamespace) {\n  /**\n   * Provides an arrow button which can be used\n   * to draw lines with arrow at one side.\n   *\n   * @param {DrawerJs.Drawer} drawerInstance\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * Tool is using drawerInstance.options['lineAngleTooltip']\n   * Default settings are:\n   * { enabled: false,\n   *    fontSize: 11,\n   *    fontFamily:  'Arial, sans serif',\n   *    color: 'black'};\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   * @extends {BaseShape}\n   */\n  var ArrowOneSide = function ArrowOneSideConstructor(drawerInstance) {\n    // call super\n    BaseShape.call(this, drawerInstance);\n\n    this.name = 'ArrowOneSide';\n\n    /**\n     * List of tool options to show when tool is activated.\n     * Deviating from BaseShape tool, Arrow has no 'color', only 'border'.\n     * @type {String[]}\n     */\n    this.toolOptionsList = ['border', 'opacity', 'lineWidth', 'strokeWidth'];\n\n    this.btnClass = 'btn-arrow-one-side';\n    this.faClass = 'fa-long-arrow-right';\n    this.tooltip = drawerInstance.t('Draw an arrow');\n    this.group = {\n      name: 'lines',\n      tooltip: drawerInstance.t('Lines and arrows')\n    };\n\n    this._setupOptions({});\n    $.extend(true, this.options.lineAngleTooltip, drawerInstance.options.lineAngleTooltip || {});\n\n    // add fallback for fontFamily\n    this.options.lineAngleTooltip.fontFamily += ', ' + this._defaultOptions.lineAngleTooltip.fontFamily;\n  };\n\n  ArrowOneSide.prototype = Object.create(BaseShape.prototype);\n  ArrowOneSide.prototype.constructor = ArrowOneSide;\n\n  ArrowOneSide.prototype.checkOnlyWidth = true;\n\n  ArrowOneSide.prototype._defaultOptions = {\n    lineAngleTooltip: {\n      enabled: false,\n      fontSize: 11,\n      fontFamily:  'Arial, sans serif',\n      color: 'black'\n    }\n  };\n\n\n  /**\n   * Create new shape with minimal size.\n   * Is called from BaseShape nmouseDown handler.\n   *\n   * @param  {Number} left [description]\n   * @param  {Number} top  [description]\n   * @return {fabric.ErasableLine}\n   */\n  ArrowOneSide.prototype.createShape = function (left, top) {\n    var arrow = new fabric.ErasableArrow([left, top, left + 1, top + 1], {\n      oneSided: true\n    });\n    arrow.set('strokeWidth', this.drawerInstance.lineStrokeWidth || 1);\n    arrow.set('stroke', this.drawerInstance.activeColor);\n    arrow.set('opacity', this.drawerInstance.activeOpacity);\n    arrow.set('oneSided', true);\n\n    this.createAngleTooltip(arrow);\n\n    return arrow;\n  };\n\n\n  /**\n   * Update shape with new left, top,\n   * Is called from BaseShape mouseMove handler\n   *\n   * @param  {fabric.Line} line    [description]\n   * @param  {Number} newLeft [description]\n   * @param  {Number} newTop  [description]\n   */\n  ArrowOneSide.prototype.updateShape = function (arrow, newLeft, newTop) {\n    arrow.set('y2', newTop);\n    arrow.set('x2', newLeft);\n\n    this.updateAngleTooltip(arrow);\n  };\n\n\n  /**\n   * Is called from BaseShape mouseUp handler.\n   */\n  ArrowOneSide.prototype.finishShape = function (left, top) {\n    this.removeAngleTooltip();\n\n  };\n\n\n  /**\n   * Create text object for line angle tooltip\n   *\n   * @param  {fabric.Line} line\n   */\n  ArrowOneSide.prototype.createAngleTooltip = function (line) {\n    if (this.options.lineAngleTooltip.enabled) {\n      this.angleTooltip = new fabric.IText('Text');\n      this.angleTooltip.set('fontFamily', this.options.lineAngleTooltip.fontFamily);\n      this.angleTooltip.set('fontSize', this.options.lineAngleTooltip.fontSize);\n      this.angleTooltip.set('left', line.x1 - 10);\n      this.angleTooltip.set('top', line.y1 - 10);\n      this.angleTooltip.set('stroke', this.options.lineAngleTooltip.color);\n      this.angleTooltip.set('fill', this.options.lineAngleTooltip.color);\n      this.angleTooltip.set('text', '');\n\n      this.drawerInstance.fCanvas.add(this.angleTooltip);\n      this.updateAngleTooltip(line);\n    }\n  };\n\n\n  /**\n   * Update angle tooltip with line current angle\n   *\n   * @param  {fabric.Line} line\n   */\n  ArrowOneSide.prototype.updateAngleTooltip = function (line) {\n    if (!this.options.lineAngleTooltip.enabled)\n      return;\n\n    // calc line angle\n    var angleRad = Math.atan((line.y2 - line.y1) / (line.x2 - line.x1));\n    var angle = Math.abs(fabric.util.radiansToDegrees(angleRad));\n    this.angleTooltip.setText(angle.toFixed().toString());\n\n    // determine tooltip position\n    var tooltipOffsetX = this.options.lineAngleTooltip.fontSize;\n    var tooltipOffsetY = -this.options.lineAngleTooltip.fontSize;\n    // if line is pointing to the left\n    if (line.x2 < line.x1) {\n      tooltipOffsetX = -(this.options.lineAngleTooltip.fontSize + 10);\n    }\n    // if line is pointing downside\n    if (line.y2 > line.y1) {\n      tooltipOffsetY = 2;\n    }\n\n    this.angleTooltip.set('left', line.x1 + tooltipOffsetX);\n    this.angleTooltip.set('top', line.y1 + tooltipOffsetY);\n    // this is needed to overpower strange issue, when tooltip is always same color as line\n    this.angleTooltip.set('stroke', this.options.lineAngleTooltip.color);\n    this.angleTooltip.set('fill', this.options.lineAngleTooltip.color);\n  };\n\n\n  /**\n   * Removes angle tooltip.\n   */\n  ArrowOneSide.prototype.removeAngleTooltip = function () {\n    if (this.options.lineAngleTooltip.enabled) {\n      if (this.angleTooltip) {\n        this.angleTooltip.remove();\n        delete this.tooltip;\n      }\n    }\n  };\n\n\n  pluginsNamespace.ArrowOneSide = ArrowOneSide;\n\n})\n","export default (function(jQuery, BaseShape, pluginsNamespace) {\n  /**\n   * Provides an arrow button which can be used\n   * to draw lines with arrow at both sides.\n   *\n   * @param {DrawerJs.Drawer} drawerInstance\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * Tool is using drawerInstance.options['lineAngleTooltip']\n   * Default settings are:\n   * { enabled: false,\n   *    fontSize: 11,\n   *    fontFamily:  'Arial, sans serif',\n   *    color: 'black'};\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var ArrowTwoSide = function ArrowTwoSizeConstructor(drawerInstance) {\n    // call super\n    BaseShape.call(this, drawerInstance);\n\n    this.name = 'ArrowTwoSide';\n    /**\n     * List of tool options to show when tool is activated.\n     * Deviating from BaseShape tool, Arrow has no 'color', only 'border'.\n     * @type {String[]}\n     */\n    this.toolOptionsList = ['border', 'opacity', 'lineWidth', 'strokeWidth'];\n\n    this.btnClass = 'btn-arrow-two-side';\n    this.faClass = 'fa-arrows-h';\n    this.tooltip = drawerInstance.t('Draw a two-sided arrow');\n    this.group = {\n      name: 'lines',\n      tooltip: drawerInstance.t('Lines and arrows')\n    };\n\n    this._setupOptions({});\n    $.extend(true, this.options.lineAngleTooltip, drawerInstance.options.lineAngleTooltip || {});\n\n    // add fallback for fontFamily\n    this.options.lineAngleTooltip.fontFamily += ', ' + this._defaultOptions.lineAngleTooltip.fontFamily;\n  };\n\n  ArrowTwoSide.prototype = Object.create(BaseShape.prototype);\n  ArrowTwoSide.prototype.constructor = ArrowTwoSide;\n\n  ArrowTwoSide.prototype.checkOnlyWidth = true;\n\n  ArrowTwoSide.prototype._defaultOptions = {\n    lineAngleTooltip: {\n      enabled: false,\n      fontSize: 11,\n      fontFamily:  'Arial, sans serif',\n      color: 'black'\n    }\n  };\n\n\n  /**\n   * Create new shape with minimal size.\n   * Is called from BaseShape nmouseDown handler.\n   *\n   * @param  {Number} left [description]\n   * @param  {Number} top  [description]\n   * @return {fabric.ErasableLine}\n   */\n  ArrowTwoSide.prototype.createShape = function (left, top) {\n    var arrow = new fabric.ErasableArrow([left, top, left + 1, top + 1], {\n      oneSided: false\n    });\n    arrow.set('strokeWidth', this.drawerInstance.lineStrokeWidth || 1);\n    arrow.set('stroke', this.drawerInstance.activeColor);\n    arrow.set('opacity', this.drawerInstance.activeOpacity);\n    arrow.set('oneSided', false);\n\n    this.createAngleTooltip(arrow);\n\n    return arrow;\n  };\n\n\n  /**\n   * Update shape with new left, top,\n   * Is called from BaseShape mouseMove handler\n   *\n   * @param  {fabric.Line} line    [description]\n   * @param  {Number} newLeft [description]\n   * @param  {Number} newTop  [description]\n   */\n  ArrowTwoSide.prototype.updateShape = function (arrow, newLeft, newTop) {\n    arrow.set('y2', newTop);\n    arrow.set('x2', newLeft);\n\n    this.updateAngleTooltip(arrow);\n  };\n\n\n  /**\n   * Is called from BaseShape mouseUp handler.\n   */\n  ArrowTwoSide.prototype.finishShape = function (left, top) {\n    this.removeAngleTooltip();\n  };\n\n\n\n  /**\n   * Create text object for line angle tooltip\n   *\n   * @param  {fabric.Line} line\n   */\n  ArrowTwoSide.prototype.createAngleTooltip = function (line) {\n    if (this.options.lineAngleTooltip.enabled) {\n      this.angleTooltip = new fabric.IText('Text');\n      this.angleTooltip.set('fontFamily', this.options.lineAngleTooltip.fontFamily);\n      this.angleTooltip.set('fontSize', this.options.lineAngleTooltip.fontSize);\n      this.angleTooltip.set('left', line.x1 - this.options.lineAngleTooltip.fontSize);\n      this.angleTooltip.set('top', line.y1 - this.options.lineAngleTooltip.fontSize);\n      this.angleTooltip.set('stroke', this.options.lineAngleTooltip.color);\n      this.angleTooltip.set('fill', this.options.lineAngleTooltip.color);\n      this.angleTooltip.set('text', '');\n\n      this.drawerInstance.fCanvas.add(this.angleTooltip);\n      this.updateAngleTooltip(line);\n    }\n  };\n\n\n  /**\n   * Update angle tooltip with line current angle\n   *\n   * @param  {fabric.Line} line\n   */\n  ArrowTwoSide.prototype.updateAngleTooltip = function (line) {\n    if (!this.options.lineAngleTooltip.enabled)\n      return;\n\n    // calc line angle\n    var angleRad = Math.atan((line.y2 - line.y1) / (line.x2 - line.x1));\n    var angle = Math.abs(fabric.util.radiansToDegrees(angleRad));\n    this.angleTooltip.setText(angle.toFixed().toString());\n\n    // determine tooltip position\n    var tooltipOffsetX = this.options.lineAngleTooltip.fontSize;\n    var tooltipOffsetY = -this.options.lineAngleTooltip.fontSize;\n    // if line is pointing to the left\n    if (line.x2 < line.x1) {\n      tooltipOffsetX = -(this.options.lineAngleTooltip.fontSize + 10);\n    }\n    // if line is pointing downside\n    if (line.y2 > line.y1) {\n      tooltipOffsetY = 2;\n    }\n\n    this.angleTooltip.set('left', line.x1 + tooltipOffsetX);\n    this.angleTooltip.set('top', line.y1 + tooltipOffsetY);\n    // this is needed to overpower strange issue, when tooltip is always same color as line\n    this.angleTooltip.set('stroke', this.options.lineAngleTooltip.color);\n    this.angleTooltip.set('fill', this.options.lineAngleTooltip.color);\n  };\n\n\n\n  /**\n   * Removes angle tooltip.\n   */\n  ArrowTwoSide.prototype.removeAngleTooltip = function () {\n    if (this.options.lineAngleTooltip.enabled) {\n      if (this.angleTooltip) {\n        this.angleTooltip.remove();\n        delete this.tooltip;\n      }\n    }\n  };\n\n\n  pluginsNamespace.ArrowTwoSide = ArrowTwoSide;\n\n})\n","import initBaseTool from './BaseTool'\nimport initBaseOptionTool from './BaseOptionTool'\nimport initBaseTextOptionTool from './BaseTextOptionTool'\nimport initBaseShape from './BaseShape'\nimport initBaseBrush from './BaseBrush'\nimport initApiSetInactiveDrawerImage from './api-set-inactive-drawer-image/ApiSetInactiveDrawerImage'\nimport initEraser from './brush-eraser/Eraser'\nimport initEraserBrush from './brush-eraser/EraserBrush'\nimport initEraserPath from './brush-eraser/EraserPath'\nimport initSimpleWhiteEraser from './brush-eraser-simplewhite/SimpleWhiteEraser'\nimport initPencil from './brush-pencil/Pencil'\nimport initCanvasProperties from './feature-canvas-properties/CanvasProperties'\nimport initCloseButton from './feature-close-button/CloseButton'\nimport initImageCropPlugin from './feature-image-crop/ImageCropPlugin'\nimport initImageCrop from './feature-image-crop/ImageCrop'\nimport initMovableFloatingMode from './feature-movable-floating-mode/MovableFloatingMode'\nimport initMinimizeButton from './feature-minimize-button/MinimizeButton'\nimport initOvercanvasPopup from './feature-overcanvas-popup/OvercanvasPopup'\nimport initOpenPopupButton from './feature-overcanvas-popup/OpenPopupButton'\nimport initResize from './feature-resize/Resize'\nimport initContextMenu from './feature-shape-contextmenu/ContextMenu.Api'\nimport initShapeContextMenu from './feature-shape-contextmenu/ShapeContextMenu'\nimport initToggleVisibilityButton from './feature-toggle-visiblity-button/ToggleVisibilityButton'\nimport initZoomViewport from './feature-zoom/ZoomViewport'\nimport initZoomPlugin from './feature-zoom/Zoom'\nimport initBrushSize from './option-brushSize/BrushSize'\nimport initLineWidth from './option-line-width/LineWidth'\nimport initOpacity from './option-opacity/Opacity'\nimport initStrokeWidth from './option-stroke-width/StrokeWidth'\nimport initTextAlign from './option-text-styles/TextAlign'\nimport initTextBackgroundColor from './option-text-styles/TextBackgroundColor'\nimport initTextColor from './option-text-styles/TextColor'\nimport initTextDecoration from './option-text-styles/TextDecoration'\nimport initTextFontFamily from './option-text-styles/TextFontFamily'\nimport initTextFontSize from './option-text-styles/TextFontSize'\nimport initTextFontStyle from './option-text-styles/TextFontStyle'\nimport initTextFontWeight from './option-text-styles/TextFontWeight'\nimport initTextLineHeight from './option-text-styles/TextLineHeight'\nimport initShapeBorder from './options-shape-border/ShapeBorder'\nimport initArrowShape from './shape-arrow/ArrowShape'\nimport initArrowTwoSideShape from './shape-arrow/ArrowTwoSideShape'\nimport initCircle from './shape-circle/Circle'\nimport initImageShape from './shape-image/ImageShape'\nimport initImageToolApi from './shape-image/ImageToolApi'\nimport initLine from './shape-line/Line'\nimport initRectangle from './shape-rectangle/Rectangle'\nimport initText from './shape-text/Text'\nimport initFullscreen from './feature-fullscreen/Fullscreen'\nimport initFullscreenModeButton from './feature-fullscreen/FullscreenModeButton'\nimport initBackgroundImage from './background-image/BackgroundImage'\nimport initBackgroundImageApi from './background-image/BackgroundImageApi'\nimport initColorpickerControl from './option-color/ColorpickerControl'\nimport initOpacityControl from './option-color/OpacityControl'\nimport initColor from './option-color/Color'\nimport initColorpickerHtml5 from './option-colorpicker-html5/ColorpickerHtml5'\n\nexport default (function ($, DrawerJs) {\n  initBaseTool($, DrawerJs.plugins)\n  initBaseOptionTool($, DrawerJs.plugins)\n  initBaseTextOptionTool($, DrawerJs.plugins, DrawerJs.plugins.BaseToolOptions, DrawerJs.util)\n  initBaseShape($, DrawerJs.plugins, DrawerJs.plugins.BaseTool, DrawerJs.util)\n  initBaseBrush($, DrawerJs.plugins, DrawerJs.plugins.BaseTool, DrawerJs.util)\n  initApiSetInactiveDrawerImage($, DrawerJs.DrawerApi, DrawerJs.util)\n  initEraser($, DrawerJs.brushes, DrawerJs.plugins.BaseBrush, DrawerJs.plugins, DrawerJs.util)\n  initEraserBrush(DrawerJs.brushes)\n  initEraserPath(DrawerJs.global)\n  initSimpleWhiteEraser($, DrawerJs.plugins.BaseBrush, DrawerJs.plugins, DrawerJs.util)\n  initPencil($, DrawerJs.plugins.BaseBrush, DrawerJs.plugins, DrawerJs.util)\n  initCanvasProperties($, DrawerJs.plugins)\n  initCloseButton($, DrawerJs.plugins, DrawerJs.util)\n  initImageCropPlugin($, DrawerJs.plugins, DrawerJs.util)\n  initImageCrop($, DrawerJs.plugins, DrawerJs.util)\n  initMovableFloatingMode($, DrawerJs.plugins, DrawerJs.util)\n  initMinimizeButton($, DrawerJs.plugins, DrawerJs.util, DrawerJs.DrawerApi)\n  initOvercanvasPopup($, DrawerJs.plugins, DrawerJs.util)\n  initOpenPopupButton($, DrawerJs.plugins, DrawerJs.util)\n  initResize($, DrawerJs.plugins, DrawerJs.util)\n  initContextMenu(DrawerJs.DrawerApi)\n  initShapeContextMenu($, DrawerJs.plugins, DrawerJs.util)\n  initToggleVisibilityButton($, DrawerJs.plugins, DrawerJs.util)\n  initZoomViewport(DrawerJs.global, $, DrawerJs.plugins)\n  initZoomPlugin(DrawerJs.global, $, DrawerJs.plugins, DrawerJs.DrawerApi, DrawerJs.util)\n  initBrushSize($, DrawerJs.plugins, DrawerJs.plugins.BaseToolOptions)\n  initLineWidth($, DrawerJs.plugins, DrawerJs.plugins.BaseToolOptions, DrawerJs.util)\n  initOpacity($, DrawerJs.plugins, DrawerJs.plugins.BaseToolOptions, DrawerJs.util)\n  initStrokeWidth($, DrawerJs.plugins, DrawerJs.plugins.BaseToolOptions, DrawerJs.util)\n  initTextAlign($, DrawerJs.plugins, DrawerJs.util, DrawerJs.plugins.BaseTextOptionTool)\n  initTextBackgroundColor($, DrawerJs.plugins, DrawerJs.util, DrawerJs.plugins.BaseTextOptionTool)\n  initTextColor($, DrawerJs.plugins, DrawerJs.util, DrawerJs.plugins.BaseTextOptionTool)\n  initTextDecoration($, DrawerJs.plugins, DrawerJs.util, DrawerJs.plugins.BaseTextOptionTool)\n  initTextFontFamily($, DrawerJs.plugins, DrawerJs.util, DrawerJs.plugins.BaseTextOptionTool)\n  initTextFontSize($, DrawerJs.plugins, DrawerJs.util, DrawerJs.plugins.BaseTextOptionTool)\n  initTextFontStyle($, DrawerJs.plugins, DrawerJs.util, DrawerJs.plugins.BaseTextOptionTool)\n  initTextFontWeight($, DrawerJs.plugins, DrawerJs.util, DrawerJs.plugins.BaseTextOptionTool)\n  initTextLineHeight($, DrawerJs.plugins, DrawerJs.util, DrawerJs.plugins.BaseTextOptionTool)\n  initShapeBorder($, DrawerJs.plugins, DrawerJs.plugins.BaseToolOptions, DrawerJs.util)\n  initArrowShape($, DrawerJs.plugins.BaseShape, DrawerJs.plugins)\n  initArrowTwoSideShape($, DrawerJs.plugins.BaseShape, DrawerJs.plugins)\n  initCircle($, DrawerJs.plugins.BaseShape, DrawerJs.plugins)\n  initImageShape($, DrawerJs.plugins.BaseTool, DrawerJs.plugins, DrawerJs.util)\n  initImageToolApi(DrawerJs.DrawerApi)\n  initLine($, DrawerJs.plugins.BaseShape, DrawerJs.plugins)\n  initRectangle($, DrawerJs.plugins.BaseShape, DrawerJs.plugins)\n  initText($, DrawerJs.plugins.BaseShape, DrawerJs.plugins, DrawerJs.util)\n  initFullscreen($, DrawerJs.plugins, DrawerJs.util)\n  initFullscreenModeButton($, DrawerJs.plugins, DrawerJs.util, DrawerJs.DrawerApi)\n  initBackgroundImage($, DrawerJs.plugins.BaseTool, DrawerJs.plugins, DrawerJs.util)\n  initBackgroundImageApi(DrawerJs.DrawerApi)\n  initColorpickerControl($, DrawerJs.plugins, DrawerJs.util)\n  initOpacityControl($, DrawerJs.plugins, DrawerJs.util)\n  initColor($, DrawerJs.plugins, DrawerJs.plugins.BaseToolOptions, DrawerJs.util)\n  initColorpickerHtml5($, DrawerJs.plugins)\n})\n","export default (function ($, pluginsNamespace) {\n    'use strict';\n\n    /**\n     * Base class for all drawing tools.\n     *\n     * @param drawerInstance\n     * @param options\n     * @constructor\n     * @memberof DrawerJs.plugins\n     */\n    var BaseTool = function (drawerInstance, options) {\n        if (!drawerInstance) {\n            throw new Error(\"BaseTool CTOR : drawerInstance is not set!\");\n        }\n        this._setupOptions(options);\n\n        this.drawerInstance = drawerInstance;\n        this.drawer = drawerInstance;\n\n        // set handlers\n        this._bindedOnToolbarCreated = this._onToolbarCreated.bind(this);\n        this.drawerInstance.on(this.drawerInstance.EVENT_TOOLS_TOOLBAR_CREATED,  this._bindedOnToolbarCreated);\n    };\n\n    BaseTool.prototype.name = '';          // tool name\n    BaseTool.prototype.type = null;        // tool type\n    BaseTool.prototype.active = false;     // is active at the moment\n    BaseTool.prototype.btnClass = 'btn';   // tool button css class\n    BaseTool.prototype.faClass = '';       // tool icon css class\n    BaseTool.prototype.tooltip = '';       //\n    BaseTool.prototype.toolbar = null;     /** @type {DrawerToolbar} */\n    BaseTool.prototype.$toolButton = null; // cached jQuery wrapper of button\n    BaseTool.prototype.drawerInstance = null; // instance of DrawerJs\n\n\n    /**\n     * Handler for EVENT_DO_DEACTIVATE_ALL_TOOLS.\n     */\n    BaseTool.prototype._onDeactivateAllTools = function () {\n        if (this.active) {\n          var ns = '.tool-' + this.name;\n          this.drawerInstance.trigger(this.drawerInstance.EVENT_DO_DEACTIVATE_TOOL + ns, [this]);\n        }\n    };\n\n  /**\n   * Setup data\n   * @param {Object} [options] - options to save\n   * @param {String} [pluginName] - name of plugin\n   * @param {Boolean} [doNotSave] - set true to not save result as this.options\n   * @returns {Object} config of plugin\n   */\n    BaseTool.prototype._setupOptions = function (options, pluginName, doNotSave) {\n      pluginName = pluginName || this.name;\n      var drawer = this.drawerInstance || this.drawer,\n          optionsFromDrawer = drawer && drawer.getPluginConfig(pluginName),\n          result = $.extend(true,\n              {},\n              this._defaultOptions || {},\n              optionsFromDrawer || {},\n              options || {}\n          );\n\n      if (!doNotSave) {\n        this.options = result;\n      }\n      return result;\n    };\n\n    /**\n     * On toolbar created - create tool button.\n     * @param {fabric.Event} ev\n     * @param {DrawerToolbar} toolbar\n     * @private\n     */\n    BaseTool.prototype._onToolbarCreated = function (ev, toolbar) {\n        this.toolbar = toolbar;\n        this.createButton(toolbar);\n\n        this._setHandlers();\n\n        if (this.onToolbarCreated) {\n            this.onToolbarCreated(ev, toolbar);\n        }\n    };\n\n\n    /**\n     * On toolbar destroyed - destroy button, if it was our toolbar.\n     */\n    BaseTool.prototype.onToolbarDestroyed = function (ev, toolbar) {\n        if (this.toolbar == toolbar) {\n            this.removeTool();\n        }\n    };\n\n    /**\n     * Deletes tool button.\n     * If  doDeleteToolbarCreationListeners is true - removes listenin on toolbar creation event.\n     * So, tool will not appear on toolbar next time, when toolbar is created.\n     *\n     * @param {boolean} doDeleteToolbarCreationListeners\n     */\n    BaseTool.prototype.removeTool = function(doDeleteToolbarCreationListeners) {\n        // removes button and unbind click on it\n        if (this.$toolButton) {\n            this.toolbar.removeButton(this.$toolButton);\n        }\n\n        // stop listening toolbar creation\n        if (doDeleteToolbarCreationListeners) {\n            this._unsetHandlers();\n            this.drawerInstance.off(this.drawerInstance.EVENT_TOOLS_TOOLBAR_CREATED, this._bindedOnToolbarCreated);\n        }\n    };\n\n\n    BaseTool.prototype._setHandlers = function () {\n        var ns = '.tool-' + this.name;\n\n        this.drawerInstance.on(this.drawerInstance.EVENT_TOOLBAR_DESTROYED + ns, this.onToolbarDestroyed.bind(this));\n\n        this.drawerInstance.on(this.drawerInstance.EVENT_DO_DEACTIVATE_ALL_TOOLS + ns, this._onDeactivateAllTools.bind(this));\n        this.drawerInstance.on(this.drawerInstance.EVENT_DO_DEACTIVATE_TOOL + ns, this._onDeactivateTool.bind(this));\n        this.drawerInstance.on(this.drawerInstance.EVENT_DO_ACTIVATE_TOOL, this._onActivateTool.bind(this));\n    };\n\n    BaseTool.prototype._unsetHandlers = function () {\n        var ns = '.tool-' + this.name;\n        this.drawerInstance.off(this.drawerInstance.EVENT_TOOLBAR_DESTROYED + ns);\n        this.drawerInstance.off(this.drawerInstance.EVENT_DO_DEACTIVATE_ALL_TOOLS + ns);\n        this.drawerInstance.off(this.drawerInstance.EVENT_DO_DEACTIVATE_TOOL + ns);\n        this.drawerInstance.off(this.drawerInstance.EVENT_DO_ACTIVATE_TOOL + ns);\n    };\n\n    /**\n     * Handler for EVENT_DO_DEACTIVATE_TOOL.\n     * @param e event obj\n     * @param tool tool object\n     */\n    BaseTool.prototype._onDeactivateTool = function (e, tool) {\n        if (!tool || !tool.name) {\n            throw new Error('BaseTool.onDeactivateTool() : no tool name is provided!');\n        }\n        if (this.active && (tool.name == this.name)) {\n          this._deactivateTool();\n        }\n    };\n\n\n    /**\n     * Handler for EVENT_DO_ACTIVATE_TOOL.\n     * @param e event obj\n     * @param tool tool object\n     */\n    BaseTool.prototype._onActivateTool = function (e, tool) {\n        if (!tool || !tool.name) {\n            throw new Error('BaseTool._onActivateTool() : no tool name is provided!');\n        }\n        // Ignore, if event was for other tool, or if tool is already active\n        if (tool.name === this.name && !this.active) {\n          // ok, event is for this tool, and it is not active, so continue.\n          // deactivate all tools.\n          var dataToEvent = {\n            beforeActivateTool: true\n          };\n          this.drawerInstance.trigger(this.drawerInstance.EVENT_DO_DEACTIVATE_ALL_TOOLS, dataToEvent);\n          // now activate our tool!\n          this._activateTool();\n        }\n    };\n\n\n    /**\n     * Creates tool button in toolbar provided.\n     * @param {DrawerToolbar} toolbar toolbar, where this tool button will be created\n     */\n    BaseTool.prototype.createButton = function (toolbar) {\n      var buttonConfig = {\n            buttonOrder: this.options.buttonOrder,\n            additionalClass: this.btnClass,\n            iconClass: this.faClass,\n            tooltipText: this.tooltip,\n            clickHandler: this.onButtonClick.bind(this)\n          };\n\n      if (this.group) {\n        buttonConfig.group = this.group;\n        this.$toolButton = toolbar.addButtonToGroup(buttonConfig);\n      } else {\n        this.$toolButton = toolbar.addButton(buttonConfig);\n      }\n    };\n\n    /**\n     * On tool button click - trigger event to activate/deactivate tool\n     */\n    BaseTool.prototype.onButtonClick = function () {\n        //    e.preventDefault();\n        //    e.stopPropagation();\n\n        var action = this.active ? this.drawerInstance.EVENT_DO_DEACTIVATE_TOOL\n                                 : this.drawerInstance.EVENT_DO_ACTIVATE_TOOL;\n\n        this.drawerInstance.trigger(action, [this]);\n    };\n\n    /**\n     * Base tool activation.\n     * @protected\n     */\n    BaseTool.prototype._activateTool = function () {\n        this.drawerInstance.log('TOOL', '['+ this.name + '] .activateTool() [BaseTool]');\n\n        this.drawerInstance.fCanvas.discardActiveObject();\n        this.drawerInstance.fCanvas.renderAll();\n\n        this.active = true;\n        this.drawerInstance.activeDrawingTool = this;\n\n        this.highlightButton();\n        this.drawerInstance.trigger(this.drawerInstance.EVENT_TOOL_ACTIVATED, [this]);\n    };\n\n\n    /**\n     * Base tool deactivation.\n     * @protected\n     */\n    BaseTool.prototype._deactivateTool = function () {\n        this.drawerInstance.log('TOOL', '[' + this.name + '] : deactivateTool [BaseTool]');\n\n        this.active = false;\n        if (this.drawerInstance.activeDrawingTool === this) {\n            this.drawerInstance.activeDrawingTool = null;\n        }\n\n        // make tool button not active\n        this.highlightButtonOff();\n\n        this.drawerInstance.fCanvas.renderAll();\n        this.drawerInstance.trigger(this.drawerInstance.EVENT_TOOL_DEACTIVATED, [this]);\n    };\n\n    BaseTool.prototype.highlightButton = function () {\n        if (this.group) {\n            this.toolbar._setGroupButtonActive(this.group.name, this.btnClass);\n        } else {\n            this.toolbar.setActiveButton(this.btnClass);\n        }\n    };\n\n    BaseTool.prototype.highlightButtonOff = function () {\n        this.toolbar.clearActiveButton();\n    };\n\n    pluginsNamespace.BaseTool = BaseTool;\n})\n","export default (function ($, pluginsNamespace) {\n    'use strict';\n\n    /**\n     * Base class for tool options plugins.\n     *\n     * @param drawer\n     * @constructor\n     * @memberof DrawerJs.plugins\n     */\n    var BaseToolOptions = function (drawer, options) {\n        if (!drawer) {\n            throw new Error(\"BaseToolOptions CTOR : drawer is not set!\");\n        }\n        this.drawer = drawer;\n        this._setupOptions(options);\n\n        // handle toolbar created/destroyed\n        this._bindedOnToolbarCreated = this._onToolbarCreated.bind(this);\n        drawer.on(drawer.EVENT_OPTIONS_TOOLBAR_CREATED, this._bindedOnToolbarCreated);\n        drawer.on(drawer.EVENT_TOOLBAR_DESTROYED, this._onToolbarDestroyed.bind(this));\n\n        // handle tool activation/deactivation\n        drawer.on(drawer.EVENT_DO_DEACTIVATE_ALL_TOOLS, this._onDeactivateTool.bind(this));\n\n        drawer.on(drawer.EVENT_DO_DEACTIVATE_TOOL, this._onDeactivateTool.bind(this));\n        drawer.on(drawer.EVENT_DO_ACTIVATE_TOOL, this._onActivateTool.bind(this));\n\n        drawer.on(drawer.EVENT_TOOL_DEACTIVATED, this._onDeactivateTool.bind(this));\n        drawer.on(drawer.EVENT_TOOL_ACTIVATED, this._onActivateTool.bind(this));\n\n        // handle object selection/deselection\n        drawer.on(drawer.EVENT_OBJECT_SELECTED, this._onObjectSelected.bind(this));\n        drawer.on(drawer.EVENT_SELECTION_CLEARED, this._onSelectionCleared.bind(this));\n\n        // react on edit mode entering\n        drawer.on(drawer.EVENT_TEXT_EDITING_ENTERED, this._onTextEditingEntered.bind(this));\n        // react on edit mode exiting\n        drawer.on(drawer.EVENT_TEXT_EDITING_EXITED, this._onTextEditingExited.bind(this));\n    };\n\n  /**\n   * is active at the moment\n   * @type {boolean}\n   */\n  BaseToolOptions.prototype.active = false;\n\n  /** Instance of Drawer\n   * @type {Drawer} */\n  BaseToolOptions.prototype.drawer = null;\n\n  /** Instance of toolbar\n   * @type {DrawerToolbar} */\n  BaseToolOptions.prototype.toolbar = null;\n\n  /**\n   * Tool name\n   * @const\n   * @type {string}\n   */\n  BaseToolOptions.prototype.name = '';\n\n  /**\n   * Tool type\n   */\n  BaseToolOptions.prototype.type = null;\n\n  /**\n   * Tool name. On selecting tool/object, if this.optionName is in array of\n   * object allowed options - tool will show controls\n   * @const\n   * @type {String}\n   */\n  BaseToolOptions.prototype.optionName = '';\n\n  /**\n   * Css class of tool button\n   * @default\n   * @const\n   * @type {String}\n   */\n  BaseToolOptions.prototype.btnClass = 'btn';\n\n  /**\n   * Tool icon font-awesome class\n   * @const\n   * @type {String}\n   */\n  BaseToolOptions.prototype.faClass = '';\n\n  /**\n   * Show tool only in edit mode\n   * @default\n   * @const\n   * @type {boolean}\n   */\n  BaseToolOptions.prototype.showOnEditMode = false;\n\n  /**\n   * Hide tool in edit mode\n   * @default\n   * @const\n   * @type {boolean}\n   */\n  BaseToolOptions.prototype.hideOnEditMode = true;\n\n  /**\n   * Current option data\n   * @type {Object}\n   */\n  BaseToolOptions.prototype.data = {};\n\n  /**\n   * Setup data\n   * @param {Object} [options] - options to save\n   * @param {String} [pluginName] - name of plugin\n   * @param {Boolean} [doNotSave] - set true to not save result as this.options\n   * @returns {Object} config of plugin\n   */\n  BaseToolOptions.prototype._setupOptions = function (options, pluginName, doNotSave) {\n    options = options || {};\n    var optionsFromDrawer = this._collectDefaultOptions(pluginName),\n        result = $.extend(true,\n            {},\n            this._defaultOptions || {},\n            optionsFromDrawer || {},\n            options\n        );\n\n    var updatedResult = this._onOptionsSetup(this._defaultOptions, options, optionsFromDrawer, result);\n    result = updatedResult || result;\n    if (!doNotSave) {\n      this.options = result;\n    }\n    return result;\n  };\n\n  /**\n   * Process options\n   * @param {Object} [defaultOptions]\n   * @param {Object} [options]\n   * @param {Object} [optionsFromDrawer]\n   * @param {Object} [result]\n   * @returns {Object}\n   * @private\n   */\n  BaseToolOptions.prototype._onOptionsSetup = function (defaultOptions, options, optionsFromDrawer, result) {\n    return result;\n  };\n\n  /**\n   * Setup data\n   * @param {String} [pluginName] - name of plugin\n   * @returns {Object}\n   * @private\n   */\n  BaseToolOptions.prototype._collectDefaultOptions = function (pluginName) {\n    pluginName = pluginName || this.name || this.optionName;\n    var drawer = this.drawerInstance || this.drawer,\n        result = drawer && drawer.getPluginConfig(pluginName);\n    return result;\n  };\n\n\n  /**\n   * On toolbar created - create tool button.\n   * @param {fabric.Event} ev\n   * @param {DrawerToolbar} toolbar\n   * @private\n   */\n    BaseToolOptions.prototype._onToolbarCreated = function (ev, toolbar) {\n        this.toolbar = toolbar;\n        if (this.createControls) {\n            this.createControls(toolbar);\n        }\n\n      if (this.useCombobox && this.$toolControl) {\n        var comboBoxOptions = {\n          drawer: this.drawer,\n          editable: !this.onlyPredefined,\n          buttonMode: this.buttonMode\n        },\n        $targetSelect = this.$toolControl.find('select');\n        $targetSelect.ToolbarComboBox(comboBoxOptions);\n        this.comboBox = $targetSelect.getComboBox();\n      }\n    };\n\n\n  /**\n   * On toolbar destroyed - destroy button, if it was our toolbar.\n   * @param {fabric.Event} ev\n   * @param {DrawerToolbar} toolbar\n   * @private\n   */\n    BaseToolOptions.prototype._onToolbarDestroyed = function (ev, toolbar) {\n        if (this.toolbar == toolbar) {\n            this.removeTool();\n        }\n    };\n\n\n    /**\n     * Deletes tool button.\n     * If  doDeleteToolbarCreationListeners is true - removes listeners of toolbar creation event.\n     * So, tool will not appear on toolbar next time, when toolbar is created.\n     *\n     * @param {boolean} doDeleteToolbarCreationListeners\n     */\n    BaseToolOptions.prototype.removeTool = function(doDeleteToolbarCreationListeners) {\n        if (this.deleteControls) {\n            this.deleteControls();\n        }\n\n        // stop listening toolbar creation\n        if (doDeleteToolbarCreationListeners) {\n            this.drawer.off(this.drawer.EVENT_OPTIONS_TOOLBAR_CREATED, this._bindedOnToolbarCreated);\n        }\n    };\n\n  /**\n   * React on edit mode entering\n   * @param  {fabric.Event} [fEvent]\n   * @param  {fabric.Object} tool\n   * @private\n   */\n  BaseToolOptions.prototype._onTextEditingEntered = function (fEvent, tool) {\n    tool = tool && tool.target;\n\n    var isEditMode = tool && tool.isEditing,\n        showControls = !this.hideOnEditMode && (this.showOnEditMode || isEditMode);\n    if (showControls) {\n      this.showControls(true, tool);\n    } else {\n      this.hideControls();\n    }\n  };\n\n  /**\n   * React on edit mode exiting\n   * @param  {fabric.Event} [fEvent]\n   * @param  {fabric.Object} [tool]\n   * @private\n   */\n  BaseToolOptions.prototype._onTextEditingExited = function (fEvent, tool) {\n    var isEditMode = tool && tool.target && tool.target.isEditing,\n        showControls = this.hideOnEditMode && !isEditMode;\n    if (showControls) {\n      this.showControls();\n    } else {\n      this.hideControls();\n    }\n  };\n\n    /**\n     * Handler for EVENT_DO_DEACTIVATE_TOOL.\n     * Hides controls.\n     * Calls this.onDeactivateTool() if it is defined\n     *\n     * @param e event obj\n     * @param tool tool object\n     * @private\n     */\n    BaseToolOptions.prototype._onDeactivateTool = function (e, tool) {\n        // set active to false\n        this.active = false;\n        // hide controls\n      var needToShow = this.options && this.options.alwaysVisible;\n      if (!needToShow) {\n        this.hideControls();\n      } else {\n        this.showControls();\n      }\n    };\n\n\n    /**\n     * Default handler for EVENT_DO_ACTIVATE_TOOL.\n     * Calls this.updateOnTool()\n     *\n     * @param {fabric.Event} e event obj\n     * @param {BaseTool} tool tool object\n     * @private\n     */\n    BaseToolOptions.prototype._onActivateTool = function (e, tool) {\n        this.updateOnTool(tool);\n    };\n\n\n    /**\n     * Shows/hides controls depending on tool.toolOptionsList\n     *\n     * @param {BaseTool} tool tool object\n     */\n    BaseToolOptions.prototype.updateOnTool = function (tool) {\n        // look if activated tool toolOptionsList has this option name\n      var toolHasOption = tool.toolOptionsList && (tool.toolOptionsList.indexOf(this.optionName) !== -1),\n          editModeIsCorrect = (!this.showOnEditMode || tool.isEditing),\n          needToShowControls = toolHasOption && editModeIsCorrect;\n        if (needToShowControls) {\n            this.active = true;\n            // show controls\n            this.showControls();\n            // and activate tool\n            if (this.onActivateTool) {\n                this.onActivateTool(tool);\n            }\n        } else {\n            this.active = false;\n            // show controls\n            this.hideControls(tool.forceOptionsHide);\n        }\n    };\n\n\n    /**\n     * Shows/hides controls, depending on selected object optionName\n     * @param  {Event} event\n     * @param  {fabric.Event} fabricEvent [description]\n     * @private\n     */\n    BaseToolOptions.prototype._onObjectSelected = function (event, fabricEvent) {\n      var target = fabricEvent.target,\n          toolHasOption = target.objectOptionsList && (target.objectOptionsList.indexOf(this.optionName) !== -1),\n          editModeIsCorrect = (!this.showOnEditMode || target.isEditing),\n          needToShowControls = toolHasOption && editModeIsCorrect;\n      if (needToShowControls) {\n            // show controls\n            this.showControls();\n            // update controls\n            this.updateControlsFromObject(target);\n        } else {\n            this.hideControls();\n        }\n    };\n\n    /**\n     * React on object deselect\n     * @private\n     */\n    BaseToolOptions.prototype.onSelectionCleared = function () {\n\n    };\n\n\n    /**\n     * On selection cleared - hide option controls if not tool is active.\n     * Else shows option controls for active tool.\n     * Calls this.onSelectionCleared if defined.\n     * @private\n     */\n    BaseToolOptions.prototype._onSelectionCleared = function () {\n        // if tool is active now - show controls for it. If no - hide  controls\n        if (this.drawer.activeDrawingTool) {\n            this.updateOnTool(this.drawer.activeDrawingTool);\n        } else {\n            this.hideControls();\n        }\n      this.onSelectionCleared();\n    };\n\n    /**\n     * Collect necessary data from object\n     * @param  {fabric.Object} target - fabric object\n     * @returns {object} result\n     */\n    BaseToolOptions.prototype.collectDataFromObject = function (target) {\n        var result = {};\n        return result;\n    };\n\n    /**\n     * Update controls with actual data\n     * @param {object} data\n     */\n    BaseToolOptions.prototype.updateControls = function (data) {\n    };\n\n    /**\n     * Collect and update controls with data from target object\n     * @param  {fabric.Object} target - fabric object\n     */\n    BaseToolOptions.prototype.updateControlsFromObject = function (target) {\n        this.collectDataFromObject(target);\n        this.updateControls(this.data);\n    };\n\n    /**\n     * This have to be redefined in child class\n     * @param {Boolean} [withUpdate] - need to update controls\n     * @param  {fabric.Object} [tool] - for styles collecting\n     */\n    BaseToolOptions.prototype.showControls = function (withUpdate, tool) {\n    };\n\n    /**\n     * This have to be redefined in child class\n     * @param {Boolean} [force] - force hide ignoring any options\n     */\n    BaseToolOptions.prototype.hideControls = function (force) {\n    };\n\n\n    pluginsNamespace.BaseToolOptions = BaseToolOptions;\n})\n","export default (function ($, pluginsNamespace, BaseToolOptions, util) {\n  'use strict';\n\n  /**\n   * Base class for text options plugins.\n   *\n   * @param drawer\n   * @constructor\n   * @memberof DrawerJs.plugins\n   * @augments DrawerJs.plugins.BaseToolOptions\n   */\n  var BaseTextOptionTool = function (drawer) {\n    BaseToolOptions.call(this, drawer);\n    this.drawer = drawer;\n\n    this._setEventHandlers();\n    this._setGlobalClickHandler();\n  };\n\n  BaseTextOptionTool.prototype = Object.create(BaseToolOptions.prototype);\n  BaseTextOptionTool.prototype.constructor = BaseToolOptions;\n\n  /**\n   * Button icon class - font Awesome\n   * @constant\n   * @type {string}\n   */\n  BaseTextOptionTool.prototype.buttonIconClass = '';\n  BaseTextOptionTool.prototype.showOnEditMode = true;\n  BaseTextOptionTool.prototype.hideOnEditMode = false;\n\n  BaseTextOptionTool.prototype.focusTextOnChange = false;\n\n  BaseTextOptionTool.prototype.onlyPredefined = false;\n  BaseTextOptionTool.prototype.stylesToObject = false;\n\n  BaseTextOptionTool.prototype.useCombobox = true;\n  BaseTextOptionTool.prototype.buttonMode = true;\n\n  BaseTextOptionTool.prototype.predefined = {};\n  BaseTextOptionTool.prototype.valueType = {};\n\n  BaseTextOptionTool.prototype.minValue = undefined;\n  BaseTextOptionTool.prototype.maxValue = undefined;\n\n  /**\n   * Setup events\n   * @private\n   */\n  BaseTextOptionTool.prototype._setEventHandlers =function () {\n    // react on styles changes of current text object\n    this.drawer.on(this.drawer.EVENT_TEXT_STYLES_CHANGED, this._onStylesChanged.bind(this));\n\n    // get styles handler\n    this.drawer.on(this.drawer.EVENT_TEXT_GET_STYLES, this._onGetStyles.bind(this));\n\n    if (this._onObjectAdded) {\n      this.drawer.on(this.drawer.EVENT_OBJECT_ADDED, this._onObjectAdded.bind(this));\n    }\n  };\n\n  /**\n   * Apply selected border style to added object.\n   *\n   * @param {fabric.Event} fEvent\n   * @param {Object} styles\n   * @param {Object} [objectStyles]\n   * @param {Array} [stylesWithMultipleValues]\n   * @private\n   */\n  BaseTextOptionTool.prototype._onStylesChanged = function (fEvent, styles, objectStyles, stylesWithMultipleValues) {\n    this.updateControls(styles, objectStyles, stylesWithMultipleValues);\n  };\n\n\n  /**\n   * Get styles of current control\n   *\n   * @param {fabric.Event} [fEvent]\n   * @param {fabric.Object} [tool]\n   * @param {Object} result\n   * @private\n   */\n  BaseTextOptionTool.prototype._onGetStyles = function (fEvent, tool, result) {\n    result = result || {};\n\n    //@todo get active style\n\n    result.defaultValues = $.extend(true, {}, result.defaultValues || {}, this.options.defaultValues || {});\n  };\n\n  /**\n   * Fill controls with data\n   * @param {Object} [styles]\n   * @param {Object} [objectStyles]\n   * @param {Array} [stylesWithMultipleValues]\n   */\n  BaseTextOptionTool.prototype.updateControls = function (styles, objectStyles, stylesWithMultipleValues) {\n    styles = styles || this._lastData || {};\n    objectStyles = objectStyles || {};\n    stylesWithMultipleValues = stylesWithMultipleValues || [];\n\n    var _self = this,\n        $toolControl = this.$toolControl;\n    if ($toolControl) {\n      var $allControls = $toolControl.find('.controls-value-item');\n      $allControls.each(function (i, currElement) {\n        var $currElement = $(currElement),\n            isInputType = $currElement.is('input, select, textarea'),\n            currValueName = $currElement.data('name'),\n            defaultValue = _self._defaultOptions.defaultValues[currValueName],\n            inheritedValue = objectStyles[currValueName],\n            multipleValues = stylesWithMultipleValues.indexOf(currValueName) !== -1,\n            currValueIsInvalid = styles[currValueName] === undefined,\n            neededValue = styles[currValueName] !== undefined ? styles[currValueName] : inheritedValue || defaultValue;\n\n        if (multipleValues) {\n          neededValue = '';\n        }\n\n        if (isInputType) {\n          $currElement.val(neededValue);\n        }\n\n        _self._updateClasses(currValueIsInvalid, currValueIsInvalid && neededValue === inheritedValue, multipleValues);\n\n        $toolControl.toggleClass('option-value-invalid', !!currValueIsInvalid);\n        $toolControl.toggleClass('option-value-multiple', !!multipleValues);\n        $toolControl.toggleClass('option-value-inherited', !!(currValueIsInvalid && neededValue === inheritedValue));\n\n        var haveError = currValueIsInvalid || multipleValues,\n            inheritedClassString = currValueIsInvalid && neededValue === inheritedValue ? ' option-value-inherited ' : '',\n            invalidClassString = currValueIsInvalid ? ' option-value-invalid ' : '',\n            multipleClassString = multipleValues ? ' option-value-multiple ' : '',\n            classString = '' + inheritedClassString + invalidClassString + multipleClassString ;\n\n        if ($currElement.data('comboBox')) {\n          $currElement.data('comboBox').updateSelectedValues(neededValue, classString);\n        } else {\n          $currElement.trigger('valueChanged', [{\n            value: neededValue,\n            valueName: currValueName,\n            inherited: currValueIsInvalid || neededValue === inheritedValue,\n            multipleValues: multipleValues,\n            classString: classString\n          }]);\n        }\n\n        _self.updateSingleControl(currValueName, neededValue);\n      });\n    }\n  };\n\n  /**\n   * Update indicator classes\n   * @param {Boolean} [valueIsInvalid] - control have invalid value\n   * @param {Boolean} [valueIsInherited] - control have value inherited from object\n   * @param {Boolean} [valueIsMultiple] - current selection have multiple values for current style\n   * @private\n   */\n  BaseTextOptionTool.prototype._updateClasses = function (valueIsInvalid, valueIsInherited, valueIsMultiple) {\n    this.$toolControl.toggleClass('option-value-invalid', !!valueIsInvalid);\n    this.$toolControl.toggleClass('option-value-multiple', !!valueIsInherited);\n    this.$toolControl.toggleClass('option-value-inherited', !!valueIsMultiple);\n  };\n\n  /**\n   * React on edit mode entering\n   * @param  {String} valueName\n   * @param  {*} value\n   */\n  BaseTextOptionTool.prototype.updateSingleControl = function (valueName, value) {\n\n  };\n\n  /**\n   * Apply styles\n   * @param {object.<string>} [styles] - Styles object\n   */\n  BaseTextOptionTool.prototype.setStyles = function (styles) {\n    //@TODO refactor - to many render\n    styles = styles || this._lastData || this.getStylesFromControls();\n\n    var currText = this.drawer.fCanvas.getActiveObject();\n    if (currText) {\n      var selectionIsEmpty = currText.selectionEnd === currText.selectionStart;\n      if (selectionIsEmpty) {\n        this.drawer.setTemporaryStyles(styles);\n      } else {\n        this.drawer.setTemporaryStyles();\n        if (this.stylesToObject) {\n          for (var styleName in styles) {\n            currText[styleName] = styles[styleName];\n          }\n        } else {\n          currText.setSelectionStyles(styles);\n        }\n      }\n      this._lastData = styles;\n      if (this.focusTextOnChange) {\n        if (this.comboBox) {\n          this.comboBox.hideDropdown();\n        }\n        if (currText.hiddenTextarea) {\n          currText.hiddenTextarea.focus();\n        }\n      }\n      currText.canvas.renderAll();\n    }\n  };\n\n  /**\n   * Validate and normalize value\n   * @param {*} value\n   * @param {string} valueName\n   * @param {boolean} [doNotUseDefault]\n   * @return {*} result - normalized value\n   */\n\n  BaseTextOptionTool.prototype.normalizeValue = function (value, valueName, doNotUseDefault) {\n    var result,\n        defaultValue = !doNotUseDefault ? this.options.defaultSize : undefined,\n        validValue = this.validateValue(value, valueName),\n        overrideWithDefault = !validValue;\n\n    result = overrideWithDefault ? defaultValue : value;\n\n    if (this.minValue && this.minValue[valueName] !== undefined) {\n      result = result < this.minValue[valueName] ? this.minValue[valueName] : result;\n    }\n\n    if (this.maxValue && this.maxValue[valueName] !== undefined) {\n      result = result > this.maxValue[valueName] ? this.maxValue[valueName] : result;\n    }\n    return result;\n  };\n\n  /**\n   * Attach events for control element\n   * @private\n   */\n  BaseTextOptionTool.prototype._attachEvents = function () {\n    if (this.$toolControl) {\n      this.$toolControl.on('input change toolbarOptionChange', this.onInputChange.bind(this));\n    }\n  };\n\n  /**\n   * Create controls\n   * @returns {string} result - html of controls\n   */\n  BaseTextOptionTool.prototype.generateControlHtml = function () {\n    var result = '';\n\n    if (this.controlTemplate) {\n      if (typeof this.controlTemplate === 'function') {\n        result = this.controlTemplate();\n      } else {\n        result = this.controlTemplate;\n      }\n    }\n    return result;\n  };\n\n  /**\n   * Create controls.\n   * @param  {DrawerToolbar} toolbar to add control to\n   * @param  {Function} [changeCallback]\n   */\n  BaseTextOptionTool.prototype.createControls = function (toolbar, changeCallback) {\n    this.changeCallback = changeCallback;\n\n    var toolControlHtml = this.generateControlHtml();\n    this.$toolControl = $(toolControlHtml);\n\n    toolbar.addControl(this.$toolControl, this.options.buttonOrder);\n    this.setupControl(toolbar, this.$toolControl, changeCallback);\n    this._attachEvents();\n\n    return this.$toolControl;\n  };\n\n  /**\n   * Create controls.\n   * @param  {DrawerToolbar} toolbar - to add control to\n   * @param  {jQuery} [$toolControl] - tool control element\n   * @param  {Function} [changeCallback]\n   */\n  BaseTextOptionTool.prototype.setupControl = function (toolbar, $toolControl, changeCallback) {\n  };\n\n\n  /**\n   * Setup data\n   * @param {String} pluginName - name of plugin\n   * @returns {Object}\n   * @private\n   */\n  BaseTextOptionTool.prototype._collectDefaultOptions = function (pluginName) {\n    var textConfig = this.drawer.getPluginConfig('Text'),\n        result = {\n          predefined: $.extend(true, {}, textConfig.predefined || {}),\n          defaultValues: $.extend(true, {}, textConfig.defaultValues || {})\n        };\n    return result;\n  };\n\n  /**\n   * Process options\n   * @param {Object} [defaultOptions]\n   * @param {Object} [options]\n   * @param {Object} [optionsFromDrawer]\n   * @param {Object} [result]\n   * @returns {Object}\n   * @private\n   */\n  BaseTextOptionTool.prototype._onOptionsSetup = function (defaultOptions, options, optionsFromDrawer, result) {\n    options = options || {};\n    defaultOptions = defaultOptions || {};\n    optionsFromDrawer = optionsFromDrawer || {};\n\n    var valueName,\n        defVal,\n        drawVal,\n        optVal;\n\n    /**\n     * Because https://bugs.jquery.com/ticket/9477\n     * Bug - extend (deep) merges arrays fields instead of replacing them\n     * **/\n    for (valueName in result.predefined) {\n      defVal = (defaultOptions.predefined && defaultOptions.predefined[valueName]);\n      drawVal = (optionsFromDrawer.predefined && optionsFromDrawer.predefined[valueName]);\n      optVal = (options.predefined && options.predefined[valueName]);\n      result.predefined[valueName] = optVal !== undefined && optVal !== false ? optVal :\n          drawVal !== undefined && drawVal !== false ? drawVal :\n          defVal !== undefined && defVal !== false ? defVal : [];\n    }\n    return result;\n  };\n\n  /**\n   * Handle change of values via controls\n   * @param  {Event} e - Event that modifies control's values\n   * @private\n   * @todo rename as private\n   */\n  BaseTextOptionTool.prototype.onInputChange = function (e) {\n    var valueFromEvent;\n    valueFromEvent = this.getStylesFromChangeEvent(e);\n    if (!valueFromEvent) {\n      this.getStylesFromControls();\n    }\n    this.setStyles(valueFromEvent);\n    this._updateClasses();\n  };\n\n  /**\n   * Collect data from change event\n   * @param  {Event} e - event that modifies control's values\n   */\n  BaseTextOptionTool.prototype.getStylesFromChangeEvent = function (e) {\n\n  };\n\n  /**\n   * Collect data from controls\n   * @returns {Object}\n   */\n  BaseTextOptionTool.prototype.getStylesFromControls = function () {\n    var _self = this,\n        result = {},\n        $toolControl = this.$toolControl;\n    if ($toolControl) {\n      var $allControls = $toolControl.find('input, select, textarea');\n      $allControls.each(function (i, currElement) {\n        var $currElement = $(currElement),\n            currValueName = $currElement.data('name'),\n            currValue = $currElement.val(),\n            validatedValue = _self.normalizeValue(currValue, currValueName);\n\n        if (currValueName !== undefined && currValue !== undefined) {\n          result[currValueName] = validatedValue;\n        }\n      });\n    }\n    this._lastData = result;\n    return result;\n  };\n\n  /**\n   * Validates value\n   * @param {*} value\n   * @param {string} valueName\n   * @param {Boolean} [strictMode]\n   * @return {boolean}\n   */\n\n  BaseTextOptionTool.prototype.validateValue = function (value, valueName, strictMode) {\n    var valueIsValid,\n        checkForMatchWithPredefined = this.onlyPredefined && this.predefined && this.predefined[valueName],\n        equalToPredefinedValue = checkForMatchWithPredefined && this.predefined[valueName].indexOf(value) !== -1;\n\n    switch (this.valueType[valueName]) {\n      case 'number':\n        value = parseFloat(value);\n        valueIsValid = typeof value === 'number' && isFinite(value);\n        break;\n      case 'string':\n        valueIsValid = typeof value === 'string';\n        break;\n      case 'color':\n        var isString = typeof value === 'string',\n            isColorInstance = value instanceof fabric.Color;\n        valueIsValid = strictMode ? isColorInstance : isString;\n        break;\n      default :\n        valueIsValid = value !== undefined;\n        break;\n    }\n\n    valueIsValid = checkForMatchWithPredefined ? (valueIsValid && equalToPredefinedValue) : valueIsValid;\n    return valueIsValid;\n  };\n\n  /**\n   * Hides controls\n   */\n  BaseTextOptionTool.prototype.hideControls = function () {\n    if (this.$toolControl) {\n      this.$toolControl.addClass('hidden');\n    }\n  };\n\n\n  /**\n   * Shows controls\n   * @param {Boolean} [withUpdate] - need to update controls\n   * @param  {fabric.Object} [tool] - for styles collecting\n   */\n  BaseTextOptionTool.prototype.showControls = function (withUpdate, tool) {\n    if (withUpdate) {\n      tool = tool || this.drawer.fCanvas.getActiveObject();\n      var currentStyles = tool.getSelectionStyles(),\n          objStyles = tool.getObjStyles();\n      this.updateControls(currentStyles ,objStyles);\n    }\n    if (this.$toolControl) {\n      this.$toolControl.removeClass('hidden');\n    }\n  };\n\n  /**\n   * Removes tool\n   */\n  BaseTextOptionTool.prototype.remove = function () {\n    if (this.$toolControl) {\n      this.$toolControl.remove();\n    }\n  };\n\n  /** @TODO check\n   * Set listeners for clicks - to properly close controls on outside clicks\n   * @private\n   */\n  BaseTextOptionTool.prototype._setGlobalClickHandler = function () {\n    var self = this,\n        $html = $('html');\n\n    $html.off('click.textOptionTool').on('click.textOptionTool', function (e) {\n      self.hideControls();\n    });\n  };\n\n  pluginsNamespace.BaseTextOptionTool = BaseTextOptionTool;\n})\n","export default (function ($, pluginsNamespace, BaseTool, util) {\n  \"use strict\";\n\n  /**\n   * Provides mechanism to draw shapes like in photoshop.\n   *\n   * @param {DrawerJs.Drawer} drawerInstance\n   * @memberof DrawerJs.plugins\n   * @constructor\n   */\n  var BaseShape = function BaseShapeConstructor(drawerInstance) {\n    if (!drawerInstance) {\n      throw new Error(\"BaseShape CTOR : drawerInstance is not set!\");\n    }\n\n    // call super constructor\n    BaseTool.call(this, drawerInstance);\n    var _this = this;\n    this.drawer = drawerInstance;\n\n    this.type = 'shape';\n    this.objectBaseType = 'shape';\n    /**\n     * List of tool options to show when tool is activated\n     * @type {Array}\n     */\n    this.toolOptionsList = ['color', 'border', 'opacity'];\n\n    this.drawingInProgress = false;\n    this.onlyOneItem = true;\n\n    this.MOUSEMOVE = this.getEventId(['mousemove', 'touchmove']);\n    this.MOUSEDOWN = this.getEventId(['mousedown', 'touchstart']);\n    this.MOUSEUP = this.getEventId(['mouseup', 'touchend']);\n  };\n\n\n  BaseShape.prototype = Object.create(BaseTool.prototype);\n  BaseShape.prototype.constructor = BaseShape;\n\n  /**\n   * Min size of shape in px. If less - shape will not be added\n   * @type {number}\n   */\n  BaseShape.prototype.minShapeSize = 4;\n\n  /**\n   * Min size of shape in px for touch devices. If less - shape will not be added\n   * @type {number}\n   */\n  BaseShape.prototype.minShapeSizeForTouch = 15;\n\n\n  BaseShape.CENTERING_MODE = {\n    NORMAL: 'normal',\n    FROM_CENTER: 'from_center'\n  };\n\n  /**\n   * Setup data\n   * @param {Object} [options] - options to save\n   * @param {String} [pluginName] - name of plugin\n   * @param {Boolean} [doNotSave] - set true to not save result as this.options\n   * @returns {Object} config of plugin\n   */\n  BaseShape.prototype._setupOptions = function (options, pluginName, doNotSave) {\n    pluginName = pluginName || this.name;\n    var drawer = this.drawerInstance || this.drawer,\n        optionsFromDrawer = drawer && drawer.getPluginConfig(pluginName),\n        result = $.extend(true,\n            {},\n            this._defaultOptions || {},\n            optionsFromDrawer || {},\n            options || {}\n        );\n\n    if (!doNotSave) {\n      this.options = result;\n    }\n    return result;\n  };\n\n  BaseShape.prototype.getEventId = function (event) {\n    var _this = this;\n\n    if (event instanceof String) {\n      event = [event];\n    }\n\n    if (event instanceof Array) {\n      return event.map(function (e) {\n        return e + '.drawerTool' + _this.btnClass;\n      }).join(' ');\n    }\n  };\n\n  BaseShape.prototype._activateTool = function () {\n    if (this.active)\n      return;\n\n    // call _activateTool() of parent\n    BaseTool.prototype._activateTool.call(this);\n\n    this.drawerInstance.log('TOOL', this.name + ' : _activateTool() [BaseShape]');\n\n    var _this = this;\n\n    // show no tooltip on touch devices\n    if (!this.drawerInstance.touchDevice) {\n      _this.showHelpTooltip();\n    }\n\n    var fCanvas = this.drawerInstance.fCanvas;\n    // remove all active selection\n    fCanvas.disableSelection();\n\n    fCanvas.renderAll();\n\n    fCanvas.defaultCursor = 'crosshair';\n\n    if (this.setUpHandlers) {\n      this.setUpHandlers();\n    } else {\n      this._setUpHandlers();\n    }\n  };\n\n\n  BaseShape.prototype._setUpHandlers = function () {\n    var _this = this;\n    var fCanvas = this.drawerInstance.fCanvas;\n\n    $(fCanvas.upperCanvasEl).on(_this.MOUSEDOWN, function (event) {\n      _this.drawerInstance.log('baseShape', 'mousedown');\n\n      $(fCanvas.upperCanvasEl).off(_this.MOUSEDOWN);\n\n      // no tooltip was shown on touch devices\n      if (!_this.drawerInstance.touchDevice) {\n        _this.removeHelpTooltip();\n      }\n\n      if (fCanvas.getActiveObject()) {\n        return true;\n      }\n\n      if (_this.drawingInProgress) {\n        _this.finishItemDraw();\n        return true;\n      }\n\n      _this.drawingInProgress = true;\n      _this.drawerInstance.drawingInProgress = true;\n      var startPointCoords = _this.drawer.fCanvas.getPointer(event, true);\n\n      if (!_this.createShape) {\n        throw new Error('createShape method does not exist', _this);\n      }\n\n      _this.shape = _this.createShape(\n          startPointCoords.x,\n          startPointCoords.y\n      );\n\n      _this.drawerInstance.trigger(_this.drawerInstance.EVENT_ZOOM_SET);\n      fCanvas.add(_this.shape);\n      _this.drawerInstance.trigger(_this.drawerInstance.EVENT_ZOOM_RESTORE);\n\n      $(document).on(_this.MOUSEMOVE, function (event) {\n        var pointCoords = _this.drawer.fCanvas.getPointer(event);\n\n        if (!_this.updateShape) {\n          throw new Error('updateShape method does not exist', _this);\n        }\n\n        _this.updateShape(_this.shape,\n            pointCoords.x,\n            pointCoords.y\n        );\n\n        fCanvas.renderAll();\n      });\n\n      $(document).on(_this.MOUSEUP, function () {\n        _this.drawerInstance.log('baseShape', 'mouseup');\n        var minSize = _this.drawer.touchDevice ? _this.minShapeSizeForTouch : _this.minShapeSize,\n            widthIsSmaller = _this.shape.width < minSize,\n            heightIsSmaller = !_this.checkOnlyWidth && (_this.shape.height < minSize),\n            shapeIsSmaller = _this.checkOnlyWidthOrHeight ? widthIsSmaller && heightIsSmaller : widthIsSmaller || heightIsSmaller,\n            preventAddOfShape = shapeIsSmaller;\n\n        // Check, if shape is too small.\n        // for desktop this is ok - shape will still follow mouse and\n        // drawing will be stopped when user make a second click\n        // but for touch devices this will not work so we simply remove a\n        // shape if its too small but allow him to draw another.\n\n        if (preventAddOfShape) {\n            _this.shape.remove();\n            _this.shape = null;\n\n            _this._deactivateTool();\n            _this._activateTool();\n            return;\n          }\n\n        // finish drawing\n          _this.finishItemDraw();\n\n          // some tools are supposed to draw one shape and then deactivate\n        if (_this.onlyOneItem) {\n            _this.drawerInstance.trigger(_this.drawerInstance.EVENT_DO_DEACTIVATE_TOOL, _this);\n        }\n\n      });\n    });\n  };\n\n  BaseShape.prototype.finishItemDraw = function () {\n    var _this = this;\n    var fCanvas = _this.drawerInstance.fCanvas;\n\n    fCanvas.defaultCursor = 'default';\n\n    if (!this.drawerInstance.touchDevice) {\n      _this.removeHelpTooltip();\n    }\n    fCanvas.deactivateAll();\n    fCanvas.calcOffset();\n\n    _this.drawingInProgress = false;\n    util.setTimeout(function(){\n      _this.drawerInstance.drawingInProgress = false;\n    });\n    $(document).off(_this.MOUSEMOVE);\n    $(document).off(_this.MOUSEUP);\n\n    // call finishShape, if it is implemented\n    if (this.finishShape) {\n      this.finishShape(this.shape);\n    }\n\n    if (_this.shape) {\n      if (_this.shape.width < 0) {\n        _this.shape.set('width', _this.shape.width * -1);\n        _this.shape.set('left', _this.shape.left - _this.shape.width);\n        _this.shape.set('flipX', true);\n      }\n      if (_this.shape.height < 0) {\n        _this.shape.set('height', _this.shape.height * -1);\n        _this.shape.set('top', _this.shape.top - _this.shape.height);\n        _this.shape.set('flipY', true);\n      }\n\n      var newShape = _this.shape.clone();\n\n      _this.shape.remove();\n      _this.shape = null;\n\n      fCanvas.deactivateAll();\n\n      fCanvas.add(newShape);\n\n      fCanvas.restoreSelection();\n\n      fCanvas.renderAll();\n      fCanvas.calcOffset();\n      fCanvas.renderAll();\n    }\n  };\n\n  BaseShape.prototype._deactivateTool = function () {\n    if (!this.active) {\n      return;\n    }\n    // call _deactivateTool() of parent\n    BaseTool.prototype._deactivateTool.call(this);\n\n    this.drawerInstance.log('TOOL', this.name + ' : _deactivateTool() [BaseShape]');\n\n    this.finishItemDraw();\n\n    $(this.drawerInstance.fCanvas.upperCanvasEl)\n      .off(this.MOUSEDOWN);\n\n    this.drawerInstance.fCanvas.restoreSelection();\n  };\n\n\n  BaseShape.prototype.showHelpTooltip = function () {\n    var _this = this;\n    var fCanvas = _this.drawerInstance.fCanvas;\n\n    var helpText = '';\n    if (this.helpTooltipText) {\n      helpText = this.helpTooltipText;\n    } else {\n      helpText = _this.drawerInstance.t('Click to start drawing a ') +\n          '<i class=\"fa ' + _this.faClass + '\"></i>';\n    }\n\n    _this.cursorTooltip = $(\n        '<div class=\"drawer-tool-mouse-tooltip ' + this.btnClass + '\">' +\n        helpText +\n        '</div>'\n    );\n\n    $('body').append(_this.cursorTooltip);\n    $(fCanvas.upperCanvasEl)\n        .on('mousemove.drawer-tool-mouse-toolip', function (event) {\n          _this.cursorTooltip.css('left', event.pageX);\n          _this.cursorTooltip.css('top', event.pageY);\n        });\n\n    $(fCanvas.upperCanvasEl).on('mouseleave', function () {\n      _this.cursorTooltip.css('opacity', 0);\n    });\n\n    $(fCanvas.upperCanvasEl).on('mouseenter', function () {\n      _this.cursorTooltip.css('opacity', 1);\n    });\n  };\n\n  BaseShape.prototype.removeHelpTooltip = function () {\n    if (this.cursorTooltip) {\n      $('body').off('mousemove.drawer-tool-mouse-toolip');\n      this.cursorTooltip.fadeOut();\n      this.cursorTooltip.remove();\n    }\n  };\n\n\n  pluginsNamespace.BaseShape = BaseShape;\n\n})\n","export default (function ($, pluginsNamespace, BaseTool, util) {\n  'use strict';\n\n\n  var MOUSE_UP_TIMER = util.mouseUp('BaseBrushTimer');\n  var MOUSE_DOWN_TIMER = util.mouseDown('BaseBrushTimer');\n  /**\n   * Base class for all brushes/free drawing tools.\n   *\n   * @param drawerInstance\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var BaseBrush = function (drawerInstance) {\n    // call super constructor\n    BaseTool.call(this, drawerInstance);\n\n    // set type\n    this.type = 'brush';\n\n    // @todo : use it\n    this.brushConstructor = fabric.ErasablePencilBrush;\n  };\n\n\n  BaseBrush.prototype = Object.create(BaseTool.prototype);\n  BaseBrush.prototype.constructor = BaseBrush;\n\n  BaseBrush.prototype.doNotZoomOnActivate = true;\n\n  BaseBrush.prototype.createButton = function (toolbar) {\n    var _this = this,\n        clickHandler = function () {\n          var action = _this.active ? _this.drawerInstance.EVENT_DO_DEACTIVATE_TOOL\n              : _this.drawerInstance.EVENT_DO_ACTIVATE_TOOL;\n\n          _this.drawerInstance.trigger(action, [_this]);\n        },\n        buttonConfig = {\n          buttonOrder: this.options.buttonOrder,\n          additionalClass: this.btnClass,\n          iconClass: this.faClass,\n          tooltipText: this.tooltip,\n          clickHandler: clickHandler\n        };\n\n\n    this.$toolButton = toolbar.addButton(buttonConfig);\n  };\n\n  BaseBrush.prototype._activateTool = function () {\n    // call _activateTool() of parent\n    BaseTool.prototype._activateTool.call(this);\n    this.drawerInstance.log('TOOL', this.name + ' : activateTool [BaseBrush]');\n\n    var _this = this;\n    var fCanvas = _this.drawerInstance.fCanvas;\n\n    fCanvas.freeDrawingCursor =\n      \"url(/redactor.plugin.drawer/dist/cursor-fa-eraser.cur), default\";\n    fCanvas.isDrawingMode = true;\n\n    // create brush\n    if (!_this.brush) {\n      if (!_this.createBrush) {\n        _this.brush = new fabric.ErasablePencilBrush(_this.drawerInstance.fCanvas);\n      } else {\n        _this.brush = _this.createBrush();\n      }\n    }\n\n    // save prev brush and set new\n    _this.previousBrush = _this.drawerInstance.getBrush();\n    _this.drawerInstance.setBrush(_this.brush);\n\n    _this.drawerInstance.trigger(this.drawerInstance.EVENT_TOOL_ACTIVATED, [this]);\n    // this method will be redefined in BaseBrush descendants\n    this.afterActivateTool();\n    this._attachTimerEvents();\n  };\n\n  /**\n   * Attach event that indicates \"Brush\" drawing mode\n   * @private\n   */\n  BaseBrush.prototype._attachTimerEvents = function () {\n    var upperCanvasEl = this.drawerInstance.fCanvas.upperCanvasEl,\n        $upperCanvasEl = $(upperCanvasEl);\n\n    this._removeTimerEvents();\n    // handle mouse down and mouse up\n    $upperCanvasEl.on(MOUSE_DOWN_TIMER, this._onMouseDownTimer.bind(this));\n    $(window.document).on(MOUSE_UP_TIMER, this._onMouseUpTimer.bind(this));\n  };\n\n  /**\n   * Update indicator on mouse down\n   * @private\n   */\n  BaseBrush.prototype._onMouseDownTimer = function () {\n    this.drawerInstance.isBrushDrawing = true;\n  };\n\n  /**\n   * Update indicator on mouse up\n   * @private\n   */\n  BaseBrush.prototype._onMouseUpTimer = function () {\n    var self = this;\n    util.setTimeout(function(){\n      self.drawerInstance.isBrushDrawing = false;\n    },0);\n  };\n\n  /**\n   * Remove events\n   * @private\n   */\n  BaseBrush.prototype._removeTimerEvents = function () {\n    var upperCanvasEl = this.drawerInstance.fCanvas.upperCanvasEl,\n        $upperCanvasEl = $(upperCanvasEl);\n\n    // handle mouse down and mouse up\n    $upperCanvasEl.off(MOUSE_DOWN_TIMER);\n    $(window.document).off(MOUSE_UP_TIMER);\n  };\n\n  /**\n   *\n   *\n   * @private\n   */\n  BaseBrush.prototype._deactivateTool = function () {\n    // call _deactivateTool() of parent\n    BaseTool.prototype._deactivateTool.call(this);\n    this.drawerInstance.log('TOOL', this.name + ' : deactivateTool [BaseBrush]');\n\n    this.drawerInstance.fCanvas.isDrawingMode = false;\n\n    // remove mouse events listening\n    $(this.drawerInstance.fCanvas.upperCanvasEl)\n      .off('mousedown.BaseBrush touchstart.BaseBrush');\n\n    $(this.drawerInstance.fCanvas.upperCanvasEl)\n      .off('mouseup.BaseBrush touchend.BaseBrush');\n\n    this._removeTimerEvents();\n    // restore prev brush\n    this.drawerInstance.setBrush(this.previousBrush);\n    this.brush = null;\n\n    this.drawerInstance.trigger(this.drawerInstance.EVENT_TOOL_DEACTIVATED, [this]);\n    // this method will be redefined in BaseBrush descendants\n    this.afterDeactivateTool();\n  };\n\n\n  /**\n   * Method MUST be redefined in descendants.\n   * Method is called in the end of _deactivateTool().\n   */\n  BaseBrush.prototype.afterActivateTool = function () {\n    throw new Error(this.name + ' should implement afterActivateTool() method.');\n  };\n\n  /**\n   * Method MUST be redefined in descendants.\n   * Method is called in the end of _deactivateTool().\n   */\n  BaseBrush.prototype.afterDeactivateTool = function () {\n    throw new Error(this.name + ' should implement afterDeactivateTool() method.');\n  };\n\n  pluginsNamespace.BaseBrush = BaseBrush;\n\n})\n","export default (function ($, DrawerApi, util) {\n  'use strict';\n  var emptyFunc = function(){};\n\n  /**\n   * Check if image have valid width/height\n   * @param {Image} image\n   * @returns {Boolean}\n   */\n  function checkImageSizes(image) {\n    var result = false;\n    if (image) {\n      var widthIsValid = image.naturalWidth !== undefined && image.naturalWidth !== 0,\n          heightIsValid = image.naturalHeight !== undefined && image.naturalHeight !== 0,\n          sizesAreValid = widthIsValid && heightIsValid;\n      result = sizesAreValid;\n    }\n    return result;\n  }\n\n  /**\n   * Set image from url as inactive background image of drawer\n   * @param {String} imageUrl - url of image\n   * @private\n   */\n  function _setImageAsInactiveBackground(imageUrl) {\n    var styleSelector = '.editable-canvas-not-edited',\n        styleRules = '' +\n            'background: url(' + imageUrl + ') !important;' +\n            'background-repeat: no-repeat !important;' +\n            'background-position: center !important;' +\n            'background-size: contain !important;';\n    util.addStyleToStyleSheet(styleSelector, styleRules, '#canvasInactiveImage', true);\n  }\n\n\n  /**\n   * Sets background image for inactive canvas from given image object.\n   *\n   * @param {Image|String} image - js Image object or url string\n   */\n  DrawerApi.prototype.setInactiveDrawerImage = function (image) {\n    if (image) {\n      var valueIsUrl = typeof image === 'string' && image.length,\n          valueIsImage = image instanceof Image,\n          valueIsValid = valueIsUrl || valueIsImage,\n          urlOfImage = valueIsUrl ? image : image.src,\n          imgIsLoaded,\n          imgIsValid;\n\n      if (valueIsValid) {\n        imgIsLoaded = valueIsImage && image.complete && checkImageSizes(image);\n        if (imgIsLoaded) {\n          _setImageAsInactiveBackground(urlOfImage);\n        } else {\n          util.loadImage(urlOfImage, null, null, true).then(function (imgFromPromise) {\n            imgIsValid = checkImageSizes(imgFromPromise);\n            if (imgIsValid) {\n              _setImageAsInactiveBackground(imgFromPromise.src);\n            }\n          });\n        }\n      }\n    }\n  };\n\n\n\n})\n","export default (function ($, brushes, BaseBrush, pluginsNamespace, util) {\n  'use strict';\n\n  var MOUSE_UP = util.mouseUp('Eraser');\n  var MOUSE_DOWN = util.mouseDown('Eraser');\n  var MOUSE_MOVE = util.mouseMove('Eraser');\n  var MOUSE_ENTER_CURSOR = 'mouseenter.EraserCursor';\n  var MOUSE_LEAVE_CURSOR = 'mouseleave.EraserCursor';\n\n  /**\n   * Provides an eraser which allows to erase any drawing/shapes.\n   *\n   * @param {DrawerJs.Drawer} drawerInstance\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @param {Object} options\n   * Configuration object.\n   *\n   * @param {number} options.brushSize\n   * Eraser default brush size\n   *\n   * @memberof DrawerJs.plugins\n   *\n   * @constructor\n   * @augments DrawerJs.plugins.BaseBrush\n   */\n  var Eraser = function (drawerInstance, options) {\n    var _this = this;\n\n    BaseBrush.call(_this, drawerInstance);\n\n    this.name = 'Eraser';\n    this.btnClass = 'btn-eraser';\n    this.faClass = 'fa-eraser';\n    this.tooltip = drawerInstance.t('Eraser');\n\n    this.separatePathOnShapes = true;\n\n    _this._defaultOptions = {\n      cursorUrl: 'none',\n      brushSize: 3,\n      useCoordsQueue: false\n    };\n\n    this._setupOptions(options);\n\n    /**\n     * List of tool options to show when tool is activated.\n     * Deviating from BaseShape tool, Line has no 'color', only 'border'.\n     * @type {String[]}\n     */\n    this.toolOptionsList = ['brushSize'];\n\n    /**\n     *\n     * @type {boolean}\n     */\n    this.forceOptionsHide = true;\n\n    /**\n     * Color value before eraser tool.\n     * @type {String}\n     */\n    this.previousColor = null;\n\n    /**\n     * BrushSize before eraser tool. Used to separate eraser brush size from\n     * other brushes.\n     * @type {Number}\n     */\n    this.previousBrushSize = null;\n\n    /**\n     * Last used eraser brush size. Used to restore eraser size after another\n     * brush tool.\n     * @type {Number}\n     */\n    this.savedBrushSize = this.options.brushSize;\n\n    /**\n     * Boolean flag showing if we are in erasing mode\n     * @type {Boolean}\n     */\n    this.erasingNow = false;\n\n    /**\n     * Eraser brush\n     * @type {fabric.Brush}\n     */\n    this.brush = null;\n  };\n\n\n  Eraser.prototype = Object.create(BaseBrush.prototype);\n  Eraser.prototype.constructor = Eraser;\n\n\n  ////// STATR/STOP TOOL METHODS ////////////////////////////////////////////////////////////////////\n  /**\n   * This method is called in BaseBrush._activateTool()\n   * Children of BaseBrush MUST implement afterActivateTool()\n   */\n  Eraser.prototype.afterActivateTool = function () {\n    var drw = this.drawerInstance;\n    var fCanvas = drw.fCanvas;\n\n    // set cursor\n    this._previousCursor = drw.fCanvas.freeDrawingCursor;\n    drw.fCanvas.freeDrawingCursor = this.options.cursorUrl;\n\n    // set eraser brush\n    this.brush = this._createBrush();\n    drw.setBrush(this.brush);\n\n    // on brush size change - update our cursor size\n    drw.on(drw.EVENT_BRUSH_SIZE_CHANGED, this._updateCursorShapeSize.bind(this));\n\n    // set all mouse handlers:\n    // handle mouse move while tool is active\n    $(fCanvas.upperCanvasEl).on(MOUSE_MOVE,  this._onMouseMove.bind(this));\n\n    // handle mouse down and mouse up\n    $(fCanvas.upperCanvasEl).on(MOUSE_DOWN, this._onMouseDown.bind(this));\n    $(fCanvas.upperCanvasEl).on(MOUSE_UP, this._onMouseUp.bind(this));\n\n    // create cursor\n    this._createEraserCursorShape();\n\n    // handle mouse leave / enter canvas (to hide/show cursor)\n    $(fCanvas.upperCanvasEl).on(MOUSE_ENTER_CURSOR, this._showEraserCursorShape.bind(this));\n    $(fCanvas.upperCanvasEl).on(MOUSE_LEAVE_CURSOR, this._hideEraserCursorShape.bind(this));\n\n\n    // on eraser path created - do work\n    fCanvas.on('path:created', this._onEraserPathCreated.bind(this));\n  };\n\n\n  /**\n   * After tool deactivation - remove all event handlers\n   * This method is called in BaseBrush._activateTool()\n   * Children of BaseBrush MUST implement afterDeactivateTool.\n   */\n  Eraser.prototype.afterDeactivateTool = function () {\n    var fCanvas = this.drawerInstance.fCanvas;\n\n    // switch erasing off\n    this.erasingNow = false;\n\n    fCanvas.off('path:created');\n\n    // restore cursor\n    fCanvas.freeDrawingCursor = this._previousCursor;\n    // remove cursorShape\n    this._removeEraserCursorShape();\n\n    $(fCanvas.upperCanvasEl).off(MOUSE_MOVE);\n    $(fCanvas.upperCanvasEl).off(MOUSE_UP);\n    $(fCanvas.upperCanvasEl).off(MOUSE_DOWN);\n\n    $(fCanvas.upperCanvasEl).off(MOUSE_ENTER_CURSOR);\n    $(fCanvas.upperCanvasEl).off(MOUSE_LEAVE_CURSOR);\n  };\n\n\n  /**\n   * Create eraser brush\n   */\n  Eraser.prototype._createBrush = function () {\n    var brush = new brushes.EraserBrush(this.drawerInstance.fCanvas);\n\n    brush.color = '#fff';\n    brush.opacity = this.drawerInstance.activeOpacity;\n    brush.width = this.options.brushSize;\n\n    return brush;\n  };\n\n\n  ////// ERASER CURSOR METHODS //////////////////////////////////////////////////////////////////////\n  /**\n   * Create shape, that will be used as eraser cursor\n   */\n  Eraser.prototype._createEraserCursorShape = function () {\n    // eraser shape setup\n    var eraserPolyRadius = this.drawerInstance.getBrushSize() / 2;\n\n    this.eraserCursorShape = new fabric.PCircle({\n      radius: eraserPolyRadius\n    });\n\n    this.drawerInstance.fCanvas.add(this.eraserCursorShape);\n\n    this.eraserCursorShape.isEraserBrush = true;\n    this.eraserCursorShape.set('fill', 'transparent');\n    this.eraserCursorShape.set('stroke', 'black');\n    this.eraserCursorShape.set('strokeWidth', 1);\n    this.eraserCursorShape.set('originX', 'center');\n    this.eraserCursorShape.set('originY', 'center');\n\n    this._updateCursorShapeSize();\n  };\n\n\n  /**\n   * Remove eraser shape, that was used as eraser cursor\n   */\n  Eraser.prototype._removeEraserCursorShape = function () {\n    if(this.eraserCursorShape){\n      this.eraserCursorShape.remove();\n      delete this.eraserCursorShape;\n    }\n  };\n\n  /**\n   * Show eraser cursor shape\n   */\n  Eraser.prototype._showEraserCursorShape = function () {\n    this.eraserCursorShape.set('visible', true);\n    this.drawerInstance.fCanvas.renderAll();\n  };\n\n  /**\n   * Hide eraser cursor shape\n   */\n  Eraser.prototype._hideEraserCursorShape = function () {\n    this.eraserCursorShape.set('visible', false);\n    this.drawerInstance.fCanvas.renderAll();\n  };\n\n\n  /**\n   * Update our cursor shape size to be same as brush size\n   */\n  Eraser.prototype._updateCursorShapeSize = function () {\n    if (!this.eraserCursorShape) {\n      return;\n    }\n\n    var eraserPolyRadius = this.drawerInstance.getBrushSize() / 2;\n    var eraserPolyDashSize = (2 * Math.PI * eraserPolyRadius) / 20;\n    this.eraserCursorShape.set('radius', eraserPolyRadius);\n    this.eraserCursorShape.set('strokeDashArray', [\n      eraserPolyDashSize, eraserPolyDashSize\n    ]);\n  };\n\n\n\n  ////// ERASER PATH METHODS //////////////////////////////////////////////////////////////////////\n  /**\n   * After eraser path was created - apply it to all affected shapes.\n   * @param  {fabric.Event} e\n   */\n  Eraser.prototype._onEraserPathCreated = function (e) {\n    var fCanvas = this.drawerInstance.fCanvas;\n\n    e.path.set('eraserPath', true);\n    e.path.set('visible', true);\n\n    for (var i = 0; i < this.affectedShapes.length; i++) {\n      var shape = this.affectedShapes[i];\n      delete shape.eraserAffected;\n      shape.addEraserPath(e.path);\n    }\n\n    fCanvas.renderAll();\n  };\n\n\n  /**\n   * Look, which erasable objects are under eraser.\n   * Add them to affectedShapes[]\n   *\n   * @param {number} x\n   * @param {number} y\n   * @private\n   */\n  Eraser.prototype._affectShapesUnderCoords = function (x, y) {\n    var fCanvas = this.drawerInstance.fCanvas;\n    var allObjects = fCanvas.getObjects();\n\n    this.eraserCursorShape._lastCenterPosition = {x: x, y: y};\n    for (var i = 0; i < allObjects.length; i++) {\n      var obj = allObjects[i];\n      // if object is non-erasable or if already affected by our eraser- skip it\n      if (!obj.isErasable || obj.eraserAffected || obj.isEraserBrush)\n        continue;\n\n      var addPathToObject = this._checkObjectIntersection(obj, x, y);\n      if (addPathToObject) {\n        obj.eraserAffected = true;\n        this.affectedShapes.push(obj);\n      }\n    }\n  };\n\n    /**\n     * Check if object is intersected with eraser brush\n     *\n     * @param {object} obj\n     * @param {number} x\n     * @param {number} y\n     * @private\n     */\n\n    Eraser.prototype._checkObjectIntersection = function (obj, x, y) {\n      var result,\n          circleObj = this.eraserCursorShape,\n          rectsAreIntersects = circleObj.intersectsWithObject(obj),\n          objContainsCenterOfBrush,\n          objContainsPointFromPerimeter;\n\n      if (rectsAreIntersects) {\n        objContainsCenterOfBrush = !obj.canvas.isTargetTransparent(obj, x, y);\n        if (!objContainsCenterOfBrush) {\n          var deltaX = circleObj._lastCenterPosition ? x - circleObj._lastCenterPosition.x : undefined,\n              deltaY = circleObj._lastCenterPosition ? y - circleObj._lastCenterPosition.y : undefined,\n              perimeterPoints = circleObj.getPerimeterPoints(deltaX, deltaY);\n          perimeterPoints.forEach(function (pointCoords, i) {\n            if (!objContainsPointFromPerimeter) {\n              objContainsPointFromPerimeter = !obj.canvas.isTargetTransparent(obj, pointCoords.x, pointCoords.y);\n            }\n          });\n        }\n      }\n      result = objContainsCenterOfBrush || objContainsPointFromPerimeter;\n      return result;\n    };\n\n\n  ////// MOSUE HANDLERS //////////////////////////////////////////////////////////////////////\n  /**\n   * Set erasingNow to true.\n   * Eraser path will start by current brush, independently.\n   * @param {Event} e - mouse down event\n   */\n  Eraser.prototype._onMouseDown = function (e) {\n    var rightClick = e.which === 3,\n        middleClick = e.which === 2;\n    if (!rightClick && !middleClick) {\n      // reset affectedShapes[]\n      this.affectedShapes = [];\n      // turn erasing on\n      this.erasingNow = true;\n    }\n  };\n\n\n  /**\n   * On mouse up - set erasingNow to false.\n   * Eraser path will be created soon, and\n   * main work on erasing will be  done in _onEraserPathCreated()\n   */\n  Eraser.prototype._onMouseUp = function () {\n    this.erasingNow = false;\n    this.drawerInstance.fCanvas.renderAll();\n  };\n\n  /**\n   * Listens for mouse movement when eraser is active.\n   *\n   * @param {Event} event\n   * @private\n   */\n  Eraser.prototype._onMouseMove =  function (event) {\n    // calc mouse event coords relative to canvas\n    var pointCoords = this.drawer.fCanvas.getPointer(event);\n    var left = pointCoords.x;\n    var top = pointCoords.y;\n\n    // move eraser shape to make it follow mouse pointer\n    if(this.eraserCursorShape){\n      // eraser shape could not be created on touch devices because there's no mouseenter events\n      this.eraserCursorShape.set('left', pointCoords.x);\n      this.eraserCursorShape.set('top', pointCoords.y);\n      this.eraserCursorShape.setCoords();\n\n      this.drawerInstance.fCanvas.renderAll();\n    }\n\n    if (this.erasingNow) {\n        // Look, if there are erasable shapes under cursor\n        if (this.separatePathOnShapes) {\n          this._affectShapesUnderCoords(left, top);\n        }\n    }\n  };\n\n\n\n  pluginsNamespace.Eraser = Eraser;\n\n})\n","export default (function (namespace) {\n\n  /**\n   * EraserBrush class.\n   * The main purpose of this class is to replace created Path objects\n   * with custom EraserPath so canvas could know how to render them.\n   *\n   * @class EraserBrush\n   * @extends fabric.PencilBrush\n   *\n   * @memberof DrawerJs.brushes\n   */\n  namespace.EraserBrush = fabric.util.createClass(fabric.PencilBrush, {\n\n    /**\n     * Constructor\n     * @param {fabric.Canvas} canvas\n     * @return {DrawerJs.EraserBrush} Instance of a eraser brush\n     */\n    initialize: function (canvas) {\n      this.callSuper('initialize', canvas);\n    },\n\n    /**\n     * Overriding fabric.PencilBrush._render\n     * Method code is exactly copy of fabric.PencilBrush._render,\n     * only change is trigger events\n     *\n     * @see {fabric.PencilBrush._render}\n     * @private\n     */\n    _render: function () {\n      this.canvas.fire('pencil:move:before');\n      this.callSuper('_render');\n      this.canvas.fire('pencil:move:after');\n    },\n\n    /**\n     * Creates fabric.Path object to add on canvas\n     * @param {String} pathData Path data\n     * @return {fabric.Path} Path to add on canvas\n     */\n    createPath: function (pathData) {\n      var path = new fabric.EraserPath(pathData, {\n        fill: null,\n        stroke: this.color,\n        strokeWidth: this.width,\n        strokeLineCap: this.strokeLineCap,\n        strokeLineJoin: this.strokeLineJoin,\n        strokeDashArray: this.strokeDashArray,\n        originX: 'center',\n        originY: 'center'\n      });\n\n      if (this.shadow) {\n        this.shadow.affectStroke = true;\n        path.setShadow(this.shadow);\n      }\n\n      return path;\n    }\n  });\n\n})\n","export default (function (global) {\n  'use strict';\n\n  /**\n   * Path created by eraser brush.\n   */\n  fabric.EraserPath = fabric.util.createClass(fabric.Path, {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'EraserPath',\n\n    // to avoid issue in fabric.js with clipping of cached objects [bounding rect do not include brush size]\n    objectCaching : false,\n    evented : false,\n    selectable : false,\n\n    initialize: function (path, options) {\n      options = options || {};\n\n      this.polygonOffsetX = options.polygonOffsetX || null;\n      this.polygonOffsetY = options.polygonOffsetY || null;\n\n      this.callSuper('initialize', path, options);\n    },\n\n    /**\n     * Returns string representation of an instance\n     * @return {String} string representation of an instance\n     */\n    toString: function () {\n      return '#<fabric.EraserPath (' + this.complexity() +\n        '): { \"top\": ' + this.top + ', \"left\": ' + this.left + ' }>';\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function (propertiesToInclude) {\n      var o = fabric.util.object.extend(\n        this.callSuper('toObject', propertiesToInclude), {\n          path: this.path.map(function (item) {\n            return item.slice();\n          }),\n          pathOffset: this.pathOffset\n        });\n      if (this.sourcePath) {\n        o.sourcePath = this.sourcePath;\n      }\n      if (this.transformMatrix) {\n        o.transformMatrix = this.transformMatrix;\n      }\n\n      if(this.polygonOffsetX && this.polygonOffsetY){\n        o.polygonOffsetX = this.polygonOffsetX;\n        o.polygonOffsetY = this.polygonOffsetY;\n      }\n\n      return o;\n    }\n  });\n\n  fabric.EraserPath.fromObject = function (object, callback) {\n    if (typeof object.path === 'string') {\n      fabric.loadSVGFromURL(object.path, function (elements) {\n        var path = elements[0],\n          pathUrl = object.path;\n\n        delete object.path;\n\n        fabric.util.object.extend(path, object);\n        path.setSourcePath(pathUrl);\n\n        callback(path);\n      });\n    }\n    else {\n      callback(new fabric.EraserPath(object.path, object));\n    }\n  };\n\n  /**\n   * Indicates that instances of this type are async\n   * @static\n   * @memberOf fabric.Path\n   * @type Boolean\n   * @default\n   */\n  fabric.EraserPath.async = true;\n\n})\n","export default (function ($, BaseBrush, pluginsNamespace, util) {\n  /**\n   * Provides a a simple eraser button which activates free drawing mode and\n   * makes a brush with white color.\n   *\n   * @param {DrawerJs.Drawer} drawerInstance\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @param {Object} options\n   * Configuration object.\n   *\n   * @param {number} options.brushSize\n   * Eraser default brush size\n   *\n   * @param {String} options.cursorUrl\n   * Custom CSS url for eraser cursor.\n   *\n   * Example:\n   * <code><pre>url(path/to/cursor.cur), default</pre></code>\n   *\n   * Note the word 'default' at the end: that is the name of cursor that will\n   * be used when url is unavailable.\n   *\n   * More information about css cursor property could be found here:\n   * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/cursor}\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/CSS/cursor}\n   *\n   * @memberof DrawerJs.plugins\n   * @augments DrawerJs.plugins.BaseBrush\n   * @constructor\n   */\n  var SimpleWhiteEraser = function SimpleWhiteEraserPlugin(drawerInstance,\n                                                           options) {\n    var _this = this;\n\n    BaseBrush.call(_this, drawerInstance);\n\n    this.name = 'SimpleWhiteEraser';\n    this.btnClass = 'btn-simple-eraser';\n    this.faClass = 'fa-eraser';\n    this.tooltip = drawerInstance.t('SimpleWhiteEraser');\n\n    _this._defaultOptions = {\n      brushSize: 3,\n      cursorUrl: 'eraser'\n    };\n\n    this._setupOptions(options);\n\n    if (_this.options.cursorUrl == 'eraser') {\n      var drawerFolderUrl = util.getDrawerFolderUrl();\n      if(drawerFolderUrl){\n        _this.options.cursorUrl = 'url(' + drawerFolderUrl +\n        'assets/cursor-fa-eraser.cur), default';\n      }\n    }\n\n    /**\n     * Color value before eraser tool.\n     * @type {String}\n     */\n    this.previousColor = null;\n\n    /**\n     * BrushSize before eraser tool. Used to separate eraser brush size from\n     * other brushes.\n     * @type {Number}\n     */\n    this.previousBrushSize = null;\n\n    /**\n     * Last used eraser brush size. Used to restore eraser size after another\n     * brush tool.\n     * @type {Number}\n     */\n    this.savedBrushSize = this.options.brushSize;\n  };\n\n  SimpleWhiteEraser.prototype = Object.create(BaseBrush.prototype);\n  SimpleWhiteEraser.prototype.constructor = SimpleWhiteEraser;\n\n  /**\n   * This method is called in BaseBrush._activateTool()\n   * Children of BaseBrush MUST implement afterActivateTool().e\n   */\n  SimpleWhiteEraser.prototype.afterActivateTool = function () {\n    this.previousColor = this.drawerInstance.fCanvas.freeDrawingBrush.color;\n    this.drawerInstance.fCanvas.freeDrawingBrush.color = '#fff';\n    this.drawerInstance.fCanvas.freeDrawingBrush.fill = '#fff';\n    this.drawerInstance.fCanvas.freeDrawingBrush.opacity = this.drawerInstance.activeOpacity;\n\n    this._previousCursor = this.drawerInstance.fCanvas.freeDrawingCursor;\n    this.drawerInstance.fCanvas.freeDrawingCursor = this.options.cursorUrl;\n\n    this.previousBrushSize = this.drawerInstance.freeDrawingBrushSize;\n    this.drawerInstance.setFreeDrawingBrushSize(this.savedBrushSize);\n  };\n\n  /**\n   * This method is called in BaseBrush._deactivateTool()\n   * Children of BaseBrush MUST implement afterDeactivateTool().\n   */\n  SimpleWhiteEraser.prototype.afterDeactivateTool = function () {\n    this.drawerInstance.fCanvas.freeDrawingCursor = this._previousCursor;\n    this.drawerInstance.fCanvas.freeDrawingBrush.color = this.previousColor;\n    this.drawerInstance.fCanvas.freeDrawingBrush.fill = this.previousColor;\n\n    this.savedBrushSize = this.drawerInstance.freeDrawingBrushSize;\n    this.drawerInstance.setFreeDrawingBrushSize(this.previousBrushSize);\n  };\n\n  pluginsNamespace.SimpleWhiteEraser = SimpleWhiteEraser;\n\n})\n","export default (function ($, BaseBrush, pluginsNamespace, util) {\n  'use strict';\n\n  /**\n   * Provides a pencil button which activates free drawing mode.\n   *\n   * @param {DrawerJs.Drawer} drawerInstance\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @param {Object} options\n   * Configuration object.\n   *\n   * @param {String} options.cursorUrl\n   * Custom CSS url for pencil cursor.\n   *\n   * 'pencil' value could be specified: in this case built-in\n   * pencil cursor will be user which is located in\n   * <code>assets/cursor-fa-pencil.cur</code>\n   *\n   * Example:\n   * <code><pre>url(path/to/cursor.cur), default</pre></code>\n   *\n   * Note the word 'default' at the end: that is the name of cursor that will\n   * be used when url is unavailable.\n   *\n   * More information about css cursor property could be found here:\n   * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/cursor}\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/CSS/cursor}\n   *\n   * @param {Number} options.brushSize\n   * Default brush size.\n   *\n   * @memberof DrawerJs.plugins\n   *\n   * @constructor\n   * @augments DrawerJs.plugins.BaseBrush\n   */\n  var Pencil = function (drawerInstance, options) {\n    var _this = this;\n\n    BaseBrush.call(_this, drawerInstance);\n\n    this.name = 'Pencil';\n\n    /**\n     * List of tool options to show when tool is activated.\n     * Deviating from BaseShape tool, Line has no 'color', only 'border'.\n     * @type {String[]}\n     */\n    this.toolOptionsList = ['color', 'opacity', 'brushSize'];\n\n    this.btnClass = 'btn-pencil';\n    this.faClass = 'fa-pencil';\n    this.tooltip = drawerInstance.t('Free drawing mode');\n\n    _this._defaultOptions = {\n      cursorUrl: 'pencil',\n      brushSize: 2\n    };\n\n    this._setupOptions(options);\n\n    if (_this.options.cursorUrl == 'pencil') {\n      var drawerFolderUrl = util.getDrawerFolderUrl();\n      if(drawerFolderUrl){\n        _this.options.cursorUrl = 'url(' + drawerFolderUrl +\n        'assets/cursor-fa-pencil.cur), default';\n      }\n    }\n  };\n\n  Pencil.prototype = Object.create(BaseBrush.prototype);\n  Pencil.prototype.constructor = Pencil;\n\n  Pencil.prototype.createBrush = function(){\n    var brush = new fabric.ErasablePencilBrush(this.drawerInstance.fCanvas);\n\n    brush.color = this.drawerInstance.activeColor;\n    brush.opacity = this.drawerInstance.activeOpacity;\n    brush.width = this.options.brushSize;\n\n    return brush;\n  };\n\n  /**\n   * This method is called in BaseBrush._activateTool()\n   * Children of BaseBrush MUST implement afterActivateTool.\n   *\n   * Save previous fabricJs cursor.\n   */\n  Pencil.prototype.afterActivateTool = function () {\n    var fCanvas = this.drawerInstance.fCanvas;\n\n    this._previousCursor = fCanvas.freeDrawingCursor;\n    fCanvas.freeDrawingCursor = this.options.cursorUrl;\n  };\n\n\n  /**\n   * This method is called in BaseBrush._deactivateTool()\n   * Children of BaseBrush MUST implement afterDeactivateTool.\n   *\n   * Restore previous fabricJs cursor.\n   */\n  Pencil.prototype.afterDeactivateTool = function () {\n    var fCanvas = this.drawerInstance.fCanvas;\n    fCanvas.freeDrawingCursor = this._previousCursor;\n  };\n\n  pluginsNamespace.Pencil = Pencil;\n\n})\n","export default (function ($, pluginsNamespace) {\n  'use strict';\n\n  /**\n   * Provides a modal popup for controlling canvas properties\n   * like width,height, and aligment.\n   *\n   * @param {DrawerJs.Drawer} drawerInstance\n   * @param {Object} options\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var CanvasProperties = function CanvasPropertiesConstructor(drawerInstance, options) {\n    var _this = this;\n    if (!drawerInstance.redactorInstance) {\n      console.error(\"'CanvasProperties' plugin can work only in redactor mode!\");\n      return;\n    }\n\n    this.drawerInstance = drawerInstance;\n    this.drawer = drawerInstance;\n    this.name = 'DrawerPluginCanvasProperties';\n    this.LOGTAG = _this.name;\n\n    this._setupOptions(options);\n\n    _this.drawerInstance.on(_this.drawerInstance.EVENT_CONFIG_TOOLBAR_CREATED,\n      function (event, toolbar) {\n        var redactorInstance = _this.drawerInstance.redactorInstance;\n\n        var modalTemplate = '' +\n          '<section id=\"redactor-drawer-properties\">' +\n            '<label class=\"drawer-properties-size-label\">' +\n              drawerInstance.t('Size (px)') +\n            '</label>' +\n            '<input class=\"drawer-properties-width\" type=\"number\" ' +\n                   'value=\"' + drawerInstance.width + '\" />' +\n            '<span class=\"size-separator\">x</span>' +\n            '<input class=\"drawer-properties-height\" type=\"number\" ' +\n                   'value=\"' + drawerInstance.height + '\"/>' +\n            '<label class=\"drawer-properties-align-label\">' +\n              drawerInstance.t('Position') +\n            '</label>' +\n            '<select class=\"drawer-properties-align\">' +\n              '<option value=\"inline\">' +\n                drawerInstance.t('Inline') +\n              '</option>' +\n              '<option value=\"left\">' +\n                drawerInstance.t('Left') +\n              '</option>' +\n              '<option value=\"center\">' +\n                drawerInstance.t('Center') +\n              '</option>' +\n              '<option value=\"right\">' +\n                drawerInstance.t('Right') +\n              '</option>' +\n              '<option value=\"floating\">' +\n                drawerInstance.t('Floating') +\n              '</option>' +\n            '</select>' +\n            '<span class=\"group-transparency\">' +\n              '<label class=\"drawer-properties-background\">' +\n                drawerInstance.t('Background') +\n              '</label>' +\n              '<input type=\"checkbox\" id=\"background-transparency\" ' +\n                     'class=\"background-transparency\"/>' +\n              '<label for=\"background-transparency\" ' +\n                     'class=\"background-transparency\">' +\n                drawerInstance.t('transparent') +\n              '</label>'+\n            '</span>' +\n          '</section>';\n\n        redactorInstance.modal.addTemplate('drawer-properties', modalTemplate);\n\n        var clickHandler = function canvasPropsClickHandler() {\n              _this.openPopup();\n              return false;\n            },\n            buttonConfig = {\n              buttonOrder: 9,\n              additionalClass: 'btn-canvas-properties',\n              iconClass: 'fa-cog',\n              tooltipText: drawerInstance.t('Canvas properties'),\n              clickHandler: clickHandler\n            };\n        toolbar.addButton(buttonConfig);\n      });\n  };\n\n  /**\n   * Setup data\n   * @param {Object} [options] - options to save\n   * @param {String} [pluginName] - name of plugin\n   * @param {Boolean} [doNotSave] - set true to not save result as this.options\n   * @returns {Object} config of plugin\n   */\n  CanvasProperties.prototype._setupOptions = function (options, pluginName, doNotSave) {\n    pluginName = pluginName || this.name;\n    var drawer = this.drawerInstance || this.drawer,\n        optionsFromDrawer = drawer && drawer.getPluginConfig(pluginName),\n        result = $.extend(true,\n            {},\n            this._defaultOptions || {},\n            optionsFromDrawer || {},\n            options || {}\n        );\n\n    if (!doNotSave) {\n      this.options = result;\n    }\n    return result;\n  };\n\n  CanvasProperties.prototype.openPopup = function () {\n    var _this = this;\n\n    var redactorInstance = _this.drawerInstance.redactorInstance;\n    var drawerInstance = _this.drawerInstance;\n    var $image = _this.drawerInstance.$imageElement;\n\n    redactorInstance.modal.load(\n      'drawer-properties', drawerInstance.t('Canvas properties'), 260\n    );\n\n    redactorInstance.modal.createCancelButton();\n    $('.redactor-modal-close-btn').html(drawerInstance.t('Cancel'));\n    var button = redactorInstance.modal.createActionButton(\n      drawerInstance.t('Save'));\n\n    var $properties = $('#redactor-drawer-properties');\n\n    var currentAlign = drawerInstance.getAlign();\n\n    $properties.find('select').val(currentAlign);\n    $properties.find('.drawer-properties-width').val(drawerInstance.width);\n    $properties.find('.drawer-properties-height').val(drawerInstance.height);\n\n    _this.currentAlign = currentAlign;\n    _this.currentHeight = drawerInstance.height;\n    _this.currentWidth = drawerInstance.width;\n\n    // transparency checkbox var\n    _this.$backgroundTransparencyInput =\n      $properties.find('input.background-transparency');\n    // set it\n    _this.$backgroundTransparencyInput.attr('checked', drawerInstance.options.transparentBackground);\n\n    // transparency checkbox click handler\n    $properties.find('.background-transparency').click(function () {\n      var checked = _this.$backgroundTransparencyInput.attr('checked');\n      _this.$backgroundTransparencyInput.attr('checked', !checked);\n    });\n\n    button.on('click', function () {\n      _this.saveProperties();\n    });\n\n    var $alignControl = $properties.find('.drawer-properties-align');\n\n    function updateTransparencyVisible() {\n      var selectedAlign = $properties.find('.drawer-properties-align').val();\n      if(selectedAlign == 'floating') {\n        $properties.find('.group-transparency').show();\n      } else {\n        $properties.find('.group-transparency').hide();\n      }\n    }\n\n    updateTransparencyVisible();\n\n    $alignControl.change(function () {\n      updateTransparencyVisible();\n    });\n\n    redactorInstance.modal.show();\n\n    // restore body overflow immediately to avoid content jumping\n    // Jumping happens because with overflow:hidden page has no scrollbar\n    // and its size extends by 24px\n    $(document.body)\n      .css('overflow', redactorInstance.modal.bodyOveflow);\n  };\n\n  CanvasProperties.prototype.saveProperties = function () {\n    var _this = this;\n\n    var redactorInstance = _this.drawerInstance.redactorInstance;\n    var drawerInstance = _this.drawerInstance;\n\n    var fullscreenPlugin =\n      _this.drawerInstance.getPluginInstance('Fullscreen');\n\n    var modal = $('#redactor-drawer-properties');\n    var width = modal.find('input.drawer-properties-width').val();\n    var height = modal.find('input.drawer-properties-height').val();\n    var align = modal\n      .find('select.drawer-properties-align option:selected')\n      .val();\n\n    if(_this.currentWidth != width || _this.currentHeight != height){\n      if(fullscreenPlugin && fullscreenPlugin.isInFullscreenMode()){\n        fullscreenPlugin.exitFullscreen();\n      }\n\n      drawerInstance.setSize(width, height);\n    }\n\n    drawerInstance.options.align = align;\n    if(_this.currentAlign != align){\n      if(fullscreenPlugin && fullscreenPlugin.isInFullscreenMode()){\n        fullscreenPlugin.exitFullscreen();\n      }\n\n      drawerInstance.setAlign(align);\n    }\n\n    var transparent = _this.$backgroundTransparencyInput.attr('checked');\n    drawerInstance.options.transparentBackground = !!transparent;\n\n    redactorInstance.modal.close();\n    drawerInstance.onCanvasModified();\n\n    drawerInstance.trigger(drawerInstance.EVENT_OPTIONS_CHANGED);\n  };\n\n  pluginsNamespace.CanvasProperties = CanvasProperties;\n})\n","export default (function ($, pluginsNamespace) {\n  \"use strict\";\n\n  /**\n   * Provides a button to destroy canvas.\n   *\n   * @param {DrawerJs.Drawer} drawer\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var CloseButton = function CloseButtonConstructor(drawer, options) {\n    /**\n     * @type {Drawer}\n     */\n    this.drawer = drawer;\n    this.name = 'CloseButton';\n    this._setupOptions(options);\n\n    this._bindedOnToolbarCreated = this._onToolbarCreated.bind(this);\n    drawer.on(drawer.EVENT_CONFIG_TOOLBAR_CREATED, this._bindedOnToolbarCreated);\n    drawer.on(drawer.EVENT_MINIMIZED_TOOLBAR_CREATED, this._bindedOnToolbarCreated);\n  };\n\n  CloseButton.prototype._defaultOptions = {\n    buttonOrder: 1\n  };\n\n  /**\n   * Setup data\n   * @param {Object} [options] - options to save\n   * @param {String} [pluginName] - name of plugin\n   * @param {Boolean} [doNotSave] - set true to not save result as this.options\n   * @returns {Object} config of plugin\n   */\n  CloseButton.prototype._setupOptions = function (options, pluginName, doNotSave) {\n    pluginName = pluginName || this.name;\n    var drawer = this.drawerInstance || this.drawer,\n        optionsFromDrawer = drawer && drawer.getPluginConfig(pluginName),\n        result = $.extend(true,\n            {},\n            this._defaultOptions || {},\n            optionsFromDrawer || {},\n            options || {}\n        );\n\n    if (!doNotSave) {\n      this.options = result;\n    }\n    return result;\n  };\n\n\n  /**\n   * On toolbar created - create tool button.\n   */\n  CloseButton.prototype._onToolbarCreated = function (ev, toolbar) {\n      this.toolbar = toolbar;\n      if (this.createControls) {\n          this.createControls(toolbar);\n      }\n  };\n\n\n CloseButton.prototype.createControls = function (toolbar) {\n    this._createAndAddButton(toolbar);\n };\n\n  /**\n   * Deletes tool button.\n   * If  doDeleteToolbarCreationListeners is true - removes listeners of toolbar creation event.\n   * So, tool will not appear on toolbar next time, when toolbar is created.\n   *\n   * @param {boolean} doDeleteToolbarCreationListeners\n   */\n  CloseButton.prototype.removeTool = function(doDeleteToolbarCreationListeners) {\n      if (this.deleteControls) {\n          this.deleteControls();\n      }\n\n      // stop listening toolbar creation\n      if (doDeleteToolbarCreationListeners) {\n          this.drawer.off(this.drawer.EVENT_CONFIG_TOOLBAR_CREATED, this._bindedOnToolbarCreated);\n      }\n  };\n\n\n\n\n\n  /**\n   * Creates and adds button to toolbar.\n   * @param  {DrawerToolbar} toolbar\n   */\n  CloseButton.prototype._createAndAddButton = function(toolbar) {\n    var buttonConfig = {\n      buttonOrder: this.options.buttonOrder,\n      additionalClass: 'btn-delete-canvas',\n      iconClass: 'fa-times',\n      tooltipText: this.drawer.t('Delete this canvas'),\n      clickHandler: this._onCloseButtonClick.bind(this)\n    };\n    toolbar.addButton(buttonConfig);\n  };\n\n\n/**\n * On close - ask user, then delete canvas\n */\nCloseButton.prototype._onCloseButtonClick = function() {\n  var self = this;\n\n  var question = self.drawer.t('Are you sure want to delete this canvas?');\n  if (confirm(question)) {\n    self.drawer.destroy();\n  }\n};\n\n\n  pluginsNamespace.CloseButton = CloseButton;\n\n})\n","export default (function ($, pluginsNamespace, util) {\n  \"use strict\";\n\n  var MOUSE_DOWN = util.mouseDown('drawerJsCrop');\n  var MOUSE_UP = util.mouseUp('drawerJsCrop');\n  var MOUSE_MOVE = util.mouseMove('drawerJsCrop');\n\n  var emptyFunc = function () {},\n      cssPrefixes = ['Webkit', 'Moz', 'ms'],\n      emptyStyles = document.createElement('div').style,\n      CSS_TRANS_ORG,\n      CSS_TRANSFORM,\n      CSS_USERSELECT;\n\n  function vendorPrefix(prop) {\n    if (prop in emptyStyles) {\n      return prop;\n    }\n\n    var capProp = prop[0].toUpperCase() + prop.slice(1),\n        i = cssPrefixes.length;\n\n    while (i--) {\n      prop = cssPrefixes[i] + capProp;\n      if (prop in emptyStyles) {\n        return prop;\n      }\n    }\n  }\n\n  CSS_TRANSFORM = vendorPrefix('transform');\n  CSS_TRANS_ORG = vendorPrefix('transformOrigin');\n  CSS_USERSELECT = vendorPrefix('userSelect');\n\n  /**\n   * Provides a button to minimize canvas.\n   *\n   * @param {DrawerJs.Drawer} drawer\n   * @param {jQuery} $element\n   * @param {object} [options]\n   * options\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var ImageCropPlugin = function ImageCropPluginConstructor(drawer, $element, options) {\n    /**\n     * @type {Drawer}\n     */\n    this.name = 'ImageCropPlugin';\n    this.drawer = drawer;\n    this.$element = $element;\n\n    this._resetData();\n    this.options = $.extend(true, {}, this._defaultOptions, options || {});\n\n    this._init();\n    return this;\n  };\n\n  ImageCropPlugin.prototype._defaultOptions = {\n    boundary: { },\n    enableExif: false,\n    minSize: 10,\n    enableOrientation: false,\n    update: emptyFunc,\n    controlsCss: {},\n    controlsTouchCss: {}\n  };\n\n  ImageCropPlugin.prototype.globals = {\n    translate: 'translate3d'\n  };\n\n  /**\n   *\n   * @param {String|Object} bindOptions\n   * @param {Function} [callback]\n   * @returns {Promise}\n   * @private\n   */\n  ImageCropPlugin.prototype._bind = function (bindOptions, callback) {\n    var url,\n        callbackIsValid = callback && typeof callback === 'function';\n\n    if (typeof bindOptions === 'string') {\n      this.data = {\n        url: bindOptions\n      };\n    } else {\n      this.data = $.extend(true, {}, bindOptions || {});\n    }\n\n    this._resetData();\n\n    this.successCallback = callbackIsValid ? callback : this.successCallback || emptyFunc;\n\n    if (this.data && this.data.newImage) {\n      this.originalImage = this.data.url;\n      this.prevImages = [];\n    }\n    this.currentImage = this.data.url;\n\n    this.elements.$fullsizePreview.attr('src', this.data.url);\n    var loadImagePromise = util.loadImage(this.data.url, this.elements.$img.get(0), this.data).then(this.startCropping.bind(this));\n    return loadImagePromise;\n  };\n\n  /** Draw data and get canvas\n   * @param {Object} data\n   * @returns {HTMLElement}\n   * @private\n   */\n  ImageCropPlugin.prototype._getCanvas = function(data) {\n    var points = data.points,\n        left = parseInt(points[0],10),\n        top = parseInt(points[1],10),\n        right = parseInt(points[2],10),\n        bottom = parseInt(points[3],10),\n        width = right-left,\n        height = bottom-top,\n        canvas = document.createElement('canvas'),\n        ctx = canvas.getContext('2d'),\n        outWidth = width,\n        outHeight = height,\n        startX = 0,\n        startY = 0,\n        canvasWidth = outWidth,\n        canvasHeight = outHeight,\n        customDimensions = (data.outputWidth && data.outputHeight),\n        outputRatio = 1;\n\n    if (!outputRatio && customDimensions) {\n      canvasWidth = data.outputWidth;\n      canvasHeight = data.outputHeight;\n      outputRatio = canvasWidth / outWidth;\n    }\n\n    canvas.width = canvasWidth;\n    canvas.height = canvasHeight;\n\n    if (data.backgroundColor) {\n      ctx.fillStyle = data.backgroundColor;\n      ctx.fillRect(0, 0, outWidth, outHeight);\n    }\n\n    if (left < 0) {\n      startX = Math.abs(left);\n      left = 0;\n    }\n    if (top < 0) {\n      startY = Math.abs(top);\n      top = 0;\n    }\n    if (right > this.originalWidth) {\n      width = this.originalWidth - left;\n      outWidth = width;\n    }\n    if (bottom > this.originalHeight) {\n      height = this.originalHeight - top;\n      outHeight = height;\n    }\n\n    if (outputRatio !== 1) {\n      startX *= outputRatio;\n      startY *= outputRatio;\n      outWidth *= outputRatio;\n      outHeight *= outputRatio;\n    }\n    ctx.drawImage(this.elements.$fullsizePreview.get(0), left, top, width, height, startX, startY, outWidth, outHeight);\n    return canvas;\n  };\n\n  /**\n   *\n   * @param {Object} data\n   * @returns {jQuery}\n   * @private\n   */\n  ImageCropPlugin.prototype._getHtmlResult = function(data) {\n    var points = data.points,\n        $div = $('<div class=\"croppie-result\">'),\n        $img = $('<img>'),\n        width = points[2] - points[0],\n        height = points[3] - points[1];\n\n    $div.append($img);\n    $img.css({\n      left: (-1 * points[0]) + 'px',\n      top: (-1 * points[1]) + 'px'\n    });\n    img.src = data.url;\n    $div.css({\n      width: width + 'px',\n      height: height + 'px'\n    });\n    return $div;\n  };\n\n  /**\n   * @param {Object} data\n   * @returns {String}\n   * @private\n   */\n  ImageCropPlugin.prototype._getBase64Result = function(data) {\n    var result = this._getCanvas(data).toDataURL(data.format, data.quality);\n    return result;\n  };\n\n  /**\n   *\n   * @param {Object} data\n   * @returns {Promise}\n   * @private\n   */\n  ImageCropPlugin.prototype._getBlobResult = function(data) {\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      self._getCanvas(data).toBlob(function (blob) {\n        resolve(blob);\n      }, data.format, data.quality);\n    });\n  };\n\n\n  /**\n   * Get current state of cropper\n   * @return {Object} - current state data\n   * @private\n   */\n  ImageCropPlugin.prototype._get = function () {\n    var previewEl = this.elements.$img.get(0),\n        viewportEl = this.elements.$viewport.get(0),\n        imgData = previewEl.getBoundingClientRect(),\n        vpData = viewportEl.getBoundingClientRect(),\n        x1 = vpData.left - imgData.left,\n        y1 = vpData.top - imgData.top,\n        x2 = x1 + vpData.width,\n        y2 = y1 + vpData.height,\n        currZoom = (parseInt(this._currentZoom * 100) / 100) || 1;\n\n    x1 = Math.max(0, x1 / currZoom);\n    y1 = Math.max(0, y1 / currZoom);\n    x2 = Math.max(0, x2 / currZoom);\n    y2 = Math.max(0, y2 / currZoom);\n\n    var p1 = parseFloat(x1).toFixed(4),\n        p2 = parseFloat(y1).toFixed(4),\n        p3 = parseFloat(x2).toFixed(4),\n        p4 = parseFloat(y2).toFixed(4);\n\n    return {\n      points: [p1, p2, p3, p4],\n      zoom: currZoom\n    };\n  };\n\n  var RESULT_DEFAULTS = {\n        type: 'canvas',\n        format: 'png',\n        quality: 1\n      },\n      RESULT_FORMATS = ['jpeg', 'webp', 'png'];\n\n  /**\n   * Get result of image crop\n   * @param {Object} [options]\n   * @returns {Promise}\n   * @private\n   */\n  ImageCropPlugin.prototype._result = function (options) {\n    var self = this,\n        data = this._get(),\n        opts = $.extend(true, {}, RESULT_DEFAULTS, options || {}),\n        resultType = (typeof (options) === 'string' ? options : (opts.type || 'base64')),\n        format = opts.format,\n        quality = opts.quality,\n        backgroundColor = opts.backgroundColor,\n        viewport = this.elements.$viewport.get(0),\n        vpRect = viewport.getBoundingClientRect(),\n        prom;\n\n    /*\n    if (size === 'viewport') {\n      data.outputWidth = vpRect.width;\n      data.outputHeight = vpRect.height;\n    } else if (typeof size === 'object') {\n      if (size.width && size.height) {\n        data.outputWidth = size.width;\n        data.outputHeight = size.height;\n      } else if (size.width) {\n        data.outputWidth = size.width;\n        data.outputHeight = size.width / ratio;\n      } else if (size.height) {\n        data.outputWidth = size.height * ratio;\n        data.outputHeight = size.height;\n      }\n    }\n    */\n\n    if (RESULT_FORMATS.indexOf(format) > -1) {\n      data.format = 'image/' + format;\n      data.quality = quality;\n    }\n\n    data.url = this.data.url;\n    data.backgroundColor = backgroundColor;\n\n    prom = new Promise(function (resolve, reject) {\n      switch (resultType.toLowerCase()) {\n        case 'rawcanvas':\n          resolve(self._getCanvas(data));\n          break;\n        case 'canvas':\n        case 'base64':\n          resolve(self._getBase64Result(data));\n          break;\n        case 'blob':\n          self._getBlobResult(data).then(resolve);\n          break;\n        default:\n          resolve(self._getHtmlResult(data));\n          break;\n      }\n    });\n    return prom;\n  };\n\n  /**\n   * @param {Image} img\n   * @param {Function} cb - callback\n   */\n  ImageCropPlugin.prototype.getExifOrientation = function (img, cb) {\n    if (!window.EXIF) {\n      cb(0);\n    }\n\n    EXIF.getData(img, function () {\n      var orientation = EXIF.getTag(this, 'Orientation');\n      cb(orientation);\n    });\n  };\n\n  /**\n   *\n   * @param {HTMLCanvasElement} canvas\n   * @param {Image} img\n   * @param {Number} orientation\n   */\n  ImageCropPlugin.prototype.drawCanvas = function (canvas, img, orientation) {\n    var width = img.width,\n        height = img.height,\n        ctx = canvas.getContext('2d');\n\n    canvas.width = img.width;\n    canvas.height = img.height;\n\n    ctx.save();\n    switch (orientation) {\n      case 2:\n        ctx.translate(width, 0);\n        ctx.scale(-1, 1);\n        break;\n\n      case 3:\n        ctx.translate(width, height);\n        ctx.rotate(180*Math.PI/180);\n        break;\n\n      case 4:\n        ctx.translate(0, height);\n        ctx.scale(1, -1);\n        break;\n\n      case 5:\n        canvas.width = height;\n        canvas.height = width;\n        ctx.rotate(90*Math.PI/180);\n        ctx.scale(1, -1);\n        break;\n\n      case 6:\n        canvas.width = height;\n        canvas.height = width;\n        ctx.rotate(90*Math.PI/180);\n        ctx.translate(0, -height);\n        break;\n\n      case 7:\n        canvas.width = height;\n        canvas.height = width;\n        ctx.rotate(-90*Math.PI/180);\n        ctx.translate(-width, height);\n        ctx.scale(1, -1);\n        break;\n\n      case 8:\n        canvas.width = height;\n        canvas.height = width;\n        ctx.translate(0, width);\n        ctx.rotate(-90*Math.PI/180);\n        break;\n    }\n    ctx.drawImage(img, 0,0, width, height);\n    ctx.restore();\n  };\n\n  /**\n   * @param {Number} [customOrientation]\n   * @private\n   */\n  ImageCropPlugin.prototype._transferImageToCanvas = function (customOrientation) {\n    customOrientation = this.options.enableOrientation && customOrientation;\n    var $canvas = this.elements.$canvas,\n        canvas = $canvas.get(0),\n        img = this.elements.$img.get(0),\n        ctx = canvas.get(0).getContext('2d'),\n        exif = this.options.enableExif && window.EXIF;\n\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    canvas.width = img.width;\n    canvas.height = img.height;\n\n    if (exif) {\n      this.getExifOrientation(img, function (orientation) {\n        this.drawCanvas(canvas, img, parseInt(orientation, 10));\n        if (customOrientation) {\n          this.drawCanvas(canvas, img, customOrientation);\n        }\n      });\n    } else {\n      if (customOrientation) {\n        this.drawCanvas(canvas, img, customOrientation);\n      }\n    }\n  };\n\n  /**\n   * React on image crop\n   * @param {String} [result]\n   * @private\n   */\n  ImageCropPlugin.prototype._onCropSuccess = function (result) {\n    this.success(result);\n  };\n\n  /**\n   * Success callback\n   * @param {String} [result]\n   */\n  ImageCropPlugin.prototype.success = function (result) {\n    if (this.successCallback) {\n      this.successCallback(result);\n    }\n  };\n\n  /**\n   * Reset data of cropper plugin\n   * @private\n   */\n  ImageCropPlugin.prototype._resetData = function() {\n    this.weight = 0;\n\n    this.originalWidth = null;\n    this.originalHeight = null;\n    this.actualWidth = null;\n    this.actualHeight = null;\n\n    this.croppedWidth = null;\n    this.croppedHeight = null;\n    this.croppedLeft = null;\n    this.croppedTop = null;\n  };\n\n  /**\n   * Destroy instance of image crop plugin\n   * @private\n   */\n  ImageCropPlugin.prototype._destroy = function() {\n\n  };\n\n  /**\n   * Update size values of cropper elements\n   * @private\n   */\n  ImageCropPlugin.prototype._updateViewportSizes = function() {\n    var currentSizes = this.elements.$img.get(0).getBoundingClientRect(),\n        parentCurrentSizes = this.elements.$img.parent().get(0).getBoundingClientRect(),\n        offsetLeft = currentSizes && parentCurrentSizes && (currentSizes.left - parentCurrentSizes.left),\n        offsetTop = currentSizes && parentCurrentSizes && (currentSizes.top - parentCurrentSizes.top),\n        maxAvailableWidth = (currentSizes && currentSizes.width) || this.originalWidth,\n        maxAvailableHeight = (currentSizes && currentSizes.height) || this.originalHeight;\n\n    this.actualWidth = maxAvailableWidth;\n    this.actualHeight = maxAvailableHeight;\n    this.offsetLeft = offsetLeft;\n    this.offsetTop = offsetTop;\n    this._currentZoom = parseInt(this.actualWidth / this.originalWidth * 100) / 100;\n  };\n\n  /**\n   * Update viewport position\n   * @param {String} [styles] - style attribute\n   * @private\n   */\n  ImageCropPlugin.prototype._refreshViewportPosition = function(styles) {\n    this._updateViewportSizes();\n    var stylesForControls = {\n      'width': this.croppedWidth ? this.croppedWidth : this.actualWidth,\n      'height': this.croppedHeight ? this.croppedHeight : this.actualHeight,\n      'max-width': this.actualWidth,\n      'max-height': this.actualHeight,\n      'left': this.croppedLeft ? this.croppedLeft : this.offsetLeft || 0,\n      'top': this.croppedTop ? this.croppedTop : this.offsetTop || 0\n    };\n    if (styles) {\n      this.elements.$viewport.attr('style', styles);\n    } else {\n      this.elements.$viewport.css(stylesForControls);\n    }\n  };\n\n  /**\n   * Restore prev state of cropper\n   */\n  ImageCropPlugin.prototype.undoCrop = function() {\n    var imageToUndo = this.prevImages.pop();\n    if (imageToUndo) {\n      this._bind(imageToUndo);\n    }\n  };\n\n  /**\n   * Create cropper elements\n   * @private\n   */\n  ImageCropPlugin.prototype._setupCropElements = function () {\n    var controlsBlockHtml,\n        assetsUrl = util.getDrawerFolderUrl() + 'assets/',\n        cursorStyleAttr = 'style=\"cursor: url(' + assetsUrl + 'cursor-fa-crop-right.cur), crosshair\"',\n        borderStyleAttr = 'style=\"background: url(' + assetsUrl + 'border.gif);\"';\n\n    controlsBlockHtml = ''+\n        '<div class=\"imager-crop-container\">' +\n        '<div class=\"crop-corner crop-top-left\"></div>' +\n        '<div class=\"crop-corner crop-top-right\"></div>' +\n        '<div class=\"crop-corner crop-bottom-right\"></div>' +\n        '<div class=\"crop-corner crop-bottom-left\"></div>' +\n        '<div class=\"crop-border crop-border-top\" '+borderStyleAttr+'></div>' +\n        '<div class=\"crop-border crop-border-right\" '+borderStyleAttr+'></div>' +\n        '<div class=\"crop-border crop-border-bottom\" '+borderStyleAttr+'></div>' +\n        '<div class=\"crop-border crop-border-left\" '+borderStyleAttr+'></div>' +\n        '</div>';\n\n    this.elements = this.elements || {};\n    this.elements.$viewport =  $(controlsBlockHtml);\n\n    this.elements.$img = $('<img class=\"cr-image\">');\n    this.elements.$fullsizePreview = $('<img class=\"cr-image-fullsize\">');\n    this.elements.$overlay = $('<div class=\"cr-overlay\">');\n    this.elements.$preview = this.elements.$img;\n\n    this.$element.append(this.elements.$fullsizePreview);\n    this.$element.append(this.elements.$preview);\n    this.$element.append(this.elements.$overlay);\n    this.$element.append(this.elements.$viewport);\n  };\n\n  /**\n   * Init cropper\n   * @private\n   */\n  ImageCropPlugin.prototype._init = function () {\n    this._setupCropElements();\n  };\n\n  /**\n   * Save current state of cropper\n   * @private\n   */\n  ImageCropPlugin.prototype._save = function () {\n\n    this.prevImages.push({\n      viewportStyleAttr: this.elements.$viewport.attr('style'),\n      points: this._get(),\n      url: this.currentImage\n    });\n  };\n\n  /**\n   * Process crop with current settings\n   * @param {Boolean} [replaceCurrentImageWithResult]\n   */\n  ImageCropPlugin.prototype.applyCrop = function (replaceCurrentImageWithResult) {\n    var self = this;\n    self._result().then(function (result) {\n      if (replaceCurrentImageWithResult) {\n        self._save();\n        self._bind(result);\n      } else {\n        self._onCropSuccess(result);\n      }\n    });\n  };\n\n  /**\n   * @param {Image} img\n   */\n  ImageCropPlugin.prototype.startCropping = function (img) {\n    var _this = this;\n\n    img.style.opacity = 1;\n\n    _this.enableRendering = false;\n    _this.renderCropped = false;\n\n    var $body = $('body');\n\n    _this.originalWidth = img.naturalWidth;\n    _this.originalHeight = img.naturalHeight;\n\n    _this.makePreview();\n    _this._refreshViewportPosition(_this.data && _this.data.viewportStyleAttr);\n    _this.viewportStyleAttr = false;\n\n    var $corners = _this.elements.$viewport.find('.crop-corner');\n\n    if (_this.drawer.touchDevice) {\n      $corners.css(_this.options.controlsTouchCss);\n    } else {\n      $corners.css(_this.options.controlsCss);\n    }\n\n    $corners.on(MOUSE_DOWN, function (clickEvent) {\n      var controlItem = this,\n          controlItemSize = this.getBoundingClientRect().width / 2;\n\n      _this.drawer.croppingNow = true;\n\n      var startPos = util.getEventPosition(clickEvent);\n\n      var viewportSizeBox = _this.elements.$viewport.get(0).getBoundingClientRect(),\n          parentSizeBox = _this.elements.$viewport.parent().get(0).getBoundingClientRect(),\n          startControlsLeft = viewportSizeBox.left - parentSizeBox.left,\n          startControlsTop = viewportSizeBox.top - parentSizeBox.top,\n          startControlsWidth = viewportSizeBox.width,\n          startControlsHeight = viewportSizeBox.height;\n\n      var isTopLeft = $(controlItem).hasClass('crop-top-left'),\n          isTopRight = $(controlItem).hasClass('crop-top-right'),\n          isBottomLeft = $(controlItem).hasClass('crop-bottom-left'),\n          isBottomRight = $(controlItem).hasClass('crop-bottom-right');\n\n      $body.on(MOUSE_MOVE, function (moveEvent) {\n        var movePos = util.getEventPosition(moveEvent);\n\n        var diffLeft = movePos.left - startPos.left;\n        var diffTop = movePos.top - startPos.top;\n\n        if (isTopLeft) {\n          _this.croppedLeft = startControlsLeft + diffLeft;\n          _this.croppedTop = startControlsTop + diffTop;\n\n          _this.croppedWidth = startControlsWidth - diffLeft;\n          _this.croppedHeight = startControlsHeight - diffTop;\n        }\n\n        if (isTopRight) {\n          _this.croppedLeft = startControlsLeft;\n          _this.croppedTop = startControlsTop + diffTop;\n\n          _this.croppedWidth = startControlsWidth - (diffLeft * -1);\n          _this.croppedHeight = startControlsHeight - diffTop;\n        }\n\n        if (isBottomRight) {\n          _this.croppedLeft = startControlsLeft;\n          _this.croppedTop = startControlsTop;\n\n          _this.croppedWidth = startControlsWidth - (diffLeft * -1);\n          _this.croppedHeight = startControlsHeight + diffTop;\n        }\n\n        if (isBottomLeft) {\n          _this.croppedLeft = startControlsLeft + diffLeft;\n          _this.croppedTop = startControlsTop;\n\n          _this.croppedWidth = startControlsWidth - diffLeft;\n          _this.croppedHeight = startControlsHeight + diffTop;\n        }\n\n        // bounds validation\n        if (_this.croppedLeft < _this.offsetLeft) {\n          _this.croppedLeft = _this.offsetLeft;\n        }\n\n        if ((_this.croppedLeft + controlItemSize) > (_this.offsetLeft + _this.actualWidth)) {\n          _this.croppedLeft = _this.offsetLeft + _this.actualWidth - _this.options.minSize;\n          _this.croppedWidth = _this.options.minSize;\n        }\n\n        if (_this.croppedTop < _this.offsetTop) {\n          _this.croppedTop = _this.offsetTop;\n        }\n\n        if ((_this.croppedTop + controlItemSize) > (_this.offsetTop + _this.actualHeight)) {\n          _this.croppedTop = _this.offsetTop + _this.actualHeight - _this.options.minSize;\n          _this.croppedHeight = _this.options.minSize;\n        }\n\n        if (_this.croppedLeft + _this.croppedWidth > (_this.actualWidth + _this.offsetLeft)) {\n          _this.croppedWidth = _this.actualWidth - _this.croppedLeft + _this.offsetLeft;\n        }\n\n        if (_this.croppedTop + _this.croppedHeight > (_this.actualHeight + _this.offsetTop)) {\n          _this.croppedHeight = _this.actualHeight - _this.croppedTop + _this.offsetTop;\n        }\n\n        _this.elements.$viewport.css({\n          left: _this.croppedLeft,\n          top: _this.croppedTop,\n          width: _this.croppedWidth,\n          height: _this.croppedHeight\n        });\n\n        moveEvent.preventDefault();\n        moveEvent.stopPropagation();\n        return false;\n      });\n\n      $body.on(MOUSE_UP, function () {\n        util.setTimeout(function(){\n          _this.drawer.croppingNow = false;\n        }, 50);\n        $body.off(MOUSE_MOVE);\n        $body.off(MOUSE_UP);\n      });\n    });\n  };\n\n  /**\n   * Create preview element\n   * @param {Number} originalWidth\n   * @param {Number} originalHeight\n   */\n  ImageCropPlugin.prototype.makePreview = function (originalWidth, originalHeight) {\n    var _this = this;\n\n    _this.$preview = $('' +\n        '<div class=\"imager-crop-preview-container\">' +\n        '<canvas class=\"imager-crop-preview\"></canvas>' +\n        '</div>').css('position', 'absolute').css('top', '50px').css({\n      width: originalWidth,\n      height: originalHeight,\n      position: 'absolute',\n      right: '50px',\n      top: '50px'\n    });\n\n    _this.previewCanvas = _this.$preview.find('canvas.imager-crop-preview')[0];\n    _this.previewCanvas.__previewCanvas = true;\n\n    _this.previewCanvas.width = originalWidth * 1.5;\n    _this.previewCanvas.height = originalHeight * 1.5;\n\n    $(_this.previewCanvas).css({\n      height: '400px'\n    });\n\n    _this.$element.append(this.$preview);\n  };\n\n  /**\n   * Reset data\n   * @private\n   */\n  ImageCropPlugin.prototype.reset = function () {\n    this.croppedLeft = null;\n    this.croppedTop = null;\n    this.croppedWidth = null;\n    this.croppedHeight = null;\n\n    this.sizeBeforeCrop = null;\n  };\n\n  /* CSS Transform Prototype */\n  var TRANSLATE_OPTS = {\n    'translate3d': {\n      suffix: ', 0px'\n    },\n    'translate': {\n      suffix: ''\n    }\n  };\n  var Transform = function (x, y, scale) {\n    this.x = parseFloat(x);\n    this.y = parseFloat(y);\n    this.scale = parseFloat(scale);\n  };\n\n  Transform.parse = function (v) {\n    if (v) {\n      var isJquery = v && v instanceof jQuery && v.length,\n          isNode = v instanceof Node,\n          node = isJquery ? v.get(0) : (isNode && v),\n          nodeStyle = node && node.style;\n      if (nodeStyle) {\n        return Transform.parse(nodeStyle[CSS_TRANSFORM]);\n      } else {\n        if (v.indexOf('matrix') > -1 || v.indexOf('none') > -1) {\n          return Transform.fromMatrix(v);\n        } else {\n          return Transform.fromString(v);\n        }\n      }\n    }\n  };\n\n  Transform.fromMatrix = function (v) {\n    var vals = v.substring(7).split(',');\n    if (!vals.length || v === 'none') {\n      vals = [1, 0, 0, 1, 0, 0];\n    }\n    var xVal = parseInt(vals[4], 10),\n        yVal = parseInt(vals[5], 10),\n        scaleVal = parseFloat(vals[0]);\n\n    return new Transform(xVal, yVal, scaleVal);\n  };\n\n  Transform.fromString = function (v) {\n    var values = v.split(') '),\n        translate = values[0].substring(ImageCropPlugin.prototype.globals.translate.length + 1).split(','),\n        scale = values.length > 1 ? values[1].substring(6) : 1,\n        x = translate.length > 1 ? translate[0] : 0,\n        y = translate.length > 1 ? translate[1] : 0;\n\n    return new Transform(x, y, scale);\n  };\n\n  Transform.prototype.toString = function () {\n    var suffix = TRANSLATE_OPTS[ImageCropPlugin.prototype.globals.translate].suffix || '',\n        prefix = ImageCropPlugin.prototype.globals.translate,\n        style = '(' + this.x + 'px, ' + this.y + 'px' + suffix + ') scale(' + this.scale + ')',\n        result = prefix + style;\n\n    return result;\n  };\n\n  var TransformOrigin = function (el) {\n    var elIsJquery = el instanceof jQuery;\n    el = elIsJquery ? el.get(0) : el;\n    if (!el || !el.style[CSS_TRANS_ORG]) {\n      this.x = 0;\n      this.y = 0;\n      return;\n    }\n    var css = el.style[CSS_TRANS_ORG].split(' ');\n    this.x = parseFloat(css[0]);\n    this.y = parseFloat(css[1]);\n  };\n\n  TransformOrigin.prototype.toString = function () {\n    return this.x + 'px ' + this.y + 'px';\n  };\n  /***********/\n  pluginsNamespace.ImageCropPlugin = ImageCropPlugin;\n})\n","export default (function ($, pluginsNamespace, util) {\n  \"use strict\";\n\n  /**\n   * Provides ability to use image cropper\n   *\n   * @param {DrawerJs.Drawer} drawer\n   * @param {object} [options]\n   * options\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var ImageCrop = function ImageCropConstructor(drawer, options) {\n    /**\n     * @type {Drawer}\n     */\n    this.name = 'ImageCrop';\n    this.drawer = drawer;\n    this._setupOptions(options);\n    this.drawer.on(this.drawer.BEFORE_CREATE_TOOLBARS, this._init.bind(this));\n    this.drawer.on(this.drawer.EVENT_IMAGECROP_TOOLBAR_CREATED, this._onToolbarCreated.bind(this));\n    this.drawer.on(this.drawer.EVENT_IMAGE_CROP, this._onImageCropTrigger.bind(this));\n  };\n\n  ImageCrop.prototype._defaultOptions = {\n    toolbarState: 'hidden'\n  };\n  ImageCrop.prototype._defaultCropOptions = {};\n\n  /**\n   * Init cropper - create elements and instance of crop plugin\n   * @private\n   */\n  ImageCrop.prototype._init = function () {\n    this.enabled = this.drawer.options.enableImageCrop && pluginsNamespace.ImageCropPlugin;\n    if (this.enabled) {\n      var cropOptions = this._setupCropOptions();\n      this._removeElements();\n      this._createElements();\n      this.cropper = new pluginsNamespace.ImageCropPlugin(this.drawer, this.$cropperContainer, cropOptions);\n    }\n  };\n\n  /**\n   * Setup data\n   * @param {Object} [options] - options to save\n   * @param {String} [pluginName] - name of plugin\n   * @param {Boolean} [doNotSave] - set true to not save result as this.options\n   * @returns {Object} config of plugin\n   */\n  ImageCrop.prototype._setupOptions = function (options, pluginName, doNotSave) {\n    pluginName = pluginName || this.name;\n    var drawer = this.drawerInstance || this.drawer,\n        optionsFromDrawer = drawer && drawer.getPluginConfig(pluginName),\n        result = $.extend(true,\n            {},\n            this._defaultOptions || {},\n            optionsFromDrawer || {},\n            options || {}\n        );\n\n    if (!doNotSave) {\n      this.options = result;\n    }\n    return result;\n  };\n\n  /**\n   * React on create of toolbar\n   * @param  {fabric.Event} fEvent\n   * @param  {DrawerToolbar} toolbar\n   */\n  ImageCrop.prototype._onToolbarCreated = function (fEvent, toolbar) {\n    this.cropContainerSizesUpdated = false;\n    this.$toolbar = toolbar.$toolbar;\n    this._resizeCropWrapper();\n    this._createToolbarButtons(toolbar);\n  };\n\n  /**\n   * Creates and adds buttons to crop toolbar\n   * @param  {DrawerToolbar} toolbar\n   * @private\n   */\n  ImageCrop.prototype._createToolbarButtons = function (toolbar) {\n    var $anotherCropButton,\n        $applyButton,\n        $undoCropButton,\n        $useOriginButton,\n        $cancelButton,\n        anotherCropButtonConf = {\n          buttonOrder: this.options.buttonOrder,\n          additionalClass: 'btn-another-crop',\n          iconClass: 'fa-scissors',\n          tooltipText: this.drawer.t('Crop image'),\n          clickHandler: this._onAnotherCropButtonClick.bind(this)\n        },\n        applyButtonConf = {\n          buttonOrder: this.options.buttonOrder,\n          additionalClass: 'btn-apply-crop',\n          iconClass: 'fa-check',\n          tooltipText: this.drawer.t('Apply current image'),\n          clickHandler: this._onApplyCropButtonClick.bind(this)\n        },\n        undoCropButtonConf = {\n          buttonOrder: this.options.buttonOrder,\n          additionalClass: 'btn-undo-crop',\n          iconClass: 'fa-undo',\n          tooltipText: this.drawer.t('Undo crop'),\n          clickHandler: this._onUndoCropButtonClick.bind(this)\n        },\n        useOriginButtonConf = {\n          buttonOrder: this.options.buttonOrder,\n          additionalClass: 'btn-useorigin-crop',\n          iconClass: 'fa-image',\n          tooltipText: this.drawer.t('Use origin image'),\n          clickHandler: this._onUseOriginButtonClick.bind(this)\n        },\n        cancelButtonConf = {\n          buttonOrder: this.options.buttonOrder,\n          additionalClass: 'btn-cancel-crop',\n          iconClass: 'fa-ban',\n          tooltipText: this.drawer.t('Cancel'),\n          clickHandler: this._onCancelCropButtonClick.bind(this)\n        };\n\n\n\n    $anotherCropButton = toolbar.addButton(anotherCropButtonConf);\n    $applyButton = toolbar.addButton(applyButtonConf);\n    $undoCropButton = toolbar.addButton(undoCropButtonConf);\n    // $useOriginButton = toolbar.addButton(useOriginButtonConf);\n    $cancelButton = toolbar.addButton(cancelButtonConf);\n\n    this.$anotherCropButton = $anotherCropButton;\n    this.$applyButton = $applyButton;\n    this.$undoCropButton = $undoCropButton;\n    this.$useOriginButton = $useOriginButton;\n    this.$cancelButton = $cancelButton;\n  };\n\n  /**\n   * On 'another crop' button click handler\n   * @private\n   */\n  ImageCrop.prototype._onAnotherCropButtonClick = function () {\n    this.cropper.applyCrop(true);\n    this.$undoCropButton.removeClass('disabled');\n  };\n\n  /**\n   * On 'apply crop' button click handler\n   * @private\n   */\n  ImageCrop.prototype._onApplyCropButtonClick = function () {\n    this.cropper.applyCrop();\n  };\n\n\n  /**\n   * On 'undo crop' button click handler\n   * @private\n   */\n  ImageCrop.prototype._onUndoCropButtonClick = function () {\n    var cropper = this.cropper,\n        ableToUndo = cropper.prevImages && cropper.prevImages.length;\n    if (ableToUndo) {\n      cropper.undoCrop(true);\n      if (!cropper.prevImages.length) {\n        this.$undoCropButton.addClass('disabled');\n      }\n    }\n  };\n\n  /**\n   * On 'use origin' button click handler\n   * @private\n   */\n  ImageCrop.prototype._onUseOriginButtonClick = function () {\n    var cropper = this.cropper;\n    cropper.success(cropper.originalImage);\n  };\n\n  /**\n   * On 'cancel' button click handler\n   * @private\n   */\n  ImageCrop.prototype._onCancelCropButtonClick = function () {\n    this.cropper.success();\n  };\n\n  /**\n   * On 'another crop' button click handler\n   * @private\n   */\n  ImageCrop.prototype._resizeCropWrapper = function () {\n    var imageCropToolbar = this.drawer.toolbars.cropImageToolbar,\n        toolbarHeight = imageCropToolbar && imageCropToolbar.$toolbar && imageCropToolbar.$toolbar.height(),\n        $cropperContainer = this.cropper && this.cropper.$element;\n    if ($cropperContainer) {\n      $cropperContainer.css('top', toolbarHeight || 0);\n    }\n    if (toolbarHeight && toolbarHeight > 0) { // some webkit issue - sometimes height can be less than 0 (??)\n      this.cropContainerSizesUpdated = true;\n    }\n  };\n\n  /**\n   * React on crop plugin activity\n   * @param {Function} callback\n   * @returns {Function}\n   * @private\n   */\n  ImageCrop.prototype._getCropCallback = function (callback) {\n    var self = this;\n    return function (result) {\n      if (callback && typeof callback === 'function') {\n        callback(result);\n      }\n      self.hideCropper();\n      self.hideCropToolbar();\n      self.cropper.reset();\n    };\n  };\n\n  /**\n   * Init image crop\n   * @param {fabric.Event} fEvent\n   * @param {Object} data\n   * @private\n   */\n  ImageCrop.prototype._onImageCropTrigger = function (fEvent, data) {\n    if (this.enabled) {\n      var dataIsValid = data && data.url;\n      data.newImage = true;\n      if (dataIsValid) {\n        var callback = this._getCropCallback(data.callback);\n        this.showCropToolbar();\n        this.showCropper();\n        this.cropper._bind(data, callback);\n      }\n    }\n  };\n\n  /**\n   * Setup options for crop plugin\n   * @param {Object} [cropOptions]\n   * @private\n   */\n  ImageCrop.prototype._setupCropOptions = function (cropOptions) {\n    var result = {};\n    $.extend(true, result, this._defaultCropOptions, cropOptions || {});\n    this.cropOptions = result;\n  };\n\n  /**\n   * Create helper elements\n   * @private\n   */\n  ImageCrop.prototype._createElements = function () {\n    var placeCropperInsideCanvas = true,\n        cropperContainerHtml = '<div class=\"image-crop-wrapper hidden\"></div>',\n        $cropperContainer = $(cropperContainerHtml),\n        $container;\n\n    if (placeCropperInsideCanvas) {\n      $container = this.drawer.$canvasEditContainer;\n    } else {\n      $container = $('body');\n    }\n    $container.append($cropperContainer);\n\n    this.drawer.$cropperContainer = $cropperContainer;\n    this.$cropperContainer = $cropperContainer;\n  };\n\n  /**\n   * Remove helper elements\n   * @private\n   */\n  ImageCrop.prototype._removeElements = function () {\n    if (this.$cropperContainer) {\n      this.$cropperContainer.remove();\n      delete this.$cropperContainer;\n    }\n\n    if (this.drawer.$cropperContainer) {\n      delete this.drawer.$cropperContainer;\n    }\n    if (this.cropper) {\n      this.cropper._destroy();\n      delete this.cropper;\n    }\n  };\n\n  /**\n   * Show crop container\n   */\n  ImageCrop.prototype.showCropToolbar = function () {\n    this.$undoCropButton.addClass('disabled');\n    this.drawer.trigger(this.drawer.EVENT_RESIZER_HIDE);\n    this.drawer.trigger(this.drawer.EVENT_TOOLBAR_CHANGE_STATE, [{\n      excludeElements: this.$toolbar,\n      state: this.options.toolbarState,\n      turnOn: true\n    }]);\n    this.drawer.trigger(this.drawer.EVENT_OVERCANVAS_BUTTON_HIDE, [true]);\n\n    this.drawer.toolbars.cropImageToolbar.showToolbar();\n    if (!this.cropContainerSizesUpdated) {\n      this._resizeCropWrapper();\n    }\n  };\n\n  /**\n   * Hide crop container\n   */\n  ImageCrop.prototype.hideCropToolbar = function () {\n    this.drawer.toolbars.cropImageToolbar.hideToolbar();\n    this.drawer.trigger(this.drawer.EVENT_RESIZER_SHOW);\n    this.drawer.trigger(this.drawer.EVENT_TOOLBAR_CLEAR_STATE);\n    this.drawer.trigger(this.drawer.EVENT_OVERCANVAS_BUTTON_SHOW);\n  };\n\n\n  /**\n   * Show crop container\n   */\n  ImageCrop.prototype.showCropper = function () {\n    if (this.$cropperContainer && this.$cropperContainer.length) {\n      this.$cropperContainer.removeClass('hidden');\n    }\n  };\n\n  /**\n   * Hide crop container\n   */\n  ImageCrop.prototype.hideCropper = function () {\n    if (this.$cropperContainer && this.$cropperContainer.length) {\n      this.$cropperContainer.addClass('hidden');\n    }\n  };\n\n  pluginsNamespace.ImageCrop = ImageCrop;\n})\n","export default (function ($, pluginsNamespace, /*BaseToolOptions,*/ util) {\n  \"use strict\";\n  var MOUSE_DOWN = util.mouseDown('MovableFloatingMode');\n  var MOUSE_MOVE = util.mouseMove('MovableFloatingMode');\n  var MOUSE_UP = util.mouseUp('MovableFloatingMode');\n\n\n  /**\n   * Allows moving of canvas when it is in 'floating' mode.\n   *\n   * @param {DrawerJs.Drawer} drawer\n   * @param {Object} options\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var MovableFloatingMode = function MovableFloatingModePlugin(drawer, options) {\n    this.drawer = drawer;\n    this._setupOptions(options);\n\n    // set handlers\n    this._bindedOnToolbarCreated = this._onToolbarCreated.bind(this);\n    drawer.on(drawer.EVENT_CONFIG_TOOLBAR_CREATED, this._bindedOnToolbarCreated);\n    drawer.on(drawer.EVENT_MINIMIZED_TOOLBAR_CREATED, this._bindedOnToolbarCreated);\n\n    // if options.align is set and not 'floating' - plugin will not work, warn user about this\n    if (drawer.options.align && (drawer.options.align !== 'floating')) {\n      console.warn(\"MovableFloatingMode plugin: options.align is set and it is not 'floating', so canvas will not move. Please use MovableFloatingMode plugin with 'floating' align\");\n    }\n\n    // if align is not set - make it 'floating'\n    if (!drawer.options.align) {\n        drawer.options.align = 'floating';\n    }\n\n    this.drawer.on(this.drawer.EVENT_CANVAS_READY,    this.onOptionsChanged.bind(this));\n    this.drawer.on(this.drawer.EVENT_OPTIONS_CHANGED, this.onOptionsChanged.bind(this));\n  };\n\n  // MovableFloatingMode.prototype = Object.create(BaseToolOptions.prototype);\n  // MovableFloatingMode.prototype.constructor = BaseToolOptions;\n\n    /**\n     * Setup data\n     * @param {Object} [options] - options to save\n     * @param {String} [pluginName] - name of plugin\n     * @param {Boolean} [doNotSave] - set true to not save result as this.options\n     * @returns {Object} config of plugin\n     */\n    MovableFloatingMode.prototype._setupOptions = function (options, pluginName, doNotSave) {\n      pluginName = pluginName || this.name;\n      var drawer = this.drawerInstance || this.drawer,\n          optionsFromDrawer = drawer && drawer.getPluginConfig(pluginName),\n          result = $.extend(true,\n              {},\n              this._defaultOptions || {},\n              optionsFromDrawer || {},\n              options || {}\n          );\n\n      if (!doNotSave) {\n        this.options = result;\n      }\n      return result;\n    };\n\n\n    /**\n     * On toolbar created - create tool button.\n     */\n    MovableFloatingMode.prototype._onToolbarCreated = function (ev, toolbar) {\n        this.toolbar = toolbar;\n        this.createControls(toolbar);\n    };\n\n\n\n    /**\n     * Deletes tool button.\n     * If  doDeleteToolbarCreationListeners is true - removes listeners of toolbar creation event.\n     * So, tool will not appear on toolbar next time, when toolbar is created.\n     *\n     * @param {boolean} doDeleteToolbarCreationListeners\n     */\n    MovableFloatingMode.prototype.removeTool = function(doDeleteToolbarCreationListeners) {\n        if (this.deleteControls) {\n            this.deleteControls();\n        }\n\n        // stop listening toolbar creation\n        if (doDeleteToolbarCreationListeners) {\n            this.drawer.off(this.drawer.EVENT_CONFIG_TOOLBAR_CREATED, this._bindedOnToolbarCreated);\n            this.drawer.off(this.drawer.EVENT_MINIMIZED_TOOLBAR_CREATED, this._bindedOnToolbarCreated);\n        }\n    };\n\n\n\n  /**\n   * Is called from Base\n   * @param  {DrawerToolbar} toolbar\n   */\n  MovableFloatingMode.prototype.createControls = function (toolbar) {\n    this.makeMoveButton(toolbar);\n  };\n\n  MovableFloatingMode.prototype.makeMoveButton = function (toolbar) {\n    // create move button\n    var moveButtonConf = {\n          buttonOrder: this.options.buttonOrder,\n          additionalClass: 'btn-move',\n          iconClass: 'fa-arrows',\n          tooltipText: this.drawer.t('Move canvas')\n        },\n        $moveButton = toolbar.addButton(moveButtonConf);\n    this.$moveButton = $moveButton;\n\n    // set handler\n    this.$moveButton.on(MOUSE_DOWN, this.buttonOnMouseDown.bind(this));\n  };\n\n\n  /**\n   * Handler of mouse down on button.\n   * @param  {MouseEvent} event [description]\n   */\n  MovableFloatingMode.prototype.buttonOnMouseDown = function (event) {\n    if (event.type.indexOf('touch') > -1) {\n      event = event.originalEvent;\n    }\n\n    $('.tooltip-btn-move').css('display', 'none');\n\n    // save coords of drawer\n    this.startLeft = this.drawer.$imageElement\n        .css('left').replace('px', '') | 0;\n    this.startTop = this.drawer.$imageElement\n        .css('top').replace('px', '') | 0;\n\n    // save coords of click\n    this.mouseStartLeft = event.pageX;\n    this.mouseStartTop = event.pageY;\n\n    // set handler for mouse move\n    var $body = $('body'),\n        $document = $(window.document);\n    $body.addClass('drawer-moving');\n    $document.on(MOUSE_MOVE, this.buttonOnMouseMove.bind(this));\n    // set handler for mouse up\n    $document.on(MOUSE_UP, this.buttonOnMouseUp.bind(this));\n\n    return false;\n  };\n\n\n  /**\n   * Handler of mouse movement, when mouse button is down.\n   * @param  {Event} moveEvent        [description]\n   * @return {Boolean}                returns false, to stop event propagation\n   */\n  MovableFloatingMode.prototype.buttonOnMouseMove = function (moveEvent) {\n    var self = this,\n        moveEventPos = util.getEventPosition(moveEvent),\n        moveDrawerFunc = function moveDrawerFunc(){\n          self.moveDrawer(moveEventPos.left, moveEventPos.top);\n        };\n\n    util.requestAnimationFrame(moveDrawerFunc);\n\n    moveEvent.preventDefault();\n    moveEvent.stopPropagation();\n    return false;\n  };\n\n\n  /**\n   * Mouse up handler.\n   * @param  {MouseEvent} event\n   * @return {Boolean}    returns false, to stop event propagation\n   */\n  MovableFloatingMode.prototype.buttonOnMouseUp = function (event) {\n      $('.tooltip-btn-move').css('display', 'block');\n\n      var $body = $('body'),\n          $document = $(window.document);\n      $body.removeClass('drawer-moving');\n    $document.off(MOUSE_MOVE);\n    $document.off(MOUSE_UP);\n\n      return false;\n  };\n\n\n  /**\n   * Moves drawer according to mouse movement.\n   * x, y here are coords of mouse pointer.\n   *\n   * @param  {integer} x x coord of mouse pointer\n   * @param  {integer} y y coord of mouse pointer\n   */\n  MovableFloatingMode.prototype.moveDrawer = function (x, y) {\n    // calc offset of mouse pointer from click position\n    var diffLeft = x - this.mouseStartLeft;\n    var diffTop = y - this.mouseStartTop;\n\n    // new coords of drawer\n    var newLeft = this.startLeft + diffLeft;\n    var newTop = this.startTop + diffTop;\n    newLeft = (newLeft < 0) ? 0 : newLeft;\n    newTop  = (newTop < 0)  ? 0 : newTop;\n\n    // change drawer position\n    var drawer = this.drawer;\n    drawer.$imageElement.css({\n      left: newLeft,\n      top: newTop\n    });\n\n    drawer.updateAligmentCss();\n    drawer.adjustEditContainer(false, true);\n  };\n\n  /**\n   * Shows/hide move button, depending on current align mode.\n   */\n  MovableFloatingMode.prototype.onOptionsChanged = function() {\n    // try to get fullscreen plugin\n    var fullScreenPlugin;\n    try {\n      fullScreenPlugin = this.drawer.getPluginInstance('Fullscreen');\n    }\n    catch (e) {\n      // do nothing\n    }\n\n    // see, if we are in fullscreen mode\n    var isInFullscreen = fullScreenPlugin && fullScreenPlugin.isInFullscreenMode();\n\n    // show button if no fullscreen mode and align is 'floating'\n    if (!isInFullscreen && (this.drawer.options.align == 'floating')) {\n      this.showMoveButton();\n    } else {\n      this.hideMoveButton();\n    }\n  };\n\n\n  /**\n   * Shows plugin button.\n   */\n  MovableFloatingMode.prototype.showMoveButton = function() {\n    if (!this.$moveButton) {\n      console.warn('MovableFloatingMode.removeMoveButton() : no button \\'Move\\' present');\n      return;\n    }\n    this.$moveButton.show();\n  };\n\n  /**\n   * Hides plugin button.\n   */\n  MovableFloatingMode.prototype.hideMoveButton = function() {\n    if (!this.$moveButton) {\n      console.warn('MovableFloatingMode.removeMoveButton() : no button \\'Move\\' present');\n      return;\n    }\n    this.$moveButton.hide();\n  };\n\n\n  pluginsNamespace.MovableFloatingMode = MovableFloatingMode;\n})\n","export default (function ($, pluginsNamespace, util, DrawerApi) {\n  \"use strict\";\n\n  /**\n   * Provides a button to minimize canvas.\n   *\n   * @param {DrawerJs.Drawer} drawer\n   * @param {Object} options\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var MinimizeButton = function MinimizeButtonConstructor(drawer, options) {\n    /**\n     * @type {Drawer}\n     */\n    this.name = 'MinimizeButton';\n    this.drawer = drawer;\n    this._setupOptions(options);\n\n    drawer.on(drawer.EVENT_CONFIG_TOOLBAR_CREATED,  this._onConfigToolbarCreated.bind(this));\n    drawer.on(drawer.EVENT_MINIMIZED_TOOLBAR_CREATED,  this._onMinimizedToolbarCreated.bind(this));\n  };\n\n\n  /**\n   * Setup data\n   * @param {Object} [options] - options to save\n   * @param {String} [pluginName] - name of plugin\n   * @param {Boolean} [doNotSave] - set true to not save result as this.options\n   * @returns {Object} config of plugin\n   */\n  MinimizeButton.prototype._setupOptions = function (options, pluginName, doNotSave) {\n    pluginName = pluginName || this.name;\n    var drawer = this.drawerInstance || this.drawer,\n        optionsFromDrawer = drawer && drawer.getPluginConfig(pluginName),\n        result = $.extend(true,\n            {},\n            this._defaultOptions || {},\n            optionsFromDrawer || {},\n            options || {}\n        );\n\n    if (!doNotSave) {\n      this.options = result;\n    }\n    return result;\n  };\n\n  /**\n   * On toolbar created - create tool button.\n   */\n  MinimizeButton.prototype._onConfigToolbarCreated = function (ev, toolbar) {\n    this._createAndAddButton_minimize(toolbar);\n  };\n\n  /**\n   * On toolbar created - create tool button.\n   */\n  MinimizeButton.prototype._onMinimizedToolbarCreated = function (ev, toolbar) {\n    var captionValue = this.drawer.options.captionText,\n        captionItem = $('<li class=\"canvas-caption\">' + captionValue + '</li>');\n    toolbar.$toolbar.find('.toolbar-content-wrapper').prepend(captionItem);\n    this._createAndAddButton_restore(toolbar);\n  };\n\n  /**\n   * Deletes tool button.\n   * If  doDeleteToolbarCreationListeners is true - removes listeners of toolbar creation event.\n   * So, tool will not appear on toolbar next time, when toolbar is created.\n   *\n   * @param {boolean} doDeleteToolbarCreationListeners\n   */\n  MinimizeButton.prototype.removeTool = function(doDeleteToolbarCreationListeners) {\n      if (this.deleteControls) {\n          this.deleteControls();\n      }\n      // stop listening toolbar creation\n      if (doDeleteToolbarCreationListeners) {\n          this.drawer.off(this.drawer.EVENT_CONFIG_TOOLBAR_CREATED, this._bindedOnToolbarCreated);\n      }\n  };\n\n  /**\n   * Turn on minimized mode\n   */\n  MinimizeButton.prototype.minimizeCanvas = function() {\n    var $editContainer = this.drawer.$canvasEditContainer,\n        drawerHaveAnimatedClass =  $editContainer.hasClass('animated');\n    $editContainer.removeClass('animated');\n    $editContainer.addClass('minimized');\n    util.setTimeout(function () {\n      $editContainer.toggleClass('animated', !!drawerHaveAnimatedClass);\n    }, 0);\n  };\n\n  /**\n   * Turn off minimized mode\n   */\n  MinimizeButton.prototype.restoreCanvas = function() {\n    var $editContainer = this.drawer.$canvasEditContainer,\n        drawerHaveAnimatedClass =  $editContainer.hasClass('animated');\n    $editContainer.removeClass('animated');\n    $editContainer.removeClass('minimized');\n    util.setTimeout(function () {\n      $editContainer.toggleClass('animated', !!drawerHaveAnimatedClass);\n    }, 0);\n  };\n\n  /**\n   * Creates and adds restore button to toolbar.\n   * @param  {DrawerToolbar} toolbar\n   */\n  MinimizeButton.prototype._createAndAddButton_restore = function(toolbar) {\n    var restoreButtonConf = {\n          buttonOrder: this.options.buttonOrder,\n          additionalClass: 'btn-restore-canvas',\n          iconClass: 'fa-expand',\n          tooltipText: this.drawer.t('Restore canvas'),\n          clickHandler: this._onRestoreSizeButtonClick.bind(this)\n        },\n        $restoreButton = toolbar.addButton(restoreButtonConf);\n    this.$restoreButton = $restoreButton;\n  };\n\n  /**\n   * Creates and adds minimize button to toolbar.\n   * @param  {DrawerToolbar} toolbar\n   */\n  MinimizeButton.prototype._createAndAddButton_minimize = function(toolbar) {\n    var minimizeButtonConf = {\n          buttonOrder: this.options.buttonOrder,\n          additionalClass: 'btn-minimize-canvas',\n          iconClass: 'fa-compress',\n          tooltipText: this.drawer.t('Minimize canvas'),\n          clickHandler: this._onMinimizeButtonClick.bind(this)\n        },\n        $minimizeButton = toolbar.addButton(minimizeButtonConf);\n    this.$minimizeButton = $minimizeButton;\n  };\n\n\n  /**\n   * On minimize button click handler\n   */\n  MinimizeButton.prototype._onMinimizeButtonClick = function () {\n    this.minimizeCanvas();\n  };\n\n  /**\n   * On minimize button click handler\n   */\n  MinimizeButton.prototype._onRestoreSizeButtonClick = function () {\n    this.restoreCanvas();\n  };\n\n  /**\n   * Provide API method - minimizeCanvas\n   */\n  DrawerApi.prototype.minimizeCanvas = function() {\n    this.drawer.api.checkIsActive();\n    var tool = this.drawer.getPluginInstance('MinimizeButton');\n    tool.minimizeCanvas();\n  };\n\n  /**\n   * Provide API method - restoreCanvas\n   */\n  DrawerApi.prototype.restoreCanvas = function() {\n    this.drawer.api.checkIsActive();\n    var tool = this.drawer.getPluginInstance('MinimizeButton');\n    tool.restoreCanvas();\n  };\n\n  pluginsNamespace.MinimizeButton = MinimizeButton;\n})\n","export default (function ($, pluginsNamespace, util) {\n  /**\n   * Provides ability to use popup over canvas\n   *\n   * @param {DrawerJs.Drawer} drawerInstance\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var OvercanvasPopup = function ResizeConstructor(drawerInstance) {\n    this.drawerInstance = drawerInstance;\n    this.LOGTAG = this.name;\n\n    this._attachDrawerEvents();\n  };\n\n  /**\n   * Instance of Drawer\n   * @type {Drawer}\n   */\n  OvercanvasPopup.prototype.drawerInstance = null;\n\n  /**\n   * Namespace for events\n   * @const\n   * @type {String}\n   */\n  OvercanvasPopup.prototype.namespace = 'OvercanvasPopup';\n\n  /**\n   * Name of plugin\n   * @const\n   * @type {String}\n   */\n  OvercanvasPopup.prototype.name = 'DrawerPluginOvercanvasPopup';\n\n  /**\n   * Additional class of popup-wrapper element\n   * @type {String}\n   */\n  OvercanvasPopup.prototype.popupClass = 'popup-wrapper';\n  /**\n   * Default position of popup\n   * @type {string}\n   */\n  OvercanvasPopup.prototype.defaultPosition = 'bottom';\n  /**\n   * Array of available positions. Note that order is necessary.\n   * @type {String[]}\n   */\n  OvercanvasPopup.prototype.positions = ['bottom', 'left', 'right', 'top'];\n\n  /**\n   * Toolbar behavior\n   * @type {string}\n   */\n  OvercanvasPopup.prototype.toolbarBehavior = 'overlay';\n\n  /**\n   * Attach drawer events\n   * @private\n   */\n  OvercanvasPopup.prototype._attachDrawerEvents = function () {\n    this.drawerInstance.on(this.drawerInstance.BEFORE_CREATE_TOOLBARS, this._onBeforeCreateToolbars.bind(this));\n    this.drawerInstance.on(this.drawerInstance.EVENT_OVERCANVAS_POPUP_SHOW, this.showPopup.bind(this));\n    this.drawerInstance.on(this.drawerInstance.EVENT_OVERCANVAS_POPUP_HIDE, this.hidePopup.bind(this));\n  };\n\n  /**\n   * React on event - before toolbars create\n   * @private\n   */\n  OvercanvasPopup.prototype._onBeforeCreateToolbars = function () {\n    this._createHelperElements();\n    this._attachHelperEvents();\n  };\n\n  /**\n   * Add event handlers for popup and helpers elements\n   * @private\n   */\n  OvercanvasPopup.prototype._attachHelperEvents = function () {\n    var $closeBtn = this.$popup.find('.popup-close-btn'),\n        $overlay = this.$popup.find('.popup-overlay'),\n        $body = $('body');\n    util.bindClick($closeBtn, this.namespace, this._triggerPopupHide.bind(this));\n    util.bindClick($overlay, this.namespace, this._triggerPopupHide.bind(this));\n\n    util.bindClick($body, this.namespace, this._onBodyClick.bind(this));\n  };\n\n  /**\n   * Throw \"hide overcanvas popup\" event\n   * @private\n   */\n  OvercanvasPopup.prototype._triggerPopupHide = function () {\n    this.drawerInstance.trigger(this.drawerInstance.EVENT_OVERCANVAS_POPUP_HIDE);\n  };\n\n  /**\n   * Throw \"show overcanvas popup\" event\n   * @private\n   */\n  OvercanvasPopup.prototype._triggerPopupShow = function () {\n    this.drawerInstance.trigger(this.drawerInstance.EVENT_OVERCANVAS_POPUP_SHOW);\n  };\n\n  /**\n   * Close popup on click outside drawer\n   * @param event\n   * @private\n   */\n  OvercanvasPopup.prototype._onBodyClick = function (event) {\n    if (this.popupIsVisible) {\n      var $buttonExists = this.$button && this.$button.length,\n          isButton = $buttonExists && (event.target === this.$button.get(0) || this.$button.find(event.target).length),\n          isPopup = event.target === this.$popup.get(0) || this.$popup.find(event.target).length;\n      if (!isButton && !isPopup) {\n        this.drawerInstance.trigger(this.drawerInstance.EVENT_OVERCANVAS_POPUP_HIDE);\n      }\n    }\n  };\n  /**\n   * Create helper elements\n   * @private\n   */\n  OvercanvasPopup.prototype._createHelperElements = function () {\n    this._removeHelperElements();\n\n    var popupWrapperHtml = '' +\n            '<div class=\"' + this.popupClass + ' hidden\">' +\n            '<div class=\"popup-content-wrapper\">' +\n              '<div class=\"popup-arrow\"></div>' +\n              '<div class=\"popup-content\"></div>' +\n            '</div>' +\n            '<div class=\"popup-overlay\"></div>' +\n            '<div class=\"popup-close-btn\">' +\n            '<div class=\"fa fa-close\"></div>' +\n            '</div>' +\n            '</div>';\n\n    var $popupWrapper = $(popupWrapperHtml),\n        container = this.drawerInstance.$canvasEditContainer;\n\n    container.append($popupWrapper);\n\n    this.drawerInstance.$popupWrapper = $popupWrapper;\n    this.$popup = $popupWrapper;\n    this.$arrow = $popupWrapper.find('.popup-arrow');\n    this.$popupContentWrapper = $popupWrapper.find('.popup-content-wrapper');\n  };\n\n  /**\n   * Remove helper elements\n   * @private\n   */\n  OvercanvasPopup.prototype._removeHelperElements = function () {\n    if (this.drawerInstance.$popupWrapper && this.drawerInstance.$popupWrapper.length) {\n      this.drawerInstance.$popupWrapper.remove();\n    }\n    var $popupElement = this.drawerInstance.$canvasEditContainer.find('.' + this.popupClass);\n    if ($popupElement && $popupElement.length) {\n      $popupElement.remove();\n    }\n    this.drawerInstance.$popupWrapper = undefined;\n    this.$popup = undefined;\n  };\n\n  /**\n   * Refresh size values\n   * @param {jQuery} $trigger - Trigger element\n   * @returns {Object|undefined}\n   * @private\n   */\n  OvercanvasPopup.prototype._getAvailableSpace = function ($trigger) {\n    var result;\n    if ($trigger && $trigger.length) {\n      var $canvas = this.drawerInstance.$canvasEditContainer,\n          canvasSizes = $canvas.get(0).getBoundingClientRect(),\n          triggerSizes = $trigger.get(0).getBoundingClientRect(),\n          popupSizes = this.$popupContentWrapper.get(0).getBoundingClientRect(),\n          // arrowSize = this.$arrow.width(),\n          arrowSize = 10,\n          triggerOffsetX = triggerSizes.left - canvasSizes.left,\n          triggerOffsetY = triggerSizes.top - canvasSizes.top;\n      result = {};\n\n      result.top = triggerOffsetY;\n      result.left = triggerOffsetX;\n      result.right = canvasSizes.width - triggerOffsetX - triggerSizes.width;\n      result.bottom = canvasSizes.height - triggerOffsetY - triggerSizes.height;\n\n      result.centerX = triggerOffsetX + triggerSizes.width/2;\n      result.centerY = triggerOffsetY + triggerSizes.height/2;\n\n      result.popup = {\n        arrowSize: arrowSize,\n        top: popupSizes.height,\n        bottom: popupSizes.height,\n        left: popupSizes.width,\n        right: popupSizes.width\n      };\n\n      result.popupSizes = popupSizes;\n      result.canvasSizes = canvasSizes;\n      result.triggerSizes = triggerSizes;\n    }\n    this.sizes = result;\n    return result;\n  };\n\n  /**\n   * Move popup to position\n   * @param {String} position - Position of popup - top/bottom/left/right\n   * @private\n   */\n  OvercanvasPopup.prototype._movePopup = function (position) {\n    var sizes = this.sizes,\n        isVerticalAlign,\n        styles = {},\n        offsetLeft,\n        offsetTop,\n        arrowOffsetLeft = sizes.popupSizes.width/2,\n        arrowOffsetTop = sizes.popupSizes.height/2,\n        negativeDiff;\n\n    switch (position) {\n      case 'left':\n        offsetLeft = sizes.left - sizes.popupSizes.width - sizes.popup.arrowSize;\n        offsetTop = sizes.centerY - sizes.popupSizes.height/2;\n        break;\n      case 'right':\n        offsetLeft = sizes.canvasSizes.width - sizes.right + sizes.popup.arrowSize;\n        offsetTop = sizes.centerY - sizes.popupSizes.height/2;\n        break;\n      case 'top':\n        isVerticalAlign = true;\n        offsetLeft = sizes.centerX - sizes.popupSizes.width/2;\n        offsetTop = sizes.top - sizes.popupSizes.height - sizes.popup.arrowSize;\n        break;\n      case 'bottom':\n        isVerticalAlign = true;\n        offsetLeft = sizes.centerX - sizes.popupSizes.width/2;\n        offsetTop = sizes.canvasSizes.height - sizes.bottom + sizes.popup.arrowSize;\n        break;\n    }\n\n    if (isVerticalAlign) {\n      styles.top = offsetTop;\n      negativeDiff = (offsetLeft + sizes.popupSizes.width ) - sizes.canvasSizes.width;\n      if (negativeDiff > 0) {\n        arrowOffsetLeft += negativeDiff;\n        styles.right = 0;\n      } else {\n        if (offsetLeft < 0) {\n          arrowOffsetLeft += offsetLeft;\n          offsetLeft = 0;\n        }\n        styles.left = offsetLeft;\n      }\n    } else {\n      styles.left = offsetLeft;\n      negativeDiff = (offsetTop + sizes.popupSizes.height) - sizes.canvasSizes.height;\n      if (negativeDiff > 0) {\n        arrowOffsetTop += negativeDiff;\n        styles.bottom = 0;\n      } else {\n        if (offsetTop < 0) {\n          arrowOffsetTop += offsetTop;\n          offsetTop = 0;\n        }\n        styles.top = offsetTop;\n      }\n    }\n\n    this.$popupContentWrapper.attr('data-position',position);\n    this.$popupContentWrapper.removeAttr('style');\n    this.$popupContentWrapper.css(styles);\n    this._moveArrow(arrowOffsetLeft, arrowOffsetTop);\n  };\n\n\n  /**\n   * Move helper element - arrow\n   * @param {Number} left - Absolute position in px\n   * @param {Number} top - Absolute position in px\n   * @private\n   */\n  OvercanvasPopup.prototype._moveArrow = function (left, top) {\n    this.$arrow.css({\n      left: left,\n      top: top\n    });\n  };\n\n  /**\n   * Adjust position of popup according of trigger element\n   * @param {jQuery} $element\n   */\n  OvercanvasPopup.prototype._adjustPosition = function ($element) {\n    var sizes = this._getAvailableSpace($element),\n        positionFound;\n    this.positions.forEach(function (position, i) {\n      var positionExists = sizes[position] && sizes.popup[position];\n      if (!positionFound && positionExists) {\n        var neededSpace = sizes.popup[position] + sizes.popup.arrowSize,\n            spaceIsEnough = (sizes[position] - neededSpace) > 0;\n        positionFound = spaceIsEnough && position;\n      }\n    });\n    if (positionFound) {\n      this._movePopup(positionFound);\n    }\n  };\n\n  /**\n   * Show popup\n   * @param {fabric.Event} [fEvent]\n   * @param {jQuery} $trigger\n   */\n  OvercanvasPopup.prototype.showPopup = function (fEvent, $trigger) {\n    this.popupIsVisible = true;\n    this.$popup.removeClass('hidden');\n    this._adjustPosition($trigger);\n    this.$popupContentWrapper.removeClass('popup-transparent');\n    this.drawerInstance.trigger(this.drawerInstance.EVENT_TOOLBAR_CHANGE_STATE, [{\n      excludeElements: $().add(this.$popup).add($trigger),\n      turnOn: true,\n      state: this.toolbarBehavior\n    }]);\n  };\n\n  /**\n   * Hide popup\n   */\n  OvercanvasPopup.prototype.hidePopup = function () {\n    this.drawerInstance.trigger(this.drawerInstance.EVENT_TOOLBAR_CLEAR_STATE);\n    this.popupIsVisible = false;\n    this.$popup.addClass('hidden');\n    this.$popupContentWrapper.addClass('popup-transparent');\n  };\n\n  pluginsNamespace.OvercanvasPopup = OvercanvasPopup;\n})\n","export default (function ($, pluginsNamespace, util) {\n  \"use strict\";\n\n  var emptyFunc = function () {};\n\n  var MOUSE_UP = util.mouseUp('OpenPopupButton');\n  var MOUSE_DOWN = util.mouseDown('OpenPopupButton');\n  var MOUSE_MOVE = util.mouseMove('OpenPopupButton');\n\n  /**\n   * Provides a button to open popup\n   *\n   * @param {DrawerJs.Drawer} drawer\n   * @param {Object} options\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var OpenPopupButton = function OpenPopupButtonConstructor(drawer, options) {\n    /**\n     * @type {Drawer}\n     */\n    this.drawer = drawer;\n    this._setupOptions(options);\n\n    drawer.on(drawer.EVENT_OPTIONS_TOOLBAR_CREATED, this._onToolbarCreated.bind(this));\n    drawer.on(drawer.EVENT_FLOATING_TOOLBAR_CREATED, this._init.bind(this));\n  };\n\n  /**\n   * Setup data\n   * @param {Object} [options] - options to save\n   * @param {String} [pluginName] - name of plugin\n   * @param {Boolean} [doNotSave] - set true to not save result as this.options\n   * @returns {Object} config of plugin\n   */\n  OpenPopupButton.prototype._setupOptions = function (options, pluginName, doNotSave) {\n    pluginName = pluginName || this.name;\n    var drawer = this.drawerInstance || this.drawer,\n        optionsFromDrawer = drawer && drawer.getPluginConfig(pluginName),\n        result = $.extend(true,\n            {},\n            this._defaultOptions || {},\n            optionsFromDrawer || {},\n            options || {}\n        );\n\n    if (!doNotSave) {\n      this.options = result;\n    }\n    return result;\n  };\n\n  /**\n   * Init\n   * @private\n   */\n  OpenPopupButton.prototype._init = function (ev, toolbar) {\n    if (this.needToInitButton) {\n      this.createControls(toolbar);\n\n      this.drawer.off(this.drawer.EVENT_OBJECT_SELECTED, this._onObjectSelected.bind(this));\n      this.drawer.on(this.drawer.EVENT_OBJECT_SELECTED, this._onObjectSelected.bind(this));\n\n      this.drawer.off(this.drawer.EVENT_SELECTION_CLEARED, this._onSelectionCleared.bind(this));\n      this.drawer.on(this.drawer.EVENT_SELECTION_CLEARED, this._onSelectionCleared.bind(this));\n\n      this.drawer.off(this.drawer.EVENT_DO_ACTIVATE_TOOL, this._onActivateTool.bind(this));\n      this.drawer.on(this.drawer.EVENT_DO_ACTIVATE_TOOL, this._onActivateTool.bind(this));\n\n      this.drawer.off(this.drawer.EVENT_DO_DEACTIVATE_TOOL, this._onDeactivateTool.bind(this));\n      this.drawer.on(this.drawer.EVENT_DO_DEACTIVATE_TOOL, this._onDeactivateTool.bind(this));\n\n      this.drawer.off(this.drawer.EVENT_DO_DEACTIVATE_ALL_TOOLS, this._onDeactivateAllTools.bind(this));\n      this.drawer.on(this.drawer.EVENT_DO_DEACTIVATE_ALL_TOOLS, this._onDeactivateAllTools.bind(this));\n\n      this.drawer.off(this.drawer.EVENT_CANVAS_START_RESIZE, this.hideButton.bind(this));\n      this.drawer.on(this.drawer.EVENT_CANVAS_START_RESIZE, this.hideButton.bind(this));\n\n      this.drawer.off(this.drawer.EVENT_CANVAS_STOP_RESIZE, this.refreshPosition.bind(this));\n      this.drawer.on(this.drawer.EVENT_CANVAS_STOP_RESIZE, this.refreshPosition.bind(this));\n\n      this.drawer.off(this.drawer.EVENT_OVERCANVAS_BUTTON_HIDE, this.hideButton.bind(this));\n      this.drawer.on(this.drawer.EVENT_OVERCANVAS_BUTTON_HIDE, this.hideButton.bind(this));\n\n      this.drawer.off(this.drawer.EVENT_OVERCANVAS_BUTTON_SHOW, this.showButton.bind(this));\n      this.drawer.on(this.drawer.EVENT_OVERCANVAS_BUTTON_SHOW, this.showButton.bind(this));\n\n      this.drawer.off(this.drawer.EVENT_IMAGE_CROP, this.hideButton.bind(this));\n      this.drawer.on(this.drawer.EVENT_IMAGE_CROP, this.hideButton.bind(this));\n    }\n  };\n\n  /**\n   * React on toolbar created\n   * @private\n   */\n  OpenPopupButton.prototype._onToolbarCreated = function (ev, toolbar) {\n    this.toolbar = toolbar;\n\n    var toolOptionsToolbarHavePopupPosition = toolbar.options.compactType === toolbar.POPUP,\n        toolbarIsHidden = toolbar.options.hidden,\n        needToInitButton = toolOptionsToolbarHavePopupPosition && !toolbarIsHidden;\n\n    this.needToInitButton = needToInitButton;\n  };\n\n  /**\n   * React on object selected\n   * @private\n   */\n\n  OpenPopupButton.prototype._onObjectSelected = function (event) {\n    this.showButton();\n  };\n\n\n  /**\n   * React on tool activation\n   * @private\n   */\n\n  OpenPopupButton.prototype._onActivateTool = function (event) {\n    this.showButton();\n  };\n\n  /**\n   * React on tool deactivation\n   * @private\n   */\n\n  OpenPopupButton.prototype._onDeactivateTool = function (event) {\n    this.hideButton();\n  };\n\n  /**\n   * React on tools deactivation\n   * @private\n   */\n\n  OpenPopupButton.prototype._onDeactivateAllTools = function (event, dataFromEvent) {\n    var isBeforeActivateTool = dataFromEvent && dataFromEvent.beforeActivateTool,\n        needToHide = !isBeforeActivateTool;\n    if (needToHide) {\n      this.hideButton();\n    }\n  };\n\n  /**\n   * React on selection change\n   * @private\n   */\n\n  OpenPopupButton.prototype._onSelectionCleared = function (event, fabricEvent) {\n    var needToHideButton = !this.drawer.activeDrawingTool;\n    if (needToHideButton) {\n      this.hideButton();\n    }\n  };\n\n  /**\n   * @param {DrawerToolbar} toolbar\n   * @private\n   */\n  OpenPopupButton.prototype.createControls = function (toolbar) {\n    this._createAndAddButton(toolbar);\n    this._setInitialPosition();\n    this.showButton();\n  };\n\n  /**\n   * Deletes tool button.\n   * If  doDeleteToolbarCreationListeners is true - removes listeners of toolbar creation event.\n   * So, tool will not appear on toolbar next time, when toolbar is created.\n   *\n   * @param {boolean} doDeleteToolbarCreationListeners\n   */\n  OpenPopupButton.prototype.removeTool = function (doDeleteToolbarCreationListeners) {\n    if (this.deleteControls) {\n      this.deleteControls();\n    }\n\n    // stop listening toolbar creation\n    if (doDeleteToolbarCreationListeners) {\n      this.drawer.off(this.drawer.EVENT_FLOATING_TOOLBAR_CREATED, this._bindedOnToolbarCreated);\n    }\n  };\n\n  /**\n   * Restore initial position of button\n   * @private\n   */\n  OpenPopupButton.prototype._setInitialPosition = function () {\n    var offsetLeft = 0,\n        offsetTop = 0,\n        insidePlaceholders = this.drawer.toolbars.toolbarPlaceholders.inside,\n        $insideTopPlaceholderEl = insidePlaceholders && insidePlaceholders.top && insidePlaceholders.top.$element,\n        $insideLeftPlaceholderEl = insidePlaceholders && insidePlaceholders.left && insidePlaceholders.left.$element;\n    if ($insideTopPlaceholderEl && $insideTopPlaceholderEl.length) {\n      $insideTopPlaceholderEl.find('ul.editable-canvas-toolbar:visible').each(function(i, element){\n        var $toolbar = $(element);\n        offsetTop += $toolbar.height();\n      });\n    }\n    if ($insideLeftPlaceholderEl && $insideLeftPlaceholderEl.length) {\n      $insideLeftPlaceholderEl.find('ul.editable-canvas-toolbar:visible').each(function(i, element){\n        var $toolbar = $(element);\n        offsetLeft += $toolbar.width();\n      });\n    }\n    this.positionInitialized = true;\n    this.moveButton(offsetLeft, offsetTop);\n  };\n\n  /**\n   * Move button over canvas\n   * @param {Number} [left] - left offset of button\n   * @param {Number} [top] - topoffset of button\n   */\n  OpenPopupButton.prototype.moveButton = function (left, top) {\n    if (!this.positionLimit) {\n      this.refreshPositionLimits();\n    }\n    left = left > this.positionLimit.left ? this.positionLimit.left : left;\n    top = top > this.positionLimit.top ? this.positionLimit.top : top;\n\n    left = left < 0 ? 0 : left;\n    top = top < 0 ? 0 : top;\n\n\n    this.latestState = {\n      left: left || 0,\n      top: top || 0\n    };\n    this.$button[0].style.left = left + 'px';\n    this.$button[0].style.top = top + 'px';\n  };\n\n\n  /**\n   * Refresh current position of button\n   */\n  OpenPopupButton.prototype.refreshPosition = function () {\n    var buttonLeft = (this.latestState && this.latestState.left) || 0,\n        buttonTop = (this.latestState && this.latestState.top) || 0;\n    this.showButton();\n    this.refreshPositionLimits();\n    this.moveButton(buttonLeft, buttonTop);\n\n  };\n\n  /**\n   * Creates and adds button to toolbar.\n   * @param  {DrawerToolbar} toolbar\n   * @private\n   */\n  OpenPopupButton.prototype._createAndAddButton = function (toolbar) {\n    var $button,\n        $body = $('body'),\n        openPopupButtonConf = {\n          buttonOrder: this.options.buttonOrder,\n          additionalClass: 'btn-popup-canvas hidden',\n          iconClass: 'fa-cogs',\n          tooltipText: this.drawer.t('Open options tools')\n        };\n    $button = toolbar.addButton(openPopupButtonConf);\n    this.$button = $button;\n\n    var buttonLeft = (this.latestState && this.latestState.left) || 0,\n        buttonTop = (this.latestState && this.latestState.top) || 0;\n\n    this.moveButton(buttonLeft, buttonTop);\n    // set all mouse handlers:\n    // handle mouse move while tool is active\n    $body.off(MOUSE_MOVE).on(MOUSE_MOVE, this._onMouseMove.bind(this));\n\n    // handle mouse down and mouse up\n    $button.off(MOUSE_DOWN).on(MOUSE_DOWN, this._onMouseDown.bind(this));\n    $body.off(MOUSE_UP).on(MOUSE_UP, this._onMouseUp.bind(this));\n  };\n\n  /**\n   * React on mouse down\n   * Set erasingNow to true.\n   * Eraser path will start by current brush, independently.\n   * @param {Event} event - mouse down event\n   * @private\n   */\n  OpenPopupButton.prototype._onMouseDown = function (event) {\n    // turn erasing on\n    var self = this;\n    this.moveNow = true;\n    this.triggerClick = true;\n    this.clickPosition = util.getEventPosition(event);\n\n    this.refreshSizes();\n    this.refreshPositionLimits();\n\n    util.setTimeout(function () {\n      self.triggerClick = false;\n    }, 200);\n  };\n\n\n  /**\n   * On mouse up - set erasingNow to false.\n   * Eraser path will be created soon, and\n   * main work on erasing will be  done in _onEraserPathCreated()\n   * @param {Event} event\n   * @private\n   */\n  OpenPopupButton.prototype._onMouseUp = function (event) {\n    this.moveNow = false;\n    this.dragNow = false;\n    this.clickPosition = {};\n    var isButton = event.target === this.$button.get(0) || this.$button.find(event.target).length;\n    this.$button.removeClass('dragging');\n    if (isButton && this.triggerClick) {\n      this.drawer.trigger(this.drawer.EVENT_OVERCANVAS_POPUP_SHOW, [this.$button]);\n    }\n  };\n\n  /**\n   * Listens for mouse movement when eraser is active.\n   *\n   * @param {Event} event\n   * @private\n   */\n  OpenPopupButton.prototype._onMouseMove = function (event) {\n    if (this.moveNow) {\n      var eventPosition = util.getEventPosition(event),\n          sameLeft = this.clickPosition && (this.clickPosition.left === eventPosition.left),\n          sameTop = this.clickPosition && (this.clickPosition.top === eventPosition.top),\n          cursorIsMoved = !sameLeft || !sameTop;\n      if (cursorIsMoved) {\n        if (!this.dragNow) {\n          this.$button.addClass('dragging');\n          this.dragNow = true;\n        }\n        this.latestSizes = this.latestSizes || this.refreshSizes();\n        var eventPos = util.getEventPosition(event),\n            latestSizes = this.latestSizes,\n            canvasSize = latestSizes.canvas;\n\n        var left = eventPos.left - canvasSize.left - latestSizes.button.width/2 - latestSizes.scroll.left;\n        var top = eventPos.top - canvasSize.top - latestSizes.button.height/2 - latestSizes.scroll.top;\n\n        this.triggerClick = false;\n        this.moveButton(left, top);\n\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    }\n  };\n\n\n  /**\n   * Refresh max sizes of button offset\n   */\n  OpenPopupButton.prototype.refreshSizes = function () {\n    var result = {};\n\n    var fCanvas = this.drawer.fCanvas,\n        canvasSizeBox = fCanvas.upperCanvasEl.getBoundingClientRect(),\n        buttonSizeBox = this.$button[0].getBoundingClientRect();\n    result.canvas = canvasSizeBox;\n    result.button = buttonSizeBox;\n    result.scroll = util.getScrollTopFromElement(this.$button);\n    this.latestSizes = result;\n    return result;\n  };\n\n  /**\n   * Refresh max sizes of button offset\n   */\n  OpenPopupButton.prototype.refreshPositionLimits = function () {\n    var buttonSize = this.$button.get(0).getBoundingClientRect(),\n        borderSize = 2;\n    this.positionLimit = {\n      left: this.drawer.width - buttonSize.width - borderSize,\n      top: this.drawer.height - buttonSize.height - borderSize,\n    };\n  };\n\n  /**\n   * Show popup button\n   */\n  OpenPopupButton.prototype.showButton = function () {\n    this.$button.removeClass('hidden');\n  };\n\n  /**\n   * Hide popup button\n   * @param {fabric.Event} [fEvent] - fabric event\n   * @param {Boolean} [force] - force to hide button ignoring all options\n   */\n  OpenPopupButton.prototype.hideButton = function (fEvent, force) {\n    var alwaysVisible = this.drawer.options.toolbars.popupButtonAlwaysVisible;\n    if (force || !alwaysVisible) {\n      this.$button.addClass('hidden');\n    }\n  };\n\n  pluginsNamespace.OpenPopupButton = OpenPopupButton;\n})\n","export default (function ($, pluginsNamespace, util) {\n  /**\n   * Provides a control for canvas resizing.\n   * Supports both mouse/touch.\n   *\n   * @param {DrawerJs.Drawer} drawerInstance\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var ResizeTool = function ResizeConstructor(drawerInstance) {\n    var self = this;\n\n    this.drawerInstance = drawerInstance;\n    this.name = 'DrawerPluginResize';\n    this.LOGTAG = this.name;\n\n    this.MOUSEDOWN = util.mouseDown('drawerPluginResize');\n    this.MOUSEUP = util.mouseUp('drawerPluginResize');\n    this.MOUSEMOVE = util.mouseMove('drawerPluginResize');\n\n    // on toolbar create\n    this._bindedOnToolbarCreated = this._onToolbarCreated.bind(this);\n    drawerInstance.on(this.drawerInstance.EVENT_CONFIG_TOOLBAR_CREATED, this._bindedOnToolbarCreated);\n\n    drawerInstance.on(this.drawerInstance.EVENT_RESIZER_HIDE, this.resizerHide.bind(this));\n    drawerInstance.on(this.drawerInstance.EVENT_RESIZER_SHOW, this.resizerShow.bind(this));\n  };\n\n  /**\n   * On toolbar created - create tool button.\n   */\n  ResizeTool.prototype._onToolbarCreated = function () {\n      this.createControls();\n  };\n\n\n  /**\n   * Deletes tool button.\n   * If  doDeleteToolbarCreationListeners is true - removes listeners of toolbar creation event.\n   * So, tool will not appear on toolbar next time, when toolbar is created.\n   *\n   * @param {boolean} doDeleteToolbarCreationListeners\n   */\n  ResizeTool.prototype.removeTool = function(doDeleteToolbarCreationListeners) {\n      if (this.deleteControls) {\n          this.deleteControls();\n      }\n\n      // stop listening toolbar creation\n      if (doDeleteToolbarCreationListeners) {\n          this.drawerInstance.off(this.drawerInstance.EVENT_CONFIG_TOOLBAR_CREATED, this._bindedOnToolbarCreated);\n      }\n  };\n\n\n  ResizeTool.prototype.createControls = function() {\n    this.deleteControls();\n    this.appendResizeControl();\n  };\n\n\n  ResizeTool.prototype.deleteControls = function() {\n    if (this.$canvasResizer && this.$canvasResizer.length) {\n      this.$canvasResizer.remove();\n    }\n  };\n\n\n\n  ResizeTool.prototype.appendResizeControl = function () {\n    var _this = this;\n\n    var $document = $(window.document),\n        $body = $('body'),\n        $elemForEvent = $document; // cache body elem for performance\n\n    var $editContainer = _this.drawerInstance.$canvasEditContainer;\n\n    this.$canvasResizer = $('<span class=\"redactor-drawer-resizer\">' +\n    '<span class=\"resizer-box\"></span></span>');\n\n    if (this.drawerInstance.touchDevice) {\n      this.$canvasResizer.find('.resizer-box').addClass('touch');\n    }\n\n    $editContainer.append(this.$canvasResizer);\n\n    this.$canvasResizer.find('.resizer-box')\n      .on(this.MOUSEDOWN, function (event) {\n\n        var eventPos = util.getEventPosition(event);\n\n        _this.drawerInstance.log(_this.LOGTAG, 'resize start');\n        _this.resizeOriginalWidth = _this.drawerInstance.width;\n        _this.resizeOriginalHeight = _this.drawerInstance.height;\n        _this.resizeStartX = eventPos.left;\n        _this.resizeStartY = eventPos.top;\n\n        var $body = $('body');\n        $body.addClass('drawer-resizing');\n\n        _this.drawerInstance.trigger(_this.drawerInstance.EVENT_CANVAS_START_RESIZE);\n        _this.drawerInstance.resizingNow = true;\n\n        $elemForEvent.on(_this.MOUSEMOVE, function (moveEvent) {\n          moveEvent.stopPropagation();\n          moveEvent.preventDefault();\n\n          var moveEventPos = util.getEventPosition(moveEvent);\n\n          var xDiff = _this.resizeStartX - moveEventPos.left;\n          var yDiff = _this.resizeStartY - moveEventPos.top;\n\n          var resizeDrawerFunc = function resizeDrawerFunc() {\n            _this.drawerInstance.setSize(\n                _this.resizeOriginalWidth - xDiff,\n                _this.resizeOriginalHeight - yDiff\n            );\n\n            _this.drawerInstance.trigger(_this.drawerInstance.EVENT_CANVAS_RESIZING);\n          };\n\n          util.requestAnimationFrame(resizeDrawerFunc);\n          return false;\n        });\n\n        // register global mouseUp handler so no matter where user\n        // will release a button we should receive that event\n        // and finish resizing.\n        $elemForEvent.on(_this.MOUSEUP, function (upEvent) {\n          $body.removeClass('drawer-resizing');\n\n          $elemForEvent.off(_this.MOUSEMOVE);\n          $elemForEvent.off(_this.MOUSEUP); // clean up this handler\n          _this.drawerInstance.log(_this.LOGTAG, 'resize finished by mouseup');\n          _this.resizeFinished();\n        });\n\n        // Also it's good to intercept mouse leaving from editor area\n        // $body.on('mouseleave.canvasResizer', function () {\n        //     $body.off(_this.MOUSEMOVE);\n        //     $body.off('mouseleave.canvasResizer');\n\n        //     _this.drawerInstance.log(_this.LOGTAG,\n        //       'resize finished leaving redactor\\' area.');\n\n        //     _this.resizeFinished();\n        // });\n\n      });\n  };\n\n  /**\n   * Hide resize elements\n   */\n  ResizeTool.prototype.resizerHide = function() {\n    if (this.$canvasResizer && this.$canvasResizer.length) {\n      this.$canvasResizer.addClass('hidden');\n    }\n  };\n\n  /**\n   * Show resize elements\n   */\n  ResizeTool.prototype.resizerShow = function() {\n    if (this.$canvasResizer && this.$canvasResizer.length) {\n      this.$canvasResizer.removeClass('hidden');\n    }\n  };\n\n\n  ResizeTool.prototype.resizeFinished = function() {\n    this.drawerInstance.onCanvasModified();\n    this.drawerInstance.resizingNow = false;\n\n    console.log('[resize]', 'EVENT_CANVAS_STOP_RESIZE');\n    this.drawerInstance.trigger(this.drawerInstance.EVENT_CANVAS_STOP_RESIZE);\n  };\n\n  pluginsNamespace.Resize = ResizeTool;\n})\n","export default (function(DrawerApi) {\n\n  /**\n   * Show context menu.\n   */\n    DrawerApi.prototype.contextMenuShow = function() {\n        this.drawer.api.checkIsActive();\n        var tool = this.drawer.getPluginInstance('ShapeContextMenu');\n        tool.showContextMenu();\n    };\n\n  /**\n   * Show context menu.\n   */\n    DrawerApi.prototype.contextMenuHide = function() {\n        this.drawer.api.checkIsActive();\n        var tool = this.drawer.getPluginInstance('ShapeContextMenu');\n        tool.hideContextMenu();\n    };\n\n\n  /**\n   * Set Context menu left top origin.\n   * @param {number} left\n   * @param {number} top\n   * @param {boolean} doFitInViewport if true - inca case menu is out of viewport, it's coordinates will be adjusted\n   */\n    DrawerApi.prototype.contextMenuSetPosition= function(left, top, doFitInViewport) {\n        this.drawer.api.checkIsActive();\n        var tool = this.drawer.getPluginInstance('ShapeContextMenu');\n\n        if (doFitInViewport) {\n          var newCoords = tool._calcCoordsToFitViewport(left, top);\n          left = newCoords.left;\n          top = newCoords.top;\n        }\n\n        tool.setMenuPosition(left, top);\n    };\n\n\n})\n","export default (function ($, pluginsNamespace, util) {\n  var MOUSE_DOWN = util.mouseDown('ShapeContextMenu');\n  /**\n   *\n   * Provides context menu for moving shapes to background-foreground and\n   * remove them.\n   *\n   * @param {DrawerJs.Drawer} drawerInstance\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @param {Object} options\n   * Configuration object.\n   *\n   * @param {Object} [options.position.mouse=cursor]\n   * Defines placement of context menu when working on non-touch screen.\n   * <br><br>\n   * Valid values are: <code>cursor</code>, <code>shapeRightBottom</code>,.\n   *\n   * @param {Object} [options.position.touch=shapeRightBottom]\n   * Defines placement of context menu when working on touch screen.\n   * <br><br>\n   *\n   * @param {Function} [options.customFitViewportMethod]\n   * Custom function to calc coords to fit menu in viewport.\n   * Arguments : (left, top)\n   * Returns :  Object with keys {left, top}\n   * <br><br>\n   *\n   * @param {Function} [options.customMenuRenderer]\n   * Custom function to render context menu.\n   * Arguments : ()\n   * Returns :  Object with keys {left, top}\n   * <br><br>\n   *\n   * Valid values are: <code>cursor</code>, <code>shapeRightBottom</code>.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var ShapeContextMenu = function ShapeContextMenuConstructor(drawerInstance, options) {\n    var _this = this;\n    _this.drawerInstance = drawerInstance;\n\n    this.options = $.extend(true, {}, this._defaultOptions || {}, options || {});\n    this.left = this.top = 0;\n\n    this._bindedOnContextMenu = this._onContextMenu.bind(this);\n\n    // using here EVENT_OPTIONS_TOOLBAR_CREATED just to make tool responsive to tools reload,\n    // tool by itself does not belong to any toolbar\n    this._bindedSetHandlers = this._setHandlers.bind(this);\n    drawerInstance.on(drawerInstance.EVENT_OPTIONS_TOOLBAR_CREATED, this._bindedSetHandlers);\n\n    drawerInstance.on(drawerInstance.EVENT_EDIT_STOP, this._onEditStop.bind(this));\n    drawerInstance.on(drawerInstance.EVENT_OBJECT_MOVING, this._onObjectMoved.bind(this));\n  };\n\n\n  ShapeContextMenu.prototype.eventsNamespace = 'shapeContextMenu';\n\n  ShapeContextMenu.prototype._defaultOptions = {\n      position: {\n        touch: 'shapeRightBottom', // context menu will be placed at shape's right bottom corner\n        mouse: 'cursor' // context menu will be placed in the position of click\n      }\n    };\n\n\n\n  ShapeContextMenu.prototype._setHandlers = function () {\n    if (this.options.customMenuRenderer) {\n      this.drawerInstance.on(this.drawerInstance.EVENT_CONTEXTMENU + '.' + this.eventsNamespace, this.options.customMenuRenderer);\n    }\n    else {\n      this.drawerInstance.on(this.drawerInstance.EVENT_CONTEXTMENU + '.' + this.eventsNamespace, this._bindedOnContextMenu);\n\n      var self = this;\n      util.bindClick($('body'), 'shapeContextMenu', function () {\n        self.hideContextMenu();\n      });\n    }\n    this.drawerInstance.$canvasEditContainer.off(MOUSE_DOWN).on(MOUSE_DOWN, this._onMouseDown.bind(this));\n  };\n\n\n  ShapeContextMenu.prototype._unsetHandlers = function (doDeleteToolbarCreationListeners) {\n    if (this.options.customMenuRenderer) {\n      this.drawerInstance.off(this.drawerInstance.EVENT_CONTEXTMENU + '.' + this.eventsNamespace);\n    }\n    else {\n      util.unbindClick($('body'), 'shapeContextMenu');\n      this.drawerInstance.off(this.drawerInstance.EVENT_CONTEXTMENU + '.' + this.eventsNamespace);\n\n      if (doDeleteToolbarCreationListeners) {\n        this.drawerInstance.off(this.drawerInstance.EVENT_OPTIONS_TOOLBAR_CREATED, this._bindedSetHandlers);\n      }\n    }\n  };\n\n\n  ShapeContextMenu.prototype.removeTool = function (doDeleteToolbarCreationListeners) {\n      this._unsetHandlers(doDeleteToolbarCreationListeners);\n  };\n\n  ShapeContextMenu.prototype._onObjectMoved = function () {\n    this.objectWasMoved = true;\n  };\n\n  ShapeContextMenu.prototype._onEditStop = function () {\n      this._unsetHandlers();\n  };\n\n  ShapeContextMenu.prototype._onMouseDown = function () {\n    this.objectWasMoved = false;\n  };\n\n  ShapeContextMenu.prototype._onContextMenu = function (event, originalEvent) {\n    var drawingInProgress = this.drawerInstance.drawingInProgress,\n        isBrushDrawing = this.drawerInstance.isBrushDrawing,\n        objectWasMoved = this.objectWasMoved,\n        ignoreContextMenu = drawingInProgress || isBrushDrawing || objectWasMoved;\n    if (!ignoreContextMenu) {\n      if (originalEvent.type.indexOf('touch') > -1) {\n        originalEvent = originalEvent.originalEvent;\n      }\n      this.handleContextMenuEvent(originalEvent);\n    }\n  };\n\n  /**\n   * Handles context menu event: finds object by click coordinates, selects\n   * that object and invokes {@link ShapeContextMenu.showContextMenu()}\n   *\n   * @param event mouse right click event or touch.originalEvent\n   */\n  ShapeContextMenu.prototype.handleContextMenuEvent = function (event) {\n    var _this = this,\n        targetIsCanvas = $(event.target).hasClass('upper-canvas'),\n        canvasTarget = targetIsCanvas && _this.drawerInstance.fCanvas.findTarget(event),\n        canvasTargetIsMoving = canvasTarget && canvasTarget.isMoving,\n        targetCorner = canvasTarget && canvasTarget.__corner,\n        needToShowContextMenu = canvasTarget && !canvasTargetIsMoving && !targetCorner;\n    if (needToShowContextMenu) {\n        _this.drawerInstance.fCanvas.setActiveObject(canvasTarget);\n        _this.showContextMenu(canvasTarget, event);\n      }\n  };\n\n  /**\n   * Shows context menu for specified fabricjs object.\n   *\n   * @param fabricItem\n   * @param event\n   */\n  ShapeContextMenu.prototype.showContextMenu = function (fabricItem, event) {\n    var _this = this;\n    _this.hideContextMenu();\n\n    var eventsNS = _this.eventsNamespace;\n\n    _this.$contextMenu = $(\n      '<ul class=\"editable-canvas-shape-context-menu\"' +\n      '></ul>'\n    );\n\n    var $bringForward = $('<li><a>' +\n      _this.drawerInstance.t('Bring forward') +\n    '</a></li>');\n    util.bindClick($bringForward.find('a'), eventsNS, this._bringObjectForward.bind(this, fabricItem));\n    _this.$contextMenu.append($bringForward);\n\n    var $sendBackwards = $('<li><a>' +\n      _this.drawerInstance.t('Send backwards') +\n    '</a></li>');\n    util.bindClick($sendBackwards.find('a'), eventsNS, this._sendObjectBackwards.bind(this, fabricItem));\n    _this.$contextMenu.append($sendBackwards);\n\n    var $bringToFront = $('<li><a>' +\n      _this.drawerInstance.t('Bring to front') +\n    '</a></li>');\n    util.bindClick($bringToFront.find('a'), eventsNS, this._bringObjectToFront.bind(this, fabricItem));\n\n    _this.$contextMenu.append($bringToFront);\n\n    var $sendToBack = $('<li><a>' +\n      _this.drawerInstance.t('Send to back') +\n    '</a></li>');\n    util.bindClick($sendToBack.find('a'), eventsNS, this._sendObjectToBack.bind(this, fabricItem));\n\n    _this.$contextMenu.append($sendToBack);\n\n    var $duplicate = $('<li><a>' +\n    _this.drawerInstance.t('Duplicate') +\n    '</a></li>');\n    util.bindClick($duplicate.find('a'), eventsNS, this._duplicateObject.bind(this, fabricItem));\n    _this.$contextMenu.append($duplicate);\n\n    var $remove = $('<li><a>' +\n      _this.drawerInstance.t('Remove') +\n    '</a></li>');\n    util.bindClick($remove.find('a'), eventsNS, this._removeObject.bind(this, fabricItem));\n    _this.$contextMenu.append($remove);\n\n    var paddings = 20;\n    if (_this.drawerInstance.touchDevice) {\n      paddings = _this.drawerInstance.options.toolbarSizeTouch;\n    } else {\n      paddings = _this.drawerInstance.options.toolbarSize;\n    }\n\n    paddings = paddings / 3;\n\n    _this.$contextMenu.find('li > a').each(function (k, v) {\n      $(v).css({\n        'padding-top': paddings + 'px',\n        'padding-bottom': paddings + 'px'\n      });\n    });\n\n    _this.drawerInstance.$canvasEditContainer.append(_this.$contextMenu);\n\n    this._positionMenu(fabricItem, util.getEventPosition(event));\n  };\n\n  /**\n   * Hides context menu.\n   */\n  ShapeContextMenu.prototype.hideContextMenu = function () {\n    if (this.$contextMenu) {\n      this.$contextMenu.remove();\n    }\n  };\n\n\n  /**\n   * Set Menu left and top coords.\n   * @param {number} left\n   * @param {number} top\n   */\n  ShapeContextMenu.prototype.setMenuPosition = function(left, top) {\n    this.left = Number(left);\n    this.top  = Number(top);\n    this.$contextMenu.css('left', left + 'px');\n    this.$contextMenu.css('top', top + 'px');\n  };\n\n\n  /**\n   * Get menu origin.\n   * @return {Object} object with keys {left, top}\n   */\n  ShapeContextMenu.prototype.getMenuPosition = function() {\n    return {left : this.left, top: this.top};\n  };\n\n\n  /**\n   * Calcs menu position based on plugin options. click coords and object coords.\n   * Then adjusts menu position to fit viewport.\n   *\n   * @param  {fabric.Object} fabricItem object for which context menu is called\n   * @param  {Coords} clickCoords coords of mouse click\n   */\n  ShapeContextMenu.prototype._positionMenu = function (fabricItem, clickCoords) {\n    // calc menu starting point based  on options\n    var canvasOffset = $(this.drawerInstance.fCanvas.upperCanvasEl).offset();\n    var left = 0;\n    var top = 0;\n\n    var optionsType = this.drawerInstance.touchDevice ? 'touch' : 'mouse';\n    var positionOption = this.options.position[optionsType];\n\n\n    if (positionOption == 'shapeRightBottom') {\n      left = fabricItem.left + fabricItem.width;\n      top = fabricItem.top + fabricItem.height;\n    } else if (positionOption == 'cursor') {\n      left = clickCoords.left - canvasOffset.left + 10;\n      top = clickCoords.top - canvasOffset.top + 10;\n    }\n\n    var adjustedCoords = {};\n    if (this.options.customFitViewportMethod) {\n      adjustedCoords = this.options.customFitViewportMethod(left, top);\n    } else {\n      adjustedCoords = this._calcCoordsToFitViewport(left, top);\n    }\n\n    left = adjustedCoords.left;\n    top  = adjustedCoords.top;\n\n    this.setMenuPosition(left, top);\n  };\n\n\n /**\n  * Calcualtes new coords for conetx menu to fit in viewport\n  * @param  {number} left current menu origin left\n  * @param  {number} top  current menu origin coord\n  * @return {Object}      returns Object with keys {left, top}\n  */\n ShapeContextMenu.prototype._calcCoordsToFitViewport = function (left, top) {\n    left = Number(left);\n    top  = Number(top);\n    // check if bottom edge is not outside viewport\n    var menuHeight = this.$contextMenu.height();\n    var canvasHeight = this.drawerInstance.fCanvas.height;\n    var bottom = top + menuHeight;\n    if (bottom > canvasHeight) {\n        top = canvasHeight - menuHeight - 10;\n    }\n\n    var menuWidth = this.$contextMenu.width();\n    var canvasWidth = this.drawerInstance.fCanvas.width;\n    var right = left + menuWidth;\n    if (right > canvasWidth) {\n        left = canvasWidth - menuWidth - 10;\n    }\n\n    return {left : left, top: top};\n };\n\n\n  ShapeContextMenu.prototype._bringObjectForward = function(fabricItem) {\n      this.drawerInstance.api.bringObjectForward(fabricItem);\n      this.hideContextMenu();\n      return false;\n  };\n\n  ShapeContextMenu.prototype._sendObjectBackwards = function(fabricItem) {\n      this.drawerInstance.api.sendObjectBackwards(fabricItem);\n      this.hideContextMenu();\n      return false;\n  };\n\n\n  ShapeContextMenu.prototype._bringObjectToFront = function(fabricItem) {\n      this.drawerInstance.api.bringObjectToFront(fabricItem);\n      this.hideContextMenu();\n      return false;\n  };\n\n\n  ShapeContextMenu.prototype._sendObjectToBack = function(fabricItem) {\n      this.drawerInstance.api.sendObjectToBack(fabricItem);\n      this.hideContextMenu();\n      return false;\n  };\n\n\n  ShapeContextMenu.prototype._removeObject = function(fabricItem) {\n      this.drawerInstance.api.removeObject(fabricItem);\n      this.hideContextMenu();\n      return false;\n  };\n\n\n  ShapeContextMenu.prototype._duplicateObject = function(fabricItem) {\n      this.drawerInstance.api.duplicateObject(fabricItem);\n      this.hideContextMenu();\n      return false;\n  };\n\n\n  pluginsNamespace.ShapeContextMenu = ShapeContextMenu;\n})\n","export default (function ($, pluginsNamespace, util) {\n  \"use strict\";\n\n  var emptyFunc = function () {};\n\n  var MOUSE_UP = util.mouseUp('ToggleVisibilityButton');\n  var MOUSE_DOWN = util.mouseDown('ToggleVisibilityButton');\n  var MOUSE_MOVE = util.mouseMove('ToggleVisibilityButton');\n\n  /**\n   * Provides a button toggle toolbars visibility\n   *\n   * @param {Drawer} drawer - Instance of {@link Drawer}\n   * @param {Object} options\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var ToggleVisibilityButton = function ToggleVisibilityButtonConstructor(drawer, options) {\n    /**\n     * @type {Drawer}\n     */\n    this.drawer = drawer;\n    this._setupOptions(options);\n    this.drawer.on(this.drawer.EVENT_FLOATING_TOOLBAR_CREATED, this._onToolbarCreated.bind(this));\n  };\n\n  /**\n   * Setup data\n   * @param {Object} [options] - options to save\n   * @param {String} [pluginName] - name of plugin\n   * @param {Boolean} [doNotSave] - set true to not save result as this.options\n   * @returns {Object} config of plugin\n   */\n  ToggleVisibilityButton.prototype._setupOptions = function (options, pluginName, doNotSave) {\n    pluginName = pluginName || this.name;\n    var drawer = this.drawerInstance || this.drawer,\n        optionsFromDrawer = drawer && drawer.getPluginConfig(pluginName),\n        result = $.extend(true,\n            {},\n            this._defaultOptions || {},\n            optionsFromDrawer || {},\n            options || {}\n        );\n\n    if (!doNotSave) {\n      this.options = result;\n    }\n    return result;\n  };\n\n  /**\n   * React on overcanvas mode\n   * @private\n   */\n  ToggleVisibilityButton.prototype._onOverCanvasMode = function () {\n    this.showNextItem();\n    if (!this.positionInitialized) {\n      this._setInitialPosition();\n    }\n  };\n\n  /**\n   * On toolbar created - create tool button.\n   * @private\n   */\n  ToggleVisibilityButton.prototype._onToolbarCreated = function (ev, toolbar) {\n    this.toolbar = toolbar;\n\n    var needToInitButton = this.checkConfigForButton();\n    if (needToInitButton) {\n      this.createControls(toolbar);\n      this._onOverCanvasMode();\n    }\n  };\n\n  /**\n   *\n   * @param toolbar\n   * @returns {Boolean}\n   * @private\n   */\n  ToggleVisibilityButton.prototype._checkToolbarForButton = function (toolbar) {\n    var result = false;\n    if (toolbar) {\n    var haveButton = toolbar.options.toggleVisibilityButton,\n        isPopup = toolbar.options.compactType === 'popup';\n      result = haveButton && !isPopup;\n    }\n    return result;\n  };\n\n  /**\n   * Check current config of drawer for toolbars that need button\n   * @returns {Boolean}\n   */\n  ToggleVisibilityButton.prototype.checkConfigForButton = function () {\n    var drawingToolsToolbar = this.drawer.toolbars.drawingToolsToolbar,\n        toolOptionsToolbar = this.drawer.toolbars.toolOptionsToolbar,\n        settingsToolbar = this.drawer.toolbars.settingsToolbar,\n\n        drawingToolsHave = this._checkToolbarForButton(drawingToolsToolbar),\n        toolOptionsHave = this._checkToolbarForButton(toolOptionsToolbar),\n        settingsHave = this._checkToolbarForButton(settingsToolbar),\n        needToInit = drawingToolsHave || toolOptionsHave || settingsHave,\n        toolbarsForToggle = [];\n    if (drawingToolsHave) {\n      toolbarsForToggle.push(drawingToolsToolbar);\n    }\n    if (toolOptionsHave) {\n      toolbarsForToggle.push(toolOptionsToolbar);\n    }\n    if (settingsHave) {\n      toolbarsForToggle.push(settingsToolbar);\n    }\n    this.toolbarsForToggle = toolbarsForToggle;\n    return needToInit;\n  };\n\n  /**\n   * @param toolbar\n   * @private\n   */\n  ToggleVisibilityButton.prototype.createControls = function (toolbar) {\n    this._createAndAddButton(toolbar);\n    this.showButton();\n  };\n\n  /**\n   * Deletes tool button.\n   * If  doDeleteToolbarCreationListeners is true - removes listeners of toolbar creation event.\n   * So, tool will not appear on toolbar next time, when toolbar is created.\n   *\n   * @param {boolean} doDeleteToolbarCreationListeners\n   */\n  ToggleVisibilityButton.prototype.removeTool = function (doDeleteToolbarCreationListeners) {\n    if (this.deleteControls) {\n      this.deleteControls();\n    }\n\n    // stop listening toolbar creation\n    if (doDeleteToolbarCreationListeners) {\n      this.drawer.off(this.drawer.EVENT_FLOATING_TOOLBAR_CREATED, this._bindedOnToolbarCreated);\n    }\n  };\n\n\n  /**\n   * Move button over canvas\n   * @param {Number} [left] - new offset of button\n   * @param {Number} [top] - new offset of button\n   */\n  ToggleVisibilityButton.prototype.moveButton = function (left, top) {\n    if (!this.positionLimit) {\n      this.refreshPositionLimits();\n    }\n    left = left > this.positionLimit.left ? this.positionLimit.left : left;\n    top = top > this.positionLimit.top ? this.positionLimit.top : top;\n\n    left = left < 0 ? 0 : left;\n    top = top < 0 ? 0 : top;\n\n\n    this.latestState = {\n      left: left || 0,\n      top: top || 0\n    };\n    this.$button.css({\n      left: left + 'px',\n      top: top + 'px'\n    });\n  };\n\n  /**\n   * Restore initial position/state of button\n   * @private\n   */\n  ToggleVisibilityButton.prototype._setInitialPosition = function () {\n    var offsetLeft = 0,\n        offsetTop = 0,\n        insidePlaceholders = this.drawer.toolbars.toolbarPlaceholders.inside,\n        $insideTopPlaceholderEl = insidePlaceholders && insidePlaceholders.top && insidePlaceholders.top.$element,\n        $insideLeftPlaceholderEl = insidePlaceholders && insidePlaceholders.left && insidePlaceholders.left.$element;\n    if ($insideTopPlaceholderEl && $insideTopPlaceholderEl.length) {\n      offsetTop += $insideTopPlaceholderEl.height();\n    }\n    if ($insideLeftPlaceholderEl && $insideLeftPlaceholderEl.length) {\n      offsetLeft += $insideLeftPlaceholderEl.width();\n    }\n    this.positionInitialized = true;\n    this.moveButton(offsetLeft, offsetTop);\n  };\n\n\n  /**\n   * Creates and adds button to toolbar.\n   * @param  {DrawerToolbar} toolbar\n   * @private\n   */\n  ToggleVisibilityButton.prototype._createAndAddButton = function (toolbar) {\n    var $button,\n        $body = $('body'),\n        toggleVisibilityButtonConf = {\n          buttonOrder: this.options.buttonOrder,\n          additionalClass: 'btn-toggle-canvas hidden',\n          iconClass: 'fa-eye',\n          tooltipText: this.drawer.t('Toggle toolbar vision')\n        };\n    $button = toolbar.addButton(toggleVisibilityButtonConf);\n\n    this.$button = $button;\n\n    var buttonLeft = (this.latestState && this.latestState.left) || 0,\n        buttonTop = (this.latestState && this.latestState.top) || 0;\n    this.moveButton(buttonLeft, buttonTop);\n    // set all mouse handlers:\n    // handle mouse move while tool is active\n    $body.off(MOUSE_MOVE).on(MOUSE_MOVE, this._onMouseMove.bind(this));\n\n    // handle mouse down and mouse up\n    $button.off(MOUSE_DOWN).on(MOUSE_DOWN, this._onMouseDown.bind(this));\n    $body.off(MOUSE_UP).on(MOUSE_UP, this._onMouseUp.bind(this));\n\n    // util.bindLongPress($button, 'move-button');\n\n  };\n\n\n\n  /**\n   * React on mouse down\n   * @param {Event} event\n   * @private\n   */\n  ToggleVisibilityButton.prototype._onMouseDown = function (event) {\n    // turn erasing on\n    var self = this;\n    this.moveNow = true;\n    this.triggerClick = true;\n\n    this.refreshSizes();\n    this.refreshPositionLimits();\n\n    util.setTimeout(function () {\n      self.triggerClick = false;\n    }, 200);\n  };\n\n\n  /**\n   * React on mouse up\n   * @param {Event} event\n   * @private\n   */\n  ToggleVisibilityButton.prototype._onMouseUp = function (event) {\n    var self = this,\n        isButton = event.target === this.$button.get(0) || this.$button.find(event.target).length;\n    this.moveNow = false;\n    this.dragNow = false;\n    this.$button.removeClass('dragging');\n    if (isButton && this.triggerClick && !this.touchRightNow) {\n      this.triggerClick = false;\n      this.touchRightNow = true;\n      util.setTimeout(function () {\n        self.touchRightNow = false;\n      }, 400);\n      this.showNextItem();\n    }\n  };\n\n  /**\n   * Listens for mouse movement\n   * @param {Event} event\n   * @private\n   */\n  ToggleVisibilityButton.prototype._onMouseMove = function (event) {\n    if (this.moveNow) {\n\n      if (!this.dragNow) {\n        this.$button.addClass('dragging');\n        this.dragNow = true;\n      }\n      if (!this.latestSizes) {\n        this.refreshSizes();\n      }\n      var eventPos = util.getEventPosition(event),\n          latestSizes = this.latestSizes,\n          canvasSize = latestSizes.canvas;\n\n      var left = eventPos.left - canvasSize.left - latestSizes.button.width/2 - latestSizes.scroll.left;\n      var top = eventPos.top - canvasSize.top - latestSizes.button.height/2 - latestSizes.scroll.top;\n\n      this.triggerClick = false;\n      this.moveButton(left, top);\n\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  };\n\n  /**\n   * Refresh max sizes of button offset\n   */\n  ToggleVisibilityButton.prototype.refreshSizes = function () {\n    var result = {};\n\n    var fCanvas = this.drawer.fCanvas,\n        canvasSizeBox = fCanvas.upperCanvasEl.getBoundingClientRect(),\n        buttonSizeBox = this.$button[0].getBoundingClientRect();\n    result.canvas = canvasSizeBox;\n    result.button = buttonSizeBox;\n    result.scroll = util.getScrollTopFromElement(this.$button);\n    this.latestSizes = result;\n    return result;\n  };\n\n  /**\n   *\n   */\n  ToggleVisibilityButton.prototype.refreshPositionLimits = function () {\n    var buttonSize = this.$button.get(0).getBoundingClientRect(),\n        borderSize = 2;\n    this.positionLimit = {\n      left: this.drawer.width - buttonSize.width - borderSize,\n      top: this.drawer.height - buttonSize.height - borderSize,\n    };\n  };\n\n  /**\n   * Show button\n   */\n  ToggleVisibilityButton.prototype.showButton = function () {\n    this.$button.removeClass('hidden');\n  };\n\n  /**\n   * Hide button\n   */\n  ToggleVisibilityButton.prototype.hideButton = function () {\n    this.$button.addClass('hidden');\n  };\n\n  /**\n   * Toggle current visible toolbar\n   */\n  ToggleVisibilityButton.prototype.showNextItem = function () {\n    var self = this,\n        haveVisible,\n        nextToolbar,\n        firstToolbar = this.toolbarsForToggle[0];\n    this.toolbarsForToggle.forEach(function(toolbar, i){\n      if (!toolbar.invisible) {\n        var indexOfNextToolbar = i +1;\n        haveVisible = true;\n        nextToolbar = self.toolbarsForToggle[indexOfNextToolbar];\n      }\n      toolbar.hideToolbar();\n    });\n    if (haveVisible) {\n      if (nextToolbar) {\n        nextToolbar.showToolbar();\n      }\n    } else {\n      firstToolbar.showToolbar();\n    }\n  };\n\n  pluginsNamespace.ToggleVisibilityButton = ToggleVisibilityButton;\n})\n","export default (function (global, $, pluginsNamespace) {\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = {});\n\n  /**\n   * @param {DrawerJs.Drawer} drawer\n   * @param {Object} [options]\n   * @memberof DrawerJs.plugins\n   * @constructor\n   */\n  var ZoomViewport = function ZoomViewportConstr(drawer, options) {\n    this.drawer = drawer;\n    this.i = 0;\n    this.position = new fabric.Point(0, 0);\n\n    this.zoom = 1;\n    return this;\n  };\n\n  /**\n   * Set zoom depending on last settings\n   * @param {Number} newZoom - zoom value\n   * @param {Number} x - x coordinate of zoom center point\n   * @param {Number} y - y coordinate of zoom center point\n   * @param {Boolean} [strict] - do not change given coords\n   * @returns {Object}\n   */\n  ZoomViewport.prototype.setViewport = function (newZoom, x, y, strict) {\n    this._adjustPosition(newZoom, x, y, strict);\n    this._render();\n    return this.getData();\n  };\n\n  /**\n   * Get current viewport data\n   * @returns {Object}\n   */\n  ZoomViewport.prototype.getData = function () {\n    var data = {},\n        zoomCenter = this.getZoomCenter();\n    data.zoom = this.zoom;\n    data.position = {\n      x: this.position.x,\n      y: this.position.y\n    };\n    data.zoomCenterX = zoomCenter.x;\n    data.zoomCenterY = zoomCenter.y;\n    return data;\n  };\n\n  /**\n   * Get zoom center coords\n   * @returns {Object}\n   */\n  ZoomViewport.prototype.getZoomCenter = function () {\n    var result = {},\n        width = this.drawer.width,\n        height = this.drawer.height,\n        availableX = width / this.zoom,\n        availableY = height / this.zoom,\n        zoomCenterX = availableX / 2 - this.position.x,\n        zoomCenterY = availableY / 2 - this.position.y;\n\n    result.x = zoomCenterX;\n    result.y = zoomCenterY;\n    return result;\n  };\n\n  /**\n   *\n   * @param {Number} zoom - zoom value\n   * @param {Number} x - x offset of canvas\n   * @param {Number} y - y offset of canvas\n   * @returns {{x: (number), y: (number)}}\n   * @private\n   */\n  ZoomViewport.prototype._validatePosition = function (zoom, x, y) {\n    x = x || 0;\n    y = y || 0;\n    var width = this.drawer.width,\n        height = this.drawer.height,\n        availableX = width / zoom,\n        availableY = height / zoom,\n        maxPositionX = width - availableX,\n        maxPositionY = height - availableY;\n    if (x < -maxPositionX) {\n      x = -maxPositionX;\n    }\n    if (y < -maxPositionY) {\n      y = -maxPositionY;\n    }\n    if (x > 0) {\n      x = 0;\n    }\n    if (y > 0) {\n      y = 0;\n    }\n    return {\n      x: x,\n      y: y\n    };\n  };\n\n  /**\n   * @param {Number} [zoom]\n   */\n  ZoomViewport.prototype.setToCenterOfCanvas = function (zoom) {\n    zoom = zoom || this.zoom;\n    var halfWidth = this.drawer.width / 2,\n        halfHeight = this.drawer.height / 2;\n\n    this._adjustPosition(zoom, halfWidth, halfHeight, true);\n    this._render();\n  };\n\n  /**\n   * Render canvas\n   * @private\n   */\n  ZoomViewport.prototype._render = function () {\n    this.drawer.fCanvas.renderAll();\n  };\n\n  /**\n   * Update position values\n   * @param {Number} zoom - zoom value\n   * @param {Number} x - x offset of canvas\n   * @param {Number} y - y offset of canvas\n   */\n  ZoomViewport.prototype.setPosition = function (zoom, x, y) {\n    zoom = zoom || this.zoom;\n    var validatedPoint = this._validatePosition(zoom, x, y);\n    this.position.x = validatedPoint.x;\n    this.position.y = validatedPoint.y;\n    this.zoom = zoom;\n  };\n\n  /**\n   * Process coordinates of center point\n   * @param {Number} newZoom - zoom value\n   * @param {Number} x - x coordinate of zoom center point\n   * @param {Number} y - y coordinate of zoom center point\n   * @param {Boolean} [strict] - do not change given coords\n   * @private\n   */\n  ZoomViewport.prototype._adjustPosition = function (newZoom, x, y, strict) {\n    this.position.x = this.position.x || 0;\n    this.position.y = this.position.y || 0;\n    var width = this.drawer.width,\n        height = this.drawer.height,\n        k = newZoom / this.zoom,\n        oldAvailableX = width / this.zoom,\n        oldAvailableY = height / this.zoom,\n        newAvailableX = width / newZoom,\n        newAvailableY = height / newZoom,\n        newX,\n        newY;\n\n    if (strict) {\n      newX = newAvailableX/2 - x;\n      newY = newAvailableY/2 - y;\n    } else {\n      if (x !== undefined && y !== undefined) {\n        var deltaX = (x - width / 2) / this.zoom,\n            deltaY = (y - width / 2) / this.zoom;\n        newX = this.position.x - deltaX - ((oldAvailableX - newAvailableX ) / 2);\n        newY = this.position.y - deltaY - ((oldAvailableY - newAvailableY ) / 2);\n      } else {\n        newX = width / 2 - k * (width / 2 - this.position.x);\n        newY = height / 2 - k * (height / 2 - this.position.y);\n      }\n    }\n    this.setPosition(newZoom, newX, newY);\n    return this.position;\n  };\n\n  pluginsNamespace.ZoomViewport = ZoomViewport;\n})\n","export default (function (global, $, pluginsNamespace, DrawerApi, util) {\n  'use strict';\n  var fabric = global.fabric || (global.fabric = {});\n\n  var MOUSE_DOWN = util.mouseDown('Zoom');\n  var MOUSE_MOVE = util.mouseMove('Zoom');\n  var MOUSE_UP = util.mouseUp('Zoom');\n  var isWebkit = util.checkBrowser('webkit'),\n      cursorPrefix = isWebkit ? '-webkit-' : '';\n\n  /**\n   * Provides ability to change zoom\n   *\n   * @param {DrawerJs.Drawer} drawer\n   * @param {DrawerJs.plugins.Zoom.defaultOptions} [options]\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var Zoom = function ZoomConstructor(drawer, options) {\n    /**\n     * @type {Drawer}\n     */\n    this.drawer = drawer;\n    this._setupOptions(options);\n    this._init();\n  };\n\n  /**\n   * @typedef {Object} defaultOptions\n   * @memberOf DrawerJs.plugins.Zoom\n   * @property {Boolean} [enabled=true] - Zoom is enabled\n   * @property {Boolean} [enableWhenNoActiveTool=true] - Allow to move canvas when no object is selected and is no active tool.\n   * @property {Boolean} [enableButton=true] - Add \"move canvas\" button to settings toolbar\n   * @property {Boolean} [showZoomTooltip=true] - Show tooltip with current zoom value on any change of zoom props\n   * @property {Boolean} [enableMove=true] - Enable move of canvas\n   * @property {Boolean} [useWheelEvents=true] - Attach wheel events\n   * @property {Boolean} [moveCanvasOnWheel=true] - Change center of viewport on wheel events depending on mouse position.\n   * @property {Number} [moveCanvasOnWheelStep=0] - Attach wheel events. Valid range of value is from 0(center of\n   * viewport will not changed) to 1(center of viewport will move to mouse position). Most comfortable value is 0.05-0.15\n   * @property {Number} [zoomStep=1.05] - Step of each zoom change. (1.05 = 105%)\n   * @property {Number} [defaultZoom=1] - Default zoom value\n   * @property {Number} [minZoom=1] - Min zoom value\n   * @property {Number} [maxZoom=32] - Max zoom value\n   *\n   */\n\n  /**\n   * @type {DrawerJs.plugins.Zoom.defaultOptions}\n   * @private\n   */\n  Zoom.prototype._defaultOptions = {\n    enabled: true,\n\n    enableWhenNoActiveTool: true,\n    enableButton: true,\n\n    showZoomTooltip: true,\n    enableMove: true,\n    useWheelEvents: true,\n\n    moveCanvasOnWheel: true,\n    moveCanvasOnWheelStep: 0,\n\n    zoomStep: 1.05,\n    defaultZoom: 1,\n    maxZoom: 32,\n    minZoom: 1,\n    buttonOrder: 11\n  };\n\n  /**\n   * Init zoom plugin\n   * @private\n   */\n  Zoom.prototype._init = function () {\n    this.viewport = new pluginsNamespace.ZoomViewport(this.drawer);\n\n    this.enabled = this.options.enabled;\n    this.zoomIsOn = true;\n    this.currentZoom = 1;\n\n    this._updateProto();\n    if (this.enabled) {\n      this._attachDrawerEvents();\n      this._updateDrawerValues();\n    }\n  };\n\n  /**\n   * Setup data\n   * @param {Object} [options] - options to save\n   * @param {String} [pluginName] - name of plugin\n   * @param {Boolean} [doNotSave] - set true to not save result as this.options\n   * @returns {Object} config of plugin\n   */\n  Zoom.prototype._setupOptions = function (options, pluginName, doNotSave) {\n    pluginName = pluginName || this.name;\n    var drawer = this.drawerInstance || this.drawer,\n        optionsFromDrawer = drawer && drawer.getPluginConfig(pluginName),\n        result = $.extend(true,\n            {},\n            this._defaultOptions || {},\n            optionsFromDrawer || {},\n            options || {}\n        );\n\n    if (!doNotSave) {\n      this.options = result;\n    }\n    return result;\n  };\n\n  /**\n   * Update prototype of fabric object/canvas\n   * @private\n   */\n  Zoom.prototype._updateProto = function () {\n    this.drawer.on(this.drawer.EVENT_CANVAS_READY, this._updateCanvasProto.bind(this));\n    this.drawer.on(this.drawer.EVENT_CANVAS_READY, this._updateObjectProto.bind(this));\n  };\n\n  /**\n   * Attach drawer events\n   * @private\n   */\n  Zoom.prototype._attachDrawerEvents = function () {\n    this.drawer.on(this.drawer.EVENT_CONFIG_TOOLBAR_CREATED, this._onToolbarCreated.bind(this));\n    this.drawer.on(this.drawer.EVENT_RESTORE_DEFAULT_ZOOM, this.restoreDefaultZoom.bind(this));\n\n    this.drawer.on(this.drawer.EVENT_DO_ACTIVATE_TOOL, this._onActivateTool.bind(this));\n    this.drawer.on(this.drawer.EVENT_DO_DEACTIVATE_TOOL, this._ctxUpperRestore.bind(this));\n\n    this.drawer.on(this.drawer.EVENT_BEFORE_RENDER, this._ctxSet.bind(this));\n    this.drawer.on(this.drawer.EVENT_AFTER_RENDER, this._ctxRestore.bind(this));\n\n    this.drawer.on(this.drawer.EVENT_ZOOM_SET, this._ctxSet.bind(this));\n    this.drawer.on(this.drawer.EVENT_ZOOM_UNSET, this._ctxUnset.bind(this));\n    this.drawer.on(this.drawer.EVENT_ZOOM_RESTORE, this._ctxRestore.bind(this));\n\n    this.drawer.on(this.drawer.EVENT_ZOOM_UPPER_SET, this._ctxUpperSet.bind(this));\n    this.drawer.on(this.drawer.EVENT_ZOOM_UPPER_UNSET, this._ctxUpperUnset.bind(this));\n    this.drawer.on(this.drawer.EVENT_ZOOM_UPPER_RESTORE, this._ctxUpperRestore.bind(this));\n\n    this.drawer.on(this.drawer.EVENT_CANVAS_START_RESIZE, this._ctxSet.bind(this));\n    this.drawer.on(this.drawer.EVENT_CANVAS_STOP_RESIZE, this._ctxRestore.bind(this));\n\n    this.drawer.on(this.drawer.EVENT_SELECTION_CLEARED, this._refreshButton.bind(this));\n    this.drawer.on(this.drawer.EVENT_OBJECT_SELECTED, this._refreshButton.bind(this));\n\n    this.drawer.on(this.drawer.EVENT_TOOL_ACTIVATED, this._refreshButton.bind(this));\n    this.drawer.on(this.drawer.EVENT_TOOL_DEACTIVATED, this._refreshButton.bind(this));\n  };\n\n  Zoom.prototype._refreshButton = function (fEvent) {\n    this._refreshMoveButtonState();\n  };\n\n  Zoom.prototype._ctxUpperSet = function (fEvent) {\n    var fCanvas = this.drawer.fCanvas,\n        ctxUpper = fCanvas.contextTop;\n    ctxUpper.save();\n    ctxUpper.scale(this.viewport.zoom, this.viewport.zoom);\n    ctxUpper.translate(this.viewport.position.x, this.viewport.position.y);\n  };\n\n  Zoom.prototype._ctxUpperUnset = function (fEvent) {\n    var fCanvas = this.drawer.fCanvas,\n        ctxUpper = fCanvas.contextTop;\n    ctxUpper.save();\n    ctxUpper.scale(1 / this.viewport.zoom, 1 / this.viewport.zoom);\n    ctxUpper.translate(-this.viewport.position.x, -this.viewport.position.y);\n\n  };\n\n  Zoom.prototype._ctxUpperRestore = function (fEvent) {\n    var fCanvas = this.drawer.fCanvas,\n        ctxUpper = fCanvas.contextTop;\n    ctxUpper.restore();\n  };\n\n  Zoom.prototype._ctxSet = function (fEvent) {\n    var fCanvas = this.drawer.fCanvas,\n        ctx = fCanvas.contextContainer;\n    ctx.save();\n    ctx.scale(this.viewport.zoom, this.viewport.zoom);\n    ctx.translate(this.viewport.position.x, this.viewport.position.y);\n  };\n\n  Zoom.prototype._ctxUnset = function (fEvent) {\n    var fCanvas = this.drawer.fCanvas,\n        ctx = fCanvas.contextContainer;\n    ctx.save();\n    ctx.scale(1 / this.viewport.zoom, 1 / this.viewport.zoom);\n    ctx.translate(-this.viewport.position.x, -this.viewport.position.y);\n  };\n\n  Zoom.prototype._ctxRestore = function (fEvent) {\n    var fCanvas = this.drawer.fCanvas,\n        ctx = fCanvas.contextContainer;\n    ctx.restore();\n  };\n  /**\n   * React on activate of tool\n   * @param {fabric.Event} fEvent event obj\n   * @param {BaseTool} tool tool object\n   * @private\n   */\n  Zoom.prototype._onActivateTool = function (fEvent, tool) {\n    if (!tool.doNotZoomOnActivate) {\n      this._ctxUpperSet();\n    }\n  };\n\n  /**\n   * React on deactivate of tool\n   * @param {fabric.Event} fEvent event obj\n   * @param {BaseTool} tool tool object\n   * @private\n   */\n  Zoom.prototype._onDeactivateTool = function (fEvent, tool) {\n    if (!tool.doNotZoomOnActivate) {\n      this._ctxUpperRestore();\n    }\n  };\n\n  /**\n   * On toolbar created - create tool button.\n   * @param {fabric.Event} fEvent - event obj\n   * @param {DrawerToolbar} toolbar - Drawer toolbar\n   */\n  Zoom.prototype._onToolbarCreated = function (fEvent, toolbar) {\n    this.toolbar = toolbar;\n    var needToInitButton = true;\n    if (needToInitButton) {\n      this.createControls(toolbar);\n      this._createHelperElements();\n      this._attachEvents();\n    }\n  };\n\n  /**\n   * Remove helper elements\n   * @private\n   */\n  Zoom.prototype._removeHelperElements = function () {\n    if (this.$zoomTooltip && this.$zoomTooltip.length) {\n      this.$zoomTooltip.remove();\n      delete this.$zoomTooltip;\n    }\n  };\n\n  /**\n   * Create helper elements\n   * @private\n   */\n  Zoom.prototype._createHelperElements = function () {\n    this._removeHelperElements();\n    var zoomTooltipHtml = '<div class=\"zoom-tooltip transparent-tooltip\"></div>',\n        $zoomTooltip = $(zoomTooltipHtml),\n        $canvasContainer = this.drawer.$canvasEditContainer;\n\n    this.$zoomTooltip = $zoomTooltip;\n    $canvasContainer.append($zoomTooltip);\n  };\n\n  /**\n   * Attach events for helper elements\n   * @private\n   */\n  Zoom.prototype._attachEvents = function () {\n    var self = this;\n    if (this.options.showZoomTooltip) {\n      var hideFunc = function () {\n            self.$zoomTooltip.addClass('transparent-tooltip');\n          },\n          debouncedTooltipHideFunc = util.debounce(hideFunc, 1000);\n\n      this.drawer.on(this.drawer.EVENT_ZOOM_CHANGE, function (fEvent, zoomProps) {\n        var zoomAsText = parseInt(zoomProps.zoom * 100, 10) + '%';\n        self.$zoomTooltip.text(zoomAsText);\n        self.$zoomTooltip.removeClass('transparent-tooltip');\n        debouncedTooltipHideFunc();\n      });\n    }\n    if (this.options.enableButton) {\n      this.drawer.on(this.drawer.EVENT_ZOOM_CHANGE, function (fEvent, zoomProps) {\n        var stateIsChanged = (zoomProps.prevValues.zoom === 1 && zoomProps.zoom !== 1) || (zoomProps.zoom === 1 && zoomProps.prevValues.zoom !== 1);\n        if (stateIsChanged) {\n          self._refreshMoveButtonState();\n        }\n      });\n    }\n  };\n\n\n  /**\n   * Create controls\n   * @param {DrawerToolbar} toolbar - Drawer toolbar\n   */\n  Zoom.prototype.createControls = function (toolbar) {\n    this._createAndAddButton(toolbar);\n    this._attachWheelEvents();\n    this._attachMoveEvents();\n    this._attachTouchEvents();\n\n  };\n\n\n  /**\n   * Creates and adds buttons to toolbar.\n   * @param  {DrawerToolbar} toolbar\n   */\n  Zoom.prototype._createAndAddButton = function (toolbar) {\n    var $zoomInButton,\n        $zoomOutButton,\n        $moveCanvasButton,\n        zoomInButtonConf = {\n          buttonOrder: this.options.buttonOrder,\n          additionalClass: 'btn-zoom-in',\n          iconClass: 'fa-search-plus',\n          tooltipText: this.drawer.t('Zoom in'),\n          clickHandler: this._onZoomIn.bind(this)\n        },\n        zoomOutButtonConf = {\n          buttonOrder: this.options.buttonOrder,\n          additionalClass: 'btn-zoom-out',\n          iconClass: 'fa-search-minus',\n          tooltipText: this.drawer.t('Zoom out'),\n          clickHandler: this._onZoomOut.bind(this)\n        },\n        moveCanvasButtonConf = {\n          buttonOrder: this.options.buttonOrder,\n          additionalClass: 'btn-zoom-move',\n          iconClass: 'fa-search',\n          tooltipText: this.drawer.t('Move canvas'),\n          clickHandler: this._onMoveButtonClick.bind(this)\n        };\n    $zoomInButton = toolbar.addButton(zoomInButtonConf);\n    $zoomOutButton = toolbar.addButton(zoomOutButtonConf);\n\n    if (this.options.enableMove && this.options.enableButton) {\n      $moveCanvasButton = toolbar.addButton(moveCanvasButtonConf);\n    }\n\n    this.toolbar = toolbar;\n    this.$zoomInButton = $zoomInButton;\n    this.$zoomOutButton = $zoomOutButton;\n    this.$moveCanvasButton = $moveCanvasButton;\n  };\n\n  /**\n   * React on \"Move canvas\" button click\n   * @param {Event} event\n   * @private\n   */\n  Zoom.prototype._onMoveButtonClick = function (event) {\n    var isDisabled = this.$moveCanvasButton.hasClass('disabled');\n    if (!isDisabled) {\n      this.moveButtonIsActive = !this.moveButtonIsActive;\n      this._refreshMoveButtonState(true);\n    }\n  };\n\n  /**\n   * Collect data for zoom from event\n   * @param {Event} event\n   * @param {Boolean} [changeZoomCenter]\n   * @param {Boolean} [zoomIn]\n   * @returns {Object}\n   * @private\n   */\n  Zoom.prototype._getZoomPopertiesFromEvent = function (event, changeZoomCenter, zoomIn) {\n    var result = {},\n        newZoomCenterX,\n        newZoomCenterY,\n        newZoomValue = this.currentZoom * (zoomIn ? this.options.zoomStep : 1 / this.options.zoomStep);\n    if (changeZoomCenter) {\n      var eventPosition = this.drawer.getRelativeEventPosition(event, true),\n          zoomCenterXFromEvent = eventPosition.left / newZoomValue - this.viewport.position.x,\n          zoomCenterYFromEvent = eventPosition.top / newZoomValue - this.viewport.position.y,\n          deltaX = zoomCenterXFromEvent - this.zoomCenterX,\n          deltaY = zoomCenterYFromEvent - this.zoomCenterY;\n\n      newZoomCenterX = this.zoomCenterX + deltaX * this.options.moveCanvasOnWheelStep;\n      newZoomCenterY = this.zoomCenterY + deltaY * this.options.moveCanvasOnWheelStep;\n    } else {\n      newZoomCenterX = this.zoomCenterX;\n      newZoomCenterY = this.zoomCenterY;\n    }\n    result.zoom = newZoomValue;\n    result.zoomCenterX = newZoomCenterX;\n    result.zoomCenterY = newZoomCenterY;\n    return result;\n  };\n\n  /**\n   * Trigger zoom in event\n   * @param {Event} event\n   * @param {Boolean} [changeZoomCenter]\n   * @private\n   */\n  Zoom.prototype._onZoomIn = function (event, changeZoomCenter) {\n    if (this.zoomIsOn) {\n      var zoomProps = this._getZoomPopertiesFromEvent(event, changeZoomCenter, true);\n      this.setZoom(zoomProps.zoom, zoomProps.zoomCenterX, zoomProps.zoomCenterY, true);\n    }\n  };\n\n  /**\n   * Trigger zoom out event\n   * @param {Event} event\n   * @param {Boolean} [changeZoomCenter]\n   * @private\n   */\n  Zoom.prototype._onZoomOut = function (event, changeZoomCenter) {\n    if (this.zoomIsOn) {\n      var zoomProps = this._getZoomPopertiesFromEvent(event, changeZoomCenter, false);\n      this.setZoom(zoomProps.zoom, zoomProps.zoomCenterX, zoomProps.zoomCenterY, true);\n    }\n  };\n\n  /**\n   * Attach wheel event to canvas\n   * @private\n   */\n  Zoom.prototype._attachWheelEvents = function () {\n    if (this.options.useWheelEvents) {\n      this.wheelEventsAttached = true;\n      var canvasContainer = this.drawer.$canvasEditContainer.find('.canvas-container').get(0);\n      util.addWheelListener(canvasContainer, this._onWheelEvent.bind(this), true); //@todo capture\n    }\n  };\n\n  /**\n   * Attach move events\n   * @private\n   */\n  Zoom.prototype._attachMoveEvents = function () {\n    if (this.options.enableMove) {\n      var $document = $(window.document),\n          $canvasContainer = this.drawer.$canvasEditContainer.find('.canvas-container');\n\n      $canvasContainer.off(MOUSE_DOWN).on(MOUSE_DOWN, this._moveOnMouseDown.bind(this));\n      $document.off(MOUSE_MOVE).on(MOUSE_MOVE, this._moveOnMouseMove.bind(this));\n      $document.off(MOUSE_UP).on(MOUSE_UP, this._moveOnMouseUp.bind(this));\n    }\n  };\n\n  /**\n   * Move canvas - React on mouse down.\n   * @param {Event} e\n   * @private\n   */\n  Zoom.prototype._moveOnMouseDown = function (e) {\n    var currActiveObj = this.drawer.fCanvas.getActiveObject(),\n        selectedTool = this.drawer.activeDrawingTool,\n        buttonIsActive = this.moveButtonIsActive,\n\n        buttonPermission = this.options.enableButton && buttonIsActive,\n        noActiveToolPermission = this.options.enableWhenNoActiveTool && (!this.options.enableButton || buttonPermission),\n        preventMove = this.currentZoom === 1 || currActiveObj || selectedTool,\n        initMove = !preventMove && (buttonPermission || noActiveToolPermission);\n\n    if (initMove) {\n      var currPoint = this.drawer.getRelativeEventPosition(e);\n\n      this.drawer.movingNow = true;\n      this.isMoving = true;\n      this.moveStartPoint = currPoint;\n      this.moveLastPoint = currPoint;\n\n      var $body = $('body');\n      this.drawer.fCanvas.defaultCursor = cursorPrefix + 'grabbing';\n      this.drawer.fCanvas.setCursor(cursorPrefix + 'grabbing');\n      $body.addClass('drawer-dragging drawer-zoom-moving');\n\n      e.preventDefault();\n      e.stopPropagation();\n      return false;\n    }\n  };\n\n  /**\n   *\n   * @private\n   */\n  Zoom.prototype._refreshMoveButtonState = function (doNotSaveState) {\n    this.savedDefaultCursor = this.savedDefaultCursor || this.drawer.fCanvas.defaultCursor;\n    if (this.options.enableButton) {\n      if (this.currentZoom === 1) {\n        this.$moveCanvasButton.addClass('disabled');\n        this.drawer.fCanvas.defaultCursor = this.savedDefaultCursor;\n        this.drawer.fCanvas.setCursor(this.savedDefaultCursor);\n      } else {\n        if (!doNotSaveState) {\n          var enableToMove = this._checkMovePermission(!doNotSaveState);\n          this.moveButtonIsActive = enableToMove;\n        }\n\n        this.$moveCanvasButton.removeClass('disabled');\n        if (this.moveButtonIsActive) {\n          this._prepareDrawerForZoom();\n          this.drawer.fCanvas.defaultCursor = cursorPrefix + 'grab';\n          this.drawer.fCanvas.setCursor(cursorPrefix + 'grab');\n          $('body').addClass('drawer-zoom-move-available');\n          this.toolbar.setActiveButton('btn-zoom-move');\n        } else {\n          this.drawer.fCanvas.defaultCursor = this.savedDefaultCursor;\n          this.drawer.fCanvas.setCursor(this.savedDefaultCursor);\n          $('body').removeClass('drawer-zoom-move-available');\n          this.toolbar.clearActiveButton();\n        }\n      }\n    } else {\n      this.drawer.fCanvas.defaultCursor = cursorPrefix + 'grab';\n      this.drawer.fCanvas.setCursor(cursorPrefix + 'grab');\n      $('body').addClass('drawer-zoom-move-available');\n    }\n  };\n\n  Zoom.prototype._prepareDrawerForZoom = function () {\n    this.drawer.trigger(this.drawer.EVENT_DO_DEACTIVATE_ALL_TOOLS);\n    this.drawer.fCanvas._clearSelection();\n    this.drawer.fCanvas.renderAll();\n  };\n\n\n\n  /**\n   *\n   * @private\n   */\n  Zoom.prototype._checkMovePermission = function (withButtonState) {\n    var currActiveObj = this.drawer.fCanvas.getActiveObject(),\n        selectedTool = this.drawer.activeDrawingTool,\n        buttonStateIsActive = withButtonState && this.moveButtonIsActive,\n        result = !currActiveObj && !selectedTool && (this.options.enableWhenNoActiveTool || buttonStateIsActive);\n    return result;\n  };\n\n  /**\n   * Move canvas - React on mouse move.\n   * @param {Event} e\n   * @private\n   */\n  Zoom.prototype._moveOnMouseMove = function (e) {\n    if (this.isMoving && this.currentZoom !== 1) {\n      var self = this,\n          moveEventPos = this.drawer.getRelativeEventPosition(e),\n          moveLastPoint = this.moveLastPoint,\n          deltaX = (moveLastPoint.left - moveEventPos.left),\n          deltaY = (moveLastPoint.top - moveEventPos.top),\n          newCenterX = this.zoomCenterX + deltaX,\n          newCenterY = this.zoomCenterY + deltaY,\n          moveDrawerFunc = function moveDrawerFunc() {\n            self.setZoom(self.currentZoom, newCenterX, newCenterY, true);\n          };\n\n      this.moveLastPoint = moveEventPos;\n      util.requestAnimationFrame(moveDrawerFunc);\n\n      e.preventDefault();\n      e.stopPropagation();\n      return false;\n    }\n  };\n\n  /**\n   * Move canvas - React on mouse up.\n   * @param {Event} e\n   * @private\n   */\n  Zoom.prototype._moveOnMouseUp = function (e) {\n    if (this.isMoving) {\n      var $body = $('body'),\n          self = this;\n\n      util.setTimeout(function () {\n        self.drawer.movingNow = false;\n      }, 0);\n      this.isMoving = false;\n      this.drawer.fCanvas.defaultCursor = cursorPrefix + 'grab';\n      this.drawer.fCanvas.setCursor(cursorPrefix + 'grab');\n      $body.removeClass('drawer-dragging drawer-zoom-moving');\n\n      e.preventDefault();\n      e.stopPropagation();\n      return false;\n    }\n  };\n\n  /**\n   * Attach wheel event to canvas\n   * @private\n   */\n  Zoom.prototype._attachTouchEvents = function () {\n      var self = this,\n          $canvasContainer = this.drawer.$canvasEditContainer,\n          startDiff,\n          lastDiff;\n\n    function getDistance(p1,p2) {\n      var result;\n      result = Math.sqrt(Math.pow(p1.left - p2.left, 2) + Math.pow(p1.top - p2.top, 2));\n      return result;\n    }\n\n    $canvasContainer.off('touchstart.drawerZoom').on('touchstart.drawerZoom', function (event) {\n      var touches = event.touches ? event.touches : event.originalEvent.touches;\n      if (self.zoomIsOn && touches && touches.length > 1) {\n        var pointPos1 = getEventPosition(event, 0),\n            pointPos2 = getEventPosition(event, 1);\n        if (!pointPos1.left || !pointPos1.top) {\n          pointPos1 = getEventPosition(window.event, 0);\n          pointPos2 = getEventPosition(window.event, 1);\n        }\n        startDiff = getDistance(pointPos1, pointPos2);\n        lastDiff = startDiff;\n        self._prepareDrawerForZoom();\n      }\n    });\n    $canvasContainer.off('touchmove.drawerZoom').on('touchmove.drawerZoom', function (event) {\n      var touches = event.touches ? event.touches : event.originalEvent.touches,\n          zoominit = self.zoomIsOn && touches && touches.length > 1;\n      if (zoominit) {\n        var pointPos1 = util.getEventPosition(event, 0),\n            pointPos2 = util.getEventPosition(event, 1);\n        if (!pointPos1.left || !pointPos1.top) {\n          pointPos1 = util.getEventPosition(window.event, 0);\n          pointPos2 = util.getEventPosition(window.event, 1);\n        }\n        var currDiff = getDistance(pointPos1, pointPos2),\n            isZoomIn = lastDiff < currDiff,\n            zoom = self.currentZoom * (isZoomIn ? self.options.zoomStep : 1 / self.options.zoomStep),\n            scrollOffset = util.getScrollOffset($canvasContainer),\n            canvasContainer = $canvasContainer.get(0),\n            canvasContainerSizes = canvasContainer.getBoundingClientRect(),\n            touchCenterX = pointPos1.left - (pointPos1.left - pointPos2.left) / 2,\n            touchCenterY = pointPos1.top - (pointPos1.top - pointPos2.top) / 2,\n            zoomCenterX = touchCenterX - canvasContainerSizes.left - scrollOffset.left,\n            zoomCenterY = touchCenterY - canvasContainerSizes.top - scrollOffset.top;\n\n        self.setZoom(zoom, zoomCenterX, zoomCenterY, true);\n        lastDiff = currDiff;\n        event.stopPropagation();\n        event.preventDefault();\n      }\n    });\n  };\n\n  /**\n   * React on wheel event\n   * @param {Event} e\n   * @private\n   */\n  Zoom.prototype._onWheelEvent = function (e) {\n    if (this.zoomIsOn) {\n      var delta = e.deltaY || e.detail || e.wheelDelta;\n      this._prepareDrawerForZoom();\n      if (delta > 0) {\n        this._onZoomOut(e, true);\n      } else {\n        this._onZoomIn(e, true);\n      }\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  };\n\n  /**\n   * Update zoom values of drawer/plugin\n   * @param {Object} [data]\n   * @private\n   */\n  Zoom.prototype._updateDrawerValues = function (data) {\n    data = data || {};\n    var width = this.drawer.width,\n        height = this.drawer.height,\n        zoomCenter = this.viewport.getZoomCenter();\n\n    this.zoomCenterX = this.zoomCenterX !== undefined ? this.zoomCenterX : zoomCenter.x;\n    this.zoomCenterY = this.zoomCenterY !== undefined ? this.zoomCenterY : zoomCenter.y;\n\n    var zoomCenterX = data.zoomCenterX !== undefined ? data.zoomCenterX : this.zoomCenterX,\n        zoomCenterY = data.zoomCenterY !== undefined ? data.zoomCenterY : this.zoomCenterY,\n        currentZoom = data.zoom;\n\n    if (typeof currentZoom !== 'number' || !isFinite(currentZoom)) {\n      currentZoom = this.currentZoom;\n      if (typeof currentZoom !== 'number' || !isFinite(currentZoom)) {\n        currentZoom = this.options.defaultZoom;\n      }\n    }\n\n    if (zoomCenterX > width) {\n      zoomCenterX = width;\n    }\n    if (zoomCenterY > height) {\n      zoomCenterY = width;\n    }\n    if (zoomCenterX < 0) {\n      zoomCenterX = 0;\n    }\n    if (zoomCenterY < 0) {\n      zoomCenterY = 0;\n    }\n    if (typeof this.options.minZoom === 'number') {\n      currentZoom = Math.max(currentZoom, this.options.minZoom);\n    }\n    if (typeof this.options.maxZoom === 'number') {\n      currentZoom = Math.min(currentZoom, this.options.maxZoom);\n    }\n\n    this.drawer.currentZoom = this.currentZoom = currentZoom;\n    this.drawer.zoomCenterX = this.zoomCenterX = zoomCenterX;\n    this.drawer.zoomCenterY = this.zoomCenterY = zoomCenterY;\n  };\n\n  /**\n   * Set zoom\n   * @param {Number} value - new zoom value\n   * @param {Number} [zoomCenterX] - x coord of new canvas center\n   * @param {Number} [zoomCenterY] - y coord of new canvas center\n   * @param {Boolean} [strict] - Set zoom center without changes\n   */\n  Zoom.prototype.setZoom = function (value, zoomCenterX, zoomCenterY, strict) {\n    var zoomValueIsValid = typeof value === 'number' && isFinite(value),\n        strictMode = strict !== undefined ? strict : !this.options.moveCanvasOnWheel,\n        prevValues,\n        zoomResult;\n    if (zoomValueIsValid) {\n      prevValues = {\n        zoom: this.currentZoom,\n        zoomCenterX: this.zoomCenterX,\n        zoomCenterY: this.zoomCenterY\n      };\n      this._updateDrawerValues({\n        zoom: value,\n        zoomCenterX: zoomCenterX,\n        zoomCenterY: zoomCenterY\n      });\n\n      zoomResult = this.viewport.setViewport(this.currentZoom, this.zoomCenterX, this.zoomCenterY, strictMode);\n      zoomResult.prevValues = prevValues;\n      this._updateDrawerValues(zoomResult);\n      this.drawer.trigger(this.drawer.EVENT_ZOOM_CHANGE, [zoomResult]);\n    } else {\n      console.info('invalid zoom value');\n    }\n  };\n\n  /**\n   * Update prototype of fabric tools\n   * @priv\n   */\n  Zoom.prototype._updateObjectProto = function () {\n    var self = this,\n        _drawControl = fabric.Object.prototype._drawControl,\n        drawControls = fabric.Object.prototype.drawControls,\n        getPointByOrigin = fabric.Object.prototype.getPointByOrigin,\n        _setCornerCoords = fabric.Object.prototype._setCornerCoords;\n\n\n    /*\n    fabric.Object.prototype._drawControl = function (control, ctx, methodName, left, top) {\n      var viewport = self.viewport,\n          zoom = viewport ? viewport.zoom : 1;\n      ctx.lineWidth = 1 / Math.max(this.scaleX, this.scaleY);\n      return _drawControl.apply(this, [control, ctx, methodName, left, top]);\n    };\n\n    fabric.Object.prototype.drawControls = function (ctx) {\n      var viewport = self.viewport,\n          zoom = viewport ? viewport.zoom : 1,\n          result;\n      this.cornerSize = this.cornerSize / zoom;\n      result = drawControls.apply(this, [ctx]);\n      this.cornerSize = this.cornerSize * zoom;\n      return result;\n    };\n    */\n\n    fabric.Object.prototype._setCornerCoords = function () {\n      var viewport = self.viewport,\n          zoom = viewport ? viewport.zoom : 1,\n          result;\n      this.cornerSize = this.cornerSize / zoom;\n      result = _setCornerCoords.apply(this, arguments);\n      this.cornerSize = this.cornerSize * zoom;\n      return result;\n    };\n\n    fabric.Object.prototype.getPointByOrigin = function () {\n      var viewport = self.viewport,\n          zoom = viewport ? viewport.zoom : 1,\n          result;\n      this.cornerSize = this.cornerSize / zoom;\n      result = getPointByOrigin.apply(this, arguments);\n      this.cornerSize = this.cornerSize * zoom;\n      return result;\n    };\n\n  };\n\n  /**\n   * Override native fabric functions\n   * @private\n   */\n  Zoom.prototype._updateCanvasProto = function () {\n    var self = this,\n        fCanvas = this.drawer.fCanvas,\n        getPointer = fCanvas.getPointer,\n        _drawSelection = fCanvas._drawSelection;\n\n    fCanvas.getPointer = function (e, ignoreZoom, upperCanvasEl) {\n      var pointer = getPointer.apply(this, arguments);\n      if (!isFinite(pointer.x) || !isFinite(pointer.y) ) {\n        var $canvasEditContainer = self.drawer.$canvasEditContainer,\n            canvasEditContainerSizes = $canvasEditContainer.get(0).getBoundingClientRect(),\n            eventPos = util.getEventPosition(window.event),\n            offset = util.getScrollOffset(self.drawer.$canvasEditContainer),\n            x = eventPos.left - offset.left - canvasEditContainerSizes.left,\n            y = eventPos.top - offset.top - canvasEditContainerSizes.top;\n        pointer = {\n          x: x,\n          y: y\n        };\n      }\n          var offsetX = self.viewport.position.x,\n          offsetY = self.viewport.position.y,\n          newX = parseInt(pointer.x / self.viewport.zoom - offsetX, 10),\n          newY = parseInt(pointer.y / self.viewport.zoom - offsetY, 10);\n      pointer.oldX = pointer.x;\n      pointer.oldY = pointer.y;\n      pointer.newX = newX;\n      pointer.newY = newY;\n      pointer.x = newX;\n      pointer.y = newY;\n      return pointer;\n    };\n\n    fCanvas._drawSelection = function () {\n      var ctx;\n      ctx = this.contextTop;\n      ctx.save();\n      ctx.scale(this.viewport.zoom, this.viewport.zoom);\n      ctx.translate(this.viewport.position.x, this.viewport.position.y);\n      _drawSelection.apply(this, arguments);\n      ctx.restore();\n      return ctx;\n    };\n  };\n\n  /**\n   * Restore default state of zoom\n   * @private\n   */\n  Zoom.prototype.restoreDefaultZoom = function () {\n    var defaultZoomValue = this.options.defaultZoom,\n        zoomCenter = this.viewport.getZoomCenter(),\n        newZoomData;\n    this.setZoom(defaultZoomValue, zoomCenter.x, zoomCenter.y, true);\n    this.viewport.setToCenterOfCanvas(1);\n    newZoomData = this.viewport.getData();\n    this._updateDrawerValues(newZoomData);\n  };\n\n\n  /**\n   * API methods\n   */\n\n  /**\n   * Set zoom of current drawer instance\n   * @param {Number} zoom - zoom level\n   * @param {Number} [zoomCenterX] - x coord of new center point of canvas. From 0 to current canvas width\n   * @param {Number} [zoomCenterY] - y coord of new center point of canvas. From 0 to current canvas height\n   */\n  DrawerApi.prototype.setZoom = function (zoom, zoomCenterX, zoomCenterY) {\n    var zoomTool = this.drawer.getPluginInstance('Zoom');\n    if (zoomTool) {\n      zoomTool.setZoom(zoom, zoomCenterX, zoomCenterY, true);\n    }\n  };\n\n  /**\n   * Restore default state of zoom\n   */\n  DrawerApi.prototype.restoreDefaultZoom = function () {\n    var zoomTool = this.drawer.getPluginInstance('Zoom');\n    if (zoomTool) {\n      zoomTool.restoreDefaultZoom();\n    }\n  };\n\n  pluginsNamespace.Zoom = Zoom;\n});\n","export default (function ($, pluginsNamespace, BaseToolOptions) {\n  'use strict';\n\n  /**\n   * Provides range control for selecting brush size in free drawing mode.\n   *\n   * @param {DrawerJs.Drawer} drawer\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var BrushSize = function BrushSizeConstructor(drawer) {\n    // call super constructor\n    BaseToolOptions.call(this, drawer);\n\n    this.name = 'BrushSize';\n\n    /**\n     * Option name. On selecting tool/object, if this.toolName is in array of\n     * object allowed options - tool will show controls\n     * @type {String}\n     */\n    this.optionName = 'brushSize';\n\n    /**\n     * Size controls element\n     * @type {Object}\n     */\n    this.$sizeControl = null;\n\n    // set handlers\n    drawer.on(drawer.EVENT_BRUSH_SIZE_CHANGED, this.updateValue.bind(this));\n    drawer.on(drawer.EVENT_BRUSH_CHANGED, this.updateValue.bind(this));\n  };\n\n\n  BrushSize.prototype = Object.create(BaseToolOptions.prototype);\n  BrushSize.prototype.constructor = BaseToolOptions;\n\n\n//////////////////////////////////////////////////////////////////////////////////////////\n    /**\n     * Creates controls. Is called from BaseToolOptions._onToolbarCreated\n     * @param  {DrawerToolbar} toolbar\n     */\n    BrushSize.prototype.createControls = function(toolbar) {\n        this.createSizeControl(toolbar);\n    };\n\n    /**\n     * Deletes tool button.\n     * If  doDeleteToolbarCreationListeners is true - removes listenin on toolbar creation event.\n     * So, tool will not appear on toolbar next time, when toolbar is created.\n     *\n     * @param {boolean} doDeleteToolbarCreationListeners\n     */\n    BrushSize.prototype.removeTool = function(doDeleteToolbarCreationListeners) {\n        this.$sizeControl.remove();\n\n        // stop listening toolbar creation\n        if (doDeleteToolbarCreationListeners) {\n            this.drawer.off(this.drawer.EVENT_OPTIONS_TOOLBAR_CREATED, this._bindedOnToolbarCreated);\n        }\n    };\n\n\n  /**\n   * Create controls.\n   * @param  {DrawerToolbar} toolbar to add control to\n   */\n  BrushSize.prototype.createSizeControl = function (toolbar) {\n    var _this = this;\n\n    _this.$sizeControl = $(\n      '<li style=\"display:none\" ' +\n          'class=\"editable-canvas-brushsize toolbar-item-range\"' +\n      '>' +\n        '<div class=\"toolbar-item-description\">' +\n          '<span class=\"toolbar-label\">' +\n          this.drawer.t('Size:') + ' ' +\n          '</span>' +\n          '<span class=\"toolbar-label toolbar-label-indicator editable-canvas-brushsize-indicator\">' +\n            '0px' +\n          '</span>' +\n        '</div>' +\n        '<input class=\"editable-canvas-brushsize-input\" ' +\n               'type=\"range\" name=\"drawer-size\" min=\"1\"' +\n               'value=\"0\" />' +\n        '</li>');\n\n    toolbar.addControl(_this.$sizeControl, this.options.buttonOrder);\n\n    $(_this.$sizeControl).on('change', function () {\n      var size = $(_this.$sizeControl).find('input').val();\n      $(_this.$sizeControl).find('.editable-canvas-brushsize-indicator')\n        .text(size + 'px');\n      _this.drawer.setBrushSize(size);\n    });\n  };\n\n\n  BrushSize.prototype.showControls = function() {\n      this.updateValue();\n      this.$sizeControl.show();\n  };\n\n  BrushSize.prototype.hideControls = function() {\n      this.$sizeControl.hide();\n  };\n\n\n  /**\n   * Update size control with current drawer brush size.\n   */\n  BrushSize.prototype.updateValue = function () {\n    var size = this.drawer.getBrushSize();\n    this.$sizeControl.find('input').val(size);\n    this.$sizeControl.find('.editable-canvas-brushsize-indicator')\n      .text(size + 'px');\n  };\n\n  pluginsNamespace.BrushSize = BrushSize;\n\n})\n","export default (function ($, pluginsNamespace, BaseToolOptions, util) {\n  'use strict';\n\n  /**\n   * Provides input for changing width of line/arrow.\n   *\n   * @param {DrawerJs.Drawer} drawer\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @param {Object} [options] - Configuration object\n   * @param {Number} [options.digitsAfterDecimalPoint=0] - The number of digits to appear after the decimal point;\n   *\n   * @constructor\n   * @memberof DrawerJs.options\n   * @extends {DrawerJs.plugins.BaseToolOptions}\n   */\n  var LineWidth = function LineWidthConstructor(drawer, options) {\n    // call super c-tor\n    BaseToolOptions.call(this, drawer);\n    this._setupOptions(options);\n  };\n\n  LineWidth.prototype = Object.create(BaseToolOptions.prototype);\n  LineWidth.prototype.constructor = BaseToolOptions;\n\n  LineWidth.prototype.name = 'LineWidth';\n  LineWidth.prototype.optionName = 'lineWidth';\n  // LineWidth.prototype.useCombobox = true;\n  // LineWidth.prototype.buttonMode = true;\n  // LineWidth.prototype.preventHightlight = true;\n  LineWidth.prototype.useCombobox = false;\n  LineWidth.prototype.preventHightlight = false;\n  LineWidth.prototype.buttonMode = false;\n\n  LineWidth.prototype.buttonIconClass = 'fa-arrows-h';\n\n  LineWidth.prototype._defaultOptions = {\n    digitsAfterDecimalPoint: 0\n  };\n\n  LineWidth.prototype.onSelectionCleared = function (toolbar) {\n    this.data = false;\n  };\n\n  LineWidth.prototype.createControls = function (toolbar) {\n    this.createControl(toolbar);\n    this._attachEvents();\n  };\n\n  /**\n   * Get html of control\n   * @returns {string} result - html of controls\n   * @private\n   */\n  LineWidth.prototype._generateHtml = function () {\n    var result,\n        selectHtml;\n\n    selectHtml = '' +\n        '<select ' +\n        'class=\"editable-canvas-line-width-input controls-value-item\" ' +\n        'name=\"drawer-size\"' +\n        'data-name=\"lineWidth\"' +\n        '>' +\n        '</select>';\n\n    var optionItemDefaultClasses = 'toolbar-item-wrapper toolbar-item-range editable-canvas-line-width hidden',\n        optionItemAdditionalClasses = '' +\n            (this.buttonMode ? ' toolbar-button-item ' : '') +\n            (this.preventHightlight ? ' prevent-highlight ' : ''),\n        optionItemClasses = optionItemDefaultClasses + optionItemAdditionalClasses;\n\n    /*\n     // For button mode\n     result = '' +\n     '<li class=\"' + optionItemClasses + '\">' +\n     '<div class=\"toolbar-item-description\">' +\n     '<span class=\"toolbar-item-label\">' +\n     this.drawer.t('Line width:') + ' ' +\n     '</span>' +\n     '<span class=\"toolbar-item-valueholder\"></span>' +\n     '<span class=\"toolbar-item-icon fa ' + this.buttonIconClass + '\"></span>' +\n     '</div>' +\n     '<div class=\"toolbar-dropdown-block collapsed\">' +\n     selectHtml +\n     '</div>' +\n     '</li>';\n\n     */\n\n    result = '' +\n        '<li class=\"' + optionItemClasses + '\">' +\n          '<div class=\"toolbar-item-description\">' +\n            '<span class=\"toolbar-label editable-canvas-line-width-label\">' +\n              this.drawer.t('Line width:') + ' ' +\n            '</span>' +\n            '<span class=\"toolbar-label toolbar-label-indicator editable-canvas-line-width-indicator\"></span>' + '' +\n          '</div>' +\n          '<input ' +\n            'class=\"editable-canvas-line-width-input controls-value-item\" ' +\n            'name=\"drawer-line-width\"' +\n            'data-name=\"lineWidth\"' +\n            'type=\"range\"' +\n            'min=\"1\"' +\n            'max=\"1000\"' +\n          '>' +\n        '</li>';\n    return result;\n  };\n\n  /**\n   * Create/add controls\n   * @param {DrawerToolbar} toolbar\n   * @returns {jQuery}\n   * @private\n   */\n  LineWidth.prototype.createControl = function (toolbar) {\n    var toolControlHtml = this._generateHtml();\n    this.$toolControl = $(toolControlHtml);\n    this.$valueIndicator = this.$toolControl.find('.editable-canvas-line-width-indicator');\n    toolbar.addControl(this.$toolControl, this.options.buttonOrder);\n    return this.$toolControl;\n  };\n\n  /**\n   * Attach events for control element\n   * @private\n   */\n  LineWidth.prototype._attachEvents = function () {\n    if (this.$toolControl) {\n      this.$toolControl.on('input change toolbarOptionChange', this.onInputChange.bind(this));\n    }\n  };\n\n\n  /**\n   * Validate width value\n   * @param rawValue\n   * @returns {*}\n   */\n  LineWidth.prototype.validateValue = function (rawValue) {\n    rawValue = parseInt(rawValue, 10);\n    var result,\n        rawValueIsValid = typeof rawValue === 'number' && isFinite(rawValue) && rawValue;\n    if (rawValueIsValid) {\n      var decimalRatio = Math.pow(10, this.options.digitsAfterDecimalPoint),\n          formattedValue = parseInt(rawValue * decimalRatio, 10) / decimalRatio;\n      result = formattedValue;\n    }\n    return result;\n  };\n\n  /**\n   * Set line width of current active object\n   * @param {number|string} value - Width of line/arrow in px\n   */\n  LineWidth.prototype.setLineWidth = function (value) {\n    var fCanvas = this.drawer.fCanvas,\n        target = fCanvas.getActiveObject();\n    if (target) {\n      if (!this.data) {\n        this.collectDataFromObject(target);\n      }\n\n      var diffRatio = parseInt(value / this.data.initialWidth * 100, 10) / 100;\n\n      target.x1 = this.data.x1 * diffRatio * target.scaleX;\n      target.x2 = this.data.x2 *  diffRatio * target.scaleX;\n      target.y1 = this.data.y1 * diffRatio * target.scaleY;\n      target.y2 = this.data.y2 * diffRatio * target.scaleY;\n\n      target.set('x1',target.x1);\n      target.set('x2',target.x2);\n      target.set('y1',target.y1);\n      target.set('y2',target.y2);\n\n      target.set('top',this.data.top);\n      target.set('left',this.data.left);\n\n      fCanvas.renderAll();\n    }\n  };\n\n  /**\n   * This function is called every time user changes width via control\n   * @private\n   */\n  LineWidth.prototype.onInputChange = function () {\n    var $opacityInput = $(this.$toolControl).find('input'),\n        rawValue = $opacityInput.val(),\n        validatedValue = this.validateValue(rawValue);\n    this.$valueIndicator.text(validatedValue + 'px');\n    this.setLineWidth(validatedValue);\n  };\n\n  LineWidth.prototype.collectDataFromObject = function (target) {\n    var result = {},\n        decimalRatio = Math.pow(10, this.options.digitsAfterDecimalPoint),\n        calcWidth = function (x, y) {\n          var result,\n              axisSum = Math.pow(x, 2) + Math.pow(y, 2),\n              widthRaw = Math.sqrt(axisSum),\n              lineWidth = parseInt(widthRaw * decimalRatio) / decimalRatio;\n          result = lineWidth;\n          return result;\n        },\n        xDelta =target.x2 - target.x1,\n        yDelta =target.y2 - target.y1,\n        xDiffScaled = (xDelta) * target.scaleX,\n        yDiffScaled = (yDelta) * target.scaleY,\n        xDiff = (xDelta),\n        yDiff = (yDelta),\n        angleRad = Math.atan((yDelta) / (xDelta)),\n        angleDeg = Math.abs(fabric.util.radiansToDegrees(angleRad));\n\n    result.lineWidth = calcWidth(xDiffScaled, yDiffScaled);\n    result.initialWidth = calcWidth(xDiff, yDiff);\n    result.angleRad = angleRad;\n    result.angleDeg = angleDeg;\n\n    result.top = target.top;\n    result.left = target.left;\n    result.x1 = target.x1;\n    result.x2 = target.x2;\n    result.y1 = target.y1;\n    result.y2 = target.y2;\n\n    this.data = result;\n    return result;\n  };\n\n  LineWidth.prototype.updateControls = function (dataToFill) {\n    dataToFill = dataToFill || this.data;\n    var rawValue = dataToFill.lineWidth,\n        validatedValue = this.validateValue(rawValue);\n    this.$toolControl.find('input').val(validatedValue);\n    this.$valueIndicator.text(validatedValue + 'px');\n  };\n\n  LineWidth.prototype.showControls = function () {\n    this.$toolControl.removeClass('hidden');\n  };\n\n  LineWidth.prototype.hideControls = function (force) {\n    this.$toolControl.addClass('hidden');\n  };\n\n  pluginsNamespace.LineWidth = LineWidth;\n})\n","export default (function ($, pluginsNamespace, BaseToolOptions, util) {\n  'use strict';\n\n  /**\n   * Provides opacity input for changing shapes/brush opacity.\n   *\n   * @param {DrawerJs.Drawer} drawer\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @param {Object} options - Configuration object\n   * @param {Number} options.defaultValue - Default opacity value\n   *\n   *\n   * @constructor\n   * @memberof DrawerJs.options\n   * @extends {DrawerJs.plugins.BaseToolOptions}\n   */\n  var OpacityOption = function OpacityOptionConstructor(drawer, options) {\n    // call super c-tor\n    BaseToolOptions.call(this, drawer);\n    this._setupOptions(options);\n  };\n\n  OpacityOption.prototype = Object.create(BaseToolOptions.prototype);\n  OpacityOption.prototype.constructor = BaseToolOptions;\n\n  OpacityOption.prototype.optionName = 'opacity';\n\n\n  OpacityOption.prototype._defaultOptions = {\n    defaultValue: 1,\n    alwaysVisible: true\n  };\n\n  OpacityOption.prototype.createControls = function (toolbar) {\n    this.createControl(toolbar, this.setOpacity.bind(this));\n  };\n\n  /**\n   * Create controls.\n   * @param {DrawerToolbar} toolbar\n   * @param {Function} [opacityChangeCallback]\n   * @returns {jQuery}\n   */\n  OpacityOption.prototype.createControl = function (toolbar, opacityChangeCallback) {\n    this.toolbar = toolbar;\n    this.opacityChangeCallback = opacityChangeCallback;\n\n    this.$opacityControl = $(\n        '<li class=\"editable-canvas-opacity-option toolbar-item-range\">' +\n          '<div class=\"toolbar-item-description\">' +\n            '<span class=\"toolbar-label editable-canvas-opacity-option-label\">' +\n            this.drawer.t('Opacity :') + ' ' +\n            '</span>' +\n            '<span class=\"toolbar-label toolbar-label-indicator editable-canvas-opacity-option-indicator\">' +\n              '100%' +\n            '</span>' +\n          '</div>' +\n        '<input class=\"editable-canvas-opacity-option-input\" ' +\n        'type=\"range\" name=\"drawer-size\" min=\"0\" max=\"100\"' +\n        'value=\"100\" />' +\n        '</li>');\n\n    this.$opacityIndicator = this.$opacityControl.find('.editable-canvas-opacity-option-indicator');\n    toolbar.addControl(this.$opacityControl, this.options.buttonOrder);\n    this.$opacityControl.on('change', this._onOpacityChange.bind(this));\n    return this.$opacityControl;\n  };\n\n\n  /**\n   * Set opacity value\n   * @private\n   */\n  OpacityOption.prototype.setOpacity = function (value) {\n    var fCanvas = this.drawer.fCanvas,\n        activeFabricObject = fCanvas.getActiveObject();\n\n    this.drawer.setOpacity(value);\n    if (activeFabricObject) {\n      activeFabricObject.setOpacity(value);\n      fCanvas.renderAll();\n    }\n  };\n\n  /**\n   * This function is called every time user changes opacity via control\n   * @private\n   */\n  OpacityOption.prototype._onOpacityChange = function () {\n    var $opacityInput = $(this.$opacityControl).find('input'),\n        rawValue = parseInt($opacityInput.val(), 10),\n        rawValueIsValid = typeof rawValue === 'number' && isFinite(rawValue),\n        validatedValue = rawValueIsValid ? rawValue : this.options.defaultOpacity,\n        formattedValue = parseInt(validatedValue, 10) + '%';\n    this._opacity = validatedValue / 100;\n\n    this.$opacityIndicator.text(formattedValue);\n\n    if (this.opacityChangeCallback) {\n      this.opacityChangeCallback(this._opacity);\n    }\n  };\n\n  OpacityOption.prototype.collectDataFromObject = function (target) {\n    var result = {};\n    result.opacity = target.get('opacity');\n    this.data = result;\n    return result;\n  };\n\n  OpacityOption.prototype.updateControls = function (dataToFill) {\n    dataToFill = dataToFill || this.data;\n\n    var rawValue = dataToFill.opacity,\n        rawValueIsValid = typeof rawValue === 'number' && isFinite(rawValue),\n        validatedValue = rawValueIsValid ? rawValue : this.options.defaultOpacity,\n        formattedValue = parseInt(validatedValue*100, 10) + '%';\n    this.drawer.activeOpacity = validatedValue;\n    this.$opacityControl.find('input').val(validatedValue*100);\n    this.$opacityControl.find('.editable-canvas-opacity-option-indicator').text(formattedValue);\n  };\n\n  OpacityOption.prototype.showControls = function () {\n    this.$opacityControl.removeClass('hidden');\n  };\n\n  OpacityOption.prototype.hideControls = function (force) {\n    var alwaysVisible = this.drawer.options.toolbars.popupButtonAlwaysVisible || this.options.alwaysVisible;\n    if (force || !alwaysVisible) {\n      this.$opacityControl.addClass('hidden');\n    }\n  };\n\n  pluginsNamespace.OpacityOption = OpacityOption;\n\n})\n","export default (function ($, pluginsNamespace, BaseToolOptions, util) {\n  'use strict';\n\n  /**\n   * Provides input for changing width of line/arrow.\n   *\n   * @param {DrawerJs.Drawer} drawer\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @param {Object} [options] - Configuration object\n   * @param {Number} [options.digitsAfterDecimalPoint=0] - The number of digits to appear after the decimal point;\n   *\n   * @constructor\n   * @memberof DrawerJs.options\n   * @extends {DrawerJs.plugins.BaseToolOptions}\n   */\n  var StrokeWidth = function StrokeWidthConstructor(drawer, options) {\n    // call super c-tor\n    BaseToolOptions.call(this, drawer);\n    this._setupOptions(options);\n  };\n\n  StrokeWidth.prototype = Object.create(BaseToolOptions.prototype);\n  StrokeWidth.prototype.constructor = BaseToolOptions;\n\n  StrokeWidth.prototype.name = 'StrokeWidth';\n  StrokeWidth.prototype.optionName = 'strokeWidth';\n  // StrokeWidth.prototype.useCombobox = true;\n  // StrokeWidth.prototype.buttonMode = true;\n  // StrokeWidth.prototype.preventHightlight = true;\n  StrokeWidth.prototype.useCombobox = false;\n  StrokeWidth.prototype.preventHightlight = false;\n  StrokeWidth.prototype.buttonMode = false;\n\n  StrokeWidth.prototype.buttonIconClass = 'fa-arrows-h';\n\n  StrokeWidth.prototype._defaultOptions = {\n    digitsAfterDecimalPoint: 0\n  };\n\n  StrokeWidth.prototype.onSelectionCleared = function (toolbar) {\n    this.data = false;\n  };\n\n  StrokeWidth.prototype.createControls = function (toolbar) {\n    this.createControl(toolbar);\n    this._attachEvents();\n  };\n\n  /**\n   * Get html of control\n   * @returns {string} result - html of controls\n   * @private\n   */\n  StrokeWidth.prototype._generateHtml = function () {\n    var result,\n        selectHtml;\n\n    selectHtml = '' +\n        '<select ' +\n        'class=\"editable-canvas-stroke-width-input controls-value-item\" ' +\n        'name=\"drawer-size\"' +\n        'data-name=\"strokeWidth\"' +\n        '>' +\n        '</select>';\n\n    var optionItemDefaultClasses = 'toolbar-item-wrapper toolbar-item-range editable-canvas-stroke-width hidden',\n        optionItemAdditionalClasses = '' +\n            (this.buttonMode ? ' toolbar-button-item ' : '') +\n            (this.preventHightlight ? ' prevent-highlight ' : ''),\n        optionItemClasses = optionItemDefaultClasses + optionItemAdditionalClasses;\n\n    result = '' +\n        '<li class=\"' + optionItemClasses + '\">' +\n          '<div class=\"toolbar-item-description\">' +\n            '<span class=\"toolbar-label editable-canvas-stroke-width-label\">' +\n              this.drawer.t('Stroke width:') + ' ' +\n            '</span>' +\n            '<span class=\"toolbar-label toolbar-label-indicator editable-canvas-stroke-width-indicator\"></span>' + '' +\n          '</div>' +\n          '<input ' +\n            'class=\"editable-canvas-stroke-width-input controls-value-item\" ' +\n            'name=\"drawer-stroke-width\"' +\n            'data-name=\"strokeWidth\"' +\n            'type=\"range\"' +\n            'min=\"1\"' +\n            'max=\"50\"' +\n          '>' +\n        '</li>';\n    return result;\n  };\n\n  /**\n   * Create/add controls\n   * @param {DrawerToolbar} toolbar\n   * @returns {jQuery}\n   * @private\n   */\n  StrokeWidth.prototype.createControl = function (toolbar) {\n    var toolControlHtml = this._generateHtml();\n    this.$toolControl = $(toolControlHtml);\n    this.$valueIndicator = this.$toolControl.find('.editable-canvas-stroke-width-indicator');\n    toolbar.addControl(this.$toolControl, this.options.buttonOrder);\n    return this.$toolControl;\n  };\n\n  /**\n   * Attach events for control element\n   * @private\n   */\n  StrokeWidth.prototype._attachEvents = function () {\n    if (this.$toolControl) {\n      this.$toolControl.on('input change toolbarOptionChange', this.onInputChange.bind(this));\n    }\n  };\n\n\n  /**\n   * Validate width value\n   * @param rawValue\n   * @returns {*}\n   */\n  StrokeWidth.prototype.validateValue = function (rawValue) {\n    rawValue = parseInt(rawValue, 10);\n    var result,\n        rawValueIsValid = typeof rawValue === 'number' && isFinite(rawValue) && rawValue;\n    if (rawValueIsValid) {\n      var decimalRatio = Math.pow(10, this.options.digitsAfterDecimalPoint),\n          formattedValue = parseInt(rawValue * decimalRatio, 10) / decimalRatio;\n      result = formattedValue;\n    }\n    return result;\n  };\n\n  /**\n   * Set line width of current active object\n   * @param {number|string} value - Width of line/arrow in px\n   */\n  StrokeWidth.prototype.setStrokeWidth = function (value) {\n    value =  parseInt(value, 10);\n    var fCanvas = this.drawer.fCanvas,\n        target = fCanvas.getActiveObject();\n    this.drawer.lineStrokeWidth = value;\n    if (target) {\n      if (!this.data) {\n        this.collectDataFromObject(target);\n      }\n      target.set('left',this.data.left);\n      target.set('top',this.data.top);\n      target.set('strokeWidth', parseInt(value, 10));\n      fCanvas.renderAll();\n    }\n  };\n\n  /**\n   * This function is called every time user changes width via control\n   * @private\n   */\n  StrokeWidth.prototype.onInputChange = function () {\n    var $opacityInput = $(this.$toolControl).find('input'),\n        rawValue = $opacityInput.val(),\n        validatedValue = this.validateValue(rawValue);\n    this.$valueIndicator.text(validatedValue + 'px');\n    this.setStrokeWidth(validatedValue);\n  };\n\n  StrokeWidth.prototype.collectDataFromObject = function (target) {\n    var result = {},\n        decimalRatio = Math.pow(10, this.options.digitsAfterDecimalPoint),\n        strokeWidth = target.strokeWidth;\n    result.strokeWidth = strokeWidth;\n    result.top = target.top;\n    result.left = target.left;\n\n    this.data = result;\n    return result;\n  };\n\n  StrokeWidth.prototype.updateControls = function (dataToFill) {\n    dataToFill = dataToFill || this.data;\n    var rawValue = dataToFill.strokeWidth,\n        validatedValue = this.validateValue(rawValue);\n    this.drawer.lineStrokeWidth = validatedValue;\n    this.$toolControl.find('input').val(validatedValue);\n    this.$valueIndicator.text(validatedValue + 'px');\n  };\n\n  StrokeWidth.prototype.showControls = function () {\n    this.$toolControl.removeClass('hidden');\n  };\n\n  StrokeWidth.prototype.hideControls = function (force) {\n    this.$toolControl.addClass('hidden');\n  };\n\n  pluginsNamespace.StrokeWidth = StrokeWidth;\n})\n","export default (function ($, pluginsNamespace, util, BaseTextOptionTool) {\n  'use strict';\n\n  /**\n   * Creates controls for changing font size of text;\n   *\n   * @param drawer\n   * Instance of drawer\n   * @param {Object} options\n   * Configuration object.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   * @augments DrawerJs.plugins.BaseTextOptionTool\n   */\n\n  var TextAlign = function TextAlignConstructor(drawer, options) {\n    BaseTextOptionTool.call(this, drawer);\n\n    // init options\n    this._setupOptions(options);\n  };\n\n  TextAlign.prototype = Object.create(BaseTextOptionTool.prototype);\n  TextAlign.prototype.constructor = BaseTextOptionTool;\n\n  TextAlign.prototype.name = 'TextAlign';\n  TextAlign.prototype.optionName = 'TextAlign';\n  TextAlign.prototype.useCombobox = true;\n  TextAlign.prototype.buttonMode = true;\n  TextAlign.prototype.focusTextOnChange = true;\n  TextAlign.prototype.preventHightlight = true;\n  TextAlign.prototype.showOnEditMode = false;\n  TextAlign.prototype.hideOnEditMode = true;\n  TextAlign.prototype.stylesToObject = true;\n  TextAlign.prototype.onlyPredefined = true;\n  TextAlign.prototype.buttonIconClass = 'fa-align-left';\n\n  TextAlign.prototype.valueType = {\n    textAlign: 'string'\n  };\n\n  TextAlign.prototype._defaultOptions = {\n    defaultValues: {\n      textAlign: \"left\"\n    },\n    predefined: {\n      textAlign: [\"left\", \"center\", \"right\", \"justify\"]\n    },\n    valueMap: {\n      left: {\n        value: 'left',\n        classString: 'fa fa-align-left'\n      },\n      center: {\n        value: 'center',\n        classString: 'fa fa-align-center'\n      },\n      right: {\n        value: 'right',\n        classString: 'fa fa-align-right'\n      },\n      justify: {\n        value: 'justify',\n        classString: 'fa fa-align-justify'\n      }\n    }\n  };\n\n  TextAlign.prototype.controlTemplate = function () {\n    var result,\n        $predefined,\n        selectHtml;\n\n    $predefined = this.options.predefined.textAlign.map(function (size, i) {\n      return '<option value=\"' + size + '\">' + size + '</option>';\n    }).join('');\n\n    selectHtml = '' +\n        '<select ' +\n        'class=\"editable-canvas-text-textalign-input controls-value-item\" ' +\n        'name=\"drawer-size\"' +\n        'data-name=\"textAlign\"' +\n        'value=\"' + this.options.defaultValues.textAlign + '\">' +\n        $predefined +\n        '</select>';\n\n    var optionItemDefaultClasses = 'toolbar-item-wrapper editable-canvas-text-option editable-canvas-text-textalign hidden',\n        optionItemAdditionalClasses = ''+\n            (this.buttonMode ? ' toolbar-button-item ': '') +\n            (this.preventHightlight ? ' prevent-highlight ': ''),\n        optionItemClasses = optionItemDefaultClasses + optionItemAdditionalClasses;\n\n    result = '' +\n        '<li class=\"' + optionItemClasses + '\">' +\n        '<div class=\"toolbar-item-description\">' +\n        '<span class=\"toolbar-item-label\">' +\n        this.drawer.t('Font size:') + ' ' +\n        '</span>' +\n        '<span class=\"toolbar-item-valueholder\"></span>' +\n        '<span class=\"toolbar-item-icon fa ' + this.buttonIconClass + '\"></span>' +\n        '</div>' +\n        '<div class=\"toolbar-dropdown-block collapsed\">' +\n        selectHtml +\n        '</div>' +\n        '</li>';\n\n    return result;\n  };\n\n  pluginsNamespace.TextAlign = TextAlign;\n})\n","export default (function ($, pluginsNamespace, util, BaseTextOptionTool) {\n  'use strict';\n\n  /**\n   * Creates controls for changing text background color;\n   *\n   * @param drawer\n   * Instance of drawer\n   * @param {Object} options\n   * Configuration object.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   * @augments DrawerJs.plugins.BaseTextOptionTool\n   */\n\n  var TextBackgroundColor = function TextBackgroundColorConstructor(drawer, options) {\n    BaseTextOptionTool.call(this, drawer);\n\n    // init options\n    this._setupOptions(options);\n\n    this.colorControl = new pluginsNamespace.ColorpickerControl(this.drawer, this.options);\n  };\n\n  TextBackgroundColor.prototype = Object.create(BaseTextOptionTool.prototype);\n  TextBackgroundColor.prototype.constructor = BaseTextOptionTool;\n\n  TextBackgroundColor.prototype.name = 'TextBackgroundColor';\n  TextBackgroundColor.prototype.optionName = 'TextBackgroundColor';\n  TextBackgroundColor.prototype.focusTextOnChange = true;\n  TextBackgroundColor.prototype.useCombobox = false;\n  TextBackgroundColor.prototype.buttonMode = false;\n\n  TextBackgroundColor.prototype._defaultOptions = {\n    colorText: 'Text background:',\n    defaultValues: {\n      textBackgroundColor: ''\n    },\n  };\n\n  TextBackgroundColor.prototype.onlyPredefined = true;\n  TextBackgroundColor.prototype.valueType = {\n    textBackgroundColor: 'color'\n  };\n\n  TextBackgroundColor.prototype.updateSingleControl = function (valueName, value) {\n    if (valueName === 'textBackgroundColor') {\n      this.colorControl.setColor(value);\n    }\n  };\n\n  TextBackgroundColor.prototype.getStylesFromControls = function () {};\n\n  TextBackgroundColor.prototype.getStylesFromChangeEvent = function (data) {\n    var result;\n    if (data) {\n      if (typeof data === 'object') {\n        result = data.styles;\n      }\n      if (typeof data === 'string') {\n        result = {\n          textBackgroundColor: data\n        };\n      }\n    }\n    this._lastData = result;\n    return result;\n  };\n\n\n  TextBackgroundColor.prototype.setupControl = function (toolbar, $toolControl, changeCallback) {\n    this.colorChangeHandler = changeCallback;\n\n    this.$toolControl = this.colorControl.createControl(toolbar,  this.onInputChange.bind(this));\n    // cache control components\n    this.$toolControl.$colorIndicator = this.$toolControl.find('.color-indicator');\n    this.$toolControl.$colorDropdown = this.$toolControl.find('.color-dropdown');\n\n    this.$toolControl.$colorIndicator.attr('data-name', 'textBackgroundColor');\n    this.$toolControl.$colorIndicator.addClass('controls-value-item');\n\n    this.$toolControl.addClass('editable-canvas-text-option editable-canvas-text-backgroundcolor');\n\n    this.colorDropdownVisible = false;\n  };\n\n  pluginsNamespace.TextBackgroundColor = TextBackgroundColor;\n})\n","export default (function ($, pluginsNamespace, util, BaseTextOptionTool) {\n  'use strict';\n\n  /**\n   * Creates controls for changing text color;\n   *\n   * @param drawer\n   * Instance of drawer\n   * @param {Object} options\n   * Configuration object.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   * @augments DrawerJs.plugins.BaseTextOptionTool\n   */\n\n  var TextColor = function TextColorConstructor(drawer, options) {\n    BaseTextOptionTool.call(this, drawer);\n\n    // init options\n    this._setupOptions(options);\n    this.colorControl = new pluginsNamespace.ColorpickerControl(this.drawer, this.options);\n  };\n\n  TextColor.prototype = Object.create(BaseTextOptionTool.prototype);\n  TextColor.prototype.constructor = BaseTextOptionTool;\n\n  TextColor.prototype.name = 'TextColor';\n  TextColor.prototype.optionName = 'TextColor';\n  TextColor.prototype.focusTextOnChange = true;\n  TextColor.prototype.onlyPredefined = true;\n\n  TextColor.prototype._defaultOptions = {\n    colorText: 'Font color:',\n    defaultValues: {\n      fill: ''\n    },\n  };\n\n  TextColor.prototype.valueType = {\n    fill: 'color'\n  };\n\n  TextColor.prototype.updateSingleControl = function (valueName, value) {\n    if (valueName === 'fill') {\n      this.colorControl.setColor(value);\n    }\n  };\n\n  TextColor.prototype.getStylesFromControls = function () {};\n\n  TextColor.prototype.getStylesFromChangeEvent = function (data) {\n    var result;\n    if (data) {\n      if (typeof data === 'object') {\n        result = data.styles;\n      }\n      if (typeof data === 'string') {\n        result = {\n          fill: data\n        };\n      }\n    }\n    this._lastData = result;\n    return result;\n  };\n\n  TextColor.prototype.setupControl = function (toolbar, $toolControl, changeCallback) {\n    this.colorChangeHandler = changeCallback;\n\n    this.$toolControl = this.colorControl.createControl(toolbar,  this.onInputChange.bind(this));\n    // cache control components\n    this.$toolControl.$colorIndicator = this.$toolControl.find('.color-indicator');\n    this.$toolControl.$colorDropdown = this.$toolControl.find('.color-dropdown');\n\n    this.$toolControl.$colorIndicator.attr('data-name', 'fill');\n    this.$toolControl.$colorIndicator.addClass('controls-value-item');\n\n    this.$toolControl.addClass('editable-canvas-text-option editable-canvas-text-color');\n\n    this.colorDropdownVisible = false;\n  };\n\n  pluginsNamespace.TextColor = TextColor;\n})\n","export default (function ($, pluginsNamespace, util, BaseTextOptionTool) {\n  'use strict';\n\n  /**\n   * Creates controls for changing font size of text;\n   *\n   * @param drawer\n   * Instance of drawer\n   * @param {Object} options\n   * Configuration object.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   * @augments DrawerJs.plugins.BaseTextOptionTool\n   */\n\n  var TextDecoration = function TextDecorationConstructor(drawer, options) {\n    BaseTextOptionTool.call(this, drawer);\n    this._setupOptions(options);\n  };\n\n  TextDecoration.prototype = Object.create(BaseTextOptionTool.prototype);\n  TextDecoration.prototype.constructor = BaseTextOptionTool;\n\n  TextDecoration.prototype.name = 'TextDecoration';\n  TextDecoration.prototype.optionName = 'TextDecoration';\n  TextDecoration.prototype.focusTextOnChange = true;\n  TextDecoration.prototype.onlyPredefined = true;\n  /**\n   * @default\n   * @const\n   * @override\n   * @type {string}\n   */\n  TextDecoration.prototype.buttonIconClass = 'fa-strikethrough';\n  TextDecoration.prototype.valueType = {\n    textDecoration: 'string'\n  };\n\n  /**\n   * @type {object}\n   * @private\n   */\n  TextDecoration.prototype._defaultOptions = {\n    defaultValues: {\n      textDecoration: ''\n    },\n    predefined:{\n      textDecoration: [\"underline\", \"overline\", \"line-through\"]\n    }\n  };\n\n  TextDecoration.prototype.controlTemplate = function () {\n    var result,\n        $predefined,\n        selectHtml;\n\n    $predefined = this.options.predefined.textDecoration.map(function (size, i) {\n      return '<option value=\"' + size + '\">' + size + '</option>';\n    }).join('');\n\n    selectHtml = '' +\n        '<select ' +\n        'class=\"editable-canvas-text-decoration-input controls-value-item\" ' +\n        'name=\"drawer-size\"' +\n        'data-name=\"textDecoration\"' +\n        'value=\"' + this.options.defaultValues.textDecoration + '\">' +\n        $predefined +\n        '</select>';\n\n    var optionItemDefaultClasses = 'toolbar-item-wrapper editable-canvas-text-option editable-canvas-text-decoration hidden',\n        optionItemAdditionalClasses = this.buttonMode ? ' toolbar-button-item ': '',\n        optionItemClasses = optionItemDefaultClasses + optionItemAdditionalClasses;\n\n    result = '' +\n        '<li class=\"' + optionItemClasses + '\">' +\n        '<div class=\"toolbar-item-description\">' +\n        '<span class=\"toolbar-item-label\">' +\n        this.drawer.t('Text Decoration:') + ' ' +\n        '</span>' +\n        '<span class=\"toolbar-item-valueholder\"></span>' +\n        '<span class=\"toolbar-item-icon fa ' + this.buttonIconClass + '\"></span>' +\n        '</div>' +\n        '<div class=\"toolbar-dropdown-block collapsed\">' +\n        selectHtml +\n        '</div>' +\n        '</li>';\n\n    return result;\n  };\n\n  pluginsNamespace.TextDecoration = TextDecoration;\n})\n","export default (function ($, pluginsNamespace, util, BaseTextOptionTool) {\n  'use strict';\n\n  /**\n   * Creates controls for changing font family;\n   *\n   * @param drawer\n   * Instance of drawer\n   * @param {Object} options\n   * Configuration object.\n   * @param {Object} options.fonts\n   * Specifies the list of fonts available to select.\n   * The format is:\n   *\n   * <code>\n   * <pre class=\"prettyprint javascript\">\n   *   {\n   *    'Font display name': 'Font-family CSS value'\n   *   }\n   * </pre>\n   * </code>\n   *\n   * Example:\n   *\n   * <code>\n   * <pre class=\"prettyprint javascript\">\n   * fonts: {\n   *     'Georgia': 'Georgia, serif',\n   *     'Palatino': \"'Palatino Linotype', 'Book Antiqua', Palatino, serif\",\n   *     'Times New Roman': \"'Times New Roman', Times, serif\"\n   * }\n   * </pre>\n   * </code>\n   *\n   *\n   * @param {String} options.defaultFont\n   * Default font display name from <code>fonts</code> config\n   * that will be selected when edit mode activates.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   * @augments DrawerJs.plugins.BaseTextOptionTool\n   */\n\n  var TextFontFamily = function TextFontFamilyConstructor(drawer, options) {\n    BaseTextOptionTool.call(this, drawer);\n\n    this._setupOptions(options);\n\n    this.activeFont = this.options.fonts[this.options.defaultFont];\n    this.drawer.on(this.drawer.EVENT_TEXT_GET_STYLES, this._onGetStyles.bind(this));\n  };\n\n  TextFontFamily.prototype = Object.create(BaseTextOptionTool.prototype);\n  TextFontFamily.prototype.constructor = BaseTextOptionTool;\n\n  TextFontFamily.prototype.name = 'TextFontFamily';\n  TextFontFamily.prototype.optionName = 'TextFontFamily';\n  TextFontFamily.prototype.buttonIconClass = 'fa-font';\n  TextFontFamily.prototype.focusTextOnChange = true;\n  TextFontFamily.prototype.onlyPredefined = true;\n  TextFontFamily.prototype.valueType = {\n    fontFamily: 'string'\n  };\n\n  TextFontFamily.prototype._defaultOptions = {\n    defaultValues: {\n      fontFamily: 'Georgia'\n    },\n    fonts: {\n      'Georgia': 'Georgia, serif',\n      'Palatino': \"'Palatino Linotype', 'Book Antiqua', Palatino, serif\",\n      'Times New Roman': \"'Times New Roman', Times, serif\",\n\n      'Arial': 'Arial, Helvetica, sans-serif',\n      'Arial Black': \"'Arial Black', Gadget, sans-serif\",\n      'Comic Sans MS': \"'Comic Sans MS', cursive, sans-serif\",\n      'Impact': 'Impact, Charcoal, sans-serif',\n      'Lucida Grande': \"'Lucida Sans Unicode', 'Lucida Grande', sans-serif\",\n      'Tahoma': 'Tahoma, Geneva, sans-serif',\n      'Trebuchet MS': \"'Trebuchet MS', Helvetica, sans-serif\",\n      'Verdana': 'Verdana, Geneva, sans-serif',\n\n      'Courier New': \"'Courier New', Courier, monospace\",\n      'Lucida Console': \"'Lucida Console', Monaco, monospace\"\n    },\n    defaultFont: 'Georgia'\n  };\n\n  TextFontFamily.prototype.changeFont = function (fontFamilyName, withoutSetStyles) {\n    var _this = this;\n\n    _this.activeFont = _this.options.fonts[fontFamilyName];\n\n    if (!withoutSetStyles) {\n      _this.setStyles({\n        fontFamily: _this.activeFont\n      });\n    }\n\n    _this.$toolControl.find('.editable-canvas-fontfamily').css('font-family', _this.activeFont);\n    _this.$toolControl.find('.editable-canvas-fontfamily').text(fontFamilyName || '');\n    _this.$toolControl.find('.fonts-dropdown').addClass('hidden');\n  };\n\n  TextFontFamily.prototype.updateSingleControl = function (valueName, value) {\n    if (valueName === 'fontFamily') {\n        var font = this.getFontByCss(value);\n        this.changeFont(font, true);\n    }\n  };\n\n  TextFontFamily.prototype._collectDefaultOptions = function (pluginName) {\n    var textConfig = this.drawer.getPluginConfig('Text'),\n        result = {\n          fonts: $.extend(true, {}, textConfig.fonts || {}),\n          defaultFont: textConfig.defaultFont\n        };\n    return result;\n  };\n\n  TextFontFamily.prototype._onGetStyles = function (fEvent, tool, result) {\n    result = result || {};\n    result.defaultValues =  result.defaultValues || {};\n    result.defaultValues.fontFamily = this.options.fonts[this.options.defaultFont];\n  };\n\n  /**\n   * Get font family from css string\n   * @param {string} fontCssString\n   * @returns {*}\n   */\n  TextFontFamily.prototype.getFontByCss = function (fontCssString) {\n    var fName = null;\n    $.each(this.options.fonts, function (fontName, fontCss) {\n      if (fontCss == fontCssString) {\n        fName = fontName;\n      }\n    });\n    return fName;\n  };\n\n  TextFontFamily.prototype.setupControl = function (toolbar, $toolControl, changeCallback) {\n    var _this = this;\n    util.bindClick(\n        $toolControl.find('.toolbar-label'), 'fontFamily',\n        function () {\n          $toolControl.find('.fonts-dropdown').toggleClass('hidden');\n        });\n\n    //\n    $toolControl.find('li a').each(function (i, fontItem) {\n      var $fontItem = $(fontItem);\n      util.bindClick($fontItem, 'fontFamily',\n          function () {\n            var fname = $(this).data('fontName');\n            _this.changeFont(fname);\n          });\n    });\n  };\n\n  TextFontFamily.prototype.controlTemplate = function () {\n    var result,\n        $predefined = '',\n        selectHtml;\n\n    $.each(this.options.fonts, function (fontName, fontCss) {\n      var fontItem = '' +\n      '<option ' +\n        'style=\"font-family: ' + fontCss + ';\"' +\n        'value=\"' + fontName + '\"' +\n        'data-font-name=\"' + fontName + '\">' +\n          fontName +\n      '</option>';\n\n      $predefined += fontItem;\n    });\n\n    selectHtml = '' +\n        '<select ' +\n          'class=\"editable-canvas-text-fontfamily-input controls-value-item\" ' +\n          'name=\"drawer-size\"' +\n          'data-name=\"fontFamily\"' +\n          'value=\"' + this.options.defaultValues.fontFamily + '\">' +\n            $predefined +\n        '</select>';\n\n    var optionItemDefaultClasses = 'toolbar-item-wrapper editable-canvas-text-option editable-canvas-text-fontfamily hidden',\n        optionItemAdditionalClasses = this.buttonMode ? ' toolbar-button-item ': '',\n        optionItemClasses = optionItemDefaultClasses + optionItemAdditionalClasses;\n\n    result = '' +\n        '<li class=\"' + optionItemClasses + '\">' +\n        '<div class=\"toolbar-item-description\">' +\n        '<span class=\"toolbar-item-label\">' +\n        this.drawer.t('Font family:') + ' ' +\n        '</span>' +\n        '<span class=\"toolbar-item-valueholder\"></span>' +\n        '<span class=\"toolbar-item-icon fa ' + this.buttonIconClass + '\"></span>' +\n        '</div>' +\n        '<div class=\"toolbar-dropdown-block collapsed\">' +\n        selectHtml +\n        '</div>' +\n        '</li>';\n\n    return result;\n  };\n\n  pluginsNamespace.TextFontFamily = TextFontFamily;\n})\n","export default (function ($, pluginsNamespace, util, BaseTextOptionTool) {\n  'use strict';\n\n  /**\n   * Creates controls for changing font size of text;\n   *\n   * @param drawer\n   * Instance of drawer\n   * @param {Object} options\n   * Configuration object.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   * @augments DrawerJs.plugins.BaseTextOptionTool\n   */\n\n  var TextFontSize = function TextFontSizeConstructor(drawer, options) {\n    BaseTextOptionTool.call(this, drawer);\n\n    this._setupOptions(options);\n  };\n\n  TextFontSize.prototype = Object.create(BaseTextOptionTool.prototype);\n  TextFontSize.prototype.constructor = BaseTextOptionTool;\n\n  TextFontSize.prototype.name = 'TextFontSize';\n  TextFontSize.prototype.optionName = 'TextFontSize';\n  TextFontSize.prototype.buttonIconClass = 'fa-text-height';\n\n  TextFontSize.prototype.valueType = {\n    fontSize: 'number'\n  };\n\n  TextFontSize.prototype._defaultOptions = {\n    defaultValues: {\n      fontSize: 48\n    },\n    predefined: {\n      fontSize: [6, 12, 14, 16, 20, 24, 32, 40, 48, 72]\n    }\n  };\n\n  TextFontSize.prototype.controlTemplate = function () {\n    var result,\n        $predefined,\n        selectHtml;\n\n    $predefined = this.options.predefined.fontSize.map(function (size, i) {\n      return '<option value=\"' + size + '\">' + size + '</option>';\n    }).join('');\n\n    selectHtml = '' +\n        '<select ' +\n          'class=\"editable-canvas-text-fontsize-input controls-value-item\" ' +\n          'name=\"drawer-size\"' +\n          'data-name=\"fontSize\"' +\n          'value=\"' + this.options.defaultValues.fontSize + '\">' +\n            $predefined +\n        '</select>';\n\n      var optionItemDefaultClasses = 'toolbar-item-wrapper editable-canvas-text-option editable-canvas-text-fontsize hidden',\n          optionItemAdditionalClasses = this.buttonMode ? ' toolbar-button-item ': '',\n          optionItemClasses = optionItemDefaultClasses + optionItemAdditionalClasses;\n\n      result = '' +\n          '<li class=\"' + optionItemClasses + '\">' +\n              '<div class=\"toolbar-item-description\">' +\n                '<span class=\"toolbar-item-label\">' +\n                this.drawer.t('Font size:') + ' ' +\n                '</span>' +\n                '<span class=\"toolbar-item-valueholder\"></span>' +\n                '<span class=\"toolbar-item-icon fa ' + this.buttonIconClass + '\"></span>' +\n              '</div>' +\n              '<div class=\"toolbar-dropdown-block collapsed\">' +\n                selectHtml +\n              '</div>' +\n          '</li>';\n\n    return result;\n  };\n\n  pluginsNamespace.TextFontSize = TextFontSize;\n})\n","export default (function ($, pluginsNamespace, util, BaseTextOptionTool) {\n  'use strict';\n\n  /**\n   * Creates controls for changing font style of text;\n   *\n   * @param drawer\n   * Instance of drawer\n   * @param {Object} options\n   * Configuration object.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   * @augments DrawerJs.plugins.BaseTextOptionTool\n   */\n\n  var TextFontStyle = function TextFontStyleConstructor(drawer, options) {\n    BaseTextOptionTool.call(this, drawer);\n\n    // init options\n    this._setupOptions(options);\n  };\n\n  TextFontStyle.prototype = Object.create(BaseTextOptionTool.prototype);\n  TextFontStyle.prototype.constructor = BaseTextOptionTool;\n\n  TextFontStyle.prototype.name = 'TextFontStyle';\n  TextFontStyle.prototype.optionName = 'TextFontStyle';\n  TextFontStyle.prototype.onlyPredefined = true;\n  TextFontStyle.prototype.focusTextOnChange = true;\n  TextFontStyle.prototype.buttonIconClass = 'fa-italic';\n  TextFontStyle.prototype.valueType = {\n    fontStyle: 'string'\n  };\n\n  TextFontStyle.prototype._defaultOptions = {\n    defaultValues: {\n      fontStyle: ''\n    },\n    predefined: {\n      fontStyle: [\"normal\", \"italic\", \"oblique\"]\n    }\n  };\n\n  TextFontStyle.prototype.controlTemplate = function () {\n    var result,\n        $predefined,\n        selectHtml;\n\n    $predefined = this.options.predefined.fontStyle.map(function (size, i) {\n      return '<option value=\"' + size + '\">' + size + '</option>';\n    }).join('');\n\n    selectHtml = '' +\n        '<select ' +\n        'class=\"editable-canvas-text-fontstyle-input controls-value-item\" ' +\n        'name=\"drawer-size\"' +\n        'data-name=\"fontStyle\"' +\n        'value=\"' + this.options.defaultValues.fontStyle + '\">' +\n        $predefined +\n        '</select>';\n\n    var optionItemDefaultClasses = 'toolbar-item-wrapper editable-canvas-text-option editable-canvas-text-fontstyle hidden',\n        optionItemAdditionalClasses = this.buttonMode ? ' toolbar-button-item ': '',\n        optionItemClasses = optionItemDefaultClasses + optionItemAdditionalClasses;\n\n    result = '' +\n        '<li class=\"' + optionItemClasses + '\">' +\n        '<div class=\"toolbar-item-description\">' +\n        '<span class=\"toolbar-item-label\">' +\n        this.drawer.t('Font style:') + ' ' +\n        '</span>' +\n        '<span class=\"toolbar-item-valueholder\"></span>' +\n        '<span class=\"toolbar-item-icon fa ' + this.buttonIconClass + '\"></span>' +\n        '</div>' +\n        '<div class=\"toolbar-dropdown-block collapsed\">' +\n        selectHtml +\n        '</div>' +\n        '</li>';\n\n    return result;\n  };\n\n  pluginsNamespace.TextFontStyle = TextFontStyle;\n})\n","export default (function ($, pluginsNamespace, util, BaseTextOptionTool) {\n  'use strict';\n\n  /**\n   * Creates controls for changing font size of text;\n   *\n   * @param drawer\n   * Instance of drawer\n   * @param {Object} options\n   * Configuration object.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   * @augments DrawerJs.plugins.BaseTextOptionTool\n   */\n\n  var TextFontWeight = function TextFontWeightConstructor(drawer, options) {\n    BaseTextOptionTool.call(this, drawer);\n\n    // init options\n    this._setupOptions(options);\n  };\n\n  TextFontWeight.prototype = Object.create(BaseTextOptionTool.prototype);\n  TextFontWeight.prototype.constructor = BaseTextOptionTool;\n\n\n  TextFontWeight.prototype.name = 'TextFontWeight';\n  TextFontWeight.prototype.optionName = 'TextFontWeight';\n  TextFontWeight.prototype.focusTextOnChange = true;\n  TextFontWeight.prototype.onlyPredefined = true;\n  TextFontWeight.prototype.buttonIconClass = 'fa-bold';\n\n  TextFontWeight.prototype._defaultOptions = {\n    defaultValues: {\n      fontWeight: 'normal'\n    },\n    predefined: {\n      fontWeight: ['normal', 'bold', 'light', 100, 200, 300, 400, 500, 600, 700, 800, 900]\n    }\n  };\n\n  TextFontWeight.prototype.controlTemplate = function () {\n    var result,\n        $predefined,\n        selectHtml;\n\n    $predefined = this.options.predefined.fontWeight.map(function (size, i) {\n      return '<option value=\"' + size + '\">' + size + '</option>';\n    }).join('');\n\n    selectHtml = '' +\n        '<select ' +\n        'class=\"editable-canvas-text-fontweight-input controls-value-item\" ' +\n        'name=\"drawer-size\"' +\n        'data-name=\"fontWeight\"' +\n        'value=\"' + this.options.defaultValues.fontWeight + '\">' +\n        $predefined +\n        '</select>';\n\n    var optionItemDefaultClasses = 'toolbar-item-wrapper editable-canvas-text-option editable-canvas-text-fontweight hidden',\n        optionItemAdditionalClasses = this.buttonMode ? ' toolbar-button-item ': '',\n        optionItemClasses = optionItemDefaultClasses + optionItemAdditionalClasses;\n\n    result = '' +\n        '<li class=\"' + optionItemClasses + '\">' +\n        '<div class=\"toolbar-item-description\">' +\n        '<span class=\"toolbar-item-label\">' +\n        this.drawer.t('Font Weight:') + ' ' +\n        '</span>' +\n        '<span class=\"toolbar-item-valueholder\"></span>' +\n        '<span class=\"toolbar-item-icon fa ' + this.buttonIconClass + '\"></span>' +\n        '</div>' +\n        '<div class=\"toolbar-dropdown-block collapsed\">' +\n        selectHtml +\n        '</div>' +\n        '</li>';\n\n    return result;\n  };\n\n  pluginsNamespace.TextFontWeight = TextFontWeight;\n})\n","export default (function ($, pluginsNamespace, util, BaseTextOptionTool) {\n  'use strict';\n\n  var classicDefaultValue = 1.16, // Standard value of line height\n      fabricDefaultLineHeight = fabric.Text.prototype.lineHeight || classicDefaultValue;\n\n  /**\n   * Creates controls for changing line height;\n   *\n   * @param drawer\n   * Instance of drawer\n   * @param {Object} options\n   * Configuration object.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   * @augments DrawerJs.plugins.BaseTextOptionTool\n   */\n\n  var TextLineHeight = function TextLineHeightConstructor(drawer, options) {\n    BaseTextOptionTool.call(this, drawer);\n\n    this._setupOptions(options);\n  };\n\n  TextLineHeight.prototype = Object.create(BaseTextOptionTool.prototype);\n  TextLineHeight.prototype.constructor = BaseTextOptionTool;\n\n  TextLineHeight.prototype.name = 'TextLineHeight';\n  TextLineHeight.prototype.optionName = 'TextLineHeight';\n  TextLineHeight.prototype.showOnEditMode = false;\n  TextLineHeight.prototype.hideOnEditMode = true;\n  TextLineHeight.prototype.stylesToObject = true;\n  TextLineHeight.prototype.preventHightlight = true;\n  TextLineHeight.prototype.buttonIconClass = 'fa-arrows-v';\n  TextLineHeight.prototype.onlyPredefined = true;\n\n  TextLineHeight.prototype.valueType = {\n    lineHeight: 'number'\n  };\n\n  TextLineHeight.prototype._defaultOptions = {\n    defaultValues: {\n      lineHeight: fabricDefaultLineHeight\n    },\n    predefined: {\n      lineHeight: [1, 1.16, 1.25, 1.5, 1.75, 2, 3]\n    }\n  };\n\n  TextLineHeight.prototype.collectDataFromObject = function (tool) {\n    var result = {\n      lineHeight: tool.lineHeight\n    };\n    this._lastData = this._lastData || {};\n    $.extend(true, this._lastData, result);\n    return result;\n  };\n\n  TextLineHeight.prototype.controlTemplate = function () {\n    var result,\n        $predefined,\n        selectHtml;\n\n    $predefined = this.options.predefined.lineHeight.map(function (size, i) {\n      var sizeInPercent = parseInt(Math.round(size * 100), 10);\n      return '<option value=\"' + size + '\">' + sizeInPercent + '%' + '</option>';\n    }).join('');\n\n    selectHtml = '' +\n        '<select ' +\n        'class=\"editable-canvas-text-lineheight-input controls-value-item\" ' +\n        'name=\"drawer-size\"' +\n        'data-name=\"lineHeight\"' +\n        'value=\"' + this.options.defaultValues.lineHeight + '\">' +\n        $predefined +\n        '</select>';\n\n    var optionItemDefaultClasses = 'toolbar-item-wrapper editable-canvas-text-option editable-canvas-text-lineheight hidden',\n        optionItemAdditionalClasses = '' +\n            (this.buttonMode ? ' toolbar-button-item ': '') +\n            (this.preventHightlight ? ' prevent-highlight ': ''),\n        optionItemClasses = optionItemDefaultClasses + optionItemAdditionalClasses;\n\n    result = '' +\n        '<li class=\"' + optionItemClasses + '\">' +\n        '<div class=\"toolbar-item-description\">' +\n        '<span class=\"toolbar-item-label\">' +\n        this.drawer.t('Line height:') + ' ' +\n        '</span>' +\n        '<span class=\"toolbar-item-valueholder\"></span>' +\n        '<span class=\"toolbar-item-icon fa ' + this.buttonIconClass + '\"></span>' +\n        '</div>' +\n        '<div class=\"toolbar-dropdown-block collapsed\">' +\n        selectHtml +\n        '</div>' +\n        '</li>';\n\n    return result;\n  };\n\n  pluginsNamespace.TextLineHeight = TextLineHeight;\n})\n","export default (function ($, pluginsNamespace, BaseToolOptions, util) {\n  \"use strict\";\n\n  /**\n   * Provides toolbar controls for configuring border size and color.\n   * Uses colorpicker plugin, so depends on it.\n   *\n   * @param {DrawerJs.Drawer} drawer\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @param {Object} options\n   * Configuration object.\n   *\n   * @param {String} options.color\n   * Default border color.\n   *\n   * @param {String} options.borderTypes\n   * Object with all borders that will be available for selection\n   * <br><br>\n   *\n   * Example:\n   * <code>\n   * <pre>\n   * \"None\": {\n   *   width: 0,\n   *   description: 'None'\n   * },\n   * \"Solid thin\": {\n   *   width: 1,\n   *   preview: this.assetsFolder + 'border-solid-thin.png'\n   * },\n   * </pre>\n   * </code>\n   *\n   * @param {String} options.defaultBorder\n   * Border that will be selected when object is created.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var ShapeBorder = function BorderConfigPlugin(drawer, options) {\n    this.optionName = 'border';\n    this.name = 'ShapeBorder';\n    // call super constructor\n    BaseToolOptions.call(this, drawer);\n\n    /**\n     * Option name. On selecting tool/object, if this.toolName is in array of\n     * object allowed options - tool will show controls\n     * @type {String}\n     */\n\n    // DrawerJs is created, so basePath is set and  util.getDrawerFolderUrl() works properly.\n    // so we can set assets folder\n    this.assetsFolder = util.getDrawerFolderUrl() + 'assets/';\n\n    // complete default option paths by assets path.\n    this._setGlobalClickHandler();\n    this._completeDefaultOptionsPaths();\n\n    // setup colorpicker for border color\n    this.colorpicker = new pluginsNamespace.ColorpickerControl(this.drawer, this.options);\n\n    this.currentColor = this.options.color;\n    this.currentBorder = this.options.borderTypes[this.options.defaultBorder];\n    this.activeToolIsShape = false;\n\n    this.drawer.on(this.drawer.EVENT_CANVAS_START_RESIZE, this.hideStyleDropdown.bind(this));\n  };\n\n  ShapeBorder.prototype = Object.create(BaseToolOptions.prototype);\n  ShapeBorder.prototype.constructor = BaseToolOptions;\n\n\n//////////////////////////////////////////////////////////////////////////////////////////\n  ShapeBorder.prototype._defaultOptions = {\n      color: 'rgba(0, 0, 0, 0)',\n      borderTypes: {\n        \"None\": {\n          width: 0,\n          description: 'None',\n          color: 'transparent'\n        },\n        \"Solid thin\": {\n          width: 1,\n          preview: 'border-solid-thin.png'\n        },\n        \"Solid bold\": {\n          width: 5,\n          preview: 'border-solid-bold.png'\n        },\n        \"Dashed thin\": {\n          width: 1,\n          dashArray: [8, 8],\n          preview: 'border-dashed-thin.png'\n        },\n        \"Dashed bold\": {\n          width: 5,\n          dashArray: [8, 8],\n          preview: 'border-dashed-bold.png'\n        }\n      },\n      defaultBorder: \"None\"\n    };\n\n\n    /**\n     * Complete path to previews by prepending path to assets folder to them\n     */\n    ShapeBorder.prototype._completeDefaultOptionsPaths = function() {\n      for (var borderType in this.options.borderTypes) {\n        var borderOption = this.options.borderTypes[borderType];\n        if (borderOption.preview) {\n          // stavskiys: updated because was need ability to manage assets path\n          borderOption.preview = util.assets.urlFor(borderOption.preview);\n        }\n      }\n    };\n\n  /**\n   * Set listeners for clicks - to properly close controls on outside clicks\n   */\n  ShapeBorder.prototype._setGlobalClickHandler = function() {\n    var self = this;\n    $(window.document).off('click.DrawerShapeBorder').on('click.DrawerShapeBorder', function (e) {\n      var $target = $(e.target),\n          isIndicator = $target.hasClass('border-type-indicator');\n      if (self.isDropdownVisible && !isIndicator) {\n        self.hideStyleDropdown();\n      }\n    });\n  };\n\n\n  /**\n   * When an object is selected on canvas we want to reflect that object's color and border type\n   * on the toolbar.\n   *\n   * This method checks selected object type and if it's a shape it gets that shape's color\n   * and border type and sets them as active on the color/border selection toolbar.\n   *\n   * @param fabricEvent\n   * @param fabricEvent\n   */\n  ShapeBorder.prototype.updateControlsFromObject = function (target) {\n    // get color\n    this.updateColorFromObject(target);\n    // get stroke\n    this.updateStrokeFromObject(target);\n    // now update controls state\n    this.updateControls();\n  };\n\n\n  /**\n   * Sets this.currentColor same as object stroke color,\n   * or TRASPARENT if object has no stroke\n   *\n   * @param  {fabric.Object} object\n   */\n  ShapeBorder.prototype.updateColorFromObject = function (object) {\n    var color = null;\n    color = object.get('stroke');\n    if (color) {\n      this.currentColor = color;\n    } else {\n      this.currentColor = pluginsNamespace.ColorpickerControl.TRANSPARENT;\n    }\n  };\n\n\n  /**\n   * Sets this.currentBorder same as object stroke,\n   * if object border patten matches with one of predefined patterns.\n   *\n   * @param  {fabric.Object} object\n   */\n  ShapeBorder.prototype.updateStrokeFromObject = function(object) {\n      // get stroke params\n      var shapeDashArray = object.get('strokeDashArray');\n      var shapeDashWidth = object.get('strokeWidth');\n      // search for pattern\n      for (var b in this.options.borderTypes) {\n        if (this.options.borderTypes.hasOwnProperty(b)) {\n          var bType = this.options.borderTypes[b];\n\n          var dashArrayEquals = JSON.stringify(bType.dashArray) === JSON.stringify(shapeDashArray);\n\n          if (!bType.dashArray && !shapeDashArray) {\n            dashArrayEquals = true;\n          }\n\n          if (dashArrayEquals && bType.width == shapeDashWidth) {\n            this.currentBorder = bType;\n          }\n        }\n      }\n  };\n\n\n  /**\n   * Apply selected border style to added object.\n   *\n   * @param evt\n   * @param fabricEvent\n   */\n  ShapeBorder.prototype._onObjectAdded = function (evt, fabricEvent) {\n    // do not react on object:added, if canvas is not loaded fully\n    if (this.drawer.mode != this.drawer.MODE_ACTIVE)\n      return;\n\n    var currentShape = fabricEvent.target;\n\n    this.applyBorderStyle(currentShape);\n    this.drawer.fCanvas.renderAll();\n  };\n\n\n  /**\n   * Update controls a\n   * If activated tool is Line/Arrow:\n   * 1) save old values of borderColor and border type\n   * 2) make current border color same as drawer active color\n   * 3) make current border 'Solid thin'\n   * @param {BaseTool} tool\n   */\n  ShapeBorder.prototype.onActivateTool = function ( tool) {\n\n    if (tool instanceof pluginsNamespace.Line ||\n      tool instanceof pluginsNamespace.ArrowOneSide ||\n      tool instanceof pluginsNamespace.ArrowTwoSide) {\n        this.colorBeforeLineShape = this.currentColor;\n        this.borderBeforeLineShape = this.currentBorder;\n\n        this.currentColor = this.drawer.activeColor;\n        this.currentBorder = this.options.borderTypes[\"Solid thin\"];\n        this.updateControls();\n    } else if (this.colorBeforeLineShape !== undefined) {\n        this.currentColor = this.colorBeforeLineShape;\n        this.currentBorder = this.borderBeforeLineShape;\n\n        delete this.colorBeforeLineShape;\n        delete this.borderBeforeLineShape;\n        this.updateControls();\n    }\n  };\n\n\n\n  /**\n   * Creates controls and adds them to toolbar.\n   * @param {DrawerToolbar} toolbar to add control to\n   */\n  ShapeBorder.prototype.createControls = function (toolbar) {\n    var _this = this;\n\n    // ------ color button -----------\n    this.colorButton = this.colorpicker.createControl(toolbar, this.onColorSelected.bind(this));\n    this.colorpicker.setColor(this.options.color);\n\n    // rewrite this, ugh...\n    this.colorButton.css('display', 'inline-block');\n    this.colorButton.find('.toolbar-label').text(this.drawer.t('Border:'));\n    // ------ /color button -----------\n\n    // ------ border type button -----------\n    _this.$borderTypeButton = $(\n      '<li class=\"editable-canvas-border-type\" ' +\n          'data-editable-canvas-sizeable=\"toolbar-button\" ' +\n          '>' +\n      '<span class=\"toolbar-label editable-canvas-border-type-label\">' +\n      this.drawer.t('Border type:') + ' ' +\n      '</span>' +\n      '<span class=\"border-type-indicator\" ' +\n            'data-editable-canvas-sizeable=\"toolbar-button\" ' +\n            '>' +\n      '</span>' +\n      '<span class=\"border-type-dropdown toolbar-dropdown-block hidden\" ' +\n            'data-editable-canvas-sizeable=\"toolbar-button\" ' +\n            // 'data-editable-canvas-cssrules=\"top\"' +\n      '>' +\n      '</span>' +\n      '</li>');\n\n\n    _this.isDropdownVisible = false;\n\n    _this.$borderTypeButton.$dropdown = _this.$borderTypeButton.find('.border-type-dropdown');\n    _this.$borderTypeButton.$indicator = _this.$borderTypeButton.find('.border-type-indicator');\n\n    util.bindClick(_this.$borderTypeButton, 'border-type-dropdown', _this.toggleStyleDropdown.bind(_this));\n\n    var $borderTypes = $('<ul></ul>');\n    _this.$borderTypeButton.$dropdown.append($borderTypes);\n\n    var borderTypeHandler = function (event) {\n      var $target = $(event.target),\n          borderTypeName = $target.attr('data-border-type');\n      if (borderTypeName) {\n        _this.currentBorder = _this.options.borderTypes[borderTypeName];\n        _this.onColorSelected();\n\n        event.stopPropagation();\n        event.preventDefault();\n      }\n    };\n\n    for (var borderTypeName in this.options.borderTypes) {\n      if (this.options.borderTypes.hasOwnProperty(borderTypeName)) {\n        var borderDefinition = this.options.borderTypes[borderTypeName];\n\n        var li = $(\n          '<li data-border-type=\"' + borderTypeName + '\"' +\n          'data-editable-canvas-sizeable=\"toolbar-button\" ' +\n          // 'data-editable-canvas-cssrules=\"height,line-height\">' +\n          // 'data-editable-canvas-cssrules=\"line-height\">' +\n          '</li>');\n        if (borderDefinition.preview) {\n          li.css('background-image', 'url(' + borderDefinition.preview + ')');\n        }\n        if (borderDefinition.description) {\n          li.text(borderDefinition.description);\n        }\n        util.bindClick(li, 'border-type', borderTypeHandler);\n\n        $borderTypes.append(li);\n      }\n    }\n\n    toolbar.addControl(_this.$borderTypeButton, this.options.buttonOrder);\n    // ------ /border type button -----------\n\n    _this.onColorSelected();\n    _this.hideControls();\n  };\n\n\n  /**\n   * React on user color selection\n   * @param  {String} selectedColor\n   */\n  ShapeBorder.prototype.onColorSelected = function (selectedColor) {\n    if (selectedColor) {\n      this.currentColor = selectedColor;\n    }\n\n    this.updateControls();\n\n    if (this.drawer.fCanvas) {\n      var currentShape = this.drawer.fCanvas.getActiveObject();\n      if (currentShape) {\n        this.applyBorderStyle(currentShape);\n      }\n      this.drawer.fCanvas.renderAll();\n    }\n  };\n\n\n  /**\n   * Apply current border style to object\n   * @todo @refactor\n   * @param  {fabric.Object} fabricObject\n   */\n  ShapeBorder.prototype.applyBorderStyle = function (fabricObject) {\n    if (util.isShape(fabricObject) || fabricObject instanceof fabric.Line) {\n      if (this.currentBorder.color) {\n        fabricObject.set('stroke', this.currentBorder.color);\n      } else {\n        fabricObject.set('stroke', this.currentColor);\n      }\n\n      fabricObject.set('strokeWidth', this.currentBorder.width);\n      if (this.currentBorder.dashArray) {\n        fabricObject.set('strokeDashArray', this.currentBorder.dashArray);\n      } else {\n        fabricObject.set('strokeDashArray', null);\n      }\n    }\n  };\n\n\n  /**\n   * Updates UI to reflect selected border and color.\n   * Hides colorpicker if current border is 'None'\n   */\n  ShapeBorder.prototype.updateControls = function () {\n    // update color button\n    this.colorpicker.setColor(this.currentColor);\n\n    // hide dropdowns when something is selected\n    this.hideStyleDropdown();\n\n    // also hide color button when border None is selected\n    if (this.currentBorder.description == 'None') {\n      this.colorpicker.hideControls();\n    } else {\n      this.colorpicker.showControls();\n    }\n\n    // set indicator background\n    var $indicator = this.$borderTypeButton.find('.border-type-indicator');\n    var background = this.currentBorder.preview ? 'url(' + this.currentBorder.preview + ')'\n                                                : 'none';\n    $indicator.css('background-image',background);\n\n    // set indicator text\n    if (this.currentBorder.description) {\n      $indicator.text(this.drawer.t(\n        this.currentBorder.description\n      ));\n    } else {\n      $indicator.text('');\n    }\n  };\n\n\n  ShapeBorder.prototype.showControls = function () {\n    this.colorpicker.showControls();\n    this.$borderTypeButton.show();\n  };\n\n  ShapeBorder.prototype.hideControls = function () {\n    this.colorpicker.hideControls();\n    this.$borderTypeButton.hide();\n  };\n\n\n  ShapeBorder.prototype.toggleStyleDropdown = function() {\n    var needToShow = !this.isDropdownVisible;\n    if (needToShow) {\n      this.showStyleDropdown();\n    } else {\n      this.hideStyleDropdown();\n    }\n  };\n\n  ShapeBorder.prototype.hideStyleDropdown = function() {\n    this.$borderTypeButton.$dropdown.addClass('hidden');\n    this.isDropdownVisible = false;\n    if (this.$clonedDropdown) {\n      this.$clonedDropdown.remove();\n    }\n  };\n\n  ShapeBorder.prototype.showStyleDropdown = function() {\n    this.$borderTypeButton.$dropdown.removeClass('hidden');\n    this.isDropdownVisible = true;\n\n    var toolbar = this.drawer && this.drawer.toolbars && this.drawer.toolbars.toolOptionsToolbar,\n        toolbarOptions = toolbar && toolbar.options,\n        notInsidePopup = toolbarOptions && toolbarOptions.position !== 'popup',\n        outside = toolbarOptions && toolbarOptions.positionType === 'outside',\n        insideScrollable = toolbarOptions && toolbarOptions.compactType === 'scrollable',\n        toolbarHaveScrollable = notInsidePopup && outside && insideScrollable;\n    if (toolbarHaveScrollable) {\n      var $dropdown = this.$borderTypeButton.$dropdown,\n          clone;\n\n      $dropdown.removeClass('hidden');\n      clone = $dropdown.clone(true);\n\n      this.$borderTypeButton.$dropdown.closest('.toolbar-placeholder').append(clone);\n      clone.addClass('border-type-dropdown-cloned');\n      this.$clonedDropdown = clone;\n\n      var drawerSizes = util.getScrollOffset(this.drawer.$canvasEditContainer),\n          parentSizes = util.getScrollOffset(this.$borderTypeButton),\n          canvasRect = this.drawer.$canvasEditContainer.get(0).getBoundingClientRect();\n\n      var buttonSizes = this.$borderTypeButton.get(0).getBoundingClientRect(),\n          buttonCenter = buttonSizes.left + buttonSizes.width/2,\n          clonedDropdownOffset = (buttonCenter - canvasRect.left - (parentSizes.left - drawerSizes.left)) - this.$clonedDropdown.width() / 2;\n\n      var offsetRightFromCss = 12,\n          toRightOffset = buttonSizes.left + buttonSizes.width - canvasRect.left - (parentSizes.left - drawerSizes.left) - this.$clonedDropdown.width() - offsetRightFromCss;\n      this.$clonedDropdown.css({\n        'left': toRightOffset\n      });\n      $dropdown.addClass('hidden');\n    }\n  };\n\n  pluginsNamespace.ShapeBorder = ShapeBorder;\n\n})\n","export default (function($, BaseShape, pluginsNamespace) {\n  /**\n   * Provides a circle button which can be used to draw circles.\n   *\n   * @param {DrawerJs.Drawer} drawerInstance\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @param {Object} options\n   * Configuration object.\n   *\n   * @param {String} [options.centeringMode='normal']\n   * Defines centering method when drawing a shape.\n   * <br><br>\n   * Valid values are:\n   * <br><br>\n   * <code>normal</code>: circle's top left corner will be placed to the\n   * position of first mouse click and will be resized from that point.\n   * <br><br>\n   * <code>from_center</code>: circle's center point will be placed to the\n   * position of first mouse click and will be resized from center.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var Circle = function CircleConstructor(drawerInstance, options) {\n    var _this = this;\n\n    BaseShape.call(_this, drawerInstance);\n\n    this.name = 'Circle';\n    this.btnClass = 'btn-circle';\n    this.faClass = 'fa-circle';\n    this.tooltip = drawerInstance.t('Draw a circle');\n\n    this.options = options || {};\n    this.centeringMode =\n      this.options.centeringMode || BaseShape.CENTERING_MODE.NORMAL;\n  };\n\n  Circle.prototype = Object.create(BaseShape.prototype);\n  Circle.prototype.constructor = Circle;\n\n  Circle.prototype.minShapeSize = 5;\n\n  Circle.prototype.createShape = function (left, top) {\n    this.startLeft = left;\n    this.startTop = top;\n\n    var circle = new fabric.PCircle({\n      left: left,\n      top: top,\n      radius: 1,\n      fill: this.drawerInstance.activeColor,\n      opacity:this.drawerInstance.activeOpacity\n    });\n\n    return circle;\n  };\n\n  Circle.prototype.updateShape = function (circle, newLeft, newTop) {\n    var width = newLeft - this.startLeft;\n    var height = newTop - this.startTop;\n\n    var widthAbs = Math.abs(width);\n    var heightAbs = Math.abs(height);\n\n    var radius = widthAbs < heightAbs ? widthAbs : heightAbs;\n\n    radius = Math.abs(radius);\n    radius = radius / 2;\n\n    if (this.centeringMode == BaseShape.CENTERING_MODE.FROM_CENTER) {\n      radius *= 2;\n      circle.set('left', this.startLeft - radius);\n      circle.set('top', this.startTop - radius);\n    }\n\n    if (this.centeringMode == BaseShape.CENTERING_MODE.NORMAL) {\n      if (width < 0) {\n        circle.set('left', this.startLeft - (radius * 2));\n      } else {\n        circle.set('left', this.startLeft);\n      }\n\n      if (height < 0) {\n        circle.set('top', this.startTop - (radius * 2));\n      } else {\n        circle.set('top', this.startTop);\n      }\n    }\n\n    circle.set('radius', radius);\n  };\n\n  pluginsNamespace.Circle = Circle;\n})\n","export default (function($, BaseTool, pluginsNamespace, util) {\n    /**\n     * Tool to add and upload image to canvas.\n     *\n     * @param {DrawerJs.Drawer} drawerInstance\n     * Instance of {@link DrawerJs.Drawer}.\n     *\n     * @param {Object} options\n     * Configuration object.\n     *\n     * @param {String} [options.maxImageSizeKb='5120']\n     * Max size of image to upload in KB. Default is 5 MB;\n     * <br><br>\n     * If null, or 0 is set - then size is unlimited.\n     * Negative values are considered as 0;\n     *\n     * @param {Boolean} [options.scaleDownLargeImage=true]\n     * If set to true - images. larger then canvas, will be scaled down\n     *\n     * @param {String[]} [options.acceptedMIMETypes=['image/jpeg', 'image/png', 'image/gif']]\n     * If set to true - images. larger then canvas, will be scaled down\n     *\n     * @constructor\n     * @memberof DrawerJs.plugins\n     */\n    var ImageTool = function ImageConstructor(drawerInstance, options) {\n        var _this = this;\n\n        BaseTool.call(_this, drawerInstance);\n\n        this.drawer = drawerInstance;\n        this.name = 'Image';\n        this.btnClass = 'btn-image';\n        this.faClass = 'fa-image';\n        this.tooltip = drawerInstance.t('Insert an image');\n\n        this._setupOptions(options);\n    };\n\n    // Derive ImageTool from BaseTool\n    ImageTool.prototype = Object.create(BaseTool.prototype);\n    ImageTool.prototype.constructor = ImageTool;\n\n    /**\n     * Default options\n     * @type {{defaultMaxSize: string, scaleDownLargeImage: boolean, acceptedMIMETypes: string[]}}\n     */\n    ImageTool.prototype._defaultOptions = { maxImageSizeKb : 5120, // 5 MB\n                                           scaleDownLargeImage : true,\n                                           centerImage : true,\n                                           cropIsActive : true,\n                                           acceptedMIMETypes: ['image/jpeg', 'image/png', 'image/gif'] };\n\n\n    /**\n     * Tool activation method.\n     * Is called in lifecycle of event Drawer.EVENT_DO_ACTIVATE_TOOL.\n     * Calls  BaseTool._activateTool .\n     *\n     * @private\n     */\n    ImageTool.prototype._activateTool = function() {\n        var _this = this;\n        this.drawerInstance.log('TOOL', 'Image._activateTool()');\n        BaseTool.prototype._activateTool.call(this);\n\n        this._showDialog();\n\n        // deactivate tool. Slight delay is needed, because without it\n        // tool is deactivated before listeners on EVENT_DO_ACTIVATE_TOOL in drawer are executed\n        // which lead to incorrect way of setting drawer.lastUsedPluginName\n        util.setTimeout(function(){\n            _this.drawerInstance.trigger(_this.drawerInstance.EVENT_DO_DEACTIVATE_TOOL, [_this]);\n        }, 300);\n\n    };\n\n\n    /**\n     * Shows file open dialog\n     * @private\n     */\n    ImageTool.prototype._showDialog = function() {\n        var acceptedMIMEStr = this.options.acceptedMIMETypes.join(',');\n        $el = $('<input type=\"file\" accept=\"' + acceptedMIMEStr + '\">');\n        $el.on('change', this._processFileInput.bind(this));\n\n        $el.click();\n\n    };\n\n    /**\n     * Callback to process user selected files.\n     *\n     * @param {Event} e\n     * @private\n     */\n    ImageTool.prototype._processFileInput = function(e)  {\n        var _this = this;\n        var files = e.target.files;\n\n        // check there was file choosen\n        if (files.length < 1) {\n            _this.drawerInstance.showError(this.drawerInstance.t('No file was selected!'));\n            return;\n        }\n        var file = files[0];\n\n        // check file\n        if (!this._checkFile(file)) {\n            return;\n        }\n\n        var fileReader = new FileReader();\n        // on file load - create HTML5 Image from it\n        fileReader.onload = function (onloadEvent) {\n            _this.drawerInstance.log('IMAGE LOADED:', file.name);\n          var triggerImageCrop = _this.options.cropIsActive && _this.drawer._pluginsInstances.ImageCrop;\n          if (triggerImageCrop) {\n            _this._triggerImageCrop(fileReader.result);\n          } else {\n            _this.loadImage(fileReader.result);\n          }\n        };\n\n        fileReader.readAsDataURL(file);\n    };\n\n\n    /**\n     * Makes some checks  to file.\n     *\n     * @param {File} file\n     * @returns {boolean}\n     * @private\n     */\n    ImageTool.prototype._checkFile = function(file) {\n        var _this = this;\n        // crude check of file type\n        if(file.type.indexOf('image') < 0) {\n            _this.drawerInstance.showError(this.drawerInstance.t('Incorrect file type!'));\n            return false;\n        }\n\n        // check for maxSize\n        if ((this.options.maxImageSizeKb > 0) &&\n            (file.size > this.options.maxImageSizeKb * 1024)) {\n            var err = this.drawerInstance.t('File is to big!. Maximum file size is ');\n            err = err + this.options.maxImageSizeKb + ' KB';\n            _this.drawerInstance.showError(err);\n            return false;\n        }\n\n        return true;\n    };\n\n\n    /**\n     * Load image from url/dataUrl, then call addImage()\n     *\n     * @param {string} dataUrl src of image or dataUrl\n     * @private\n     */\n    ImageTool.prototype.loadImage = function(dataUrl, options) {\n        var _this = this;\n        var image = new Image();\n\n        // after Image was created from file data - create fabric.Image from it\n        image.onload = function() {\n            _this.addImage(image, options);\n        };\n\n        // show error on fail\n        image.onerror = function() {\n            var err = _this.drawerInstance.t('Image failed to create!');\n            _this.drawerInstance.showError(err);\n        };\n\n        // this will start creating image\n        image.src = dataUrl;\n    };\n\n  /**\n   * Init crop plugin\n   * @param {string} image - src of image, can be base64 encoded url\n   * @private\n   */\n  ImageTool.prototype._triggerImageCrop = function (image) {\n    var dataToEvent = {\n      url: image,\n      callback: this.loadImage.bind(this)\n    };\n    this.drawerInstance.trigger(this.drawerInstance.EVENT_IMAGE_CROP, dataToEvent);\n  };\n\n    /**\n     * Adds image to canvas.\n     *\n     * @param {Image} image\n     */\n    ImageTool.prototype.addImage = function(image, options) {\n        var fCanvas = this.drawerInstance.fCanvas;\n        var fabricImage = new fabric.ErasableImage(image);\n\n        options = options ? options : this.options;\n        if (options.scaleDownLargeImage) {\n            this._fitLargeImage(fabricImage);\n        } else {\n            fabricImage.left = options.left ? options.left : 0;\n            fabricImage.top  = options.top ? options.top : 0;\n            fabricImage.scaleX = options.scaleX ? options.scaleX : 1;\n            fabricImage.scaleY = options.scaleY ? options.scaleY : 1;\n        }\n      fabricImage.opacity = this.drawerInstance.activeOpacity;\n\n\n        if (options.centerImage) {\n            fCanvas.centerObject(fabricImage);\n        }\n\n        fCanvas.add(fabricImage);\n        fCanvas.setActiveObject(fabricImage);\n    };\n\n\n    /**\n     * If option options.scaleDownLargeImage is set,\n     * scales images, larger then canvas to fit it.\n     *\n     * @param {fabric.Image} fImage\n     * @private\n     */\n    ImageTool.prototype._fitLargeImage = function(fImage) {\n        var fCanvas = this.drawerInstance.fCanvas;\n\n        var w = fCanvas.width * 0.95;\n        var h = fCanvas.height  * 0.95;\n        var scaleX = 1.0, scaleY = 1.0;\n        if (fImage.width > w) {\n            scaleX =  w / fImage.width;\n        }\n        if (fImage.height > h) {\n            scaleY =  h / fImage.height;\n        }\n        var scale = Math.min(scaleX, scaleY);\n        fImage.set({ 'scaleX' : scale, 'scaleY' : scale});\n    };\n\n    pluginsNamespace.Image = ImageTool;\n\n})\n","export default (function(DrawerApi) {\n\n    /**\n     * Sets background image from given url.\n     *\n     * @param {String}   imageUrl\n     * @param {Function} callback callback on success\n     */\n    DrawerApi.prototype.addImageFromUrl = function(imageUrl, options) {\n        this.drawer.api.checkIsActive();\n        var tool = this.drawer.getPluginInstance('Image');\n        tool.loadImage(imageUrl, options);\n    };\n\n    /**\n     * Sets background image from given image object.\n     *\n     * @param {Image}   image\n     * @param {Object}   options\n     * @param {Function} callback callback on success\n     */\n    DrawerApi.prototype.addImage = function(image, options) {\n        this.drawer.api.checkIsActive();\n        var tool = this.drawer.getPluginInstance('Image');\n        tool.addImage(image, options);\n    };\n\n})\n","export default (function ($, BaseShape, pluginsNamespace) {\n  /**\n   * Provides a line button which can be used to draw lines.\n   *\n   * @param {DrawerJs.Drawer} drawerInstance\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * Tool is using drawerInstance.options['lineAngleTooltip']\n   * Default settings are:\n   * {  enabled: false,\n   *    fontSize: 11,\n   *    fontFamily:  'Arial, sans serif',\n   *    color: 'black'};\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var Line = function LineConstructor(drawerInstance) {\n    // call super\n    BaseShape.call(this, drawerInstance);\n\n    this.name = 'Line';\n    /**\n     * List of tool options to show when tool is activated.\n     * Deviating from BaseShape tool, Line has no 'color', only 'border'.\n     * @type {String[]}\n     */\n    this.toolOptionsList = ['border', 'opacity', 'lineWidth', 'strokeWidth'];\n\n    this.btnClass = 'btn-line';\n    this.faClass = 'fa-line';\n    this.tooltip = drawerInstance.t('Draw a line');\n\n    this.group = {\n      name: 'lines',\n      tooltip: drawerInstance.t('Lines and arrows')\n    };\n\n    this._setupOptions({});\n    $.extend(true, this.options.lineAngleTooltip, drawerInstance.options.lineAngleTooltip || {});\n\n    // add fallback for fontFamily\n    this.options.lineAngleTooltip.fontFamily += ', ' + this._defaultOptions.lineAngleTooltip.fontFamily;\n  };\n\n  Line.prototype = Object.create(BaseShape.prototype);\n  Line.prototype.constructor = Line;\n\n  Line.prototype.checkOnlyWidthOrHeight = true;\n\n  Line.prototype._defaultOptions = {\n    lineAngleTooltip: {\n      enabled: false,\n      fontSize: 11,\n      fontFamily:  'Arial, sans serif',\n      color: 'black'\n    }\n  };\n\n\n  /**\n   * Create new shape with minimal size.\n   * Is called from BaseShape nmouseDown handler.\n   *\n   * @param  {Number} left [description]\n   * @param  {Number} top  [description]\n   * @return {fabric.ErasableLine}\n   */\n  Line.prototype.createShape = function (left, top) {\n    var line = new fabric.ErasableLine();\n\n    line.set('x1', left);\n    line.set('x2', left + 1);\n    line.set('y1', top);\n    line.set('y2', top + 1);\n    line.set('stroke', this.drawerInstance.activeColor);\n    line.set('opacity', this.drawerInstance.activeOpacity);\n    line.set('strokeWidth', this.drawerInstance.lineStrokeWidth || 2);\n\n    this.createAngleTooltip(line);\n\n    return line;\n  };\n\n\n  /**\n   * Update shape with new left, top,\n   * Is called from BaseShape mouseMove handler\n   *\n   * @param  {fabric.Line} line    [description]\n   * @param  {Number} newLeft [description]\n   * @param  {Number} newTop  [description]\n   */\n  Line.prototype.updateShape = function (line, newLeft, newTop) {\n    line.set('x2', newLeft);\n    line.set('y2', newTop);\n\n    this.updateAngleTooltip(line);\n  };\n\n\n  /**\n   * Is called from BaseShape mouseUp handler.\n   */\n  Line.prototype.finishShape = function () {\n    this.removeAngleTooltip();\n  };\n\n\n  /**\n   * Create text object for line angle tooltip\n   *\n   * @param  {fabric.Line} line\n   */\n  Line.prototype.createAngleTooltip = function (line) {\n    if (!this.options.lineAngleTooltip.enabled)\n      return;\n\n    this.angleTooltip = new fabric.IText('Text');\n    this.angleTooltip.set('fontFamily', this.options.lineAngleTooltip.fontFamily);\n    this.angleTooltip.set('fontSize', this.options.lineAngleTooltip.fontSize);\n    this.angleTooltip.set('left', line.x1 - 10);\n    this.angleTooltip.set('top', line.y1 - 10);\n    this.angleTooltip.set('stroke', this.options.lineAngleTooltip.color);\n    this.angleTooltip.set('fill', this.options.lineAngleTooltip.color);\n    this.angleTooltip.set('text', '');\n\n    this.drawerInstance.fCanvas.add(this.angleTooltip);\n    this.updateAngleTooltip(line);\n  };\n\n\n  /**\n   * Update angle tooltip with line current angle\n   *\n   * @param  {fabric.Line} line\n   */\n  Line.prototype.updateAngleTooltip = function (line) {\n    if (!this.options.lineAngleTooltip.enabled)\n      return;\n\n    // calc line angle\n    var angleRad = Math.atan((line.y2 - line.y1) / (line.x2 - line.x1));\n    var angle = Math.abs(fabric.util.radiansToDegrees(angleRad));\n    this.angleTooltip.setText(angle.toFixed().toString());\n\n    // determine tooltip position\n    var tooltipOffsetX = this.options.lineAngleTooltip.fontSize;\n    var tooltipOffsetY = -this.options.lineAngleTooltip.fontSize;\n    // if line is pointing to the left\n    if (line.x2 < line.x1) {\n      tooltipOffsetX = -(this.options.lineAngleTooltip.fontSize + 10);\n    }\n    // if line is pointing downside\n    if (line.y2 > line.y1) {\n      tooltipOffsetY = 2;\n    }\n\n    this.angleTooltip.set('left', line.x1 + tooltipOffsetX);\n    this.angleTooltip.set('top', line.y1 + tooltipOffsetY);\n    // this is needed to overpower strange issue, when tooltip is always same color as line\n    this.angleTooltip.set('stroke', this.options.lineAngleTooltip.color);\n    this.angleTooltip.set('fill', this.options.lineAngleTooltip.color);\n  };\n\n\n  /**\n   * Removes angle tooltip.\n   */\n  Line.prototype.removeAngleTooltip = function () {\n    if (this.options.lineAngleTooltip.enabled) {\n      if (this.angleTooltip) {\n        this.angleTooltip.remove();\n        delete this.tooltip;\n      }\n    }\n  };\n\n  pluginsNamespace.Line = Line;\n\n})\n","export default (function($, BaseShape, pluginsNamespace) {\n  /**\n   * Provides a rectangle button which can be used to draw rectangles.\n   *\n   * @param {DrawerJs.Drawer} drawerInstance\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @param {Object} options\n   * Configuration object.\n   *\n   * @param {String} [options.centeringMode='normal']\n   * Defines centering method when drawing a shape.\n   * <br><br>\n   * Valid values are:\n   * <br><br>\n   * <code>normal</code>: rectangle's top left corner will be placed to the\n   * position of first mouse click and will be resized from that point.\n   * <br><br>\n   * <code>from_center</code>: rectangle's center point will be placed to the\n   * position of first mouse click and will be resized from center.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var Rectangle = function RectangleConstructor(drawerInstance, options) {\n    var _this = this;\n\n    BaseShape.call(_this, drawerInstance);\n\n    this.name = 'Rectangle';\n    this.btnClass = 'btn-rectangle';\n    this.faClass = 'fa-stop';\n    this.tooltip = drawerInstance.t('Draw a rectangle');\n\n    this.options = options || {};\n    this.centeringMode =\n      this.options.centeringMode || BaseShape.CENTERING_MODE.NORMAL;\n  };\n\n  Rectangle.prototype = Object.create(BaseShape.prototype);\n  Rectangle.prototype.constructor = Rectangle;\n\n  Rectangle.prototype.createShape = function (left, top) {\n    this.startLeft = left;\n    this.startTop = top;\n\n    var rect = new fabric.PRect({\n      left: left,\n      top: top,\n      height: 1,\n      width: 1,\n      fill: this.drawerInstance.activeColor,\n      opacity:this.drawerInstance.activeOpacity\n    });\n\n    return rect;\n  };\n\n  Rectangle.prototype.updateShape = function (rectangle, newLeft, newTop) {\n    var width = newLeft - this.startLeft;\n    var height = newTop - this.startTop;\n\n    if (this.centeringMode == BaseShape.CENTERING_MODE.FROM_CENTER) {\n      width *= 2;\n      height *= 2;\n      rectangle.set('left', newLeft - width);\n      rectangle.set('top', newTop - height);\n    }\n\n    if(width > 0){\n      rectangle.set('width', width);\n    } else {\n      rectangle.set('left', newLeft);\n      rectangle.set('width', width * -1);\n    }\n\n    if(height > 0){\n      rectangle.set('height', height);\n    } else {\n      rectangle.set('top', newTop);\n      rectangle.set('height', height * -1);\n    }\n\n  };\n\n  pluginsNamespace.Rectangle = Rectangle;\n\n})\n","export default (function ($, BaseShape, pluginsNamespace, util) {\n  \"use strict\";\n\n  /**\n   * Provides an editable text shape.\n   *\n   * @param drawerInstance\n   *\n   * @param {Object} options\n   * Configuration object.\n   *\n   * @param {number} options.editIconSize\n   * Sets the 'edit icon' size, in pixels.\n   * Default is 32px. More then 64px is not recommended.\n   *\n   * @param {boolean} options.editIconMode\n   * Sets if 'edit icon' mode is on.\n   *\n   * @param {object.<string, array>} options.predefined\n   * List of available values from control dropdown\n   *\n   * @param {object.<string, array>} options.defaultValues\n   * List of default values of styles\n   *\n   * @memberof DrawerJs.plugins\n   *\n   * @constructor\n   * @augments DrawerJs.plugins.BaseShape\n   */\n  var Text = function TextConstructor(drawerInstance, options) {\n    // call super c-tor\n    BaseShape.call(this, drawerInstance);\n\n\n    this._setupOptions(options);\n\n    this.tooltip = this.drawerInstance.t('Draw a text');\n    this.helpTooltipText = this.drawerInstance.t('Click to place a text');\n\n    this.drawerInstance.on(this.drawerInstance.EVENT_OPTIONS_TOOLBAR_CREATED + this.eventNs, this._onOptionsToolbarCreated.bind(this));\n  };\n\n  Text.prototype = Object.create(BaseShape.prototype);\n  Text.prototype.constructor = Text;\n\n\n  Text.prototype.name = 'Text';\n  /**\n   * List of tool options to show when tool is activated.\n   * Deviating from BaseShape tool, Line has no 'color', only 'border'.\n   * @type {String[]}\n   */\n  Text.prototype.toolOptionsList = ['color', 'border', 'opacity'];\n\n\n  // tool event namespace\n  Text.prototype.eventNs = '.textTool';\n\n  Text.prototype.name = 'Text';\n  Text.prototype.btnClass = 'btn-text';\n  Text.prototype.faClass = 'fa-font';\n/////////////////////////////////////////////////////////\n\n    /**\n     * On tool options toolbar created - create controls and set handlers\n     * To proper react on objects selection and\n     *\n     * @param  {Event} ev\n     * @param  {Drawer} toolbar toolbar which was created\n     * @private\n     */\n    Text.prototype._onOptionsToolbarCreated = function (ev, toolbar) {\n\n      // react on text selection change\n      this.drawerInstance.on(this.drawerInstance.EVENT_TEXT_SELECTION_CHANGED, this._onTextSelectionChanged.bind(this));\n      // react on edit mode entering\n      this.drawerInstance.on(this.drawerInstance.EVENT_TEXT_EDITING_ENTERED, this._onTextEditingEntered.bind(this));\n      // react on edit mode exiting\n      this.drawerInstance.on(this.drawerInstance.EVENT_TEXT_EDITING_EXITED, this._onTextEditingExited.bind(this));\n    };\n\n    Text.prototype._deactivateTool = function () {\n        if (!this.active) {\n          return;\n        }\n\n        // call _deactivateTool() of parent\n        BaseShape.prototype._deactivateTool.call(this);\n    };\n\n\n    /**\n     * Removes tool controls.\n     * If  doDeleteToolbarCreationListeners is true - removes listeners on toolbar creation event.\n     * So, tool will not appear on toolbar next time, when toolbar is created.\n     *\n     * @param {boolean} doDeleteToolbarCreationListeners\n     */\n    Text.prototype.removeTool = function(doDeleteToolbarCreationListeners) {\n        // sign off option toolbar creation\n        if (doDeleteToolbarCreationListeners) {\n            this.drawerInstance.off(this.drawerInstance.EVENT_OPTIONS_TOOLBAR_CREATED + this.eventNs);\n        }\n\n        // call parent removeTool()\n        BaseShape.prototype.removeTool.call(this, doDeleteToolbarCreationListeners);\n    };\n\n  /**\n   * React on edit mode entering\n   * @param  {fabric.Event} fEvent\n   * @param  {fabric.Object} tool - Object of active tool\n   * @private\n   */\n  Text.prototype._onTextEditingEntered = function (fEvent, tool) {\n    console.info('EVENT_TEXT_EDITING_ENTERED');\n    this._onTextSelectionChanged(fEvent, tool);\n  };\n\n  /**\n   * React on edit mode exiting\n   * @param  {fabric.Event} fEvent\n   * @param  {fabric.Object} tool - Object of active tool\n   * @private\n   */\n  Text.prototype._onTextEditingExited = function (fEvent, tool) {\n    if (tool && tool.target) {\n      tool.target._lastSelection = undefined;\n      tool.target._lastStyles = undefined;\n    }\n  };\n\n  /**\n   * React on styles changes of current text object\n   * @param  {fabric.Event} ev\n   * @param  {fabric.Object} tool - Object of active tool\n   * @private\n   */\n  Text.prototype._onTextSelectionChanged = function (ev, tool) {\n    var targetObj = (tool && tool.target) || this.drawerInstance.getActiveObject(); // @todo\n\n    var currentPos = {\n          start: targetObj.selectionStart,\n          end: targetObj.selectionEnd\n        },\n        lastPos = targetObj._lastSelection || {},\n        emptySelection = currentPos.start === currentPos.end,\n        firstChar = currentPos.start === 0,\n        sameStartPosition = currentPos.start === lastPos.start && currentPos.start !== undefined,\n        sameEndPosition = currentPos.end === lastPos.end && currentPos.end !== undefined,\n        samePosition = sameStartPosition && sameEndPosition;\n\n    if (!samePosition) {\n      targetObj._lastSelection = currentPos;\n\n      var objectStyles = targetObj.getObjStyles(),\n          prevStyles = targetObj._lastStyles || {},\n          getPrevCharStyles = (emptySelection && !firstChar),\n          prevCharStyles = getPrevCharStyles && targetObj.getSelectionStyles(currentPos.start - 1),\n          styles = prevCharStyles || targetObj.getSelectionStyles(),\n          stylesAreChanged = targetObj._hasStyleChanged(prevStyles, prevCharStyles || styles),\n          stylesWithMultipleValues = [];\n\n      // For not empty selection\n      if (!emptySelection) {\n        styles = $.extend(true, {}, styles);\n        var stylesArrayForEachChar = targetObj.getSelectionStyles(currentPos.start, currentPos.end),\n            firstStyleObj = $.extend(true, {}, stylesArrayForEachChar[0]);\n        stylesArrayForEachChar.forEach(function(stylesObj, i) {\n          for (var styleName in objectStyles) {\n            var charsHaveDifferentStyles = stylesObj[styleName] !== firstStyleObj[styleName],\n                alreadyMultiple = stylesWithMultipleValues.indexOf(styleName) !== -1;\n            if (charsHaveDifferentStyles && !alreadyMultiple) {\n              stylesWithMultipleValues.push(styleName);\n              styles[styleName] = undefined;\n            }\n          }\n        });\n        stylesAreChanged = stylesWithMultipleValues.length || targetObj._hasStyleChanged(prevStyles, styles);\n      }\n      this.drawerInstance.setTemporaryStyles(styles);\n\n      if (stylesAreChanged) {\n        targetObj._lastStyles = styles;\n\n        var drawer = this.drawerInstance;\n        drawer.trigger(drawer.EVENT_TEXT_STYLES_CHANGED, [styles, objectStyles, stylesWithMultipleValues]);\n      }\n    }\n  };\n\n  Text.prototype.addShape = function (left, top, text, styles) {\n    styles = styles || {};\n    left = parseInt(left, 10);\n    left = left || left === 0 ? left : 0;\n    top = parseInt(top, 10);\n    top = top || top === 0 ? top : 0;\n    var shape = this.createShape(left, top, text, styles);\n    shape.set('left',left);\n    shape.set('top',top);\n    this.shape = shape;\n    // finish drawing\n    this.finishItemDraw();\n\n    // some tools are supposed to draw one shape and then deactivate\n    if (this.onlyOneItem) {\n      this.drawerInstance.trigger(this.drawerInstance.EVENT_DO_DEACTIVATE_TOOL, this);\n    }\n  };\n\n  Text.prototype.createShape = function (left, top, textString, styles) {\n    styles = styles || {};\n    textString = textString || 'Text';\n    this.startLeft = left;\n    this.startTop = top;\n\n    this.text = new fabric.ErasableText(textString, {editIconMode : this.options.editIconMode, editIconSize: this.options.editIconSize});\n\n    var drawer = this.drawerInstance,\n        defaultValues = this.options.defaultValues || {},\n        collectedStyles = {};\n\n    drawer.trigger(drawer.EVENT_TEXT_GET_STYLES, [this, collectedStyles]);\n\n    collectedStyles = collectedStyles || {};\n    collectedStyles.defaultValues = collectedStyles.defaultValues || {}; //@todo\n\n\n    this.text.set('fontFamily', styles.fontFamily || defaultValues.fontFamily || collectedStyles.defaultValues.fontFamily);\n    this.text.set('fontSize', styles.fontSize || defaultValues.fontSize || collectedStyles.defaultValues.fontSize);\n    this.text.set('lineHeight', styles.lineHeight || defaultValues.lineHeight || collectedStyles.defaultValues.lineHeight);\n    this.text.set('fill', styles.fill || defaultValues.fill || collectedStyles.defaultValues.fill || this.drawerInstance.activeColor);\n    this.text.set('opacity', styles.opacity || defaultValues.opacity || collectedStyles.defaultValues.opacity || this.drawerInstance.activeOpacity);\n\n    this.text.set('left', left - this.text.width / 2);\n    this.text.set('top', top - this.text.height / 2);\n\n    return this.text;\n  };\n\n  Text.prototype.updateShape = function (text, newLeft, newTop) {\n  };\n\n  /**\n   * Checks if object is instance of fabric.Text\n   * @param  {fabric.Object} obj - Instance of Fabric.Object\n   * @return {Boolean}\n   */\n  Text.prototype.isObjectText = function (obj) {\n    return obj instanceof fabric.IText;\n  };\n\n  pluginsNamespace.Text = Text;\n\n})\n","export default (function ($, pluginsNamespace, util) {\n  \"use strict\";\n\n  /**\n   * Provides a button to enter fullscreen mode.\n   *\n   * @param {DrawerJs.Drawer} drawer\n   * @param {Object} options\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var Fullscreen = function FullscreenConstructor(drawer, options) {\n    var _this = this;\n\n    /**\n     * @type {Drawer}\n     */\n    _this.drawer = drawer;\n    _this.LOGTAG = _this.name;\n\n    _this._setupOptions(options);\n\n    _this.previousWidth = null;\n    _this.previousHeight = null;\n    _this.previousOffset = null;\n\n    _this.$enterButton = null;\n    _this.$exitButton = null;\n\n    _this.onlyForEditing = false;\n\n    // set handlers on toolbar creation\n    this._bindedOnToolbarCreated = this._onToolbarCreated.bind(this);\n    drawer.on(drawer.EVENT_CONFIG_TOOLBAR_CREATED, this._bindedOnToolbarCreated);\n\n\n    // befre loading\n    _this.drawer\n      .on(_this.drawer.EVENT_EDIT_START, function () {\n        var dataBeforeFullscreen = _this.drawer\n          .$imageElement.attr('data-before-fullscreen');\n\n        if (dataBeforeFullscreen) {\n          _this.$enterButton.hide();\n          _this.$exitButton.show();\n        } else {\n          _this.$enterButton.show();\n          _this.$exitButton.hide();\n        }\n\n      });\n\n    _this.drawer.on(_this.drawer.EVENT_EDIT_STOP, function () {\n      if (_this.onlyForEditing) {\n        _this.exitFullscreen();\n      }\n    });\n\n    $(window).on('resize', function(){\n      if(_this.isInFullscreenMode()){\n        _this.adjustFullscreenSize();\n      }\n    });\n  };\n\n  /**\n   * Setup data\n   * @param {Object} [options] - options to save\n   * @param {String} [pluginName] - name of plugin\n   * @param {Boolean} [doNotSave] - set true to not save result as this.options\n   * @returns {Object} config of plugin\n   */\n  Fullscreen.prototype._setupOptions = function (options, pluginName, doNotSave) {\n    pluginName = pluginName || this.name;\n    var drawer = this.drawerInstance || this.drawer,\n        optionsFromDrawer = drawer && drawer.getPluginConfig(pluginName),\n        result = $.extend(true,\n            {},\n            this._defaultOptions || {},\n            optionsFromDrawer || {},\n            options || {}\n        );\n\n    if (!doNotSave) {\n      this.options = result;\n    }\n    return result;\n  };\n\n    /**\n     * On toolbar created - create tool button.\n     */\n    Fullscreen.prototype._onToolbarCreated = function (ev, toolbar) {\n        this.toolbar = toolbar;\n        var enterButtonConfig = {\n              buttonOrder: this.options.buttonOrder,\n              additionalClass: 'btn-fullscreen',\n              iconClass: 'fa-expand',\n              tooltipText: this.drawer.t('Enter fullscreen mode'),\n              clickHandler: this.enterFullscreen.bind(this)\n            },\n            exitButtonConfig = {\n              buttonOrder: this.options.buttonOrder,\n              additionalClass: 'btn-fullscreen',\n              iconClass: 'fa-compress',\n              tooltipText: this.drawer.t('Exit fullscreen mode'),\n              clickHandler: this.exitFullscreen.bind(this)\n            };\n\n        // add button expand\n      this.$enterButton = toolbar.addButton(enterButtonConfig);\n\n        // add button shrink\n      this.$exitButton = toolbar.addButton(exitButtonConfig);\n      this.$exitButton.hide();\n    };\n\n\n    /**\n     * Deletes tool button.\n     * If  doDeleteToolbarCreationListeners is true - removes listeners of toolbar creation event.\n     * So, tool will not appear on toolbar next time, when toolbar is created.\n     *\n     * @param {boolean} doDeleteToolbarCreationListeners\n     */\n    Fullscreen.prototype.removeTool = function(doDeleteToolbarCreationListeners) {\n        if (this.deleteControls) {\n            this.deleteControls();\n        }\n\n        // stop listening toolbar creation\n        if (doDeleteToolbarCreationListeners) {\n            this.drawer.off(this.drawer.EVENT_CONFIG_TOOLBAR_CREATED, this._bindedOnToolbarCreated);\n        }\n    };\n\n\n\n\n\n  Fullscreen.prototype.isInFullscreenMode = function () {\n    var $image = this.drawer.$imageElement;\n\n    if ($image.attr('data-before-fullscreen') !== undefined) {\n      return true;\n    }\n\n    return false;\n  };\n\n  Fullscreen.prototype.adjustFullscreenSize = function () {\n    var _this = this;\n    var redactorInstance = _this.drawer.redactorInstance;\n\n    var $image = _this.drawer.$imageElement;\n\n    var toolbarSize = _this.drawer.options.toolbarSize;\n\n    var width = redactorInstance.$box.width() - toolbarSize;\n    var height = redactorInstance.$box.height() - toolbarSize;\n\n    var offset = redactorInstance.$box.offset();\n\n    _this.drawer.$canvasEditContainer.css({\n      'left': offset.left + 'px',\n      'top': (offset.top + toolbarSize ) + 'px',\n      'width': width + 'px',\n      'height': height + 'px'\n    });\n\n    _this.drawer.fCanvas.setWidth(width);\n    _this.drawer.fCanvas.setHeight(height);\n\n    if(!_this.onlyForEditing) {\n      $image.css({\n        'position': 'absolute',\n        'left': '0px',\n        'top': '0px',\n        'width': width + 'px',\n        'height': height + 'px'\n      });\n    }\n  };\n\n  Fullscreen.prototype.enterFullscreen = function () {\n    var _this = this;\n    var redactorInstance = _this.drawer.redactorInstance;\n\n    var $image = _this.drawer.$imageElement;\n\n    var toolbarSize = _this.drawer.options.toolbarSize;\n\n    // this.drawer.trigger(this.drawer.EVENT_HIDE_TOOLTIPS);\n\n    _this.$enterButton.hide();\n    _this.$exitButton.show();\n\n    $image.attr('data-before-fullscreen',\n      JSON.stringify({\n        imageCss: {\n          'position': $image.css('position'),\n          'display': $image.css('display'),\n          'left': $image.css('float'),\n          'top': $image.css('top'),\n          'margin-left': $image.css('margin-left'),\n          'margin-right': $image.css('margin-right'),\n          'width': $image.css('width'),\n          'height': $image.css('height')\n        },\n        canvasCss: {\n          'width': _this.drawer.width,\n          'height': _this.drawer.height,\n          'offset': _this.drawer.$canvasEditContainer.offset()\n        }\n      })\n    );\n\n    if (!this.onlyForEditing) {\n      $image.css('position', 'absolute');\n    }\n\n    _this.adjustFullscreenSize();\n\n    if (this.onlyForEditing) {\n      var duration = util.getTransitionDuration(\n        _this.drawer.$canvasEditContainer[0]\n      );\n\n      util.setTimeout(function () {\n        redactorInstance.$box.css('opacity', '0');\n      }, duration);\n    }\n\n    // @todo: rework this!\n    _this.drawer.toolbars.toolOptionsToolbar\n      .removeClass('toolbar-bottomLeft').detach();\n    _this.drawer\n      .appendToolbar(_this.drawer.toolbars.toolOptionsToolbar, 'topRight');\n\n    _this.drawer.toolbars.setToolbarButtonsSize();\n    _this.drawer.onCanvasModified();\n  };\n\n  Fullscreen.prototype.exitFullscreen = function () {\n    var _this = this;\n    var $image = _this.drawer.$imageElement;\n\n    $('.editable-canvas-tooltip').removeClass('active');\n\n    _this.$enterButton.show();\n    _this.$exitButton.hide();\n\n    var dataBeforeFullscreenStr = $image.attr('data-before-fullscreen');\n    var dataBeforeFullscreen = JSON.parse(dataBeforeFullscreenStr);\n    $image.attr('data-before-fullscreen', null);\n\n    if (this.onlyForEditing) {\n      _this.drawer.redactorInstance.$box.css('opacity', '1');\n    } else {\n      $image.css(dataBeforeFullscreen.imageCss);\n    }\n\n    if (_this.drawer.$canvasEditContainer) {\n      var duration = util.getTransitionDuration(\n        _this.drawer.$canvasEditContainer[0]\n      );\n\n      var previousWidth = dataBeforeFullscreen.canvasCss.width;\n      var previousHeight = dataBeforeFullscreen.canvasCss.height;\n\n      _this.drawer.$canvasEditContainer.css({\n        'left': dataBeforeFullscreen.canvasCss.offset.left + 'px',\n        'top': dataBeforeFullscreen.canvasCss.offset.top + 'px',\n        'width': previousWidth + 'px',\n        'height': previousHeight + 'px'\n      });\n\n      _this.drawer.$canvasEditContainer.find('.canvas-container')\n        .css({\n          'width': previousWidth + 'px',\n          'height': previousHeight + 'px'\n        });\n\n      util.setTimeout(function () {\n        _this.drawer.fCanvas.setWidth(previousWidth);\n        _this.drawer.fCanvas.setHeight(previousHeight);\n      }, duration);\n\n      _this.drawer.width = previousWidth;\n      _this.drawer.height = previousHeight;\n\n      _this.drawer.adjustEditContainer(true, true);\n    }\n\n    _this.drawer.toolbars.toolOptionsToolbar\n      .removeClass('toolbar-topRight').detach();\n    _this.drawer\n      .appendToolbar(_this.drawer.toolbars.toolOptionsToolbar, 'bottomLeft');\n\n    _this.drawer.toolbars.setToolbarButtonsSize();\n    _this.drawer.onCanvasModified();\n  };\n\n  pluginsNamespace.Fullscreen = Fullscreen;\n})\n","export default (function ($, pluginsNamespace, util, DrawerApi) {\n  \"use strict\";\n\n  var isFF = util.checkBrowser('mozilla'),\n      isSafari = util.checkBrowser('safari'),\n      isWebkit = util.checkBrowser('webkit'),\n      emptyFunc = function () {},\n      isTouchDevice;\n\n  /**\n   * Provides a button to minimize canvas.\n   *\n   * @param {DrawerJs.Drawer} drawer\n   * @param {Object} options\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var FullscreenModeButton = function FullscreenModeButtonConstructor(drawer, options) {\n    /**\n     * @type {Drawer}\n     */\n    this.name = 'FullscreenModeButton';\n    this.drawer = drawer;\n    isTouchDevice = this.drawer.touchDevice;\n\n    this._setupOptions(options);\n    this._attachEvents();\n    this._setupFullscreenHandlers();\n\n    this.drawer.on(this.drawer.EVENT_CONFIG_TOOLBAR_CREATED, this._onConfigToolbarCreated.bind(this));\n  };\n\n  /**\n   * Attach global events\n   * @private\n   */\n  FullscreenModeButton.prototype._attachEvents = function () {\n    var self = this,\n        eventsList = '' +\n            'onfullscreenchange.FullscreenModeButton ' +\n            'webkitfullscreenchange.FullscreenModeButton ' +\n            'fullscreenchange.FullscreenModeButton '+\n            'mozfullscreenchange.FullscreenModeButton ' +\n            'MSFullscreenChange.FullscreenModeButton ';\n    $(document).off(eventsList).on(eventsList, function () {\n      self.globalFullscreenMode = !self.globalFullscreenMode;\n      self.reactOnResize = true;\n      util.setTimeout(function () {\n        self.reactOnResize = false;\n      }, 2000);\n      if (self.globalFullscreenMode) {\n        self.setFullscreenStateOn(true);\n      } else {\n        self.setFullscreenStateOff(true);\n      }\n    });\n\n    window.removeEventListener('resize', self._onWindowResize.bind(self));\n    window.addEventListener('resize', self._onWindowResize.bind(self));\n\n    $(document).off('keypress.FullscreenModeButton').on('keypress.FullscreenModeButton', function(e) {\n      var isFullscreen = (self.globalFullscreenMode && self.fullscreenMode),\n          isEscKey = e.keyCode == 27,\n          turnOffFullscreen = isFullscreen && isEscKey;\n      if (turnOffFullscreen) { // ESC key\n            self.fullscreenOff(true);\n      }\n    });\n  };\n\n  /**\n   * Setup data\n   * @param {Object} [options] - options to save\n   * @param {String} [pluginName] - name of plugin\n   * @param {Boolean} [doNotSave] - set true to not save result as this.options\n   * @returns {Object} config of plugin\n   */\n  FullscreenModeButton.prototype._setupOptions = function (options, pluginName, doNotSave) {\n    pluginName = pluginName || this.name;\n    var drawer = this.drawerInstance || this.drawer,\n        optionsFromDrawer = drawer && drawer.getPluginConfig(pluginName),\n        result = $.extend(true,\n            {},\n            this._defaultOptions || {},\n            optionsFromDrawer || {},\n            options || {}\n        );\n\n    if (!doNotSave) {\n      this.options = result;\n    }\n    return result;\n  };\n\n  /**\n   * React on window resize\n   * @private\n   */\n  FullscreenModeButton.prototype._onWindowResize = function () {\n    var self = this;\n\n    if (isFF && !self.reactOnResize && !self.globalFullscreenMode) {\n      self._saveCurrentSizes();\n    }\n\n    if (self.reactOnResize) {\n      if (!self.globalFullscreenMode) {\n        self._restoreNormalSizes();\n      } else {\n        self._refreshFullscreenSize(false);\n      }\n    }\n\n\n\n    var turnOff = false && !isFF, //global, but not for firefox\n        ffTurnOff = !self.fullscreenMode && self.reactOnResize && isFF && !self.globalFullscreenMode,\n        webkitTurnOff = self.fullscreenMode && !self.globalFullscreenMode && isWebkit,\n        needToTurnOff = turnOff || ffTurnOff || webkitTurnOff;\n    if (needToTurnOff) {\n      self.setFullscreenStateOff();\n    }\n    self.reactOnResize = false;\n  };\n\n  FullscreenModeButton.prototype._saveCurrentSizes = function (oldWidth, oldHeight) {\n    if (!oldWidth || !oldHeight) {\n      oldWidth = this.drawer.$canvasEditContainer.outerWidth();\n      oldHeight = this.drawer.$canvasEditContainer.outerHeight();\n    }\n\n    this.savedWidth = oldWidth;\n    this.savedHeight = oldHeight;\n  };\n\n  /**\n   * Set drawer size - all available space\n   * @param {Boolean} [save] - save current size for further restore\n   * @private\n   */\n  FullscreenModeButton.prototype._refreshFullscreenSize = function (save) {\n    var $window = $(window),\n        viewportWidth = $window.width(),\n        viewportHeight = $window.height(),\n        oldWidth = this.drawer.width,\n        oldHeight = this.drawer.height,\n        $editContainer = this.drawer.$canvasEditContainer,\n        drawerHaveAnimatedClass = $editContainer.hasClass('animated');\n\n    if (save) {\n      this._saveCurrentSizes(oldWidth, oldHeight);\n    }\n    $editContainer.removeClass('animated');\n    this.drawer.setSize(\n        viewportWidth,\n        viewportHeight\n    );\n    this.drawer.trigger(this.drawer.EVENT_RESTORE_DEFAULT_ZOOM);\n    $editContainer.toggleClass('animated', !!drawerHaveAnimatedClass);\n  };\n\n  /**\n   * Restore drawer size\n   * @private\n   */\n  FullscreenModeButton.prototype._restoreNormalSizes = function () {\n    var self = this,\n        $editContainer = this.drawer.$canvasEditContainer,\n        drawerHaveAnimatedClass = $editContainer.hasClass('animated');\n    $editContainer.removeClass('animated');\n    $editContainer.css('position', this.savedPosition);\n    console.info(this.savedWidth,this.savedHeight);\n    this.drawer.setSize(\n        this.savedWidth,\n        this.savedHeight\n    );\n    util.setTimeout(function () {\n      self.drawer.adjustEditContainer();\n      self.drawer.trigger(self.drawer.EVENT_RESTORE_DEFAULT_ZOOM);\n      util.setTimeout(function () {\n        $editContainer.toggleClass('animated', !!drawerHaveAnimatedClass);\n      },0);\n    }, 0);\n  };\n\n  /**\n   * Setup request/cancel handlers depending on browser\n   * @private\n   */\n  FullscreenModeButton.prototype._setupFullscreenHandlers = function () {\n    var element = document.documentElement,\n        fullscreenCancelFunc,\n        fullscreenRequest_defaultFunc = function () {\n          element.requestFullScreen();\n        },\n        fullscreenRequest_default = element.requestFullScreen && fullscreenRequest_defaultFunc,\n\n        fullscreenRequest_msFunc = function () {\n          element.msRequestFullscreen();\n        },\n        fullscreenRequest_ms = element.msRequestFullscreen && fullscreenRequest_msFunc,\n        fullscreenRequest_mozillaFunc = function () {\n          element.mozRequestFullScreen();\n        },\n        fullscreenRequest_mozilla = element.mozRequestFullScreen && fullscreenRequest_mozillaFunc,\n        fullscreenRequest_webkitFunc = function () {\n          element.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);\n        },\n        fullscreenRequest_webkit = element.webkitRequestFullScreen && fullscreenRequest_webkitFunc;\n\n    this.fullscreenRequest =  fullscreenRequest_default ||\n                              fullscreenRequest_ms ||\n                              fullscreenRequest_mozilla ||\n                              fullscreenRequest_webkit ||\n                              this.setFullscreenStateOn.bind(this);\n    fullscreenCancelFunc =  document.cancelFullScreen ||\n                            document.msExitFullscreen ||\n                            document.mozCancelFullScreen ||\n                            document.webkitCancelFullScreen ||\n                            this.setFullscreenStateOff.bind(this);\n    this.fullscreenCancel = function() {\n      fullscreenCancelFunc.call(document);\n    };\n  };\n\n\n  /**\n   * React on toolbar created - create tool button.\n   * @param {fabric.Event} ev\n   * @param {DrawerToolbar} toolbar\n   * @private\n   */\n  FullscreenModeButton.prototype._onConfigToolbarCreated = function (ev, toolbar) {\n    this.fullscreenEl = this.drawer.$canvasEditContainer.get(0);\n    this._createAndAddButton(toolbar);\n  };\n\n  /**\n   * Deletes tool button.\n   * If  doDeleteToolbarCreationListeners is true - removes listeners of toolbar creation event.\n   * So, tool will not appear on toolbar next time, when toolbar is created.\n   *\n   * @param {boolean} [doDeleteToolbarCreationListeners]\n   */\n  FullscreenModeButton.prototype.removeTool = function (doDeleteToolbarCreationListeners) {\n    if (this.deleteControls) {\n      this.deleteControls();\n    }\n    // stop listening toolbar creation\n    if (doDeleteToolbarCreationListeners) {\n      this.drawer.off(this.drawer.EVENT_CONFIG_TOOLBAR_CREATED, this._bindedOnToolbarCreated);\n    }\n  };\n\n\n  /**\n   * Creates and adds minimize button to toolbar.\n   * @param  {DrawerToolbar} toolbar\n   */\n  FullscreenModeButton.prototype._createAndAddButton = function (toolbar) {\n    var toggleModeButtonConfig = {\n          buttonOrder: 10,\n          additionalClass: 'btn-fullscreen-canvas',\n          iconClass: 'fa-window-restore',\n          tooltipText: this.drawer.t('Toggle fullscreen mode'),\n          clickHandler: this._onFullscreenModeButtonClick.bind(this)\n        },\n        $fullscreenModeButton = toolbar.addButton(toggleModeButtonConfig);\n    this.$fullscreenModeButton = $fullscreenModeButton;\n  };\n\n  /**\n   * Toggle fullscreen state\n   * @param {Boolean} [forceCancel]\n   * @private\n   */\n  FullscreenModeButton.prototype._toggleFullScreen = function (forceCancel) {\n    var currStateIsFullscreen_default = (document.fullScreenElement && document.fullScreenElement !== null),\n        currStateIsFullscreen_moz = (!document.mozFullScreen && !document.webkitIsFullScreen),\n        currStateIsFullscreen = currStateIsFullscreen_default || currStateIsFullscreen_moz,\n        turnOn = forceCancel === false || (!forceCancel && currStateIsFullscreen);\n    if (turnOn) {\n      this.fullscreenRequest();\n    } else {\n      this.fullscreenCancel();\n    }\n  };\n\n  /**\n   * On minimize button click handler\n   * @private\n   */\n  FullscreenModeButton.prototype._onFullscreenModeButtonClick = function () {\n    if (this.fullscreenMode) {\n      this.fullscreenOff();\n    } else {\n      this.fullscreenOn();\n    }\n  };\n\n  /**\n   * Drawer - remove fullscreen state\n   */\n  FullscreenModeButton.prototype.setFullscreenStateOff = function () {\n    var canvasContainerIsValid = this.drawer.$canvasEditContainer || this.drawer.$canvasEditContainer.length,\n        currStateIsValid = canvasContainerIsValid;\n    this.changeStateInProgress = true;\n    if (currStateIsValid) {\n      this.drawer.trigger(this.drawer.EVENT_DO_DEACTIVATE_ALL_TOOLS);\n      this.drawer.trigger(this.drawer.EVENT_DESTROY_TOOLTIPS);\n      var self = this,\n          $editContainer = this.drawer.$canvasEditContainer,\n          drawerHaveAnimatedClass = $editContainer.hasClass('animated');\n\n      this.fullscreenMode = false;\n      this.drawer.fullscreenMode = false;\n      $editContainer.addClass('fullscreen-in-progress');\n      $editContainer.removeClass('animated');\n      $editContainer.removeClass('fullscreen');\n\n      this.drawer.$imageElement.show();\n      this._restoreNormalSizes();\n\n      util.setTimeout(function () {\n        self.drawer.toolbars.resetAllToolbars();\n        if (self.$fullscreenModeButton) {\n          self.$fullscreenModeButton.removeClass('active');\n        }\n        if (isSafari) {\n          self._restoreNormalSizes();\n        }\n        $editContainer.toggleClass('animated', !!drawerHaveAnimatedClass);\n        $editContainer.removeClass('fullscreen-in-progress');\n        self.changeStateInProgress = false;\n      }, 0);\n    }\n  };\n\n  /**\n   * Drawer - set fullscreen state\n   */\n  FullscreenModeButton.prototype.setFullscreenStateOn = function () {\n    this.changeStateInProgress = true;\n    var canvasContainerIsValid = this.drawer.$canvasEditContainer || this.drawer.$canvasEditContainer.length,\n        currStateIsValid = canvasContainerIsValid;\n    if (currStateIsValid) {\n      this.drawer.trigger(this.drawer.EVENT_DO_DEACTIVATE_ALL_TOOLS);\n      this.drawer.trigger(this.drawer.EVENT_DESTROY_TOOLTIPS);\n      var self = this,\n          $editContainer = this.drawer.$canvasEditContainer,\n          drawerHaveAnimatedClass = $editContainer.hasClass('animated');\n\n      this.fullscreenMode = true;\n      this.drawer.fullscreenMode = true;\n      this.savedPosition = $editContainer.css('position');\n\n      $editContainer.addClass('fullscreen-in-progress');\n      $editContainer.removeClass('animated');\n      $editContainer.addClass('fullscreen');\n      this.drawer.$imageElement.hide();\n\n      self._refreshFullscreenSize(!isFF);\n\n      util.setTimeout(function () {\n        self.drawer.toolbars.resetAllToolbars();\n        self.drawer.toolbars.settingsToolbar.$toolbar.parent().addClass('fullscreenOverOther');\n        if (self.$fullscreenModeButton) {\n          self.$fullscreenModeButton.addClass('active');\n        }\n        $editContainer.toggleClass('animated', !!drawerHaveAnimatedClass);\n        $editContainer.removeClass('fullscreen-in-progress');\n        self.changeStateInProgress = false;\n      }, 50);\n    }\n  };\n\n  /**\n   * Turn fullscreen mode on\n   */\n  FullscreenModeButton.prototype.fullscreenOn = function () {\n    this._toggleFullScreen(false);\n  };\n\n  /**\n   * Turn fullscreen mode off\n   */\n  FullscreenModeButton.prototype.fullscreenOff = function () {\n    this._toggleFullScreen(true);\n  };\n\n  /**\n   * Provide API method - fullscreenOn\n   */\n  DrawerApi.prototype.fullscreenOn = function () {\n    var tool = this.drawer.getPluginInstance('FullscreenModeButton');\n    tool.fullscreenOn();\n  };\n\n  /**\n   * Provide API method - fullscreenOff\n   */\n  DrawerApi.prototype.fullscreenOff = function () {\n    var tool = this.drawer.getPluginInstance('FullscreenModeButton');\n    tool.fullscreenOff();\n  };\n\n  pluginsNamespace.FullscreenModeButton = FullscreenModeButton;\n})\n","export default (function($, BaseTool, pluginsNamespace, util) {\n    /**\n     * Tool to add and upload background image to canvas.\n     *\n     * @param {DrawerJs.Drawer} drawerInstance\n     * Instance of {@link DrawerJs.Drawer}.\n     *\n     * @param {Object} options\n     * Configuration object.\n     *\n     * @param {String} [options.maxImageSizeKb='5120']\n     * Max size of image to upload in KB. Default is 5 MB;\n     * <br><br>\n     * If null, or 0 is set - then size is unlimited.\n     * Negative values are considered as 0;\n     *\n     * @param {String} [options.imagePosition='stretch']\n     * Positioning of background-image.\n     * Acceptable values are : 'center', 'stretch', 'top-left', 'top-right', 'bottom-left', 'bottom-right'\n     *\n     * @param {String[]} [options.acceptedMIMETypes=['image/jpeg', 'image/png', 'image/gif']]\n     * Array with accepted MIME file types.\n     *\n     * @param {String} [options.fixedBackgroundUrl]\n     * Url of background to display, If set - tool button will be hidden.\n     *\n     * @param {Boolean} [options.dynamicRepositionImage=true]\n     * If set to true - background image is dynamically smoothly resized with canvas.\n     * If false - background image is resized to fit canvas after canvas was resized.\n     *\n     * @param {Number} [options.dynamicRepositionImageThrottle=100]\n     * If options.dynamicRepositionImage is true - this is throttle time in ms for\n     * resizing to be done. For example 'dynamicRepositionImageThrottleL : 200'\n     * means that resizing background image will occur once in 200ms.\n     * This option greatly reduces CPU load during resize of canvas with background image.\n     * If set to 0 - no throttling is used, image is resized on every mouse move.\n     *\n     * @constructor\n     * @memberof DrawerJs.plugins\n     */\n    var BackgroundImageTool = function BackgroundImageToolConstructor(drawerInstance, options) {\n        // call base c-tor\n        BaseTool.call(this, drawerInstance);\n\n        var _this = this;\n        this.drawer = drawerInstance;\n        this.name = 'BackgroundImage';\n        this.btnClass = 'btn-image';\n        this.faClass = 'fa-image';\n        this.tooltip = drawerInstance.t('Insert a background image');\n\n        this._setupOptions(options);\n\n        var needsRepositionOnResize = ['stretch', 'center', 'bottom-left', 'bottom-right', 'top-right'].indexOf(this.options.imagePosition) != -1;\n        // add listeners on 'drawer:resize', if we need reposition image in canvas\n        if (needsRepositionOnResize) {\n            if (this.options.dynamicRepositionImage) {\n                var throttle = this.options.dynamicRepositionImageThrottle > 0 ? parseInt(this.options.dynamicRepositionImageThrottle) : 0;\n\n                var listener;\n                if (throttle) {\n                    // throttled listener - which do resize every X milliseconds, not immediately\n                    listener = this._throttle(this._repositionImage.bind(this), throttle);\n                } else {\n                    // using no throttle\n                    listener = this._repositionImage.bind(this);\n                }\n                // continuously call throttled listener during resize\n                this.drawerInstance.on(this.drawerInstance.EVENT_CANVAS_RESIZING, listener);\n            } else {\n                // call listener after canvas resize is done\n                this.drawerInstance.on(this.drawerInstance.EVENT_CANVAS_STOP_RESIZE, this._repositionImage.bind(this));\n            }\n        }\n\n        if (this.options.fixedBackgroundUrl) {\n            this.drawerInstance.on(this.drawerInstance.EVENT_CANVAS_READY, function() {\n                _this.loadImageFromUrl(_this.options.fixedBackgroundUrl, options, true);\n            });\n        }\n    };\n\n    // Derive BackgroundImageTool from BaseTool\n    BackgroundImageTool.prototype = Object.create(BaseTool.prototype);\n    BackgroundImageTool.prototype.constructor = BackgroundImageTool;\n\n    /**\n     * Default options.\n     */\n    BackgroundImageTool.prototype._defaultOptions = {\n        cropIsActive: true,\n        maxImageSizeKb : 5120, // 5 MB\n        imagePosition : 'stretch',\n        dynamicRepositionImage : true,\n        dynamicRepositionImageThrottle : 100,\n        acceptedMIMETypes: ['image/jpeg', 'image/png', 'image/gif']\n    };\n\n\n    /**\n     * Tool activation method.\n     * Is called in lifecycle of event Drawer.EVENT_DO_ACTIVATE_TOOL.\n     * Calls  BaseTool._activateTool .\n     *\n     * @private\n     */\n    BackgroundImageTool.prototype._activateTool = function() {\n        var _this = this;\n        this.drawerInstance.log('TOOL', 'BackgroundImageTool._activateTool()');\n        BaseTool.prototype._activateTool.call(this);\n\n        this._showDialog();\n\n        // deactivate tool. Slight delay is needed, because without it\n        // tool is deactivated before listeners on EVENT_DO_ACTIVATE_TOOL in drawer are executed\n        // which lead to incorrect way of setting drawer.lastUsedPluginName\n        util.setTimeout(function () {\n          _this.drawerInstance.trigger(_this.drawerInstance.EVENT_DO_DEACTIVATE_TOOL, [_this]);\n        }, 300);\n\n    };\n\n\n    /**\n     * Shows file open dialog\n     * @private\n     */\n    BackgroundImageTool.prototype._showDialog = function() {\n        var acceptedMIMEStr = this.options.acceptedMIMETypes.join(',');\n        $el = $('<input type=\"file\" accept=\"' + acceptedMIMEStr + '\">');\n        $el.on('change', this._processFileInput.bind(this));\n\n        $el.click();\n\n    };\n\n    /**\n     * Callback to process user selected files.\n     *\n     * @param {Event} e\n     * @private\n     */\n    BackgroundImageTool.prototype._processFileInput = function(e)  {\n        var _this = this;\n        var files = e.target.files;\n\n        // check there was file chosen\n        if (files.length < 1) {\n            _this.drawerInstance.showError(this.drawerInstance.t('No file selected.'));\n            return;\n        }\n        var file = files[0];\n\n        // check file\n        if (!this._checkFile(file)) {\n            return;\n        }\n\n        var triggerImageCrop = this.options.cropIsActive && this.drawer._pluginsInstances.ImageCrop;\n      if (triggerImageCrop) {\n          this.readFile(file, this._triggerImageCrop.bind(this));\n        } else {\n          this.readFile(file, this.loadImageFromUrl.bind(this));\n        }\n    };\n\n\n  /**\n   * Init image cropper\n   *\n   * @param {string} imageSrc src of image, can be base64 encoded url\n   * @param {Object} [options] - options of placement\n   */\n  BackgroundImageTool.prototype._triggerImageCrop = function (imageSrc, options) {\n    var dataToEvent = {\n      url: imageSrc,\n      callback: this.loadImageFromUrl.bind(this)\n    };\n    this.drawerInstance.trigger(this.drawerInstance.EVENT_IMAGE_CROP, dataToEvent);\n  };\n\n    /**\n     * Reads file, on success - calls callback with result\n     * @param {File}     file\n     * @param {function} callback\n     */\n    BackgroundImageTool.prototype.readFile = function(file, callback) {\n        var _this = this;\n        var fileReader = new FileReader();\n        // on file load - call callbcack, which will create HTML5 Image from it\n        fileReader.onload = function (onloadEvent) {\n            _this.drawerInstance.log('IMAGE LOADED:', file.name);\n            callback(fileReader.result);\n        };\n\n        fileReader.readAsDataURL(file);\n    };\n\n\n    /**\n     * Makes some checks  to file.\n     *\n     * @param {File} file\n     * @returns {boolean}\n     * @private\n     */\n    BackgroundImageTool.prototype._checkFile = function(file) {\n        var _this = this;\n        // crude check of file type\n        if(file.type.indexOf('image') < 0) {\n            _this.drawerInstance.showError(this.drawerInstance.t('Incorrect file type.'));\n            return false;\n        }\n\n        // check for maxSize\n        if ((this.options.maxImageSizeKb > 0) &&\n            (file.size > this.options.maxImageSizeKb * 1024)) {\n            var err = this.drawerInstance.t('File is to big!. Maximum file size is ');\n            err = err + this.options.maxImageSizeKb + ' KB';\n            _this.drawerInstance.showError(err);\n            return false;\n        }\n\n        return true;\n    };\n\n\n    /**\n     * Creates image from data, then calld makeImageBackground()\n     *\n     * @param {string} imageSrc src of image, can be base64 encoded url\n     * @param {Object} [options] - options of placement\n     * @param {Boolean} [throwError] - throw/ignore errors\n     */\n    BackgroundImageTool.prototype.loadImageFromUrl = function(imageSrc, options, throwError) {\n        var _this = this;\n        var image = new Image();\n\n        // after Image was created from file imageSrc- create fabric.Image from it\n        image.onload = function() {\n            _this.makeImageBackground(image, options);\n        };\n\n        // show error on fail\n        if (throwError) {\n          image.onerror = function() {\n            var err = _this.drawerInstance.t('Image failed to create!');\n            _this.drawerInstance.showError(err);\n          };\n        }\n\n        if (options.crossOrigin) {\n          image.crossOrigin = options.crossOrigin;\n        }\n        // this will start creating image\n        image.src = imageSrc;\n    };\n\n\n    /**\n     * Makes given image background.\n     * Position of background image depends on options.\n     */\n    BackgroundImageTool.prototype.makeImageBackground = function(image, options) {\n        var _this = this;\n        var fCanvas = this.drawerInstance.fCanvas;\n        var fabricImage = new fabric.Image(image);\n\n        // if no options - use tool config options\n        options = options ? options : this.options;\n        // calc coords of image\n        var positionOpts = this._calcPositioningOptions(fabricImage, options.imagePosition);\n\n        fCanvas.setBackgroundImage(fabricImage, function() {\n                                      fCanvas.renderAll();\n                                    },\n                                    positionOpts);\n    };\n\n\n    /**\n     * Returns background image positioning options.\n     *\n     * @param  {fabric.Image} bgImage backgroundImage\n     * @param  {String} imagePosition\n     * @return {Object}\n     */\n    BackgroundImageTool.prototype._calcPositioningOptions = function(bgImage, imagePosition) {\n        var fCanvas = this.drawerInstance.fCanvas;\n\n        var opts = {};\n        switch (imagePosition) {\n            case 'stretch' :\n                opts.left = 0;\n                opts.top  = 0;\n                opts.width  = fCanvas.width;\n                opts.height = fCanvas.height;\n            break;\n            case 'center' :\n                opts.originX = 'center';\n                opts.originY = 'center';\n                opts.left = fCanvas.getCenter().left;\n                opts.top  = fCanvas.getCenter().top;\n            break;\n            case 'top-left' :\n                opts.left = 0;\n                opts.top  = 0;\n            break;\n            case 'top-right' :\n                opts.left = fCanvas.width - bgImage.width;\n                opts.top  = 0;\n            break;\n            case 'bottom-left' :\n                opts.left = 0;\n                opts.top  = fCanvas.height - bgImage.height;\n            break;\n            case 'bottom-right' :\n                opts.left = fCanvas.width - bgImage.width;\n                opts.top  = fCanvas.height - bgImage.height;\n            break;\n            case 'default' :  // unknown option, will be 'stretch'  then\n                opts.left = 0;\n                opts.top  = 0;\n                opts.width  = fCanvas.width;\n                opts.height = fCanvas.height;\n        }\n\n        return opts;\n    };\n\n\n\n    /**\n     * If option options.imagePosition == 'stretch' || 'center' || 'top-right' || 'bottom-left' || 'bottom-right',\n     * this method do reposition of background image.\n     * Is called on every resize.\n     *\n     * @private\n     */\n    BackgroundImageTool.prototype._repositionImage = function() {\n        var fCanvas = this.drawerInstance.fCanvas;\n        if (!fCanvas.backgroundImage)\n            return;\n\n        var bgImage = fCanvas.backgroundImage;\n\n        var opts = {};\n        switch (this.options.imagePosition) {\n            case 'stretch' :\n                opts.width  = fCanvas.width;\n                opts.height = fCanvas.height;\n            break;\n            case 'center' :\n                opts.originX = 'center';\n                opts.originY = 'center';\n                opts.left = fCanvas.getCenter().left;\n                opts.top  = fCanvas.getCenter().top;\n            break;\n            case 'top-right' :\n                opts.left = fCanvas.width - bgImage.width;\n                opts.top  = 0;\n            break;\n            case 'bottom-right' :\n                opts.left = fCanvas.width - bgImage.width;\n                opts.top  = fCanvas.height - bgImage.height;\n            break;\n            default:\n                return;\n        }\n\n        bgImage.set(opts);\n        bgImage.setCoords();\n\n        fCanvas.renderAll();\n    };\n\n\n    /**\n    *  Hides tool button, in case of fixed background.\n    */\n    BackgroundImageTool.prototype.createButton = function(toolbar) {\n        // create no button if background is fixed\n        if (!this.options.fixedBackgroundUrl) {\n            BaseTool.prototype.createButton.call(this, toolbar);\n        }\n    };\n\n\n\n    /**\n     * Throttle function, used to throttle image resize.\n     * source code : https://learn.javascript.ru/task/throttle\n     *\n     * @param {function} func\n     * @param {Number} ms\n     * @returns {function}\n     * @private\n     */\n    BackgroundImageTool.prototype._throttle = function(func, ms) {\n        var isThrottled = false,\n            savedArgs,\n            savedThis;\n\n        function wrapper() {\n            if (isThrottled) { // (2)\n                savedArgs = arguments;\n                savedThis = this;\n                return;\n            }\n\n\n            func.apply(this, arguments); // (1)\n\n            isThrottled = true;\n            util.setTimeout(function () {\n                isThrottled = false; // (3)\n                if (savedArgs) {\n                    wrapper.apply(savedThis, savedArgs);\n                    savedArgs = savedThis = null;\n                }\n            }, ms);\n        }\n        return wrapper;\n    };\n\n    pluginsNamespace.BackgroundImage = BackgroundImageTool;\n\n})\n","export default (function(DrawerApi) {\n\n    /**\n     * Sets background image from given url.\n     *\n     * @param {String} imageUrl\n     * @param {Object} placement options\n     */\n    DrawerApi.prototype.setBackgroundImageFromUrl = function(imageUrl, options, callback) {\n        this.drawer.api.checkIsActive();\n        var tool = this.drawer.getPluginInstance('BackgroundImage');\n        tool.loadImageFromUrl(imageUrl, options);\n    };\n\n    /**\n     * Sets background image from given image object.\n     *\n     * @param {Image}   image\n     * @param {Object} placement options\n     */\n    DrawerApi.prototype.setBackgroundImage = function(image, options) {\n        this.drawer.api.checkIsActive();\n        var tool = this.drawer.getPluginInstance('BackgroundImage');\n        tool.makeImageBackground(image, options);\n    };\n\n\n})\n","export default (function ($, pluginsNamespace, util) {\n  'use strict';\n\n  var optimalSizeOfDropdown = 375;\n\n  /**\n   * Creates color input for changing color; colorChangeHandler is called on color change.\n   *\n   * @param {DrawerJs.Drawer} drawer\n   *\n   * @param {Object} [options]\n   * Configuration object.\n   *\n   * @param {String[]} [options.colors]\n   * Array of colors to be used.\n   *\n   * @param {number} [options.colorsInRow]\n   * Number of colors for one row.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var ColorpickerControl = function ColorpickerControlConstructor(drawer, options) {\n      this.drawer = drawer;\n\n      // init options\n      options = options || {};\n      this.options = $.extend(true, {}, this._defaultOptions || {}, options || {});\n\n      this.hideOnEditMode = true;\n      // more stuff\n      this.assetsUrl = util.getDrawerFolderUrl() + 'assets/';\n      this.shouldDisplayTransparent = false;\n\n      this.colors = this.options.colors;\n      this.colorsInRow = this.options.colorsInRow;\n    };\n\n\n  ColorpickerControl.prototype._defaultOptions = {\n      colors: [\n          '#ffffff', '#000000', '#eeece1', '#1f497d', '#4f81bd', '#c0504d','#9bbb59', '#8064a2', '#4bacc6', '#f79646', '#ffff00',\n          '#f2f2f2', '#7f7f7f', '#ddd9c3', '#c6d9f0', '#dbe5f1', '#f2dcdb','#ebf1dd', '#e5e0ec', '#dbeef3', '#fdeada', '#fff2ca',\n          '#d8d8d8', '#595959', '#c4bd97', '#8db3e2', '#b8cce4', '#e5b9b7','#d7e3bc', '#ccc1d9', '#b7dde8', '#fbd5b5', '#ffe694',\n          '#bfbfbf', '#3f3f3f', '#938953', '#548dd4', '#95b3d7', '#d99694','#c3d69b', '#b2a2c7', '#b7dde8', '#fac08f', '#f2c314',\n          '#a5a5a5', '#262626', '#494429', '#17365d', '#366092', '#953734','#76923c', '#5f497a', '#92cddc', '#e36c09', '#c09100',\n          '#7f7f7f', '#0c0c0c', '#1d1b10', '#0f243e', '#244061', '#632423','#4f6128', '#3f3151', '#31859b', '#974806', '#7f6000'\n        ],\n        colorsInRow: 11,\n        minSwatchSize : 10,\n        buttonOrder: 6\n  };\n\n  ColorpickerControl.prototype.TRANSPARENT = 'rgba(0, 0, 0, 0)';\n  ColorpickerControl.prototype.defaultPosition = 'bottom';\n  ColorpickerControl.prototype.positions = ['bottom', 'top', 'left', 'right'];\n\n  /**\n   * Removes tool\n   */\n  ColorpickerControl.prototype.remove = function () {\n    if (this.$colorButton) {\n      this.$colorButton.remove();\n    }\n  };\n\n\n  /**\n   * Hides controls\n   */\n  ColorpickerControl.prototype.hideControls = function () {\n    if (this.$colorButton) {\n      this.$colorButton.addClass('hidden');\n    }\n  };\n\n  /**\n   * Shows controls.\n   * Before showing - updates controls size and position.\n   */\n  ColorpickerControl.prototype.showControls = function () {\n    if (this.$colorButton) {\n      this.$colorButton.removeClass('hidden');\n    }\n  };\n\n\n  /**\n   * Returns current selected color\n   * @return {String} currently selected css color\n   */\n  ColorpickerControl.prototype.getColor = function() {\n      return this.currentColor;\n  };\n\n\n  /**\n   * Sets current color.\n   * @param {String|fabric.Color} color valid css color or 'transparent'\n   */\n  ColorpickerControl.prototype.setColor = function (color) {\n      if (color instanceof fabric.Color) {\n        this.currentColor = color;\n      } else {\n        this.currentColor = new fabric.Color(color);\n      }\n\n      var background = color,\n          isTransparent = color === '' || color == this.TRANSPARENT || color == 'transparent';\n      if (isTransparent) {\n        // stavskiys: updated for support of custom assets provider\n        background = 'url(' + util.assets.urlFor('transparent.png') + ')';\n        this.currentColor = this.TRANSPARENT;\n      }\n\n      this.$colorButton.$colorIndicator.css('background', background);\n    };\n\n\n  /**\n   * Removes transparent color from list\n   */\n  ColorpickerControl.prototype.disableTransparent = function () {\n    this.shouldDisplayTransparent = false;\n\n    if (this.$colorButton) {\n      this.$colorButton.find('.transparent').hide();\n    }\n  };\n\n  /**\n   * Adds transparent color to the list\n   */\n  ColorpickerControl.prototype.enableTransparent = function () {\n    this.shouldDisplayTransparent = true;\n\n    if (this.$colorButton) {\n      this.$colorButton.find('.transparent').show();\n    }\n  };\n\n\n  /**\n   * This function is called every time user clicks on color from color-dropdown\n   * menu.\n   *\n   * @param {String} selectedColor Hash value of user selected color.\n   */\n  ColorpickerControl.prototype.onColorSelected = function (selectedColor) {\n    this.hideColorDropdown();\n    this.setColor(selectedColor);\n\n    if (this.colorChangeHandler) {\n      this.colorChangeHandler(selectedColor);\n    }\n  };\n\n\n  /**\n   * Create and attach global click handlers\n   * @private\n   */\n  ColorpickerControl.prototype._setGlobalClickHandler = function() {\n    var self = this;\n    $('html').click(function (e) {\n        if (self.colorDropdownVisible && (e.target != self.$colorButton.$colorIndicator.get(0))) {\n          self.hideColorDropdown();\n        }\n        return true;\n    });\n  };\n\n\n  /**\n   * Creates color button which shows colors Controls on click.\n   *\n   * @param {DrawerToolbar} toolbar to append this button to.\n   * @param {Function} colorChangeHandler - Function that will be called when color is selected.\n   */\n  ColorpickerControl.prototype.createControl = function (toolbar, colorChangeHandler) {\n    this.$colorButton = $(this._getControlHtml());\n\n    this._collectDataFromToolbar(toolbar);\n\n    // cache control components\n    this.$colorButton.$colorIndicator = this.$colorButton.find('.color-indicator');\n    this.$colorButton.$colorDropdown = this.$colorButton.find('.color-dropdown');\n\n    this.$colorButton.$colorIndicator.css('background-color', this.drawer.activeColor);\n\n    this.colorDropdownVisible = false;\n    this.$colorButton.$colorIndicator.click(this._onButtonClick.bind(this));\n\n    this.colorChangeHandler = colorChangeHandler;\n\n    this._buildPicker(this.$colorButton.$colorDropdown);\n\n    this._setGlobalClickHandler();\n\n    toolbar.addControl(this.$colorButton, this.options.buttonOrder);\n\n    return this.$colorButton;\n  };\n\n  /**\n   * React on button click\n   * @param {Event} event - mouse click event\n   * @private\n   */\n  ColorpickerControl.prototype._onButtonClick = function (event) {\n    var $trigger = $(event.currentTarget);\n    this.$lastTrigger = $trigger;\n    this.toggleColorDropdown($trigger);\n  };\n\n  ColorpickerControl.prototype._collectDataFromToolbar = function (toolbar) {\n    if (toolbar) {\n      var toolbarPosition = toolbar.options.position;\n      this.isVertical = toolbarPosition === 'left' || toolbarPosition === 'right';\n      this.$toolbar = toolbar.$toolbar;\n      this.toolbar = toolbar;\n    }\n  };\n\n  /**\n   * Build some magic picker.\n   * @param  {jQuery} $container - jQuery wrapper of container\n   * @private\n   */\n  ColorpickerControl.prototype._buildPicker = function ($container) {\n    // create swatch for each color\n    for (var i = 0; i < this.colors.length; i++) {\n      var color = this.colors[i];\n\n      var $swatch = this._createSwatch(color);\n      $container.append($swatch);\n    }\n\n    // create transparentSwatch\n    var $transparentSwatch = this._createTransparentSwatch();\n    $container.append($transparentSwatch);\n  };\n\n\n  /**\n   * Calcs swatch size and updated Controls width if needed.\n   * @private\n   */\n  ColorpickerControl.prototype._updateControlsSize = function () {\n      // calc swatch size\n      var swatchSize = this._calcSwatchSize();\n      // swatch size in css is 1em, so set $container fontSize\n      this.$colorButton.$colorDropdown.css('fontSize', swatchSize + 'px');\n      // set control width\n      var controlWidth = swatchSize * this.colorsInRow;\n      this.$colorButton.$colorDropdown.css('width', controlWidth + 'px');\n  };\n\n\n  /**\n   * Calc swatch size to fit current drawer width, respecting this.colorsInRow\n   * @return {Number} size of swatch in px\n   * @private\n   */\n  ColorpickerControl.prototype._calcSwatchSize = function () {\n    var swatchSize = this.drawer.touchDevice ? this.drawer.options.toolbarSize\n                                             : this.drawer.options.toolbarSizeTouch;\n    swatchSize = swatchSize || this.options.minSwatchSize;\n\n    // calc swatch width to fit in drawer canvas\n    var widthToFit = Math.floor(this.drawer.width * 0.95 / this.colorsInRow);\n    // calc swatch height to fit in drawer canvas, including toolOptionsToolbar height\n    var heightWithToolbars = this.drawer.height + this.drawer.toolbars.toolOptionsToolbar.height();\n    var heightToFit = Math.floor(heightWithToolbars  / (this.colors.length / this.colorsInRow));\n\n    var minSize = Math.min(widthToFit, heightToFit);\n    // look if colors total area is bigger then available space\n    if (swatchSize > minSize) {\n        swatchSize = Math.max(minSize, this.options.minSwatchSize);\n    }\n\n    return swatchSize;\n  };\n\n  /**\n   * Collect sizes of needed elements\n   * @param {jQuery} $trigger - trigger element\n   * @returns {Object}\n   * @private\n   */\n  ColorpickerControl.prototype._getAvailableSpace = function ($trigger) {\n    var result;\n    if ($trigger && $trigger.length) {\n      var $canvas = this.drawer.$canvasEditContainer,\n          $contentWrapper = this.$colorButton.$colorDropdown.closest('.popup-content-wrapper'),\n          $toolbarWrapper = this.$colorButton.$colorDropdown.closest('.toolbar-content-wrapper'),\n          canvasSizes = $canvas.get(0).getBoundingClientRect(),\n          triggerSizes = $trigger.get(0).getBoundingClientRect(),\n          toolbarSizes = $toolbarWrapper.get(0).getBoundingClientRect(),\n          popupSizes = $contentWrapper.get(0).getBoundingClientRect(),\n          paletteSizes = this.$colorButton.$colorDropdown.get(0).getBoundingClientRect(),\n\n          // arrowSize = 10,\n          arrowSize = 0,\n          triggerOffsetX = triggerSizes.left - canvasSizes.left,\n          triggerOffsetY = triggerSizes.top - canvasSizes.top;\n      result = {};\n\n      result.top = triggerOffsetY;\n      result.left = triggerOffsetX;\n      result.right = canvasSizes.width - triggerOffsetX - triggerSizes.width;\n      result.bottom = canvasSizes.height - triggerOffsetY - triggerSizes.height;\n\n      result.centerX = triggerOffsetX + triggerSizes.width/2;\n      result.centerY = triggerOffsetY + triggerSizes.height/2;\n\n      result.palette = {\n        arrowSize: arrowSize,\n        top: paletteSizes.height,\n        bottom: paletteSizes.height,\n        left: paletteSizes.width,\n        right: paletteSizes.width\n      };\n\n      result.popupSizes = popupSizes;\n      result.toolbarSizes = toolbarSizes;\n      result.paletteSizes = paletteSizes;\n      result.canvasSizes = canvasSizes;\n      result.triggerSizes = triggerSizes;\n    }\n    this.sizes = result;\n    return result;\n  };\n\n  /**\n   * Reset palette\n   * @private\n   */\n  ColorpickerControl.prototype._resetPalette = function () {\n    this.$colorButton.$colorDropdown.removeClass('palette-with-scroll');\n    this.$colorButton.$colorDropdown.removeAttr('style');\n    this.$colorButton.$colorDropdown.removeAttr('data-position');\n  };\n\n  /**\n   * Set size for palette as for canvas\n   * @private\n   */\n  ColorpickerControl.prototype._setFullSize = function () {\n    var sizes = this.sizes,\n        popupOffsetLeft = sizes.toolbarSizes.left - sizes.canvasSizes.left,\n        popupOffsetTop = sizes.toolbarSizes.top - sizes.canvasSizes.top,\n        styles = {};\n\n    styles.top = -popupOffsetTop;\n    styles.left = -popupOffsetLeft;\n    styles.width = sizes.canvasSizes.width;\n    styles.height = sizes.canvasSizes.height;\n\n    this.$colorButton.$colorDropdown.css(styles);\n  };\n\n  /**\n   * Adjust position for popup\n   * @param {jQuery} $element - trigger element\n   * @private\n   */\n  ColorpickerControl.prototype._adjustPosition = function ($element) {\n    this._resetPalette();\n    var sizes = this._getAvailableSpace($element),\n        positionFound;\n    this.positions.forEach(function (position, i) {\n      var positionExists = sizes[position] && sizes.palette[position];\n      if (!positionFound && positionExists) {\n        var neededSpace = sizes.palette[position] + sizes.palette.arrowSize,\n            spaceIsEnough = (sizes[position] - neededSpace) > 0;\n        positionFound = spaceIsEnough && position;\n      }\n    });\n    if (positionFound) {\n      this._movePalette(positionFound);\n    } else {\n      this._setFullSize();\n    }\n  };\n\n  /**\n   * Crop unnecessary width/height\n   * @private\n   */\n  ColorpickerControl.prototype._cropSizeOfPalette = function () {\n    var paletteSizes = this.$colorButton.$colorDropdown.get(0).getBoundingClientRect(),\n        canvasSizes = this.sizes.canvasSizes,\n        styles = {},\n        negativeDiffY_bottom = canvasSizes.height - (paletteSizes.height + paletteSizes.top - canvasSizes.top),\n        negativeDiffY_top = paletteSizes.top - canvasSizes.top,\n        negativeDiffX_right = canvasSizes.width - (paletteSizes.width + paletteSizes.left - canvasSizes.left),\n        negativeDiffX_left = paletteSizes.left - canvasSizes.left,\n        negativeDiffY = Math.min(negativeDiffY_bottom,negativeDiffY_top),\n        negativeDiffX = Math.min(negativeDiffX_right,negativeDiffX_left),\n        notEnoughSpace;\n\n    if (negativeDiffY < 0) {\n      notEnoughSpace = true;\n      styles.height = paletteSizes.height + negativeDiffY;\n    }\n    if (negativeDiffX < 0) {\n      notEnoughSpace = true;\n      styles.width = paletteSizes.width + negativeDiffX;\n    }\n    if (notEnoughSpace) {\n      this.$colorButton.$colorDropdown.addClass('palette-with-scroll');\n    }\n\n    this.$colorButton.$colorDropdown.css(styles);\n  };\n\n  /**\n   * Move palette to chosen direction\n   * @param {String} position\n   * @private\n   */\n  ColorpickerControl.prototype._movePalette = function (position) {\n    var sizes = this.sizes,\n        popupOffsetLeft = this.sizes.toolbarSizes.left - this.sizes.canvasSizes.left,\n        popupOffsetTop = this.sizes.toolbarSizes.top - this.sizes.canvasSizes.top,\n        isVerticalAlign,\n        styles = {},\n        offsetLeft,\n        offsetTop,\n        arrowOffsetLeft = sizes.paletteSizes.width/2,\n        arrowOffsetTop = sizes.paletteSizes.height/2,\n        negativeDiff,\n        smallerThanCanvas,\n        notEnoughSpace;\n\n    switch (position) {\n      case 'left':\n        offsetLeft = sizes.left - sizes.paletteSizes.width - sizes.palette.arrowSize;\n        offsetTop = sizes.centerY - sizes.paletteSizes.height/2;\n        styles.right = sizes.toolbarSizes.width - (sizes.left - popupOffsetLeft);\n        break;\n      case 'right':\n        offsetLeft = sizes.canvasSizes.width - sizes.right + sizes.palette.arrowSize;\n        offsetTop = sizes.centerY - sizes.paletteSizes.height/2;\n        styles.left =  sizes.left - popupOffsetLeft + sizes.triggerSizes.width;\n        break;\n      case 'top':\n        isVerticalAlign = true;\n        offsetLeft = sizes.centerX - sizes.paletteSizes.width/2;\n        offsetTop = sizes.top - sizes.paletteSizes.height - sizes.palette.arrowSize;\n        styles.bottom = sizes.toolbarSizes.height - (sizes.top - popupOffsetTop);\n        break;\n      case 'bottom':\n        isVerticalAlign = true;\n        offsetLeft = sizes.centerX - sizes.paletteSizes.width/2;\n        offsetTop = sizes.canvasSizes.height - sizes.bottom + sizes.palette.arrowSize;\n        styles.top = sizes.top - popupOffsetTop + sizes.triggerSizes.height;\n        break;\n    }\n\n    if (isVerticalAlign) {\n      negativeDiff = (offsetLeft + sizes.paletteSizes.width ) - sizes.canvasSizes.width;\n      smallerThanCanvas = (sizes.canvasSizes.width - sizes.paletteSizes.width) > 0;\n      if (negativeDiff > 0 && offsetLeft > 0 && !smallerThanCanvas) {\n        arrowOffsetLeft += negativeDiff;\n        styles.right = 0 - popupOffsetLeft;\n      } else {\n        if (offsetLeft < 0) {\n          arrowOffsetLeft += offsetLeft;\n          offsetLeft = 0;\n        }\n        notEnoughSpace = true;\n        styles.width = sizes.canvasSizes.width;\n        styles.left = offsetLeft - popupOffsetLeft;\n      }\n    } else {\n      negativeDiff = (offsetTop + sizes.paletteSizes.height) - sizes.canvasSizes.height;\n      smallerThanCanvas = (sizes.canvasSizes.height - sizes.paletteSizes.height) > 0;\n      if (negativeDiff > 0 && offsetTop > 0 && !smallerThanCanvas) {\n        arrowOffsetTop += negativeDiff;\n        styles.bottom = 0 - popupOffsetTop;\n      } else {\n        notEnoughSpace = true;\n        if (offsetTop < 0) {\n          arrowOffsetTop += offsetTop;\n          offsetTop = 0;\n        }\n        styles.height = sizes.canvasSizes.width;\n        styles.top = offsetTop - popupOffsetTop;\n      }\n    }\n\n    if (notEnoughSpace) {\n      this.$colorButton.$colorDropdown.addClass('palette-with-scroll');\n    }\n    this.$colorButton.$colorDropdown.attr('data-position',position);\n    this.$colorButton.$colorDropdown.css(styles);\n    this._cropSizeOfPalette();\n    // this._moveArrow(arrowOffsetLeft, arrowOffsetTop);\n  };\n\n\n  /**\n   * Adjusts color dropdown position to be inside drawer\n   * @private\n   */\n  ColorpickerControl.prototype._adjustControlsPosition = function () {\n    var notEnoughWidth = this.drawer.width < optimalSizeOfDropdown,\n        notEnoughHeight = this.drawer.height < optimalSizeOfDropdown,\n        smallerThanNormalSize = this.isVertical ? notEnoughHeight : notEnoughWidth,\n        canvasContainerSizes = this.drawer.$canvasEditContainer.get(0).getBoundingClientRect(),\n        colorButtonSizes = this.$colorButton.get(0).getBoundingClientRect(),\n        minimumSizeDelta = 10,\n        currDropdownSizes;\n\n\n    this.$colorButton.$colorDropdown.removeAttr('style');\n    currDropdownSizes = this.$colorButton.$colorDropdown.get(0).getBoundingClientRect();\n\n    if (this.isVertical) {\n      if (smallerThanNormalSize) {\n        this.$colorButton.$colorDropdown.css('top', 0);\n      } else {\n        var topOffsetOfButton = colorButtonSizes.top - canvasContainerSizes.top,\n            newTopValue = topOffsetOfButton + colorButtonSizes.height / 2 - currDropdownSizes.height / 2;\n        this.$colorButton.$colorDropdown.css('top', newTopValue);\n      }\n    } else {\n      if (smallerThanNormalSize) {\n        this.$colorButton.$colorDropdown.css('left', 0);\n      } else {\n        var leftOffsetOfButton = colorButtonSizes.left - canvasContainerSizes.left,\n            newLeftValue = leftOffsetOfButton + colorButtonSizes.width / 2 - currDropdownSizes.width / 2;\n        this.$colorButton.$colorDropdown.css('left', newLeftValue);\n      }\n    }\n\n    if (!smallerThanNormalSize) {\n      currDropdownSizes = this.$colorButton.$colorDropdown.get(0).getBoundingClientRect();\n      if (this.isVertical) {\n        smallerThanNormalSize = (optimalSizeOfDropdown - currDropdownSizes.height) > minimumSizeDelta;\n\n        var topOffsetIsValid = currDropdownSizes.top > canvasContainerSizes.top,\n            bottomOffsetIsValid = (currDropdownSizes.top + currDropdownSizes.height) < (canvasContainerSizes.top + canvasContainerSizes.height),\n            topIsCorrect = topOffsetIsValid,\n            bottomIsCorrect = bottomOffsetIsValid && !smallerThanNormalSize;\n\n        if (!topIsCorrect) {\n          this.$colorButton.$colorDropdown.removeAttr('style');\n          this.$colorButton.$colorDropdown.css('top', 0);\n        }\n        if (!bottomIsCorrect) {\n          this.$colorButton.$colorDropdown.removeAttr('style');\n          this.$colorButton.$colorDropdown.css({\n            'bottom' : 0,\n            'top': 'auto'\n          });\n        }\n      } else {\n        smallerThanNormalSize = (optimalSizeOfDropdown - currDropdownSizes.width) > minimumSizeDelta;\n\n        var leftOffsetIsValid = currDropdownSizes.left > canvasContainerSizes.left,\n            rightOffsetIsValid = (currDropdownSizes.left + currDropdownSizes.width) < (canvasContainerSizes.left + canvasContainerSizes.width),\n            leftIsCorrect = leftOffsetIsValid,\n            rightIsCorrect = rightOffsetIsValid && !smallerThanNormalSize;\n\n        if (!leftIsCorrect) {\n          this.$colorButton.$colorDropdown.removeAttr('style');\n          this.$colorButton.$colorDropdown.css('left', 0);\n        }\n        if (!rightIsCorrect) {\n          this.$colorButton.$colorDropdown.removeAttr('style');\n          this.$colorButton.$colorDropdown.css({\n            'right' : 0,\n            'left': 'auto'\n          });\n        }\n      }\n    }\n  };\n\n  /**\n   * Get html of color control\n   * @returns {String}\n   * @private\n   */\n  ColorpickerControl.prototype._getControlHtml = function () {\n    var colorLabelText = this.options.colorText || \"\";\n    return '<li class=\"colorpicker-control\" ' +\n              'data-editable-canvas-sizeable=\"toolbar-button\" ' +\n              '>' +\n            '<span class=\"toolbar-label\" ' +\n                  'data-editable-canvas-sizeable=\"toolbar-button\" ' +\n                  'data-editable-canvas-cssrules=\"line-height\">' +\n                  this.drawer.t(colorLabelText) + ' ' + '</span>' +\n            '<span class=\"color-indicator\" ' +\n                  'data-editable-canvas-sizeable=\"toolbar-button\" ' +\n                  'data-editable-canvas-cssrules=\"width\"></span>' +\n            '<span class=\"color-dropdown control-hidden hidden\" ' +\n                  'data-editable-canvas-sizeable=\"toolbar-button\"></span>' +\n          '</li>';\n\n  };\n\n    /**\n     * Creates swatch - square control with given color\n     *\n     * @param  {String} color\n     * @param  {String} _class css class\n     * @return {jQuery}\n     * @private\n     */\n  ColorpickerControl.prototype._createSwatch = function (color, _class) {\n      var $swatch = $('<a href=\"#\"></a>');\n      $swatch.attr('rel', color)\n             .addClass('color-swatch')\n             .css({'background-color': color});\n\n      if (_class) {\n        $swatch.addClass(_class);\n      }\n\n    // bind click\n      util.bindClick($swatch, 'colorpicker', this._swatchClickHandler.bind(this));\n\n      return $swatch;\n    };\n\n\n    /**\n     * Swatch click handler.\n     * Calls onColorSelected()\n     * Prevents default click on <a> behavior.\n     *\n     * @param  {jQuery.Event} e\n     * @private\n     */\n    ColorpickerControl.prototype._swatchClickHandler = function(e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      var clickedColorValue = $(e.target).attr('rel');\n      this.onColorSelected(clickedColorValue);\n      return false;\n    };\n\n    /**\n     * Creates swatch for transparent  color\n     * @return {jQuery}\n     * @private\n     */\n    ColorpickerControl.prototype._createTransparentSwatch = function() {\n        var $swatch = this._createSwatch(this.TRANSPARENT, 'transparent');\n        $swatch.text(this.drawer.t('Transparent'));\n\n        if (!this.shouldDisplayTransparent) {\n          $swatch.hide();\n        }\n\n        return $swatch;\n    };\n\n  /**\n   * Show color dropdown\n   * @param {jQuery} [$trigger] - trigger element\n   */\n  ColorpickerControl.prototype.showColorDropdown = function ($trigger) {\n    this.colorDropdownVisible = true;\n    this._updateControlsSize();\n    var insidePopup = this.$toolbar.closest('.popup-content-wrapper').length;\n    this.$colorButton.$colorDropdown.removeClass('hidden');\n    if (insidePopup) {\n      this._adjustPosition($trigger);\n    } else {\n      this._adjustControlsPosition();\n    }\n\n    this.$colorButton.$colorDropdown.removeClass('control-hidden');\n    if (this.toolbar.options.compactType === 'scrollable') {\n      this.$cloneControl = $('<div class=\"colorpicker-control\"></div>');\n      this.$cloneDropdown = this.$colorButton.$colorDropdown.clone(true);\n      this.$cloneControl.append(this.$cloneDropdown);\n      this.$toolbar.closest('.toolbar-placeholder').append(this.$cloneControl);\n    }\n  };\n\n  /**\n   * Hide color dropdown\n   */\n  ColorpickerControl.prototype.hideColorDropdown = function () {\n    this.colorDropdownVisible = false;\n    this.$colorButton.$colorDropdown.addClass('hidden');\n    this.$colorButton.$colorDropdown.addClass('control-hidden');\n    if (this.$cloneControl) {\n      this.$cloneControl.remove();\n    }\n  };\n\n  /**\n   * Toggle state of color dropdown\n   * @param {jQuery} [$trigger]\n   */\n  ColorpickerControl.prototype.toggleColorDropdown = function ($trigger) {\n    if (!this.colorDropdownVisible) {\n      this.showColorDropdown($trigger);\n    } else {\n      this.hideColorDropdown();\n    }\n  };\n\n\n  pluginsNamespace.ColorpickerControl = ColorpickerControl;\n\n})\n","export default (function ($, pluginsNamespace, util) {\n  'use strict';\n\n  /**\n   * Creates color input for changing color; colorChangeHandler is called on color change.\n   *\n   * @param {Object} options\n   * Configuration object.\n   *\n   * @param {callback} colorChangeHandler will be called  with new color as parameter\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var OpacityControl = function OpacityControlConstructor(drawer, options) {\n      /**\n       * @type {Drawer}\n       */\n      this.drawer = drawer;\n\n      // init options\n      this.options = $.extend(true, {}, this._defaultOptions || {}, options || {});\n\n      this._opacity = this.options.defaultOpacity;\n      this.drawer.on(this.drawer.AFTER_CREATE_TOOLBARS, this._moveControlToEnd.bind(this));\n    };\n\n\n  OpacityControl.prototype._defaultOptions = {\n    defaultOpacity : 1\n  };\n\n\n  /**\n   * Removes tool\n   */\n  OpacityControl.prototype.remove = function () {\n    if (this.$opacityControl) {\n      this.$opacityControl.remove();\n    }\n  };\n\n  /**\n   * Move opacity control to the end of toolbar for popup\n   * @private\n   */\n  OpacityControl.prototype._moveControlToEnd = function () {\n    var needToMove = this.toolbar.options.compactType === 'popup';\n    if (needToMove) {\n      var $toolbar = this.$opacityControl.parent();\n      $toolbar.append(this.$opacityControl);\n    }\n  };\n\n  /**\n   * Hides controls\n   */\n  OpacityControl.prototype.hideControls = function () {\n    if (this.$opacityControl) {\n      this.$opacityControl.addClass('hidden');\n    }\n  };\n\n\n  /**\n   * Shows controls\n   */\n  OpacityControl.prototype.showControls = function () {\n    if (this.$opacityControl) {\n      this.$opacityControl.removeClass('hidden');\n    }\n  };\n\n\n  /**\n   * Returns current opacity\n   * @return {Number} current opacity - number from 0 to 1\n   */\n  OpacityControl.prototype.getOpacity = function () {\n      return this._opacity;\n  };\n\n\n  /**\n   * Sets current opacity and updated tool control.\n   * @param {Number} opacity number from 0 to 1\n   */\n  OpacityControl.prototype.setOpacity = function (opacity) {\n      this._opacity = opacity;\n\n      this.$opacityControl.find('input').val(opacity * 100 );\n      this.$opacityControl.find('.editable-canvas-opacity-indicator').text(opacity * 100 + '%');\n    };\n\n\n  /**\n   * This function is called every time user clicks on color from color-dropdown\n   * menu.\n   *\n   * @param {String} selectedColor Hash value of user selected color.\n   */\n  OpacityControl.prototype.onOpacityChange = function () {\n    var $opacityInput = $(this.$opacityControl).find('input'),\n        rawValue = parseInt($opacityInput.val(), 10),\n        rawValueIsValid = typeof rawValue === 'number' &&  isFinite(rawValue),\n        validatedValue = rawValueIsValid ? rawValue : this.options.defaultOpacity,\n        formattedValue = parseInt(validatedValue, 10) + '%';\n    this._opacity = validatedValue / 100;\n\n    this.$opacityIndicator.text(formattedValue);\n\n    if (this.opacityChangeCallback) {\n      this.opacityChangeCallback(this._opacity);\n    }\n  };\n\n\n  /**\n   * Create controls.\n   * @param  {DrawerToolbar} toolbar to add control to\n   */\n  OpacityControl.prototype.createControl = function (toolbar, opacityChangeCallback) {\n    var self = this;\n    this.toolbar = toolbar;\n    this.opacityChangeCallback = opacityChangeCallback;\n\n    this.$opacityControl = $(\n      '<li class=\"editable-canvas-opacity toolbar-item-range\">' +\n        '<div class=\"toolbar-item-description\">' +\n          '<span class=\"toolbar-label editable-canvas-opacity-label\">' +\n          this.drawer.t('Fill opacity:') + ' ' +\n          '</span>' +\n          '<span class=\"toolbar-label toolbar-label-indicator editable-canvas-opacity-indicator\">' +\n            '100%' +\n          '</span>' +\n      '</div>' +\n        '<input class=\"editable-canvas-opacity-input\" ' +\n               'type=\"range\" name=\"drawer-size\" min=\"0\" max=\"100\"' +\n               'value=\"100\" />' +\n        '</li>');\n\n    this.$opacityIndicator = this.$opacityControl.find('.editable-canvas-opacity-indicator');\n\n    toolbar.addControl(this.$opacityControl, this.options.buttonOrder);\n\n    $(this.$opacityControl).on('change', this.onOpacityChange.bind(this));\n\n    return this.$opacityControl;\n  };\n\n\n  OpacityControl.prototype.showControls = function() {\n      // this.updateControl();\n      this.$opacityControl.show();\n  };\n\n\n  OpacityControl.prototype.hideControls = function() {\n      this.$opacityControl.hide();\n  };\n\n\n  // OpacityControl.prototype.updateControl = function () {\n  //   var opactity = .5;\n  //   this.setBrushSize\n\n  // };\n\n  pluginsNamespace.OpacityControl = OpacityControl;\n\n})\n","export default (function ($, pluginsNamespace, BaseToolOptions, util) {\n  'use strict';\n\n  /**\n   * Provides color input\n   * for changing shapes/brush color.\n   *\n   * @param {DrawerJs.Drawer} drawer\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @param {Object} options\n   * Configuration object.\n   *\n   * @param {String[]} options.colors\n   * Array of colors to be used.\n   *\n   * @param {number} options.colorsInRow\n   * Number of colors for one row.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   * @extends {DrawerJs.plugins.BaseToolOptions}\n   */\n  var ColorTool = function ColorToolConstructor(drawer, options) {\n      // call super c-tor\n      BaseToolOptions.call(this, drawer);\n    this._setupOptions(options);\n\n    /**\n     * Instance of ColorpickerControl\n     * @type {DrawerJs.plugins.ColorpickerControl}\n     */\n      this.colorControl = new pluginsNamespace.ColorpickerControl(this.drawer, this.options);\n    /**\n     * Instance of OpacityControl\n     * @type {DrawerJs.plugins.OpacityControl}\n     */\n      this.opacityControl = new pluginsNamespace.OpacityControl(this.drawer, this.options);\n    };\n\n    ColorTool.prototype = Object.create(BaseToolOptions.prototype);\n    ColorTool.prototype.constructor = BaseToolOptions;\n\n  ColorTool.prototype.optionName = 'color';\n\n  ColorTool.prototype._defaultOptions = {\n    showOpacityControl: false,\n    alwaysVisible: true,\n    colorText: 'Fill:'\n  };\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  /**\n   * Creates controls\n   * @param  {DrawerToolbar} toolbar\n   */\n  ColorTool.prototype.createControls = function(toolbar) {\n    this.colorControl.createControl(toolbar,  this._onColorSelected.bind(this));\n    this.opacityControl.createControl(toolbar,  this._onOpacityControlChanged.bind(this));\n  };\n\n\n  /**\n   * This function is called everytime user clicks on color from color-dropdown\n   * menu.\n   *\n   * @param {String} selectedColor Hash value of user selected color.\n   */\n  ColorTool.prototype._onColorSelected = function (selectedColor) {\n    if (selectedColor == 'transparent') {\n      var opacity = this.opacityControl.getOpacity();\n      var colorWithAlfaRgba = this._hexToRgba(selectedColor, opacity);\n\n      this.drawer.setColor(colorWithAlfaRgba);\n    } else {\n      this.drawer.setColor(selectedColor);\n    }\n  };\n\n\n  /**\n   * This function is called every time user clicks on color from color-dropdown\n   * menu.\n   *\n   * @param {String} opacity Hash value of user selected color.\n   */\n  ColorTool.prototype._onOpacityControlChanged = function (opacity) {\n    var currentColor = this.drawer.activeColor;\n    var colorWithAlfaRgba = this._hexToRgba(currentColor, opacity);\n\n    this.drawer.setColor(colorWithAlfaRgba);\n  };\n\n\n  /**\n   * React on object selection - update controls\n   * Is called from BaseOptionTool._onObjectSelected method\n   *\n   * @param  {fabric.Object} target\n   */\n  ColorTool.prototype.updateControlsFromObject = function (target) {\n      var color = null;\n\n      // get object color\n      if (target.path) { // free drawing shape\n        // @todo: rework in target.getColor()\n        color = target.get('stroke');\n        this.colorControl.disableTransparent();\n      }  else {\n        color = target.get('fill');\n        this.colorControl.enableTransparent();\n      }\n\n      // update color and opacity controls\n      if (color) {\n        this.updateControlsWithColor(color);\n        this.drawer.activeColor = color;\n      }\n  };\n\n\n  /**\n   * Updates color and opacity controls with color\n   * @param  {String} color\n   */\n  ColorTool.prototype.updateControlsWithColor = function(color) {\n        // update color control\n        this.colorControl.setColor(color);\n\n        // update opacity control\n        var fColor = new fabric.Color(color);\n        var source = fColor._source;\n        var opacity = source[3];\n        this.opacityControl.setOpacity(opacity);\n  };\n\n\n  /**\n   * Show color control and optionally - opacity control\n   * @param  {Boolean} [withoutOpacity]\n   */\n  ColorTool.prototype.showControls = function (withoutOpacity) {\n    withoutOpacity = withoutOpacity !== undefined ? withoutOpacity : !this.options.showOpacityControl;\n      this.colorControl.showControls();\n      if (withoutOpacity) {\n        this.opacityControl.hideControls();\n      } else {\n        this.opacityControl.showControls();\n      }\n  };\n\n\n  /**\n   * Hides both controls\n   */\n  ColorTool.prototype.hideControls = function (force) {\n    var alwaysVisible = this.drawer.options.toolbars.popupButtonAlwaysVisible || this.options.alwaysVisible;\n    if (force || !alwaysVisible) {\n      this.colorControl.hideControls();\n      this.opacityControl.hideControls();\n    }\n  };\n\n\n  /**\n   * Adds opacity to color in hex form, returns rgba\n   * @param  {String} colorHex color in hex format\n   * @param  {Number} opacity  opacity 0..1\n   * @return {String}          color in rgba format\n   */\n  ColorTool.prototype._hexToRgba = function(colorHex, opacity) {\n    var colorWithAlfa = new fabric.Color(colorHex);\n    colorWithAlfa._source[3] =  opacity;\n\n    return colorWithAlfa.toRgba();\n  };\n\n\n  pluginsNamespace.Color = ColorTool;\n\n})\n","export default (function ($, pluginsNamespace) {\n  /**\n   * Provides html5 color input for changing shapes/freedrawing brush color.\n   *\n   * @param {DrawerJs.Drawer} drawerInstance\n   * Instance of {@link DrawerJs.Drawer}.\n   *\n   * @constructor\n   * @memberof DrawerJs.plugins\n   */\n  var ColorpickerHtml5 = function ColorpickerHtml5Constructor(drawerInstance) {\n    var _this = this;\n    this.drawerInstance = drawerInstance;\n    this.name = 'BrushSize';\n\n    drawerInstance.on(drawerInstance.EVENT_OPTIONS_TOOLBAR_CREATED,\n      function (e, toolbar) {\n        _this.createColorControl(toolbar);\n      });\n  };\n\n  /**\n   * Create control and append it to toolbar\n   * @param  {DrawerToolbar} toolbar to add control to\n   */\n  ColorpickerHtml5.prototype.createColorControl = function (toolbar) {\n    var _this = this;\n\n    var colorButton = $(\n      '<li class=\"editable-canvas-plugin-color\"' +\n        'data-editable-canvas-sizeable=\"toolbar-button\" ' +\n        'data-editable-canvas-cssrules=\"height\">' +\n      '<span class=\"toolbar-label\"' +\n        'data-editable-canvas-sizeable=\"toolbar-button\" ' +\n        'data-editable-canvas-cssrules=\"height,line-height\">Color: </span>' +\n      '<input class=\"editable-canvas-colorpicker\" type=\"color\" ' +\n        'value=\"' + this.drawerInstance.activeColor + '\" ' +\n        'data-editable-canvas-sizeable=\"toolbar-button\" ' +\n        'data-editable-canvas-cssrules=\"height,width\"/>' +\n      '</li>');\n\n    toolbar.addControl(colorButton, this.options.buttonOrder);\n\n    var colorChangeHandler = function (event) {\n      if (!event) {\n        return;\n      }\n\n      var color = event.target.value;\n\n      _this.drawerInstance.setColor(color);\n    };\n\n    colorButton.find('input').change(colorChangeHandler);\n  };\n\n  pluginsNamespace.ColorpickerHtml5 = ColorpickerHtml5;\n\n})\n","import initDrawerJs from './drawer/index'\nexport default initDrawerJs\n","import { fabric }  from 'fabric'\nimport DrawerJs from './core/Globals'\nimport Texts from './core/Localization_en'\n\nimport AssetsProvider from './utils/AssetsProvider'\n\n// import toolbars\nimport initToolbars from './toolbars/init'\n// core imports\nimport initCanvas from './core/Canvas'\nimport initUtil from './core/Util'\nimport initApi from './core/Drawer.Api'\nimport initObjectApi from './core/Drawer.ObjectApi'\nimport initDrawer from './core/Drawer'\nimport initDefaultOptions from './core/Drawer.DefaultOptions'\nimport initEvents from './core/Drawer.Events.js'\nimport initStorage from './core/Drawer.Storage.js'\n// init fabric extensions\nimport initFabricJsExtensions from './fabricjs_extensions/init'\n// import plugins init\nimport initPlugins from './plugins/init'\n\nexport default (function ($, $editor) {\n  if (!window.$) { window.$ = $ }\n\n  DrawerJs.$editor = $editor\n  DrawerJs.texts = Texts\n  DrawerJs.global = { fabric: fabric }\n  DrawerJs.clipping = {}\n\n  if ($editor.data('assets')) {\n    DrawerJs.util.assets = AssetsProvider.init($editor.data('assets'))\n  }\n\n  // init toolbars\n  initToolbars(window, $, DrawerJs)\n  // core init\n  initCanvas(DrawerJs, DrawerJs.util);\n  initUtil($, DrawerJs.util)\n  initApi(DrawerJs)\n  initObjectApi(DrawerJs.DrawerApi)\n  initDrawer($, DrawerJs, DrawerJs.plugins, DrawerJs.util, DrawerJs.texts)\n  initDefaultOptions(DrawerJs.Drawer, DrawerJs.util, DrawerJs.texts)\n  initEvents(DrawerJs.Drawer)\n  initStorage(DrawerJs.Drawer, DrawerJs.util)\n  // init fabric extensions\n  initFabricJsExtensions(DrawerJs)\n  // init plugins\n  initPlugins($, DrawerJs)\n\n  return DrawerJs\n})\n","import { fabric } from 'fabric'\n\nexport default (function (namespace, util) {\n\n  'use strict';\n\n  var getPointer = fabric.util.getPointer,\n    degreesToRadians = fabric.util.degreesToRadians,\n    radiansToDegrees = fabric.util.radiansToDegrees,\n    atan2 = Math.atan2,\n    abs = Math.abs;\n\n  /**\n   * Fabricjs canvas class with customizations to allow\n   * eraser paths, fixed rotations etc.\n   *\n   * @constructor\n   * @memberof DrawerJs\n   */\n  namespace.Canvas = fabric.util.createClass(fabric.Canvas, /** @lends fabric.Canvas.prototype */ {\n\n    /**\n     * Constructor\n     * @param {HTMLElement | String} el &lt;canvas> element to initialize instance on\n     * @param {Object} [options] Options object\n     * @return {Object} thisArg\n     */\n    initialize: function (el, options) {\n      options = options ? options : {};\n      this.preserveObjectStacking = true;\n\n      this.callSuper('initialize', el, options);\n    },\n\n\n    disableSelection: function () {\n      var obj = null;\n      var objects = this.getObjects();\n      this.deactivateAll();\n\n      for (var i = 0; i < objects.length; i++) {\n        obj = objects[i];\n        if (obj.__evented === undefined) {\n          obj.__evented = obj.get('evented');\n          obj.set('evented', false);\n        }\n\n        if (obj.__selectable === undefined) {\n          obj.__selectable = obj.get('selectable');\n          obj.set('selectable', false);\n        }\n      }\n    },\n\n    restoreSelection: function () {\n      var obj = null;\n      var objects = this.getObjects();\n\n      for (var i = 0; i < objects.length; i++) {\n        obj = objects[i];\n\n        if (obj.__evented !== undefined) {\n          obj.set('evented', obj.__evented);\n          delete obj.__evented;\n        }\n\n        if (obj.__selectable !== undefined) {\n          obj.set('selectable', obj.__selectable);\n          delete obj.__selectable;\n        }\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Array} objectsToRender\n     */\n    _renderObjects: function (ctx, objectsToRender) {\n      var i, length, obj;\n\n      var tempCanvas = util.getTemporaryCanvas(this);\n      var tempContext = tempCanvas.getContext('2d');\n      tempContext.clearRect(0, 0, this.width, this.height);\n\n      this.eraserPaths = [];\n\n      for (i = 0, length = objectsToRender.length; i < length; ++i) {\n          obj = objectsToRender[i];\n\n          // we do not render eraser paths\n          if (obj instanceof fabric.EraserPath)\n              continue;\n\n          // obj.render(tempContext);\n          obj.render(ctx);\n      }\n\n        // ctx.drawImage(tempCanvas, 0, 0);\n        // tempContext.clearRect(0, 0, this.width, this.height);\n\n    },\n\n\n    _applyEraserPath: function (pathObject, ctx) {\n      pathObject.visible = true;\n      pathObject.globalCompositeOperation = 'destination-out';\n      pathObject.render(ctx);\n      pathObject.visible = false;\n    },\n\n    /**\n     * @private\n     */\n    _findNewLowerIndex: function (object, idx, intersecting) {\n      var newIdx;\n\n      if (intersecting) {\n        newIdx = idx;\n\n        // traverse down the stack looking for the nearest intersecting object\n        for (var i = idx - 1; i >= 0; --i) {\n\n          if (this._objects[i] instanceof fabric.EraserPath) {\n            continue;\n          }\n\n          var isIntersecting = object.intersectsWithObject(this._objects[i]) ||\n            object.isContainedWithinObject(this._objects[i]) ||\n            this._objects[i].isContainedWithinObject(object);\n\n          if (isIntersecting) {\n            newIdx = i;\n            break;\n          }\n        }\n      }\n      else {\n        newIdx = idx - 1;\n      }\n\n      return newIdx;\n    },\n    /**\n     * @private\n     */\n    _findNewUpperIndex: function (object, idx, intersecting) {\n      var newIdx;\n\n      if (intersecting) {\n        newIdx = idx;\n\n        // traverse up the stack looking for the nearest intersecting object\n        for (var i = idx + 1; i < this._objects.length; ++i) {\n\n          if (this._objects[i] instanceof fabric.EraserPath) {\n            continue;\n          }\n\n          var isIntersecting = object.intersectsWithObject(this._objects[i]) ||\n            object.isContainedWithinObject(this._objects[i]) ||\n            this._objects[i].isContainedWithinObject(object);\n\n          if (isIntersecting) {\n            newIdx = i;\n            break;\n          }\n        }\n      }\n      else {\n        newIdx = idx + 1;\n      }\n\n      return newIdx;\n    },\n\n    /**\n     * This override is needed to properly call object.set() method\n     * instead of simple assigment.\n     *\n     * @private\n     * @param {Number} x pointer's x coordinate\n     * @param {Number} y pointer's y coordinate\n     *\n     * @return {boolean} always returns true, except case when _currentTransform.get('lockRotation') returns true\n     */\n    _rotateObject: function (x, y) {\n      var t = this._currentTransform;\n\n      if (t.target.get('lockRotation')) {\n        return;\n      }\n\n      var lastAngle = atan2(t.ey - t.top, t.ex - t.left),\n        curAngle = atan2(y - t.top, x - t.left),\n        angle = radiansToDegrees(curAngle - lastAngle + t.theta);\n\n      // normalize angle to positive value\n      if (angle < 0) {\n        angle = 360 + angle;\n      }\n\n      t.target.set('angle', angle % 360);\n      return true;\n    }\n  });\n})\n","export default (function ($, utilNamespace) {\n  'use strict';\n\n  /**\n   * Contains url to a folder of drawer files.\n   *\n   * @type {null|string}\n   * @private\n   */\n  var _drawerFolderUrl = null;\n\n  utilNamespace.setDrawerFolderUrl = function (url) {\n    _drawerFolderUrl = url.replace(/\\/*$/g, '') + '/';\n  };\n\n  /**\n   * This function finds an url from which drawer file was loaded\n   *\n   * @function\n   * @memberof DrawerJs.util\n   * @returns {*}\n   */\n  utilNamespace.getDrawerFolderUrl = function () {\n    if (_drawerFolderUrl) {\n      return _drawerFolderUrl;\n    }\n\n    // try to find a folder from which this script is included\n    var scripts = document.getElementsByTagName(\"script\");\n    var drawerJsFilenamePattern = /dist\\/(drawer.+\\.js)+$/;\n\n    for (var i = 0; i < scripts.length; i++) {\n      var s = scripts.item(i);\n\n      if (s.src) {\n        var match = s.src.match(drawerJsFilenamePattern);\n        if (match) {\n          var pathToDrawerFolder = s.src.replace(match[1], '');\n          return pathToDrawerFolder;\n        }\n      }\n    }\n\n    return '';\n  };\n\n  /**\n   * Removes all click events with specified namespace bound to element.\n   *\n   * @param {jQuery} element\n   * @param {String} namespace\n   */\n  utilNamespace.unbindClick = function (element, namespace) {\n    var ns = namespace + 'drawerBindClick';\n\n    $(element).off('click.' + ns);\n    $(element).off('touchstart.' + ns);\n    $(element).off('touchend.' + ns);\n  };\n\n  utilNamespace.bindClick = function (element, namespace, handler) {\n    var ns = namespace + 'drawerBindClick';\n\n    $(element).on('click.' + ns, function (event) {\n      var elem = this;\n      var result = null;\n\n      if (elem.__lastClickTime) {\n        var lastClickDiff = Date.now() - elem.__lastClickTime;\n        if (lastClickDiff > 500) {\n          try {\n            result = handler.apply(elem, [event]);\n          } catch(err){\n              var errorName = 'Catched error - ' + 'click.' + ns;\n              console.groupCollapsed(errorName);\n              console.log('%c[' + 'Event name' + ']', 'color: green', 'click.' + ns);\n              console.log('%c[' + 'Element' + ']', 'color: green', element);\n              console.error(err);\n              console.groupEnd(errorName);\n          }\n\n          if (result === false) {\n            event.stopPropagation();\n            event.preventDefault();\n            return false;\n          }\n        } else {\n          // seems that we have already triggered this click on touchend event\n        }\n      } else {\n        try {\n          result = handler.apply(elem, [event]);\n        } catch (err) {\n          var errorName = 'Catched error - ' + 'click.' + ns;\n          console.groupCollapsed(errorName);\n          console.log('%c[' + 'Event name' + ']', 'color: green', 'click.' + ns);\n          console.log('%c[' + 'Element' + ']', 'color: green', element);\n          console.error(err);\n          console.groupEnd(errorName);\n        }\n\n        if (result === false) {\n          event.stopPropagation();\n          event.preventDefault();\n          return false;\n        }\n      }\n    });\n    $(element).on('touchstart.' + ns, function (event) {\n      var elem = this;\n\n      elem.__drawerTouchStartEvent = event;\n\n      // disable click entirely since we do everything with touch events\n      $(element).off('click.' + ns);\n    });\n    $(element).on('touchend.' + ns, function (event) {\n      var elem = this,\n          result;\n\n      if (elem.__drawerTouchStartEvent) {\n        var tsDiff = Math.abs(\n          elem.__drawerTouchStartEvent.timeStamp - event.timeStamp\n        );\n\n        if (tsDiff < 300) {\n          elem.__lastClickTime = Date.now();\n          try {\n            result = handler.apply(elem, [event]);\n          } catch (err) {\n            var errorName = 'Catched error - ' + 'touchend.' + ns;\n            console.groupCollapsed(errorName);\n            console.log('%c[' + 'Event name' + ']', 'color: green', 'touchend.' + ns);\n            console.log('%c[' + 'Element' + ']', 'color: green', elem);\n            console.error(err);\n            console.groupEnd(errorName);\n          }\n          if (result === false) {\n            event.stopPropagation();\n            event.preventDefault();\n            return false;\n          }\n        }\n        delete elem.__drawerTouchStartEvent;\n      }\n    });\n  };\n\n  utilNamespace.bindDoubleTap = function (element, namespace,\n                                          handler) {\n    var timeWindow = 500;\n    var positionWindow = 20;\n\n    $(element).on('touchend.' + namespace, function (event) {\n      var eventElem = this,\n          eventPos;\n      if (eventElem.__touchEndTime) {\n        var diff = Date.now() - eventElem.__touchEndTime;\n        eventPos = utilNamespace.getEventPosition(event);\n        var xDiff = Math.abs(eventElem.__touchEndX - eventPos.left);\n        var yDiff = Math.abs(eventElem.__touchEndY - eventPos.top);\n        var result;\n\n        if (diff < timeWindow &&\n          xDiff < positionWindow &&\n          yDiff < positionWindow) {\n\n          delete eventElem.__touchEndTime;\n          delete eventElem.__touchEndX;\n          delete eventElem.__touchEndY;\n          try {\n            result = handler.apply(eventElem, [event]);\n          } catch (err) {\n            var errorName = 'Catched error - ' + 'touchend(doubleTap).' + namespace;\n            console.groupCollapsed(errorName);\n            console.log('%c[' + 'Event name' + ']', 'color: green', 'touchend(doubleTap).' + namespace);\n            console.log('%c[' + 'Element' + ']', 'color: green', eventElem);\n            console.error(err);\n            console.groupEnd(errorName);\n          }\n          if (result === false) {\n            event.stopPropagation();\n            event.preventDefault();\n            return false;\n          }\n        } else {\n          delete eventElem.__touchEndTime;\n          delete eventElem.__touchEndX;\n          delete eventElem.__touchEndY;\n        }\n      } else {\n        eventElem.__touchEndTime = Date.now();\n        eventPos = utilNamespace.getEventPosition(event);\n        eventElem.__touchEndX = eventPos.left;\n        eventElem.__touchEndY = eventPos.top;\n        utilNamespace.setTimeout(function () {\n          delete eventElem.__touchEndTime;\n          delete eventElem.__touchEndX;\n          delete eventElem.__touchEndY;\n        }, timeWindow);\n      }\n    });\n  };\n\n  utilNamespace.bindLongPress = function (element, namespace,\n                                          handler) {\n    var logTag = 'drawerBindLongPress';\n    var ns = namespace + logTag;\n\n    $(element).on('touchstart.' + ns, function (event) {\n      var elem = this;\n\n      elem.__touchStartTime = Date.now();\n      var eventPos = utilNamespace.getEventPosition(event);\n      elem.__touchStartX = eventPos.left;\n      elem.__touchStartY = eventPos.top;\n\n      if (elem.__longPressCheckTimeout) {\n        clearTimeout(elem.__longPressCheckTimeout);\n      }\n\n      var cleanHandlers = function () {\n\n        delete elem.__touchStartTime;\n        delete elem.__touchStartX;\n        delete elem.__touchStartY;\n\n        $(elem).off('touchmove.' + ns);\n        $(elem).off('touchend.' + ns);\n      };\n\n      $(elem).on('touchmove.' + ns, function (moveEvent) {\n        var eventPos = utilNamespace.getEventPosition(moveEvent);\n        if (elem.__touchStartTime) {\n          var xDiff = Math.abs(\n            elem.__touchStartX - eventPos.left\n          );\n          var yDiff = Math.abs(\n            elem.__touchStartY - eventPos.top\n          );\n\n          if (xDiff > 10 || yDiff > 10) {\n            cleanHandlers();\n          }\n        }\n      });\n\n      $(elem).on('touchend.' + ns, function (endEvent) {\n        cleanHandlers();\n      });\n\n      elem.__longPressCheckTimeout = setTimeout(function () {\n        if (elem.__touchStartTime) {\n          cleanHandlers();\n          try {\n            var result = handler.apply(elem, [event]);\n          } catch (err) {\n            var errorName = 'Catched error - ' + 'touchstart(bindLongPress).' + ns;\n            console.groupCollapsed(errorName);\n            console.log('%c[' + 'Event name' + ']', 'color: green', 'touchstart(bindLongPress).' + ns);\n            console.log('%c[' + 'Element' + ']', 'color: green', elem);\n            console.error(err);\n            console.groupEnd(errorName);\n          }\n        }\n      }, 1000);\n\n      return true;\n    });\n  };\n\n  utilNamespace.unbindLongPress = function (element, namespace) {\n    var logTag = 'drawerBindLongPress';\n    var ns = namespace + logTag;\n\n    $(element).off('touchstart.' + ns);\n    $(element).off('touchmove.' + ns);\n    $(element).off('touchend.' + ns);\n  };\n\n  utilNamespace.mouseDown = function (namespace) {\n    return 'mousedown.' + namespace + this.id +\n      ' touchstart.' + namespace + this.id;\n  };\n\n  utilNamespace.mouseMove = function (namespace) {\n    return 'mousemove.' + namespace + this.id +\n      ' touchmove.' + namespace + this.id;\n  };\n\n  utilNamespace.mouseUp = function (namespace) {\n    return 'mouseup.' + namespace + this.id +\n      ' touchend.' + namespace + this.id;\n  };\n\n  utilNamespace.getTransitionDuration = function (el, with_delay) {\n    var style = window.getComputedStyle(el),\n      duration = style.webkitTransitionDuration,\n      delay = style.webkitTransitionDelay;\n\n    // fix miliseconds vs seconds\n    duration = (duration.indexOf(\"ms\") > -1) ?\n      parseFloat(duration) : parseFloat(duration) * 1000;\n    delay = (delay.indexOf(\"ms\") > -1) ?\n      parseFloat(delay) : parseFloat(delay) * 1000;\n\n    if (with_delay) return (duration + delay);\n\n    else return duration;\n  };\n\n  utilNamespace.getEventPosition = function (event, touchIndex) {\n    var result = {};\n    var searchTouchEvent = function (innerEvent, fromInner) {\n      var touchEvent;\n      if (innerEvent) {\n        var isTouch = innerEvent.type.indexOf('touch') > -1,\n            haveTouches = isTouch && innerEvent.touches && innerEvent.touches.length,\n            eventCoordsAreValid = utilNamespace.eventCoordsAreValid(innerEvent),\n            getFromTouch = isTouch && haveTouches && !eventCoordsAreValid;\n\n        touchEvent = getFromTouch ? innerEvent : (!fromInner && searchTouchEvent(innerEvent.originalEvent, true));\n      }\n      return touchEvent;\n    };\n    if (event) {\n      touchIndex = touchIndex || 0;\n      var touchEvent =  searchTouchEvent(event),\n          touchCoordsAreValid = touchEvent && utilNamespace.eventCoordsAreValid(touchEvent.touches[touchIndex]),\n          eventCoordsAreValid = utilNamespace.eventCoordsAreValid(event),\n          originalEventCoordsAreValid = event && event.originalEvent && utilNamespace.eventCoordsAreValid(event.originalEvent);\n\n      var coordsHolder = (touchCoordsAreValid && touchEvent.touches[touchIndex]) || (eventCoordsAreValid && event) || (originalEventCoordsAreValid && event.originalEvent);\n      if (coordsHolder) {\n        result = {\n          left: coordsHolder.pageX,\n          top: coordsHolder.pageY\n        };\n      }\n    }\n    return result;\n  };\n\n  utilNamespace.eventCoordsAreValid = function (event) {\n    var isValid;\n    if (event) {\n      var areNotZero = event.pageX !== 0 && event.pageY !== 0,\n          areNumbers = typeof event.pageX === 'number' && typeof event.pageY === 'number',\n          areNotNan = areNumbers && isFinite(event.pageX) && isFinite(event.pageY);\n      isValid = areNotZero && areNumbers && areNotNan;\n    }\n    return isValid;\n  };\n\n  utilNamespace.isShape = function (fabricObject) {\n    var isShape = false;\n\n    if (fabricObject.type &&\n      (fabricObject.type == 'line' ||\n      fabricObject.type == 'arrow')) {\n      isShape = false;\n    }\n    else if (fabricObject.path) { // free drawing shape\n      isShape = false;\n    } else {\n      isShape = true;\n    }\n\n    return isShape;\n  };\n\n\n  utilNamespace.__temporaryCanvas = null;\n  utilNamespace.__latestValidCanvasWidth = null;\n  utilNamespace.__latestValidCanvasHeight = null;\n  utilNamespace.getTemporaryCanvas = function (originalCanvas) {\n    if (!utilNamespace.__temporaryCanvas) {\n      utilNamespace.__temporaryCanvas = document.createElement('canvas');\n    }\n\n    var canvasWidth = originalCanvas.width,\n        canvasHeight = originalCanvas.height,\n        resultCanvasWidth = canvasWidth || utilNamespace.__latestValidCanvasWidth || 1,\n        resultCanvasHeight = canvasHeight || utilNamespace.__latestValidCanvasHeight || 1;\n\n    utilNamespace.__temporaryCanvas.setAttribute('width', resultCanvasWidth);\n    utilNamespace.__temporaryCanvas.setAttribute('height', resultCanvasHeight);\n\n    utilNamespace.__latestValidCanvasWidth = resultCanvasWidth;\n    utilNamespace.__latestValidCanvasHeight = resultCanvasHeight;\n\n    return utilNamespace.__temporaryCanvas;\n  };\n\n  utilNamespace.LastCoordsQueue = function () {\n    this.coordsQueue = [];\n    this.length = 10;\n\n    this.pushCoords = function (x, y) {\n      if (this.coordsQueue.length > this.length) {\n        this.coordsQueue =\n          this.coordsQueue.slice(this.coordsQueue.length - this.length);\n      }\n\n      this.coordsQueue.push({x: x, y: y});\n    };\n\n    this.getInterpolatedValues = function () {\n      if (this.coordsQueue.length === 0) {\n        return [];\n      }\n\n      if (this.coordsQueue.length === 1) {\n        return [{x: this.coordsQueue[0].x, y: this.coordsQueue[0].y}];\n      }\n\n      var interpolatedCoords = [];\n\n      var prevX = this.coordsQueue[this.coordsQueue.length - 2].x;\n      var prevY = this.coordsQueue[this.coordsQueue.length - 2].y;\n\n      var currX = this.coordsQueue[this.coordsQueue.length - 1].x;\n      var currY = this.coordsQueue[this.coordsQueue.length - 1].y;\n\n      var xDiff = currX - prevX;\n      var yDiff = currY - prevY;\n\n      var xDiffAbs = Math.abs(xDiff);\n      var yDiffAbs = Math.abs(yDiff);\n\n      var iterations = xDiffAbs > yDiffAbs ? xDiffAbs : yDiffAbs;\n\n      for (var ii = 0; ii < iterations; ii++) {\n        interpolatedCoords.push({\n          x: prevX + ((xDiff / iterations) * ii),\n          y: prevY + ((yDiff / iterations) * ii)\n        });\n      }\n\n      return interpolatedCoords;\n    };\n  };\n\n  /**\n   * Add css rule to sheet\n   * @param {Node} sheet - sheet element\n   * @param {String} selector - selector for css rule\n   * @param {String} rules - text of css rules\n   * @param {Number} [index] - index of rule\n   */\n  utilNamespace.addCSSRule = function addCSSRule(sheet, selector, rules, index) {\n    if (sheet) {\n      if (\"insertRule\" in sheet) {\n        sheet.insertRule(selector + \"{\" + rules + \"}\", index);\n      } else {\n        if (\"addRule\" in sheet) {\n          sheet.addRule(selector, rules, index);\n        }\n      }\n    }\n  };\n\n  /**\n   * Add css rule to style sheet\n   * @param {String} styleSelector - selector for css rule\n   * @param {String} styleRule - text of css rules\n   * @param {jQuery|String|Node} styleSheet - stylesheet element\n   * @param {Boolean} [createElement] - create stylesheet element if cant find matched\n   * @param {Boolean} [force] - need to insert css rules even if there no stylesheet element\n   */\n  utilNamespace.addStyleToStyleSheet = function (styleSelector, styleRule, styleSheet, createElement, force) {\n    var isJqueryEl = styleSheet && styleSheet instanceof jQuery && styleSheet.length,\n        isSelector = typeof styleSheet === 'string' && $(styleSheet).length && $(styleSheet),\n        isNode = styleSheet instanceof Node && $(styleSheet).length && $(styleSheet),\n        $styleSheet = isJqueryEl || isSelector || isNode;\n    if ($styleSheet) {\n      utilNamespace.addCSSRule($styleSheet[0].sheet, styleSelector, styleRule);\n    } else {\n      if (createElement) {\n        var head = document.head || document.getElementsByTagName('head')[0],\n            style = document.createElement('style');\n\n        style.type = 'text/css';\n        style.id = styleSheet;\n        head.appendChild(style);\n        utilNamespace.addCSSRule(style.sheet, styleSelector, styleRule);\n      } else {\n        if (force) {\n          var css = styleSelector + '{' + styleRule + '}';\n          utilNamespace.addStyle(css);\n        }\n      }\n    }\n  };\n\n  utilNamespace.addStyle = function (css) {\n    var head = document.head || document.getElementsByTagName('head')[0],\n      style = document.createElement('style');\n\n    style.type = 'text/css';\n    if (style.styleSheet) {\n      style.styleSheet.cssText = css;\n    } else {\n      style.appendChild(document.createTextNode(css));\n    }\n\n    head.appendChild(style);\n  };\n\n\n  utilNamespace.isString = function (str) {\n      return typeof(str) == 'string' || str instanceof String;\n  };\n\n  utilNamespace.getScrollTopFromElement = function ($element) {\n    var $currElement = $element,\n        result = {\n          left: 0,\n          top: 0\n        },\n        needToContinue = true;\n    while (needToContinue) {\n      needToContinue = $currElement && $currElement.length && !$currElement.is('body');\n      var currScrollTop = $currElement.scrollTop(), currScrollLeft = $currElement.scrollLeft();\n      result.top += currScrollTop;\n      result.left += currScrollLeft;\n      $currElement = $currElement.parent();\n    }\n    return result;\n  };\n\n\n  /**\n   * Debounce function\n   * @param {Function} func\n   * @param {Number} [wait]\n   * @param {Boolean} [immediate]\n   * @returns {Function}\n   */\n  utilNamespace.debounce = function (func, wait, immediate) {\n    wait = wait || 0;\n    var timeout;\n    return function () {\n      var context = this, args = arguments;\n      var later = function () {\n        timeout = null;\n        if (!immediate) func.apply(context, args);\n      };\n      var callNow = immediate && !timeout;\n      clearTimeout(timeout);\n      timeout = utilNamespace.setTimeout(later, wait);\n      if (callNow) func.apply(context, args);\n    };\n  };\n\n  /**\n   *\n   * @param src\n   * @param {Node} [imageEl]\n   * @param {Object} [data]\n   * @returns {Promise}\n   */\n  utilNamespace.loadImage = function (src, imageEl, data, ignoreCrossOrigin) {\n    data = data || {};\n    var img = imageEl || new Image();\n    img.style.opacity = 0;\n    return new Promise(function (resolve) {\n      if (img.src === src) {\n        // If image source hasn't changed resolve immediately\n        resolve(img, data);\n      } else {\n        img.removeAttribute('crossOrigin');\n        if (!ignoreCrossOrigin && src.match(/^https?:\\/\\/|^\\/\\//)) {\n          img.setAttribute('crossOrigin', 'anonymous');\n        }\n        img.onload = function () {\n          utilNamespace.setTimeout(function () {\n            resolve(img, data);\n          }, 1);\n        };\n        img.src = src;\n      }\n    });\n  };\n\n  utilNamespace.checkBrowser = function (browser) {\n    var ua = navigator.userAgent.toLowerCase();\n    var match = /(opr)[\\/]([\\w.]+)/.exec( ua ) ||\n        /(chrome)[ \\/]([\\w.]+)/.exec( ua ) ||\n        /(webkit)[ \\/]([\\w.]+).*(safari)[ \\/]([\\w.]+)/.exec(ua) ||\n        /(webkit)[ \\/]([\\w.]+)/.exec( ua ) ||\n        /(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec( ua ) ||\n        /(msie) ([\\w.]+)/.exec( ua ) ||\n        ua.indexOf(\"trident\") >= 0 && /(rv)(?::| )([\\w.]+)/.exec( ua ) ||\n        ua.indexOf(\"compatible\") < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec( ua ) ||\n        [];\n\n    if (browser == 'safari') return (typeof match[3] != 'undefined') ? match[3] == 'safari' : false;\n    if (browser == 'version') return match[2];\n    if (browser == 'webkit') return (match[1] == 'chrome' || match[1] == 'opr' || match[1] == 'webkit');\n    if (match[1] == 'rv') return browser == 'msie';\n    if (match[1] == 'opr') return browser == 'webkit';\n\n    return browser == match[1];\n  };\n\n  /**\n   *\n   * @param {jQuery} $element\n   */\n  utilNamespace.getScrollOffset = function ($element) {\n    var result = {},\n        needContinue = true,\n        currElement = $element,\n        offsetX = 0,\n        offsetY = 0;\n    if ($element && $element.length) {\n      while (needContinue) {\n        currElement = currElement.parent();\n        needContinue = currElement && currElement.length && !currElement.is('body');\n        offsetX += currElement.scrollLeft();\n        offsetY += currElement.scrollTop();\n      }\n    }\n    result.left = offsetX;\n    result.top = offsetY;\n    return result;\n  };\n\n\n  /**\n   * Custom setTimeout function with advanced error handling\n   @param {String|Function} func\n   @param {number} [delay]\n   @param {...*} [arguments]\n   @return {number}\n   */\n  utilNamespace.setTimeout = function (func, delay, args) {\n    var funcWrapper,\n        timer,\n        tempError = new Error('Parent stack'),\n        stack = tempError.stack;\n    funcWrapper = function advancedSetTimeout() {\n      try {\n        func.apply(window, arguments);\n      } catch (err) {\n        var errorName = 'Catched error - ' + 'setTimeout';\n        console.groupCollapsed(errorName);\n        console.log('%c[' + 'Parent stack' + ']', 'color: green', stack);\n        console.log('%c[' + 'Error stack' + ']', 'color: green', err.stack);\n        console.error(err);\n        console.groupEnd(errorName);\n      }\n    };\n    timer = window.setTimeout(funcWrapper, delay, args);\n    return timer;\n  };\n\n  /**\n   * Mousewheel handler across browser from developer.mozilla.org\n   */\n  (function () {\n    var prefix = \"\",\n        _addEventListener,\n        support,\n        addWheelListener;\n\n    // detect event model\n    if (window.addEventListener) {\n      _addEventListener = \"addEventListener\";\n    } else {\n      _addEventListener = \"attachEvent\";\n      prefix = \"on\";\n    }\n\n    // detect available wheel event\n    var support_modern = \"onwheel\" in document.createElement(\"div\") && \"wheel\", // Modern browsers support \"wheel\"\n        support_WebkitIe = document.onmousewheel !== undefined && \"mousewheel\",// Webkit and IE support at least \"mousewheel\"\n        support_remaining = \"DOMMouseScroll\"; // let's assume that remaining browsers are older Firefox\n\n    support = support_modern || support_WebkitIe || support_remaining;\n\n    var eventHandlerForOldBrowsers = function (originalEvent) {\n          originalEvent = originalEvent || window.event;\n\n          // create a normalized event object\n          var event = {\n            // keep a ref to the original event object\n            originalEvent: originalEvent,\n            target: originalEvent.target || originalEvent.srcElement,\n            type: \"wheel\",\n            deltaMode: originalEvent.type == \"MozMousePixelScroll\" ? 0 : 1,\n            deltaX: 0,\n            deltaY: 0,\n            deltaZ: 0,\n            preventDefault: function () {\n              if (originalEvent.preventDefault) {\n                originalEvent.preventDefault();\n              } else {\n                originalEvent.returnValue = false;\n              }\n            }\n          };\n\n          // calculate deltaY (and deltaX) according to the event\n          if (support == \"mousewheel\") {\n            event.deltaY = -1 / 40 * originalEvent.wheelDelta;\n            // Webkit also support wheelDeltaX\n            if (originalEvent.wheelDeltaX) {\n              event.deltaX = -1 / 40 * originalEvent.wheelDeltaX;\n            }\n          } else {\n            event.deltaY = originalEvent.deltaY || originalEvent.detail;\n          }\n\n          // it's time to fire the callback\n          return callback(event);\n\n        },\n        _addWheelListener = function (elem, eventName, callback, useCapture) {\n          var eventNameFull = prefix + eventName,\n              eventHandler;\n\n          eventHandler = support == \"wheel\" ? callback : eventHandlerForOldBrowsers;\n\n          elem[_addEventListener](eventNameFull, eventHandler, useCapture || false);\n        };\n\n    /**\n     *\n     * @param elem\n     * @param {Function} callback\n     * @param {Boolean} useCapture\n     */\n    utilNamespace.addWheelListener = function (elem, callback, useCapture) {\n      _addWheelListener(elem, support, callback, useCapture);\n\n      // handle MozMousePixelScroll in older Firefox\n      if (support == \"DOMMouseScroll\") {\n        _addWheelListener(elem, \"MozMousePixelScroll\", callback, useCapture);\n      }\n    };\n\n    utilNamespace.requestAnimationFrame = window.requestAnimationFrame.bind(window) ||\n        window.mozRequestAnimationFrame.bind(window) ||\n        window.webkitRequestAnimationFrame.bind(window)  ||\n        window.msRequestAnimationFrame.bind(window)  ||\n        function (f) {\n          f();\n        };\n\n    utilNamespace.cancelAnimationFrame = window.cancelAnimationFrame.bind(window) ||\n        window.mozCancelAnimationFrame.bind(window) ||\n        function () {};\n  }());\n\n})\n","export default (function () {\n  /**\n   *\n   * @param {DrawerJs.Drawer} drawer - instance of drawer\n   * @memberOf DrawerJs\n   * @constructor\n   */\n    var DrawerApi = function(drawer) {\n        if (!drawer) {\n            throw new Error('DrawerApi(): no drawer is provided!');\n        }\n        this.drawer = drawer;\n    };\n\n    DrawerApi.prototype.drawer = null;\n\n    // Drawer core API\n    ////////////////////////////////////////////////////////////////////////\n\n    /**\n     * Starts editing mode.\n     * If already in this mode - do nothing.\n     */\n    DrawerApi.prototype.checkIsActive = function () {\n        if (this.drawer.mode != this.drawer.MODE_ACTIVE) {\n            throw new Error(\"Drawer is not active!\");\n        }\n    };\n\n\n    /**\n     * Starts editing mode.\n     * If already in this mode - do nothing.\n     */\n    DrawerApi.prototype.startEditing = function () {\n        this.drawer._startEditing();\n    };\n\n    /**\n     * Stops editing.\n     * If already stopped, ie. in INACTIVE_MODE - do nothing.\n     */\n    DrawerApi.prototype.stopEditing = function () {\n        this.drawer._stopEditing();\n    };\n\n\n\n    /**\n     * Get serialized in JSON string canvas data.\n     * @returns [String]\n     */\n    DrawerApi.prototype.getCanvasAsJSON = function () {\n        this.drawer.api.checkIsActive();\n        return this.drawer.getSerializedCanvas();\n    };\n\n\n    /**\n     * Save canvas.\n     * Syncs drawer canvas data with storages, defined in options\n     */\n    DrawerApi.prototype.saveCanvas = function () {\n        this.drawer.api.checkIsActive();\n        this.drawer.syncCanvasData();\n    };\n\n\n    /**\n     * Load canvas.\n     * Loads canvas\n     */\n    DrawerApi.prototype.loadCanvasFromData = function (data) {\n        this.drawer.loadCanvas(data);\n    };\n\n\n\n /**\n   * Returns data-url with image encoded to base64.\n   *\n   * @see Drawer.Storage.js getImageData() for details\n   * @returns {String} image data encoded in base64/png.\n   */\n   DrawerApi.prototype.getCanvasAsImage = function () {\n        return this.drawer.getImageData();\n   };\n\n\n    /**\n     * Save canvas as image in storages, as defined in config\n     */\n    DrawerApi.prototype.saveCanvasImage = function () {\n        this.drawer.api.checkIsActive();\n        this.drawer.syncImageData();\n    };\n\n  /**\n   * List of all available options for each mode of each toolbar\n   * @typedef {Object} sizesOfDrawer\n   * @memberOf DrawerJs.DrawerApi\n   * @property {Number} width - width of Drawer\n   * @property {Number} height - height of drawer\n   * @property {Number} scrollTop - \"Top\" position including scrollTop value of parent elements\n   * @property {Number} scrollLeft - \"Left\" position including scrollLeft value of parent elements\n   * @property {Number} top - Absolute value of \"top\" position\n   * @property {Number} left - Absolute value of \"left\" position\n   */\n\n\n  /**\n     * Get sizes of drawer\n     * @returns {DrawerJs.DrawerApi.sizesOfDrawer}\n     */\n    DrawerApi.prototype.getSize = function () {\n      var sizes = this.drawer.getSize();\n      return sizes;\n    };\n\n  /**\n     * Sets drawer size.\n     */\n    DrawerApi.prototype.setSize = function (width, height) {\n        this.drawer.setSize(width, height);\n    };\n\n    /**\n     * Set active color\n     * @param {String} color - New color value (HEX)\n     */\n    DrawerApi.prototype.setActiveColor = function (color) {\n      this.drawer.setActiveColor(color);\n    };\n\n  /**@\n   * Create text object\n   * @param {Number} [positionX=0] - left offset of new text object\n   * @param {Number} [positionY=0] - top offset of new text object\n   * @param {String} [text=\"Text\"] - text of new object\n   * @param {Object} [styles] - styles for new text object\n   */\n  DrawerApi.prototype.createText = function (positionX, positionY, text, styles) {\n    this.drawer._pluginsInstances.Text.addShape(positionX, positionY, text, styles);\n  };\n\n\n    /**\n     * Update current options.\n     * If optionsToUpdate has plugins key, plugins will be reloaded\n     *\n     * @param  {Object} optionsToUpdate options object\n     */\n    DrawerApi.prototype.updateOptions = function (optionsToUpdate) {\n        this.drawer.updateOptions(optionsToUpdate);\n    };\n\n\n    /**\n     * Update current options.\n     * All plugins will be reloaded\n     *\n     * @param  {Object} optionsToUpdate options object\n     */\n    DrawerApi.prototype.setOptions = function (newOptions) {\n        this.drawer.setOptions(newOptions);\n    };\n\n\n    /**\n     * Load plugin by name.\n     * Name must exists in DrawerJs namespace.\n     * If plugin is already loaded, error will be thrown\n     *\n     * @param  {String} pluginName plugin name\n     */\n    DrawerApi.prototype.loadPlugin = function (pluginName) {\n        this.drawer.loadPlugin(pluginName);\n    };\n\n\n    /**\n     * Unload plugin by name.\n     * If plugin is not loaded, nothing happens.\n     *\n     * @param  {String} pluginName plugin name\n     */\n    DrawerApi.prototype.unloadPlugin = function (pluginName) {\n        this.drawer.unloadPlugin(pluginName);\n    };\n\n\n\n    DrawerJs.DrawerApi = DrawerApi;\n})\n","export default (function(DrawerApi) {\n    /**\n     * Checks if obj is set and is fabric.Object\n     *\n     * @param  {} obj [description]\n     * @throw {Error}  if obj is falsie or object is not fabric.Object\n     */\n    DrawerApi.prototype._checkObject = function(obj) {\n        if (!obj) {\n            throw new Error('[Drawer API]  no object provided!');\n        }\n        if (!(obj instanceof fabric.Object)) {\n            throw new Error(\"[Drawer API]  object type is not 'fabric.Object!'\");\n        }\n    };\n\n\n    /**\n     * Returns currently active object.\n     * @return {fabric.Object}   currently active object\n     */\n    DrawerApi.prototype.getSelectedObject = function() {\n        return this.drawer.fCanvas.getActiveObject();\n    };\n\n\n    /**\n     * Bring object closer to front in objects stack.\n     *\n     * @param  {fabric.Object} fabricItem   object to reposition\n     * @return {fabric.Object} returns   same object\n     */\n    DrawerApi.prototype.bringObjectForward = function(fabricItem) {\n        this._checkObject(fabricItem);\n\n        this.drawer.fCanvas.bringForward(fabricItem, true);\n        this.drawer.syncCanvasData();\n        return fabricItem;\n    };\n\n\n    /**\n     * Bring object closer to bottom in objects stack.\n     *\n     * @param  {fabric.Object} fabricItem   object to reposition\n     * @return {fabric.Object} returns   same object\n     */\n    DrawerApi.prototype.sendObjectBackwards = function(fabricItem) {\n        this._checkObject(fabricItem);\n        this.drawer.fCanvas.sendBackwards(fabricItem, true);\n        this.drawer.syncCanvasData();\n        return fabricItem;\n    };\n\n\n    /**\n     * Move object the top object in stack.\n     *\n     * @param  {fabric.Object} fabricItem   object to reposition\n     * @return {fabric.Object}   returns same object\n     */\n    DrawerApi.prototype.bringObjectToFront = function(fabricItem) {\n        this._checkObject(fabricItem);\n\n        this.drawer.fCanvas.bringToFront(fabricItem, true);\n        this.drawer.syncCanvasData();\n        return fabricItem;\n    };\n\n\n    /**\n     * Move object the bottom object in stack.\n     *\n     * @param  {fabric.Object} fabricItem   object to reposition\n     * @return {fabric.Object}   returns same object\n     */\n    DrawerApi.prototype.sendObjectToBack = function(fabricItem) {\n        this._checkObject(fabricItem);\n\n        this.drawer.fCanvas.sendToBack(fabricItem);\n        this.drawer.syncCanvasData();\n        return fabricItem;\n    };\n\n    /**\n     * Remove object from canvas.\n     *\n     * @param  {fabric.Object} fabricItem  object to reposition\n     */\n    DrawerApi.prototype.removeObject = function(fabricItem) {\n        this._checkObject(fabricItem);\n\n        fabricItem.remove();\n        this.drawer.fCanvas.renderAll();\n    };\n\n\n  /**\n   * Duplicate given object.\n   * If object is not 'async' - it will be returned.\n   * If 'callback' is provided - it will be called after cloning,\n   *  with cloned object as argument\n   *\n   * @param  {fabric.Object}  fabricItem  object to be cloned\n   * @param  {Function}       callback    will be called after cloning with cloned object as argument\n   * @return {fabric.Object}              cloned object, if objject is not 'async'\n   */\n    DrawerApi.prototype.duplicateObject = function(fabricItem, callback) {\n        this._checkObject(fabricItem);\n\n        var _this = this;\n        var onCloned = function (clonedObj) {\n            if (!clonedObj) {\n                throw new Error(\"[Drawer API] duplicateObject() : Clone failed! Clone source: \" + fabricItem.toString());\n            }\n\n            clonedObj.set('left', fabricItem.get('left') + 20);\n            clonedObj.set('top', fabricItem.get('top') + 20);\n            _this.drawer.fCanvas.add(clonedObj);\n            _this.drawer.fCanvas.renderAll();\n\n            // call callback with new object\n            if (callback) {\n                callback(clonedObj);\n            }\n            return clonedObj;\n        };\n\n        // sync and async objects cloning is different\n        if(fabricItem.async) {\n            // call clone with callback\n            fabricItem.clone(onCloned);\n        } else {\n            // direct call function\n            return onCloned(fabricItem.clone());\n        }\n    };\n\n})\n","import DrawerToolbarManager from '../toolbars/DrawerToolbarManager'\n\nexport default (function ($, namespace, pluginsNamespace, util, texts) {\n  'use strict';\n\n  /**\n   * Canvas editable element.\n   *\n   * @param redactorInstance {Object|null} Redactor's instance.\n   *                         Could be null for standalone version.\n   *\n   * @param options {Object} Object with configuration parameters.\n   *\n   * @param {String} options.borderCss\n   * Canvas border css styles.\n   * <br><br>\n   * Example:\n   * <code>1px dashed rgb(195, 194, 194)</code>\n   *\n   * @param {String} options.borderCssEditMode\n   * Canvas border css styles which will be applied when in edit mode.\n   * <br><br>\n   * Example:\n   * <code>1px dashed rgb(195, 194, 194)</code>\n   *\n   * @param {String} options.backgroundCss\n   * Canvas background css style which will be applied to canvas container.\n   * <br><br>\n   * Example:\n   * <code>\n   *   url(/redactor.plugin.drawer/dist/assets/transparent.png) repeat\n   * </code>\n   *\n   * @param {String} options.defaultImageUrl\n   * Image url that will be drawn on canvas when it's just created and\n   * nothing has been drawn on it.\n   *\n   * @param {number} options.toolbarSize=35\n   * Specifies drawer's toolbar buttons size in px.\n   *\n   * @param {number} options.toolbarSizeTouch=43\n   * Specifies drawer's toolbar buttons size in px when running on touch device.\n   *\n   * @param {Object} options.toolbars - Configuration for each toolbar.\n   * Each toolbar have next configuration object:\n   * <code><pre>\n   *   {\n   *\n   *      // All of {@link DrawerToolbar.defaultSetOfOptions}\n   *      hidden: false,\n   *      position: 'top',\n   *      positionType: 'outside',\n   *      compactType: 'scrollable',\n   *      toggleVisibilityButton: false,\n   *      customAnchorSelector: '#custom-toolbar-here',\n   *\n   *      fullscreenMode: {\n   *          // All of {@link DrawerToolbar.defaultSetOfOptions}\n   *          hidden: false,\n   *          position: 'top',\n   *          positionType: 'outside',\n   *          compactType: 'scrollable',\n   *          toggleVisibilityButton: false,\n   *          customAnchorSelector: '#custom-toolbar-here',\n   *      }\n   *   }\n   * </pre></code>\n   *\n   * @param {Boolean} options.toolbars.popupButtonAlwaysVisible=true - Always display popup button(If any toolbar uses it)\n   *\n   * @param {DrawerToolbar.defaultToolbarOptions} options.toolbars.drawingTools - Configuration of \"Drawing tools\" toolbar\n   *\n   * @param {DrawerToolbar.defaultToolbarOptions} options.toolbars.toolOptions - Configuration of \"Tool options\" toolbar\n   *\n   * @param {DrawerToolbar.defaultToolbarOptions} options.toolbars.settings - Configuration of \"Drawer settings\" toolbar\n   *\n   * @param {Object} options.tooltipCss\n   * Allows css customizations of buttons tooltips. Could be any valid css\n   * object that will be passed directly to jQuery.css method.\n   * <br><br>\n   * Example:\n   * <code><pre>\n   *   {\n   *    background: 'green',\n   *    color: 'red'\n   *   }\n   * </pre></code>\n   *\n   * @param {String} options.activeColor=#19A6FD\n   * Specifies default active color for drawer(the one that will be selected on\n   * initialization).\n   *\n   * @param {String} options.align  left|right|center|inline|floating\n   * Specifies drawer align.\n   * Drawer can be moved via MovableFloatingMode only if align is 'floating'\n   * <br><br>\n   *\n   * @param {Boolean} options.transparentBackground\n   * Specifies if drawer canvas has transparent background.\n   * <br><br>\n   *\n   * @param {String} options.texts\n   * Object containing strings with translations/texts to use.\n   * <br>\n   * String keys could be found in Localization_en.js file.\n   * <br><br>\n   * Example:\n   * <code><pre>\n   *   {\n   *    'Free drawing mode': 'Pencil',\n   *   }\n   * </pre></code>\n   *\n   * @param {Array} options.plugins\n   * List of plugin names that drawer will use. Please see a full list here:\n   * {@link DrawerJs.plugins}\n   *\n   * Example:\n   * <code><pre>\n     * plugins: [\n   *  // Drawing tools\n   *  'Pencil',\n   *  'Eraser',\n   *  'Text',\n   *  'Line',\n   *  'ArrowOneSide',\n   *  'ArrowTwoSide',\n   *  'Triangle',\n   *  'Rectangle',\n   *  'Circle',\n   *\n   *  // Drawing options\n   *  'ColorpickerRedactor',\n   *  'BrushSize',\n   *  'Resize'\n   * ],\n   * </pre></code>\n   *\n   * @param {Object} options.pluginsConfig\n   * Each Drawer plugin could have its own configuration and could be\n   * configured by this section.\n   * <br><br>\n   *\n   * This is the object which keys are plugin names and values are objects\n   * with plugin configuration fields.\n   * <br><br>\n   *\n   * Plugins names and documentation about each plugin could be found here:\n   * {@link DrawerJs.plugins}.\n   * Look at plugin's constructor `<code>options</code>` argument.\n   * <br><br>\n   *\n   * For example we would like to configure\n   * {@link DrawerJs.plugins.Text} and {@link DrawerJs.plugins.Eraser}\n   * plugins:\n   * <code><pre class=\"prettyprint\">\n   * pluginsConfig: {\n   *   \"Text\": {\n   *     \"fonts\": {\n   *       \"Georgia\": 'Georgia, serif',\n   *       \"Palatino\": \"'Palatino Linotype', Palatino, serif\"\n   *     },\n   *     \"defaultFont\": 'Georgia'\n   *   },\n   *   \"Eraser\": {\n   *     \"cursorUrl\": \"url(assets/eraser_cursor.cur), default\"\n   *   }\n   * }\n   * </code></pre>\n   *\n   * @param {Object} options.defaultActivePlugin\n   * Activates default tool, if options.defaultActivePlugin is set;\n   * MUST contain keys:\n   * name - name of plugin\n   * mode - one of : ['always', 'onNew', 'lastUsed']\n   * Depending on options.defaultActivePlugin.mode :\n   * 'always'   - same plugin will be always actived\n   * 'onNew'    - default plugin is actiavted, only if canvas is empty\n   * 'lastUsed' - on first drawer run plugin options.defaultActivePlugin.name, on consecutive - last used tool\n   *\n   * @param {Object} options.canvasProperties\n   * Specifies fabricjs options that will be passed directly to fabricjs\n   * canvas instance on creation.\n   *\n   * @param {String} options.canvasProperties.selectionColor\n   * Specifies color of selection rectangle.\n   *\n   *\n   * @param {number[]} options.canvasProperties.selectionDashArray\n   * What it allows us to do is make selection lines dashed.\n   * <br><br>\n   *\n   * The way to define dash pattern is by specifying intervals via an array.\n   * <br><br>\n   * So to create a pattern where there's one long dash followed by one short\n   * dash, we could use something like <code>[10, 5]</code>\n   * as \"selectionDashArray\".\n   * <br>\n   *\n   * This will draw a line that's 10px long, then skip 5px, draw 10px line\n   * again, and so on.<br>\n   * If we were to use <code>[2, 4, 6]</code> array, the pattern would be\n   * created by drawing 2px line, then skipping 4px, then drawing 6px line,\n   * then skipping 2px, then drawing 4px line, then skipping 6px, and so on.\n   * You get the point.\n   *\n   *\n   * @param {number} options.canvasProperties.selectionLineWidth\n   * Specifies selection line width in pixels.\n   *\n   *\n   * @param {String} options.canvasProperties.selectionBorderColor\n   * Specifies selection line color.\n   *\n   *\n   * @param {Object} options.objectControls\n   * Specifies the appearance of selected object controls.\n   *\n   *\n   * @param {String} options.objectControls.borderColor\n   * Specifies selected object border color.\n   *\n   *\n   * @param {float} options.objectControls.borderOpacityWhenMoving\n   * Specifies border opacity when object is selected and in moving process.\n   *\n   *\n   * @param {String} options.objectControls.cornerColor\n   * Specified color of control corners for resizing/rotating.\n   *\n   *\n   * @param {number} options.objectControls.cornerSize\n   * Specifies size of corners for resizing/rotating.\n   *\n   *\n   * @param {boolean} options.objectControls.hasBorders\n   * Toggles visibility of selected object border.\n   *\n   * @param {Object} options.objectControlsTouch\n   * The same as <code>objectControls</code> but will be used\n   * when touch device is detected.\n   *\n   * @param {Function} options.detectTouch\n   * A custom function that will be used by drawer to determine whether it is\n   * running on touch device or not.\n   * <br><br>\n   *\n   * This function must return <code>true</code> or <code>false</code>.\n   * <br><br>\n   *\n   * <code>true</code> means that touch device is detected and drawer should\n   * adjust its toolbar sized, add touch events etc.\n   * <br><br>\n   *\n   * Note that if this function is not specified, drawer will use its own\n   * detection mechanism.\n   * <br><br>\n   *\n   * To disable any detection simply set this parameter to such function:\n   * <code><pre>function() { return false; }</pre></code>\n   *\n   *\n   * @param {Object} options.contentConfig\n   * Specifies data-management configuration and controls where canvas element\n   * will store its information.\n   *\n   *\n   * @param {number} options.contentConfig.saveAfterInactiveSec\n   * Specifies number of seconds to wait after user interaction.\n   * If nothing happens in that time - canvas will be saved.\n   * Any interaction resets the timer.\n   *\n   * @param {boolean} options.contentConfig.saveInHtml\n   * Controls whether a drawer will save its content to underlying\n   * image element.\n   * <br><br>\n   *\n   * If <code>true</code>, canvas objects data will be serialized to JSON and\n   * appended to image's <code>data-canvas-serialized</code> attribute.\n   * <br><br>\n   *\n   * Note that JSON could be huge on canvases with a lot of objects and\n   * freedrawings.\n   *\n   *\n   * @param {String|jQuery} options.contentConfig.imagesContainer\n   * Specifies external data container for canvas images data.\n   * <br><br>\n   *\n   * Canvas will serialize itself into base64 encoded png image and\n   * store it as json-encoded text to that container.\n   * <br><br>\n   *\n   * This could be used for storing rendered images separately from content.\n   * <br><br>\n   *\n   * JSON example:\n   * <code><pre>\n   * {\n   *    'canvas_id': 'base64/png .....'\n   * }\n   * </pre></code>\n   *\n   *\n   * @param {String|jQuery} options.contentConfig.canvasDataContainer\n   * Specifies external data container for canvas data.\n   * <br><br>\n   *\n   * Canvas will serialize itself into json object containing all the vector\n   * objects on canvas and its parameters like angle, color etc.\n   * <br><br>\n   *\n   * This could be used for storing canvas vector data separately from content.\n   * <br><br>\n   *\n   * JSON example:\n   * <code><pre>\n   * {\n   *    'canvas_id': {\n   *        'objects': []\n   *    }\n   * }\n   * </pre></code>\n   *\n   * @param {Function} options.contentConfig.loadCanvasData\n   * Specifies a function that will be called when editable canvas needs to\n   * load its fabricjs data.\n   * <br><br>\n   * <code>function(canvasId)</code>\n   *\n   * @param {Function} options.contentConfig.saveCanvasData\n   * Specifies a function that will be called when editable canvas needs to\n   * store its fabricjs data.\n   * <br><br>\n   * <code>function(canvasId, canvasData)</code>\n   *\n   * @param {Function} options.contentConfig.loadImageData\n   * Specifies a function that will be called when editable canvas needs to\n   * load base64/png image data data.\n   * <br><br>\n   * <code>function(canvasId)</code>\n   *\n   * @param {Function} options.contentConfig.saveImageData\n   * Specifies a function that will be called when editable canvas needs to\n   * save base64/png image data data.\n   * <br><br>\n   * <code>function(canvasId, imageData)</code>\n   *\n   * @param {string} options.basePath\n   * Base web url from which all needed drawer files (assets basically)\n   * will be loaded. If null, drawer will try to determine it by itself by\n   * parsing it's script 'src' tag.\n   *\n   * @param width {number}   Width in px\n   * @param height {number}  Height in px\n   *\n   * @memberof DrawerJs\n   * @constructor\n   */\n  var Drawer = function DrawerConstructor(redactorInstance, options,\n                                          width, height) {\n    var _this = this;\n    this.mode = this.MODE_INACTIVE;\n    this.redactorInstance = redactorInstance;\n    this.id = Math.random().toString().replace('0.', '');\n    this.width = width || 0;\n    this.height = height || 0;\n\n    /**\n     * Use jQuery's event system to dispatch events\n     * @type {jQuery}\n     * @private\n     */\n\n    this._eventEmitter = $({});\n\n    this.api = new namespace.DrawerApi(this);\n\n    this.setOptions(options);\n\n\n    /**\n     * Image element for previewing canvas.\n     * @type {jQuery}\n     */\n    this.$imageElement = null;\n\n    /**\n     * Container for all editing controls.\n     * @type {jQuery}\n     */\n    this.$canvasEditContainer = null;\n\n    /**\n     * Aligment css riles for this canvas.\n     * Those rules will be applied to image when edit mode is off,\n     * and to canvas edit box when edit mode is on.\n     * @type {{}}\n     */\n    this.aligmentCss = {};\n\n    // toolbars manager\n    this.toolbars = new DrawerToolbarManager(this);\n    // this.loadPlugins();\n\n    if (_this.options.detectTouch) {\n      if (_this.options.detectTouch.constructor.name !== 'Function') {\n        throw new Error('detectTouch should be a function which will be ' +\n        'called when Drawer needs to determine whether it is working ' +\n        'on touch device');\n      }\n\n      _this.touchDevice = _this.options.detectTouch(_this);\n    } else {\n      _this.touchDevice = /(iPhone|iPod|iPad|BlackBerry|Android)/\n        .test(navigator.userAgent);\n\n      $('body').on('touchstart.DrawerTouchCheck', function () {\n        _this.touchDevice = true;\n        $('body').off('touchstart.DrawerTouchCheck');\n        _this.log('touch', 'Found touch screen');\n      });\n    }\n\n    _this.$canvasDataContainer = null;\n    if (_this.options.contentConfig.canvasDataContainer) {\n      _this.$canvasDataContainer =\n        $(_this.options.contentConfig.canvasDataContainer);\n\n      if (_this.$canvasDataContainer.length < 1) {\n        _this.$canvasDataContainer = null;\n        throw new Error('contentConfig.canvasDataContainer provided but ' +\n        'not found in DOM: ' +\n        _this.options.contentConfig.canvasDataContainer);\n      }\n    }\n\n    _this.$imagesContainer = null;\n    if (_this.options.contentConfig.imagesContainer) {\n      _this.$imagesContainer =\n        $(_this.options.contentConfig.imagesContainer);\n\n      if (_this.$imagesContainer.length < 1) {\n        _this.$imagesContainer = null;\n        throw new Error('contentConfig.imagesContainer provided but ' +\n        'not found in DOM: ' +\n        _this.options.contentConfig.imagesContainer);\n      }\n    }\n\n    var inlineStyles = '' +\n      '.editable-canvas-not-edited {' +\n        'background: url(' + this.options.defaultImageUrl + ') no-repeat !important;' +\n        'background-size: contain !important;' +\n      '}';\n\n    util.addStyle(inlineStyles);\n\n    return this;\n  };\n\n\n  Drawer.prototype.api = {};\n\n  Drawer.prototype.MODE_PREPARING = 'mode:preparing';\n  Drawer.prototype.MODE_ACTIVE = 'mode:active';\n  Drawer.prototype.MODE_INACTIVE = 'mode:inactive';\n\n\n\n  /**\n   * Sets new  drawer options. Reloads plugins.\n   * @param {Object} options\n   */\n  Drawer.prototype.setOptions = function(options) {\n      this.options = $.extend(true, this.defaultOptions || {}, options || {});\n\n      this.onOptionsUpdated(true);\n  };\n\n  /**\n   * Get config of plugin\n   * @param {String} name - name of plugin\n   * @returns {Object} - config of plugin\n   */\n  Drawer.prototype.getPluginConfig = function(name) {\n    var result = {},\n        nameIsValid = name && typeof name === 'string' && name.length,\n        pluginConfig = nameIsValid && this.options.pluginsConfig[name],\n        textPluginConfig = nameIsValid && this.options.pluginsConfig.Text && this.options.pluginsConfig.Text[name];\n\n    if (pluginConfig) {\n      result = $.extend(true, result, pluginConfig);\n    }\n    if (textPluginConfig) {\n      result = $.extend(true, result, textPluginConfig);\n    }\n\n    return result;\n  };\n\n  /**\n   * Update current options.\n   * If optionsToUpdate has plugins key, plugins will be reloaded\n   *\n   * @param  {Object} optionsToUpdate options object\n   */\n  Drawer.prototype.updateOptions = function(optionsToUpdate) {\n      optionsToUpdate = optionsToUpdate || {};\n      this.options = $.extend(true, this.options, optionsToUpdate);\n\n      var doReloadPlugins = false;\n      if (optionsToUpdate.plugins) {\n          // replace old plugin list with new, not extend\n          this.options.plugins = optionsToUpdate.plugins;\n          doReloadPlugins = true;\n      }\n\n      this.onOptionsUpdated(doReloadPlugins);\n  };\n\n\n\n\n  Drawer.prototype.onOptionsUpdated = function(reloadPlugins) {\n      if(this.options.basePath) {\n          util.setDrawerFolderUrl(this.options.basePath);\n       }\n\n      // hotfix for paths containing drawer folder\n      this.options.canvasProperties.rotationCursor = 'url(' + util.getDrawerFolderUrl() + 'assets/cursor-fa-rotate-right.cur), default';\n\n      if (!this.activeColor) {\n          this.activeColor = this.options.activeColor || this.defaultOptions.activeColor;\n      }\n    if (this.activeOpacity === undefined) {\n      this.activeOpacity = this.options.activeOpacity || this.defaultOptions.activeOpacity;\n    }\n\n      if (reloadPlugins) {\n        this.loadPlugins();\n        if (this.toolbars) {\n          this.toolbars.resetAllToolbars();\n        }\n      }\n  };\n\n  /**\n   * Unloads all plugins,\n   */\n  Drawer.prototype.unloadPlugins = function() {\n      for (var key in this._pluginsInstances) {\n        this.unloadPlugin(key);\n      }\n  };\n\n\n  /**\n   * Unload plugin by name.\n   */\n  Drawer.prototype.unloadPlugin = function(pluginName) {\n    if (this._pluginsInstances.hasOwnProperty(pluginName)) {\n        var tool = this._pluginsInstances[pluginName];\n        if (tool.removeTool) {\n            tool.removeTool(true);\n        }\n      delete this._pluginsInstances[pluginName];\n    }\n  };\n\n  /**\n   * Load plugin\n   * @param {String} pluginName - name of plugin to load\n   */\n  Drawer.prototype.loadPlugin = function (pluginName) {\n    if (!pluginName || !pluginsNamespace[pluginName]) {\n      this.error('Drawer: Load plugin error - ' + pluginName + '. No such plugin.');\n      return;\n    }\n\n    var alreadyInitialized = this._pluginsInstances[pluginName],\n        isCorePlugin = this.options.corePlugins && this.options.corePlugins.indexOf(pluginName) !== -1;\n    if (alreadyInitialized) {\n      if (!isCorePlugin) {\n        this.error('Drawer: Load plugin error - ' + pluginName + '. Plugin should not be specified multiple times.');\n      }\n      return;\n    }\n\n    try {\n      var pluginConfig = {};\n      if (this.options.pluginsConfig[pluginName]) {\n        pluginConfig = this.options.pluginsConfig[pluginName];\n      }\n      var plugin = new pluginsNamespace[pluginName](this, pluginConfig);\n      this._pluginsInstances[pluginName] = plugin;\n    } catch (err) {\n      this.error('Drawer: Load plugin error - ' + pluginName + '.');\n      this.error(err);\n    }\n  };\n\n\n  /**\n   * Create plugins instances, according to options.plugins list\n   */\n  Drawer.prototype.loadPlugins = function() {\n    if (!this._pluginsInstances) {\n      this._pluginsInstances = {};\n    } else {\n      this.unloadPlugins();\n    }\n\n    if (this.options.corePlugins) {\n      for (var j = 0; j < this.options.corePlugins.length; j++) {\n        this.loadPlugin(this.options.corePlugins[j]);\n      }\n    }\n    if (this.options.plugins) {\n      for (var i = 0; i < this.options.plugins.length; i++) {\n        this.loadPlugin(this.options.plugins[i]);\n      }\n    }\n  };\n\n\n\n\n\n  Drawer.prototype.log = function (tag, msg) {\n    if (this.options.debug) {\n      console.log('%c[' + tag + ']', 'color: green', msg);\n    }\n  };\n\n  Drawer.prototype.error = function (msg) {\n    if (this.options.debug) {\n      console.error(msg);\n    }\n  };\n\n  Drawer.prototype.clickEvent = function (namespace) {\n    return 'click.' + namespace + ' touchend.' + namespace;\n  };\n\n\n  /**\n   * Returns html string that should be appended to DOM and will represent\n   * editable canvas.\n   *\n   * @returns {String}\n   */\n  Drawer.prototype.getHtml = function () {\n    var img = $('<img>')\n      .css({\n        'display': 'inline-block',\n        'width': this.width ||  this.options.defaultWidth,\n        'height': this.height || this.options.defaultHeight,\n        'background': this.options.backgroundCss\n      })\n      .addClass('editable-canvas-image')\n      .addClass('editable-canvas-not-edited')\n      .attr('id', 'canvas_image_' + this.id)\n      .attr('data-redactor-drawer-enabled', true)\n      .attr('src', '');\n\n    if (this.options.borderCss) {\n      img.css('border', this.options.borderCss);\n    }\n\n    return $(img)[0].outerHTML;\n  };\n\n  /**\n   * This method should be called every time display properties of canvas\n   * change to properly restore them after sync/load.\n   */\n  Drawer.prototype.updateAligmentCss = function () {\n    this.aligmentCss = this.getAligmentCssFor(this.$imageElement);\n  };\n\n  Drawer.prototype.getAligmentCssFor = function (element) {\n    var styles = window.getComputedStyle(element[0]),\n        aligmentCss = {\n      'display': styles.display,\n      'float': styles.float,\n      'margin-left': styles.marginLeft,\n      'margin-right': styles.marginRight,\n      'position': styles.position,\n      'left': styles.left,\n      'top': styles.top\n    };\n\n    if (element.attr('data-margin-left')) {\n      aligmentCss['margin-left'] = element.attr('data-margin-left');\n    }\n\n    if (element.attr('data-margin-right')) {\n      aligmentCss['margin-right'] = element.attr('data-margin-right');\n    }\n\n    return aligmentCss;\n  };\n\n  Drawer.prototype.setAligmentCssFor = function (element, css) {\n    if (element.css('display') == 'none') {\n      delete css.display;\n    }\n\n    element.css(css);\n\n    if (css['margin-left'] && css['margin-left'] == 'auto') {\n      element.css('margin-left', 'auto');\n      element.attr('data-margin-left', 'auto');\n    }\n\n    if (css['margin-right'] && css['margin-right'] == 'auto') {\n      element.css('margin-right', 'auto');\n      element.attr('data-margin-right', 'auto');\n    }\n  };\n\n  /**\n   * Should be called after inserting this element to DOM\n   * to setup necessary event handlers etc.\n   */\n  Drawer.prototype.onInsert = function () {\n    var _this = this;\n\n    $(document).off(this.clickEvent('DrawerStop' + this.id));\n\n    // If we have no image element here - this is the first run\n    var firstRun = !this.$imageElement;\n\n    this.$imageElement = $(document.getElementById('canvas_image_' + this.id));\n\n    if (firstRun) {\n      if (this.options.align) {\n         this.aligmentCss = this._generateAlignCss(this.options.align);\n      } else {\n        this.aligmentCss = this.getAligmentCssFor(this.$imageElement);\n      }\n\n      this.width = this.$imageElement.outerWidth();\n      this.height = this.$imageElement.outerHeight();\n      this.$imageElement.removeClass('edit-mode');\n    }\n\n    if (this.$imageElement.attr('src').length < 1 &&\n      !this.$imageElement.hasClass('editable-canvas-not-edited')) {\n      this.$imageElement.attr('src', this.getImageData());\n      this.$imageElement.removeClass('editable-canvas-not-edited');\n    }\n\n    //this.setSize(this.width, this.height);\n    this.setAligmentCssFor(this.$imageElement, this.aligmentCss);\n\n    // since this function can be called multiple times in a row\n    // (it's called every time something in redactor changes)\n    // we should clear previously set handlers.\n    if (this.options.editOnClick) {\n      this.$imageElement.off();\n      util.bindClick(this.$imageElement, 'Drawer', function (event) {\n        _this._startEditing();\n      });\n    } else {\n      this.$imageElement.off(_this.clickEvent('Drawer'));\n      this.$imageElement.on(_this.clickEvent('Drawer'), function () {\n        _this.drawCanvasControls();\n      });\n    }\n\n    // set global click handler\n    util.bindClick($(document), 'Drawer', this._globalClickHandler.bind(this));\n\n    // call onOptionsChange on EVENT_OPTIONS_CHANGED\n    this.on(this.EVENT_OPTIONS_CHANGED, this.onOptionsChange.bind(this));\n    // call onOptionsChange on EVENT_CANVAS_READY, for initial setup\n    this.on(this.EVENT_CANVAS_READY, this.onOptionsChange.bind(this));\n  };\n\n\n  /**\n   * Intercept all click events and check their targets.\n   * if target is inside canvas edit box - do nothing.\n   * otherwise - trigger 'stopEditing' method.\n   *\n   * @param  {Event} event click\n   */\n  Drawer.prototype._globalClickHandler = function(event) {\n      var parentDrawerBox = $(event.target).parents('#redactor-drawer-box');\n\n      if (parentDrawerBox.length > 0) {\n        if (parentDrawerBox.attr('data-canvas-id') != this.id) {\n          return false;\n        }\n        return true;\n      }\n\n      if (event.target.id == 'canvas_image_' + this.id) {\n        return false;\n      }\n\n      if (event.target.id == 'redactor-image-editter' &&\n        $(event.target).attr('data-canvas-id') == this.id) {\n        return false;\n      }\n\n      if ($(event.target).parents('#redactor-modal').length > 0) {\n        return false;\n      }\n\n      if (this.$canvasEditContainer) {\n        // ignore outside mouse-up while resizing\n        var needToStop = this.options.exitOnOutsideClick &&\n            !this.resizingNow &&\n            !this.croppingNow &&\n            !this.movingNow &&\n            !this.fullscreenMode &&\n            !this.drawingInProgress &&\n            !this.isBrushDrawing;\n        if (needToStop) {\n          this._stopEditing();\n        }\n      }\n  };\n\n  /**\n   * Activates on the 'onclick' handler\n   * to draw controls ('Edit in drawer button') over image.\n   *\n   * Redactor automatically places 'onclick' handler on image when it is appended,\n   * so it will fire first and it will place image edit html\n   * over image ('Edit' at the center).\n   * That handler is Redactor.image.loadEditableControls(imageElement);\n   *\n   * Our handler will file later with that edit html appended, so all we need is\n   * to correct button's title and to change 'onclick' handler of edit-box\n   * to ours.\n   */\n  Drawer.prototype.drawCanvasControls = function () {\n    var _this = this;\n    // use default image module to generate markup\n    //this.redactorInstance.image.loadEditableControls(this.imageElement);\n\n    // enable click handlers\n    var $editter = $('#redactor-image-editter');\n    $editter.attr('data-canvas-id', this.id);\n    $editter.text('Edit in Drawer');\n    // position correction\n    $editter.css('margin-left', '-' + $editter.innerWidth() / 2 + 'px');\n    $editter.off('click');\n\n    $editter.on('click', function () {\n      _this._startEditing();\n    });\n  };\n\n  /**\n   * Turns on edit mode.\n   *\n   * Hides image element, appends fabricjs canvas element after image,\n   * adds toolbars for drawing etc.\n   *\n   * @private\n   */\n  Drawer.prototype._startEditing = function () {\n    this.log('canvasEditMode', 'startEditing()');\n    var _this = this;\n    if (this.mode != this.MODE_INACTIVE) {\n      this.log('Drawer.startEditing(): already in active mode');\n      return;\n    }\n    this.mode = this.MODE_PREPARING;\n\n    // since we are working inside redactor's editing area which has\n    // contenteditable=true, every our click to canvas/image/canvas edit\n    // controls etc will be propagated to redactor's editbox and keyboard\n    // will be shown on touch devices.\n    // To prevent that we need to set contenteditable=false every time canvas\n    // goes into editing mode.\n    if (_this.redactorInstance) {\n      _this.redactorInstance.$editor.attr('contenteditable', 'false');\n    }\n\n    _this._previousFocusedElement = document.activeElement;\n    $(document.activeElement).blur();\n\n    // user can resize image so we need to update our w/h.\n    this.width = this.$imageElement.outerWidth();\n    this.height = this.$imageElement.outerHeight();\n\n    this.$imageElement.addClass('edit-mode');\n    this.$imageElement.removeClass('editable-canvas-not-edited');\n\n    var $canvas = $('<canvas width=\"' + this.width + '\"' +\n    ' height=\"' + this.height + '\" />');\n\n    this.$canvasEditContainer = $('<span id=\"redactor-drawer-box\" ' +\n    'data-canvas-id=\"' + this.id + '\" tabindex=\"0\"></span>');\n    this.$canvasEditContainer = $('<span></span>');\n    this.$canvasEditContainer.attr('id', 'redactor-drawer-box');\n    this.$canvasEditContainer.attr('data-canvas-id', this.id);\n    this.$canvasEditContainer.attr({\n      'id':'redactor-drawer-box',\n      'class': 'drawer-instance-container',\n      'data-canvas-id': this.id,\n      'tabindex': '0'\n    });\n\n    if (this.options.borderCss) {\n      this.$canvasEditContainer.css('border', this.options.borderCssEditMode);\n    }\n\n    if (this.touchDevice) {\n      this.$canvasEditContainer.addClass('touch');\n    }\n    this.$canvasEditContainer.css({\n      'position': 'absolute'\n    });\n\n    this.aligmentCss = this.getAligmentCssFor(this.$imageElement);\n\n    this.$canvasEditContainer.append($canvas);\n\n    $('body').append(this.$canvasEditContainer);\n    this.adjustEditContainer();\n    $(window).on('resize.drawer' + this.id, function () {\n      _this.adjustEditContainer(false, true);\n    });\n\n    if (this.redactorInstance) {\n      this.redactorInstance.image.hideResize();\n    }\n\n    // get serialized canvas\n    var serializedCanvas = this.getCanvasData();\n\n    // create fabricJs canvas\n    this.fCanvas = new namespace.Canvas($canvas.get(0));\n    this.fCanvas.selection = false; // [DRW-74] Prevent selecting multiple objects\n\n    if (this.options && this.options.canvasProperties) {\n      $.each(this.options.canvasProperties, function (k, v) {\n        _this.fCanvas[k] = v;\n      });\n    }\n\n    this.$canvasEditContainer\n      .css('background', this.$imageElement.css('background'));\n\n    this.loadCanvas(serializedCanvas);\n  };\n\n\n  /**\n   * Turns off edit mode.\n   *\n   * Serializes all objects painted on canvas to base64 and sets it as\n   * this.imageElement 'src' attribute.\n   *\n   * Serializes all objects painted on canvas to json and sets it as\n   * this.imageElement 'data-canvas-serialized' attribute, so all canvas objects\n   * could be restored for editing later.\n   *\n   * @private\n   */\n  Drawer.prototype._stopEditing = function () {\n    this.log('canvasEditMode', '_stopEditing()');\n    if (this.mode == this.MODE_INACTIVE) {\n      this.log('canvasEditMode', '_stopEditing(): already stopped, mode is INACTIVE');\n      return;\n    }\n\n    // see startEditingMethod for the reason of making redactor uneditable\n    if (this.redactorInstance) {\n      this.redactorInstance.$editor.attr('contenteditable', 'true');\n    }\n\n    // deactivate all tools\n    this.trigger(this.EVENT_DO_DEACTIVATE_ALL_TOOLS);\n\n    // torn off any selection on objects\n    if (this.fCanvas) {\n      this.fCanvas.deactivateAll();\n    }\n\n    // image should show what has been painted on canvas\n    this.$imageElement.attr('src', this.getImageData());\n    this.$imageElement.removeClass('edit-mode');\n    this.$imageElement.removeClass('editable-canvas-not-edited');\n\n    this.syncCanvasData();\n\n    this.$imageElement.show();\n\n    if (this.$canvasEditContainer) {\n      this.$canvasEditContainer.remove();\n      this.$canvasEditContainer = null;\n    }\n\n    $(window).off('resize.drawer' + this.id);\n\n    this.trigger(this.EVENT_EDIT_STOP);\n    this.mode = this.MODE_INACTIVE;\n  };\n\n  /**\n   *\n   * @param {String} newColor\n   */\n  Drawer.prototype.setActiveColor = function (newColor) {\n    var currActiveObject = this.fCanvas.getActiveObject(),\n        currActiveTool = this.activeDrawingTool,\n        colorPluginInstance = this._pluginsInstances.Color,\n        colorPickerControl = colorPluginInstance && colorPluginInstance.colorControl;\n\n\n    this.activeColor = newColor;\n    this.options.activeColor = newColor;\n    if (!currActiveObject && colorPickerControl) {\n      colorPickerControl.setColor(newColor);\n    }\n    if (currActiveTool) {\n      currActiveTool.brush = null;\n      currActiveTool._activateTool();\n    }\n    this.trigger(this.EVENT_CANVAS_MODIFIED);\n  };\n\n\n  /**\n   * Changes active editor color.\n   * When called without attributes re-sets previously saved color to canvas.\n   *\n   * @param {String|null} [newColor]\n   * @param {Number|null} [newOpacity] - New opacity value\n   */\n  Drawer.prototype.setColor = function (newColor, newOpacity) {\n    if (newColor) {\n      this.activeColor = newColor;\n    }\n    if (newOpacity !== undefined) {\n      this.activeOpacity = newOpacity;\n    }\n\n    if (!this.fCanvas) {\n      return;\n    }\n\n    var activeObject = this.fCanvas.getActiveObject();\n    this.setOpacity(this.activeOpacity, true);\n    if (activeObject) {\n      var isLineType =  activeObject.type === 'line' || activeObject.type === 'arrow',\n          havePath = activeObject.path;\n      if (isLineType) {\n        activeObject.set('stroke', this.activeColor);\n      } else {\n        if (havePath) {\n          activeObject.set('stroke', this.activeColor);\n        } else {\n          activeObject.set('fill', this.activeColor);\n        }\n      }\n      this.fCanvas.renderAll();\n    }\n    this.fCanvas.freeDrawingBrush.color = this.activeColor;\n    this.fCanvas.freeDrawingBrush.fill = this.activeColor;\n    this.trigger(this.EVENT_CANVAS_MODIFIED);\n  };\n\n  /**\n   *\n   * @param value\n   * @param withoutProcessing\n   */\n  Drawer.prototype.setOpacity = function (value, withoutProcessing) {\n    value = value!== undefined ? value : this.activeOpacity;\n    this.activeOpacity = value;\n    var activeObject = this.fCanvas.getActiveObject();\n    if (activeObject) {\n      activeObject.set('opacity', value);\n    }\n    this.fCanvas.freeDrawingBrush.opacity = value;\n    if (!withoutProcessing) {\n      this.fCanvas.renderAll();\n      this.trigger(this.EVENT_CANVAS_MODIFIED);\n    }\n  };\n\n  /**\n   * Changes brush size in free drawing mode.\n   *\n   * @param {int|null} [newBrushSize]\n   */\n  Drawer.prototype.setBrushSize = function (newBrushSize) {\n    if (this.fCanvas) {\n      this.fCanvas.freeDrawingBrush.width = newBrushSize;\n    }\n\n    this.trigger(this.EVENT_BRUSH_SIZE_CHANGED);\n  };\n\n  /**\n   * Returns size of currently selected tool brush.\n   *\n   * @returns {number}\n   */\n  Drawer.prototype.getBrushSize = function () {\n    var size = 0;\n\n    if (this.fCanvas) {\n      size = this.fCanvas.freeDrawingBrush.width;\n    }\n\n    return size;\n  };\n\n  Drawer.prototype.setBrush = function (newBrush) {\n    this.fCanvas.freeDrawingBrush = newBrush;\n    this.trigger(this.EVENT_BRUSH_CHANGED);\n  };\n\n  Drawer.prototype.getBrush = function () {\n    return this.fCanvas ? this.fCanvas.freeDrawingBrush : null;\n  };\n\n  /**\n   * Get current sizes of Drawer\n   * @returns {DrawerJs.DrawerApi.sizesOfDrawer}\n   */\n  Drawer.prototype.getSize = function () {\n    var result = {},\n        $container = this.$canvasEditContainer,\n        containerSizes = $container && $container.get(0).getBoundingClientRect(),\n        scrollSizes = $container && util.getScrollOffset($container);\n\n    result.top = containerSizes ? containerSizes.top : null;\n    result.left = containerSizes ? containerSizes.left : null;\n\n    result.scrollTop = scrollSizes ? scrollSizes.top : null;\n    result.scrollLeft = scrollSizes ? scrollSizes.left : null;\n\n    result.width = this.width;\n    result.height = this.height;\n    return result;\n  };\n\n  /**\n   * Changes canvas size.\n   *\n   * @param {number} width\n   * @param {number} height\n   */\n  Drawer.prototype.setSize = function (width, height) {\n    this.width = width;\n    this.height = height;\n\n    if (this.fCanvas) {\n      this.fCanvas.setWidth(this.width);\n      this.fCanvas.setHeight(this.height);\n    }\n\n    this.$imageElement.css('width', this.width);\n    this.$imageElement.css('height', this.height);\n\n    if (this.$canvasEditContainer) {\n      this.$canvasEditContainer.css('width', this.width);\n      this.$canvasEditContainer.css('height', this.height);\n    }\n\n    this.adjustEditContainer(false, true);\n  };\n\n\n  /**\n   * Generates css for given align.\n   * @param  {String} alignMode left|right|center|inline|floating\n   * @return {Object} object with css properties\n   */\n  Drawer.prototype._generateAlignCss = function (alignMode) {\n    var aligmentCss = {};\n\n    switch (alignMode) {\n     case 'floating' :\n      aligmentCss['position'] = 'absolute';\n      aligmentCss['display'] = 'block';\n      aligmentCss['float'] = 'none';\n      aligmentCss['left'] = '0px';\n      aligmentCss['top'] = '0px';\n     break;\n\n     case 'center' :\n      aligmentCss['float'] = 'none';\n      aligmentCss['margin-left'] = 'auto';\n      aligmentCss['margin-right'] = 'auto';\n      aligmentCss['display'] = 'block';\n      aligmentCss['position'] = 'static';\n     break;\n\n     case 'left' :\n     case 'right' :\n      aligmentCss['display'] = 'block';\n      aligmentCss['float'] = alignMode;\n      aligmentCss['position'] = 'static';\n     break;\n\n     case 'inline' :\n      aligmentCss['float'] = 'none';\n      aligmentCss['display'] = 'inline-block';\n      aligmentCss['position'] = 'static';\n     break;\n\n     default:\n      aligmentCss['float'] = 'none';\n      aligmentCss['display'] = 'inline-block';\n      aligmentCss['position'] = 'static';\n    }\n\n    return aligmentCss;\n  };\n\n  /**\n   * Changes canvas aligment.\n   *\n   * @param {String} align left|right|center|inline|floating\n   */\n  Drawer.prototype.setAlign = function (align) {\n    var newAligmentCss = this._generateAlignCss(align);\n\n    this.setAligmentCssFor(this.$imageElement, newAligmentCss);\n    this.aligmentCss = this.getAligmentCssFor(this.$imageElement);\n\n    this.adjustEditContainer();\n\n    this.trigger(this.EVENT_CANVAS_MODIFIED);\n  };\n\n  /**\n   * Returns current aligment setting for canvas.\n   *\n   * @returns {string} align left|right|center|inline|floating\n   */\n  Drawer.prototype.getAlign = function () {\n    var currentAlign = 'inline';\n\n    if (this.aligmentCss['position'] == 'absolute') {\n      currentAlign = 'floating';\n    }\n    else if (this.aligmentCss['float'] == 'left') {\n      currentAlign = 'left';\n    } else if (this.aligmentCss['float'] == 'right') {\n      currentAlign = 'right';\n    } else if (this.aligmentCss['display'] == 'block' &&\n      this.aligmentCss['margin-left'] == 'auto') {\n      currentAlign = 'center';\n    }\n\n    return currentAlign;\n  };\n\n  /**\n   *\n   * @param {Boolean} [withAnimation]\n   * @param {Boolean} [doNotUseDelay] - in some conditions need to use delay to prevent animation\n   * @returns {boolean}\n   */\n  Drawer.prototype.adjustEditContainer = function (withAnimation, doNotUseDelay) {\n    var self = this,\n        drawerHaveAnimatedClass = this.$canvasEditContainer.hasClass('animated');\n    if (!this.$canvasEditContainer) {\n      return false;\n    }\n\n    var imageOffset = this.$imageElement.offset();\n    if (!withAnimation) {\n      this.$canvasEditContainer.removeClass('animated');\n    }\n    this.$canvasEditContainer.css({\n      top: imageOffset.top,\n      left: imageOffset.left\n    });\n    if (!withAnimation) {\n      if (doNotUseDelay) {\n        self.$canvasEditContainer.toggleClass('animated', !!drawerHaveAnimatedClass);\n      } else {\n        util.setTimeout(function(){\n          if (self.$canvasEditContainer && self.$canvasEditContainer.length) {\n            self.$canvasEditContainer.toggleClass('animated', !!drawerHaveAnimatedClass);\n          }\n        },0);\n      }\n    }\n  };\n\n  /**\n   * Removes itself from redactor entirely.\n   */\n  Drawer.prototype.destroy = function () {\n    this.trigger(this.EVENT_DESTROY);\n    this._stopEditing();\n    this.$imageElement.remove();\n    this.syncCanvasData(true);\n    this.syncImageData(true);\n  };\n\n\n /**\n  * Activates default tool, if options.defaultActivePlugin is set;\n  * Name of plugin is taken from options.defaultActivePlugin.name;\n  * Depending on options.defaultActivePlugin.mode :\n  * 'always'   - same plugin will be always activated\n  * 'onNew'    - default plugin is activated, only if canvas is empty\n  * 'lastUsed' - on first drawer run plugin options.defaultActivePlugin.name, on consecutive - last used tool\n  */\n Drawer.prototype.activateDefaultPlugin = function () {\n  // see, if we need to activate default tool\n  if (!this.options.defaultActivePlugin) {\n    return;\n  }\n\n  var pluginName = this.options.defaultActivePlugin.name;\n  var pluginMode = this.options.defaultActivePlugin.mode;\n\n  // mode 'always' and 'lastUsed' go always; onNew - only if canvas is empty\n  if ((pluginMode == 'always') || (pluginMode  == 'lastUsed') ||\n      (pluginMode == 'onNew' && (this.fCanvas.getObjects().length === 0))) {\n\n      this.log('defaultActivePlugin', pluginMode+'/'+pluginName);\n\n    // if pluginMode is 'lastUsed' and we have already used tool - use it again\n    if (this.lastUsedPluginName && pluginMode  == 'lastUsed'){\n      pluginName = this.lastUsedPluginName;\n    }\n\n    // if plugin 'pluginName' exists, activate it\n    var defaultTool = this._pluginsInstances[pluginName];\n    if (defaultTool) {\n      this.trigger(this.EVENT_DO_ACTIVATE_TOOL, [defaultTool]);\n    } else {\n      this.log('WARNING', \"options['defaultActivePlugin']['name'] is '\" + pluginName + \"', but no such plugin found.\");\n    }\n  }\n\n };\n\n  /**\n   * This method will be triggered every time something on canvas change\n   * to perform synchronization work, trigger events etc.\n   *\n   * @param {Boolean} ignoreOptions Some options like saveAfterInactiveSec\n   * could modify this method behavior to postpone modify event for later\n   * for better performance. This param allows to ignore any options when\n   * {true} is passed.\n   */\n  Drawer.prototype.onCanvasModified = function (ignoreOptions) {\n    var _this = this;\n\n    if (ignoreOptions === undefined &&\n      this.options.contentConfig.saveAfterInactiveSec) {\n\n      if (this.__activityTimer !== undefined) {\n        _this.log('saveAfterInactiveSec', 'Cleaning previous timeout');\n        clearTimeout(this.__activityTimer);\n      }\n\n      _this.log('saveAfterInactiveSec', 'Setting up a timeout');\n      this.__activityTimer = util.setTimeout(function () {\n        _this.log('saveAfterInactiveSec',\n          'Timeout happened, triggering onCanvasModified');\n        _this.onCanvasModified(true);\n      }, this.options.contentConfig.saveAfterInactiveSec * 1000);\n\n      return false;\n    }\n\n    if (!this.redactorInstance) {\n      // when working inside redactor, RedactorPlugin.js will do this for us\n      // because one redactor instance could contain multiple Drawers and\n      // it's RedactorPlugin's responsibility to synchronize all canvases\n      // at same time\n      this.beforeSync();\n    }\n\n    this.syncCanvasData();\n    this.syncImageData();\n\n    this.trigger(this.EVENT_CANVAS_MODIFIED);\n\n    if (!this.redactorInstance) {\n      this.afterSync();\n    }\n  };\n\n  /**\n   * Fabric.js allows objects controls configuration to be applied only\n   * on instances of objects, but drawer provides global configuration\n   * in 'objectControls' section.\n   *\n   * This method applies that config to specified object with respect to\n   * touch/desktop config sections.\n   *\n   * @private\n   */\n  Drawer.prototype._updateObjectsControls = function (fObject) {\n    var objProps = this.options.objectControls;\n\n    if (this.touchDevice && this.options.objectControlsTouch) {\n      objProps = this.options.objectControlsTouch;\n    }\n\n    if (objProps) {\n      for (var propertyName in objProps) {\n        if (objProps.hasOwnProperty(propertyName)) {\n          fObject.set(propertyName, objProps[propertyName]);\n        }\n      }\n    }\n  };\n\n  Drawer.prototype.getPluginInstance = function (pluginName) {\n    if (!this._pluginsInstances[pluginName]) {\n      throw new Error('Plugin not exists: ' + pluginName);\n    } else {\n      return this._pluginsInstances[pluginName];\n    }\n  };\n\n\n  /**\n   * Is called on EVENT_OPTIONS_CHANGED.\n   * - changes background transparency\n   */\n  Drawer.prototype.onOptionsChange = function () {\n    if (this.options.transparentBackground) {\n      this.$imageElement.css('background', 'transparent');\n      this.$canvasEditContainer.css('background', 'transparent');\n    } else {\n      this.$imageElement.css('background', 'white');\n      this.$canvasEditContainer.css('background', 'white');\n    }\n  };\n\n\n  /**\n   * Returns translated text string from default vocabulary of from\n   * specified 'texts' config.\n   *\n   * If string not found console.warn will be used and provided textString\n   * will be returned.\n   *\n   * @param textString\n   */\n  Drawer.prototype.t = function (textString) {\n    if (this.options.texts[textString]) {\n      return this.options.texts[textString];\n    } else {\n      // console.warn('String not found in texts:' + textString);\n      return textString;\n    }\n  };\n\n\n  /**\n   * Shows error message to user.\n   *\n   * @param {String} err\n   */\n  Drawer.prototype.showError = function(err) {\n    // @todo: replace alert!\n    alert(err);\n  };\n\n  /**\n   * Returns x coord of drawer left-top\n   *\n   * @return {Number} left\n   */\n  Drawer.prototype.left = function() {\n    return this.$canvasEditContainer.css('left').replace('px', '') | 0;\n  };\n\n  /**\n   * Returns y coord of drawer left-top\n   *\n   * @return {Number} left\n   */\n  Drawer.prototype.top = function() {\n    return this.$canvasEditContainer.css('top').replace('px', '') | 0;\n  };\n\n  Drawer.prototype.setTemporaryStyles = function(styles) {\n      styles = styles || false;\n      var stylesAreValid = !!styles,\n          temporaryStyles = stylesAreValid ? $.extend(true, {}, this.fCanvas._temporaryStyles || {}, styles || {}) : false;\n      for (var styleName in styles) {\n        if (styles[styleName] === undefined) {\n          delete temporaryStyles[styleName];\n        }\n      }\n      if (temporaryStyles) {\n        this.fCanvas._temporaryStyles = temporaryStyles;\n        this.fCanvas.copiedTextStyle = {\n          0: temporaryStyles\n        };\n        fabric.copiedTextStyle = {\n          0: temporaryStyles\n        };\n      } else {\n        this.fCanvas._temporaryStyles = temporaryStyles;\n        this.fCanvas.copiedTextStyle = temporaryStyles;\n        fabric.copiedTextStyle = temporaryStyles;\n      }\n  };\n\n  /**\n   * Get position relative to canvas from event\n   * @param {Event} event\n   * @param {Boolean} [considerZoom] @todo\n   * @returns {Object}\n   */\n  Drawer.prototype.getRelativeEventPosition = function(event, considerZoom) {\n    var result = {},\n        absolutePosition = util.getEventPosition(event),\n        scrollOffset = util.getScrollOffset(this.$canvasEditContainer),\n        canvasContainer = this.$canvasEditContainer.get(0),\n        canvasContainerSizes = canvasContainer.getBoundingClientRect();\n\n    result.top = absolutePosition.top - canvasContainerSizes.top - scrollOffset.top;\n    result.left = absolutePosition.left - canvasContainerSizes.left - scrollOffset.left;\n    result.scaledTop = result.top;\n    result.scaledLeft = result.left;\n\n\n    // console.info('pos', result.left, result.scaledLeft, result.top, result.scaledTop);\n    return result;\n  };\n\n  namespace.Drawer = Drawer;\n})\n","export default (function (Drawer, util, texts) {\n    Drawer.prototype.defaultOptions =  {\n      captionText: 'Drawer',\n      defaultWidth : '100%',\n      defaultHeight : '500px',\n\n      enableImageCrop: true,\n\n      // TODO: should be fixed or removed\n      editOnClick: true,\n\n      exitOnOutsideClick: true,\n\n      // default color for drawing/shapes\n      activeColor: '#E80F07',\n      activeOpacity: 1,\n\n      // toolbar size in px\n      toolbarSize: 35,\n      toolbarSizeTouch: 45,\n\n      // toolbars config\n      // @todo: move it toolbars files?\n      toolbars : {\n        popupButtonAlwaysVisible: true,\n        // drawing tools toolbar config\n        drawingTools : {\n            position : 'top'         // one of [left, right, top, bottom]\n        },\n\n        // active tool options toolbar config\n        toolOptions : {\n            position : 'bottom'      // one of [left, right, top, bottom]\n        },\n\n        // drawer main toolbar config\n        settings  : {\n            position : 'right'       // one of [left, right, top, bottom]\n        },\n      },\n\n      tooltipCss: {\n        background: 'black',\n        color: 'white'\n      },\n\n      // properties that will be applied to fabricjs canvas on creation\n      canvasProperties: {\n        selectionColor: 'rgba(255, 255, 255, 0.3)',\n        selectionDashArray: [3, 8],\n        selectionLineWidth: 1,\n        selectionBorderColor: '#5f5f5f'\n      },\n\n      // properties that will be applied to every created object\n      objectControls: {\n        borderColor: 'rgba(102,153,255,0.75)',\n        borderOpacityWhenMoving: 0.4,\n        cornerColor: 'rgba(102,153,255,0.5)',\n        cornerSize: 12,\n        hasBorders: true\n      },\n\n      objectControlsTouch: {\n        borderColor: 'rgba(102,153,255,0.75)',\n        borderOpacityWhenMoving: 0.4,\n        cornerColor: 'rgba(102,153,255,0.5)',\n        cornerSize: 20,\n        hasBorders: true\n      },\n\n      contentConfig: {\n        saveAfterInactiveSec: null,\n        saveInHtml: true,\n        canvasDataContainer: null,\n        imagesContainer: null,\n\n        loadCanvasData: null,\n        saveCanvasData: null,\n\n        loadImageData: null,\n        saveImageData: null\n      },\n\n      backgroundCss: 'white',\n      borderCss: '1px dashed rgb(195, 194, 194)',\n      borderCssEditMode: '1px dashed rgb(195, 194, 194)',\n\n      defaultImageUrl: 'images/drawer.jpg',\n\n      plugins: [],\n      pluginsConfig: {},\n      corePlugins: ['Zoom'],\n\n      texts: texts,\n\n      basePath: null,\n\n      debug: false\n    };\n\n})\n","export default (function (Drawer) {\n  /**\n   * This event is triggered every time user clicks on canvas to edit it.\n   * @type {string}\n   */\n  Drawer.prototype.EVENT_EDIT_START = 'editStart';\n  /**\n   * This event is triggered every time user stops editing canvas.\n   * @type {string}\n   */\n  Drawer.prototype.EVENT_EDIT_STOP = 'editStop';\n  /**\n   * This event is triggered when canvas is deserialized\n   * from image's attributes.\n   * @type {string}\n   */\n  Drawer.prototype.EVENT_LOADED_FROM_JSON = 'loadedFromJson';\n  /**\n   * This event is triggered when canvas is deserialized, and is ready to work.\n   * @type {string}\n   */\n  Drawer.prototype.EVENT_CANVAS_READY = 'ready';\n  /**\n   * This event is triggered after canvas resizing starts\n   * from image's attributes.\n   * @type {string}\n   */\n  Drawer.prototype.EVENT_CANVAS_START_RESIZE = 'canvas:resize:start';\n\n  /**\n   * This event is triggered after canvas resizing starts\n   * from image's attributes.\n   * @type {string}\n   */\n  Drawer.prototype.EVENT_BEFORE_RENDER = 'before:render';\n\n\n  /**\n   * This event is triggered after canvas resizing starts\n   * from image's attributes.\n   * @type {string}\n   */\n  Drawer.prototype.EVENT_AFTER_RENDER = 'after:render';\n  /**\n   * This event is triggered in process of canvas resize\n   * from image's attributes.\n   * @type {string}\n   */\n  Drawer.prototype.EVENT_CANVAS_RESIZING = 'canvas:resize:resizing';\n  /**\n   * This event is triggered after canvas resize stopped\n   * from image's attributes.\n   * @type {string}\n   */\n  Drawer.prototype.EVENT_CANVAS_STOP_RESIZE = 'canvas:resize:stop';\n  /**\n   * This event is triggered every time user changes a brush size.\n   * @type {string}\n   */\n  Drawer.prototype.EVENT_BRUSH_SIZE_CHANGED = 'brushSizeChanged';\n  /**\n   * This event is triggered every time user selects a tool that changes\n   * free drawing brush.\n   * @type {string}\n   */\n  Drawer.prototype.EVENT_BRUSH_CHANGED = 'brushChanged';\n\n  /**\n   * Triggering this event will cause tool based on BaseTool to activate\n   * @type {string}\n   */\n  Drawer.prototype.EVENT_DO_ACTIVATE_TOOL = 'activateTool';\n  /**\n   * Triggering this event will cause tool based on BaseTool to deactivate\n   * @type {string}\n   */\n  Drawer.prototype.EVENT_DO_DEACTIVATE_TOOL = 'deactivateTool';\n  /**\n   * Triggering this event will cause to all tools based on BaseTool to deactivate.\n   * This event is part of lifecycle of EVENT_DO_ACTIVATE_TOOL,\n   * and is triggered every time after tool reacts on EVENT_DO_ACTIVATE_TOOL\n   * @type {string}\n   */\n  Drawer.prototype.EVENT_DO_DEACTIVATE_ALL_TOOLS = 'deactivateAllTools';\n\n  /**\n   * Event emitted, when options have changed.\n   * In most cases - if user opened used 'CanvasProperties' plugin.\n   * @type {String}\n   */\n  Drawer.prototype.EVENT_OPTIONS_CHANGED = 'options.changed';\n  /**\n   * This event is triggered when user removes canvas from page.\n   * @type {string}\n   */\n  Drawer.prototype.EVENT_DESTROY = 'destroy';\n\n\n  Drawer.prototype.EVENT_TOOL_ACTIVATED = 'toolActivated';\n\n  Drawer.prototype.EVENT_TOOL_DEACTIVATED = 'toolDeactivated';\n\n  Drawer.prototype.EVENT_TOOLS_TOOLBAR_CREATED = 'toolsToolbarCreated';\n\n  /**\n   * This event is triggered when options toolbar is created and provides a way\n   * to add buttons to it.\n   * The second argument for this event is {DrawerToolbar} and can be used\n   * to manipulate with t.\n   *\n   * @type {string}\n   */\n\n  Drawer.prototype.BEFORE_CREATE_TOOLBARS ='beforeCreateToolbars';\n\n  Drawer.prototype.AFTER_CREATE_TOOLBARS ='afterCreateToolbars';\n\n  Drawer.prototype.EVENT_OPTIONS_TOOLBAR_CREATED ='optionsToolbarCreated';\n\n  Drawer.prototype.EVENT_CONFIG_TOOLBAR_CREATED = 'configToolbarCreated';\n\n  Drawer.prototype.EVENT_IMAGECROP_TOOLBAR_CREATED = 'imageCropToolbarCreated';\n\n  Drawer.prototype.EVENT_FLOATING_TOOLBAR_CREATED = 'floatingToolbarCreated';\n\n  Drawer.prototype.EVENT_MINIMIZED_TOOLBAR_CREATED = 'minimizedToolbarCreated';\n\n  Drawer.prototype.EVENT_TOOLBAR_DESTROYED = 'toolbarDestroyed';\n\n  Drawer.prototype.EVENT_TOOLBAR_CHANGE_STATE = 'toolbarChangeState';\n\n  Drawer.prototype.EVENT_TOOLBAR_CLEAR_STATE = 'toolbarClearState';\n\n  Drawer.prototype.EVENT_TOOLBAR_STATE_HIDDEN_OFF = 'toolbarShow';\n\n  Drawer.prototype.EVENT_TOOLBAR_STATE_HIDDEN_ON = 'toolbarHide';\n\n  Drawer.prototype.EVENT_TOOLBAR_STATE_OVERLAY_ON = 'toolbarOverlayShow';\n\n  Drawer.prototype.EVENT_TOOLBAR_STATE_OVERLAY_OFF = 'toolbarOverlayHide';\n\n  Drawer.prototype.EVENT_TOOLBAR_STATE_DISABLED_ON = 'toolbarDisableOn';\n\n  Drawer.prototype.EVENT_TOOLBAR_STATE_DISABLED_OFF = 'toolbarDisableOff';\n\n  Drawer.prototype.EVENT_RESTORE_DEFAULT_ZOOM = 'restoreDefaultZoom';\n\n  Drawer.prototype.EVENT_CONTEXTMENU = 'contextmenu';\n\n  Drawer.prototype.EVENT_KEYDOWN = 'keydown';\n\n  Drawer.prototype.EVENT_BEFORE_SHAPE_ADD = 'beforeShapeAdd';\n\n  Drawer.prototype.EVENT_AFTER_SHAPE_ADD = 'afterShapeAdd';\n\n  Drawer.prototype.EVENT_ZOOM_SET = 'EVENT_ZOOM_SET';\n\n  Drawer.prototype.EVENT_ZOOM_UNSET = 'EVENT_ZOOM_UNSET';\n\n  Drawer.prototype.EVENT_ZOOM_UPPER_SET = 'EVENT_ZOOM_UPPER_SET';\n\n  Drawer.prototype.EVENT_ZOOM_UPPER_UNSET = 'EVENT_ZOOM_UPPER_UNSET';\n\n  Drawer.prototype.EVENT_ZOOM_UPPER_RESTORE = 'EVENT_ZOOM_UPPER_RESTORE';\n\n  Drawer.prototype.EVENT_ZOOM_RESTORE = 'EVENT_ZOOM_RESTORE';\n\n\n  Drawer.prototype.EVENT_ZOOM_CHANGE = 'zoomChange';\n\n  Drawer.prototype.EVENT_CANVAS_MODIFIED = 'canvasModified';\n\n  Drawer.prototype.EVENT_OBJECT_ADDED = 'objectAdded';\n\n  Drawer.prototype.EVENT_OBJECT_SELECTED = 'objectSelected';\n\n  Drawer.prototype.EVENT_OBJECT_MOVING = 'objectMoving';\n\n  Drawer.prototype.EVENT_SELECTION_CLEARED = 'selectionCleared';\n\n  Drawer.prototype.EVENT_TEXT_SELECTION_CHANGED = 'textSelectionChanged';\n\n  Drawer.prototype.EVENT_TEXT_EDITING_ENTERED = 'textEditingEntered';\n\n  Drawer.prototype.EVENT_TEXT_EDITING_EXITED = 'textEditingExited';\n\n  Drawer.prototype.EVENT_TEXT_STYLES_CHANGED = 'textStylesChanged';\n\n  Drawer.prototype.EVENT_TEXT_GET_STYLES = 'textGetStyles';\n\n  Drawer.prototype.EVENT_OVERCANVAS_POPUP_SHOW = 'overcanvasPopupShow';\n\n  Drawer.prototype.EVENT_OVERCANVAS_POPUP_HIDE = 'overcanvasPopupHide';\n\n  Drawer.prototype.EVENT_OVERCANVAS_BUTTON_SHOW = 'overcanvasButtonShow';\n\n  Drawer.prototype.EVENT_OVERCANVAS_BUTTON_HIDE = 'overcanvasButtonHide';\n\n  Drawer.prototype.EVENT_IMAGE_CROP = 'initImageCrop';\n\n  Drawer.prototype.EVENT_RESIZER_HIDE = 'resizerHide';\n\n  Drawer.prototype.EVENT_RESIZER_SHOW = 'resizerShow';\n\n  Drawer.prototype.EVENT_CREATE_TOOLTIP = 'createTooltip';\n\n  Drawer.prototype.EVENT_HIDE_TOOLTIPS = 'hideTooltips';\n\n  Drawer.prototype.EVENT_DESTROY_TOOLTIPS = 'destroyTooltips';\n\n  /**\n   * Remove event listeners by event name and(or) callback\n   *\n   * @param eventName\n   * @param callback\n   * @returns {*}\n   */\n  Drawer.prototype.off = function (eventName, callback) {\n    return this._eventEmitter.off(eventName, callback);\n  };\n\n  /**\n   * Add event listener to canvas element events.\n   *\n   * @param eventName\n   * @param callback\n   */\n  Drawer.prototype.on = function (eventName, callback) {\n    return this._eventEmitter.on(eventName, callback);\n  };\n\n  /**\n   * Trigger any canvas event.\n   *\n   * @param eventName\n   * @param [args]\n   * @returns {*}\n   */\n  Drawer.prototype.trigger = function (eventName, args) {\n    var eventResult,\n        needToLogErors = !this.insideEvent;\n    try {\n      this.insideEvent = true;\n      eventResult = this._eventEmitter.trigger(eventName, args);\n    } catch(err) {\n      if (this.options.debug) {\n        var errorName = 'Catched error - ' + eventName;\n        console.groupCollapsed(errorName);\n        this.log('Event name',eventName);\n        this.log('Arguments', args);\n        this.error(err);\n        console.groupEnd(errorName);\n      }\n    }\n    if (needToLogErors) {\n      this.insideEvent = false;\n    }\n    return eventResult;\n  };\n})\n","var http = require('http')\nvar url = require('url')\n\nvar https = module.exports\n\nfor (var key in http) {\n  if (http.hasOwnProperty(key)) https[key] = http[key]\n}\n\nhttps.request = function (params, cb) {\n  params = validateParams(params)\n  return http.request.call(this, params, cb)\n}\n\nhttps.get = function (params, cb) {\n  params = validateParams(params)\n  return http.get.call(this, params, cb)\n}\n\nfunction validateParams (params) {\n  if (typeof params === 'string') {\n    params = url.parse(params)\n  }\n  if (!params.protocol) {\n    params.protocol = 'https:'\n  }\n  if (params.protocol !== 'https:') {\n    throw new Error('Protocol \"' + params.protocol + '\" not supported. Expected \"https:\"')\n  }\n  return params\n}\n","module.exports = {\n  \"100\": \"Continue\",\n  \"101\": \"Switching Protocols\",\n  \"102\": \"Processing\",\n  \"200\": \"OK\",\n  \"201\": \"Created\",\n  \"202\": \"Accepted\",\n  \"203\": \"Non-Authoritative Information\",\n  \"204\": \"No Content\",\n  \"205\": \"Reset Content\",\n  \"206\": \"Partial Content\",\n  \"207\": \"Multi-Status\",\n  \"208\": \"Already Reported\",\n  \"226\": \"IM Used\",\n  \"300\": \"Multiple Choices\",\n  \"301\": \"Moved Permanently\",\n  \"302\": \"Found\",\n  \"303\": \"See Other\",\n  \"304\": \"Not Modified\",\n  \"305\": \"Use Proxy\",\n  \"307\": \"Temporary Redirect\",\n  \"308\": \"Permanent Redirect\",\n  \"400\": \"Bad Request\",\n  \"401\": \"Unauthorized\",\n  \"402\": \"Payment Required\",\n  \"403\": \"Forbidden\",\n  \"404\": \"Not Found\",\n  \"405\": \"Method Not Allowed\",\n  \"406\": \"Not Acceptable\",\n  \"407\": \"Proxy Authentication Required\",\n  \"408\": \"Request Timeout\",\n  \"409\": \"Conflict\",\n  \"410\": \"Gone\",\n  \"411\": \"Length Required\",\n  \"412\": \"Precondition Failed\",\n  \"413\": \"Payload Too Large\",\n  \"414\": \"URI Too Long\",\n  \"415\": \"Unsupported Media Type\",\n  \"416\": \"Range Not Satisfiable\",\n  \"417\": \"Expectation Failed\",\n  \"418\": \"I'm a teapot\",\n  \"421\": \"Misdirected Request\",\n  \"422\": \"Unprocessable Entity\",\n  \"423\": \"Locked\",\n  \"424\": \"Failed Dependency\",\n  \"425\": \"Unordered Collection\",\n  \"426\": \"Upgrade Required\",\n  \"428\": \"Precondition Required\",\n  \"429\": \"Too Many Requests\",\n  \"431\": \"Request Header Fields Too Large\",\n  \"451\": \"Unavailable For Legal Reasons\",\n  \"500\": \"Internal Server Error\",\n  \"501\": \"Not Implemented\",\n  \"502\": \"Bad Gateway\",\n  \"503\": \"Service Unavailable\",\n  \"504\": \"Gateway Timeout\",\n  \"505\": \"HTTP Version Not Supported\",\n  \"506\": \"Variant Also Negotiates\",\n  \"507\": \"Insufficient Storage\",\n  \"508\": \"Loop Detected\",\n  \"509\": \"Bandwidth Limit Exceeded\",\n  \"510\": \"Not Extended\",\n  \"511\": \"Network Authentication Required\"\n}\n","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n","var Buffer = require('buffer').Buffer\n\nmodule.exports = function (buf) {\n\t// If the buffer is backed by a Uint8Array, a faster version will work\n\tif (buf instanceof Uint8Array) {\n\t\t// If the buffer isn't a subarray, return the underlying ArrayBuffer\n\t\tif (buf.byteOffset === 0 && buf.byteLength === buf.buffer.byteLength) {\n\t\t\treturn buf.buffer\n\t\t} else if (typeof buf.buffer.slice === 'function') {\n\t\t\t// Otherwise we need to get a proper copy\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength)\n\t\t}\n\t}\n\n\tif (Buffer.isBuffer(buf)) {\n\t\t// This is the slow version that will work with any Buffer\n\t\t// implementation (even in old browsers)\n\t\tvar arrayCopy = new Uint8Array(buf.length)\n\t\tvar len = buf.length\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tarrayCopy[i] = buf[i]\n\t\t}\n\t\treturn arrayCopy.buffer\n\t} else {\n\t\tthrow new Error('Argument must be a Buffer')\n\t}\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};","\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Buffer = require('safe-buffer').Buffer;\nvar util = require('util');\n\nfunction copyBuffer(src, target, offset) {\n  src.copy(target, offset);\n}\n\nmodule.exports = function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  BufferList.prototype.push = function push(v) {\n    var entry = { data: v, next: null };\n    if (this.length > 0) this.tail.next = entry;else this.head = entry;\n    this.tail = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.unshift = function unshift(v) {\n    var entry = { data: v, next: this.head };\n    if (this.length === 0) this.tail = entry;\n    this.head = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.shift = function shift() {\n    if (this.length === 0) return;\n    var ret = this.head.data;\n    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n    --this.length;\n    return ret;\n  };\n\n  BufferList.prototype.clear = function clear() {\n    this.head = this.tail = null;\n    this.length = 0;\n  };\n\n  BufferList.prototype.join = function join(s) {\n    if (this.length === 0) return '';\n    var p = this.head;\n    var ret = '' + p.data;\n    while (p = p.next) {\n      ret += s + p.data;\n    }return ret;\n  };\n\n  BufferList.prototype.concat = function concat(n) {\n    if (this.length === 0) return Buffer.alloc(0);\n    if (this.length === 1) return this.head.data;\n    var ret = Buffer.allocUnsafe(n >>> 0);\n    var p = this.head;\n    var i = 0;\n    while (p) {\n      copyBuffer(p.data, ret, i);\n      i += p.data.length;\n      p = p.next;\n    }\n    return ret;\n  };\n\n  return BufferList;\n}();\n\nif (util && util.inspect && util.inspect.custom) {\n  module.exports.prototype[util.inspect.custom] = function () {\n    var obj = util.inspect({ length: this.length });\n    return this.constructor.name + ' ' + obj;\n  };\n}","var capability = require('./capability')\nvar inherits = require('inherits')\nvar response = require('./response')\nvar stream = require('readable-stream')\nvar toArrayBuffer = require('to-arraybuffer')\n\nvar IncomingMessage = response.IncomingMessage\nvar rStates = response.readyStates\n\nfunction decideMode (preferBinary, useFetch) {\n\tif (capability.fetch && useFetch) {\n\t\treturn 'fetch'\n\t} else if (capability.mozchunkedarraybuffer) {\n\t\treturn 'moz-chunked-arraybuffer'\n\t} else if (capability.msstream) {\n\t\treturn 'ms-stream'\n\t} else if (capability.arraybuffer && preferBinary) {\n\t\treturn 'arraybuffer'\n\t} else if (capability.vbArray && preferBinary) {\n\t\treturn 'text:vbarray'\n\t} else {\n\t\treturn 'text'\n\t}\n}\n\nvar ClientRequest = module.exports = function (opts) {\n\tvar self = this\n\tstream.Writable.call(self)\n\n\tself._opts = opts\n\tself._body = []\n\tself._headers = {}\n\tif (opts.auth)\n\t\tself.setHeader('Authorization', 'Basic ' + new Buffer(opts.auth).toString('base64'))\n\tObject.keys(opts.headers).forEach(function (name) {\n\t\tself.setHeader(name, opts.headers[name])\n\t})\n\n\tvar preferBinary\n\tvar useFetch = true\n\tif (opts.mode === 'disable-fetch' || ('requestTimeout' in opts && !capability.abortController)) {\n\t\t// If the use of XHR should be preferred. Not typically needed.\n\t\tuseFetch = false\n\t\tpreferBinary = true\n\t} else if (opts.mode === 'prefer-streaming') {\n\t\t// If streaming is a high priority but binary compatibility and\n\t\t// the accuracy of the 'content-type' header aren't\n\t\tpreferBinary = false\n\t} else if (opts.mode === 'allow-wrong-content-type') {\n\t\t// If streaming is more important than preserving the 'content-type' header\n\t\tpreferBinary = !capability.overrideMimeType\n\t} else if (!opts.mode || opts.mode === 'default' || opts.mode === 'prefer-fast') {\n\t\t// Use binary if text streaming may corrupt data or the content-type header, or for speed\n\t\tpreferBinary = true\n\t} else {\n\t\tthrow new Error('Invalid value for opts.mode')\n\t}\n\tself._mode = decideMode(preferBinary, useFetch)\n\tself._fetchTimer = null\n\n\tself.on('finish', function () {\n\t\tself._onFinish()\n\t})\n}\n\ninherits(ClientRequest, stream.Writable)\n\nClientRequest.prototype.setHeader = function (name, value) {\n\tvar self = this\n\tvar lowerName = name.toLowerCase()\n\t// This check is not necessary, but it prevents warnings from browsers about setting unsafe\n\t// headers. To be honest I'm not entirely sure hiding these warnings is a good thing, but\n\t// http-browserify did it, so I will too.\n\tif (unsafeHeaders.indexOf(lowerName) !== -1)\n\t\treturn\n\n\tself._headers[lowerName] = {\n\t\tname: name,\n\t\tvalue: value\n\t}\n}\n\nClientRequest.prototype.getHeader = function (name) {\n\tvar header = this._headers[name.toLowerCase()]\n\tif (header)\n\t\treturn header.value\n\treturn null\n}\n\nClientRequest.prototype.removeHeader = function (name) {\n\tvar self = this\n\tdelete self._headers[name.toLowerCase()]\n}\n\nClientRequest.prototype._onFinish = function () {\n\tvar self = this\n\n\tif (self._destroyed)\n\t\treturn\n\tvar opts = self._opts\n\n\tvar headersObj = self._headers\n\tvar body = null\n\tif (opts.method !== 'GET' && opts.method !== 'HEAD') {\n\t\tif (capability.arraybuffer) {\n\t\t\tbody = toArrayBuffer(Buffer.concat(self._body))\n\t\t} else if (capability.blobConstructor) {\n\t\t\tbody = new global.Blob(self._body.map(function (buffer) {\n\t\t\t\treturn toArrayBuffer(buffer)\n\t\t\t}), {\n\t\t\t\ttype: (headersObj['content-type'] || {}).value || ''\n\t\t\t})\n\t\t} else {\n\t\t\t// get utf8 string\n\t\t\tbody = Buffer.concat(self._body).toString()\n\t\t}\n\t}\n\n\t// create flattened list of headers\n\tvar headersList = []\n\tObject.keys(headersObj).forEach(function (keyName) {\n\t\tvar name = headersObj[keyName].name\n\t\tvar value = headersObj[keyName].value\n\t\tif (Array.isArray(value)) {\n\t\t\tvalue.forEach(function (v) {\n\t\t\t\theadersList.push([name, v])\n\t\t\t})\n\t\t} else {\n\t\t\theadersList.push([name, value])\n\t\t}\n\t})\n\n\tif (self._mode === 'fetch') {\n\t\tvar signal = null\n\t\tvar fetchTimer = null\n\t\tif (capability.abortController) {\n\t\t\tvar controller = new AbortController()\n\t\t\tsignal = controller.signal\n\t\t\tself._fetchAbortController = controller\n\n\t\t\tif ('requestTimeout' in opts && opts.requestTimeout !== 0) {\n\t\t\t\tself._fetchTimer = global.setTimeout(function () {\n\t\t\t\t\tself.emit('requestTimeout')\n\t\t\t\t\tif (self._fetchAbortController)\n\t\t\t\t\t\tself._fetchAbortController.abort()\n\t\t\t\t}, opts.requestTimeout)\n\t\t\t}\n\t\t}\n\n\t\tglobal.fetch(self._opts.url, {\n\t\t\tmethod: self._opts.method,\n\t\t\theaders: headersList,\n\t\t\tbody: body || undefined,\n\t\t\tmode: 'cors',\n\t\t\tcredentials: opts.withCredentials ? 'include' : 'same-origin',\n\t\t\tsignal: signal\n\t\t}).then(function (response) {\n\t\t\tself._fetchResponse = response\n\t\t\tself._connect()\n\t\t}, function (reason) {\n\t\t\tglobal.clearTimeout(self._fetchTimer)\n\t\t\tif (!self._destroyed)\n\t\t\t\tself.emit('error', reason)\n\t\t})\n\t} else {\n\t\tvar xhr = self._xhr = new global.XMLHttpRequest()\n\t\ttry {\n\t\t\txhr.open(self._opts.method, self._opts.url, true)\n\t\t} catch (err) {\n\t\t\tprocess.nextTick(function () {\n\t\t\t\tself.emit('error', err)\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\t// Can't set responseType on really old browsers\n\t\tif ('responseType' in xhr)\n\t\t\txhr.responseType = self._mode.split(':')[0]\n\n\t\tif ('withCredentials' in xhr)\n\t\t\txhr.withCredentials = !!opts.withCredentials\n\n\t\tif (self._mode === 'text' && 'overrideMimeType' in xhr)\n\t\t\txhr.overrideMimeType('text/plain; charset=x-user-defined')\n\n\t\tif ('requestTimeout' in opts) {\n\t\t\txhr.timeout = opts.requestTimeout\n\t\t\txhr.ontimeout = function () {\n\t\t\t\tself.emit('requestTimeout')\n\t\t\t}\n\t\t}\n\n\t\theadersList.forEach(function (header) {\n\t\t\txhr.setRequestHeader(header[0], header[1])\n\t\t})\n\n\t\tself._response = null\n\t\txhr.onreadystatechange = function () {\n\t\t\tswitch (xhr.readyState) {\n\t\t\t\tcase rStates.LOADING:\n\t\t\t\tcase rStates.DONE:\n\t\t\t\t\tself._onXHRProgress()\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\t// Necessary for streaming in Firefox, since xhr.response is ONLY defined\n\t\t// in onprogress, not in onreadystatechange with xhr.readyState = 3\n\t\tif (self._mode === 'moz-chunked-arraybuffer') {\n\t\t\txhr.onprogress = function () {\n\t\t\t\tself._onXHRProgress()\n\t\t\t}\n\t\t}\n\n\t\txhr.onerror = function () {\n\t\t\tif (self._destroyed)\n\t\t\t\treturn\n\t\t\tself.emit('error', new Error('XHR error'))\n\t\t}\n\n\t\ttry {\n\t\t\txhr.send(body)\n\t\t} catch (err) {\n\t\t\tprocess.nextTick(function () {\n\t\t\t\tself.emit('error', err)\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t}\n}\n\n/**\n * Checks if xhr.status is readable and non-zero, indicating no error.\n * Even though the spec says it should be available in readyState 3,\n * accessing it throws an exception in IE8\n */\nfunction statusValid (xhr) {\n\ttry {\n\t\tvar status = xhr.status\n\t\treturn (status !== null && status !== 0)\n\t} catch (e) {\n\t\treturn false\n\t}\n}\n\nClientRequest.prototype._onXHRProgress = function () {\n\tvar self = this\n\n\tif (!statusValid(self._xhr) || self._destroyed)\n\t\treturn\n\n\tif (!self._response)\n\t\tself._connect()\n\n\tself._response._onXHRProgress()\n}\n\nClientRequest.prototype._connect = function () {\n\tvar self = this\n\n\tif (self._destroyed)\n\t\treturn\n\n\tself._response = new IncomingMessage(self._xhr, self._fetchResponse, self._mode, self._fetchTimer)\n\tself._response.on('error', function(err) {\n\t\tself.emit('error', err)\n\t})\n\n\tself.emit('response', self._response)\n}\n\nClientRequest.prototype._write = function (chunk, encoding, cb) {\n\tvar self = this\n\n\tself._body.push(chunk)\n\tcb()\n}\n\nClientRequest.prototype.abort = ClientRequest.prototype.destroy = function () {\n\tvar self = this\n\tself._destroyed = true\n\tglobal.clearTimeout(self._fetchTimer)\n\tif (self._response)\n\t\tself._response._destroyed = true\n\tif (self._xhr)\n\t\tself._xhr.abort()\n\telse if (self._fetchAbortController)\n\t\tself._fetchAbortController.abort()\n}\n\nClientRequest.prototype.end = function (data, encoding, cb) {\n\tvar self = this\n\tif (typeof data === 'function') {\n\t\tcb = data\n\t\tdata = undefined\n\t}\n\n\tstream.Writable.prototype.end.call(self, data, encoding, cb)\n}\n\nClientRequest.prototype.flushHeaders = function () {}\nClientRequest.prototype.setTimeout = function () {}\nClientRequest.prototype.setNoDelay = function () {}\nClientRequest.prototype.setSocketKeepAlive = function () {}\n\n// Taken from http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader%28%29-method\nvar unsafeHeaders = [\n\t'accept-charset',\n\t'accept-encoding',\n\t'access-control-request-headers',\n\t'access-control-request-method',\n\t'connection',\n\t'content-length',\n\t'cookie',\n\t'cookie2',\n\t'date',\n\t'dnt',\n\t'expect',\n\t'host',\n\t'keep-alive',\n\t'origin',\n\t'referer',\n\t'te',\n\t'trailer',\n\t'transfer-encoding',\n\t'upgrade',\n\t'via'\n]\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  for (var i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n"],"sourceRoot":""}